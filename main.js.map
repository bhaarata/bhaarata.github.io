{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/modules/editor/components/canvas/CanvasLayoutMixin.ts","webpack:///./src/app/modules/editor/components/canvas/CanvasUtil.ts","webpack:///./src/app/modules/editor/components/canvas/PairSubPathHelper.ts","webpack:///./src/app/modules/editor/components/canvas/SegmentSplitter.ts","webpack:///./src/app/modules/editor/components/canvas/SelectionHelper.ts","webpack:///./src/app/modules/editor/components/canvas/ShapeSplitter.ts","webpack:///./src/app/modules/editor/components/canvas/canvas.component.html","webpack:///./src/app/modules/editor/components/canvas/canvas.component.scss","webpack:///./src/app/modules/editor/components/canvas/canvas.component.ts","webpack:///./src/app/modules/editor/components/canvas/canvascontainer.directive.ts","webpack:///./src/app/modules/editor/components/canvas/canvaslayers.directive.ts","webpack:///./src/app/modules/editor/components/canvas/canvasoverlay.directive.ts","webpack:///./src/app/modules/editor/components/canvas/canvaspaper.directive.ts","webpack:///./src/app/modules/editor/components/canvas/canvasruler.directive.ts","webpack:///./src/app/modules/editor/components/canvas/index.ts","webpack:///./src/app/modules/editor/components/dialogs/confirmdialog.component.scss","webpack:///./src/app/modules/editor/components/dialogs/confirmdialog.component.ts","webpack:///./src/app/modules/editor/components/dialogs/demodialog.component.scss","webpack:///./src/app/modules/editor/components/dialogs/demodialog.component.ts","webpack:///./src/app/modules/editor/components/dialogs/dialog.service.ts","webpack:///./src/app/modules/editor/components/dialogs/dropfilesdialog.component.scss","webpack:///./src/app/modules/editor/components/dialogs/dropfilesdialog.component.ts","webpack:///./src/app/modules/editor/components/dialogs/index.ts","webpack:///./src/app/modules/editor/components/layertimeline/constants.ts","webpack:///./src/app/modules/editor/components/layertimeline/index.ts","webpack:///./src/app/modules/editor/components/layertimeline/layerlisttree.component.html","webpack:///./src/app/modules/editor/components/layertimeline/layerlisttree.component.scss","webpack:///./src/app/modules/editor/components/layertimeline/layerlisttree.component.ts","webpack:///./src/app/modules/editor/components/layertimeline/layertimeline.component.html","webpack:///./src/app/modules/editor/components/layertimeline/layertimeline.component.scss","webpack:///./src/app/modules/editor/components/layertimeline/layertimeline.component.ts","webpack:///./src/app/modules/editor/components/layertimeline/layertimelinegrid.directive.ts","webpack:///./src/app/modules/editor/components/layertimeline/timelineanimationrow.component.html","webpack:///./src/app/modules/editor/components/layertimeline/timelineanimationrow.component.scss","webpack:///./src/app/modules/editor/components/layertimeline/timelineanimationrow.component.ts","webpack:///./src/app/modules/editor/components/playback/index.ts","webpack:///./src/app/modules/editor/components/playback/playback.component.html","webpack:///./src/app/modules/editor/components/playback/playback.component.scss","webpack:///./src/app/modules/editor/components/playback/playback.component.ts","webpack:///./src/app/modules/editor/components/project/index.ts","webpack:///./src/app/modules/editor/components/project/project.service.ts","webpack:///./src/app/modules/editor/components/propertyinput/InspectedProperty.ts","webpack:///./src/app/modules/editor/components/propertyinput/index.ts","webpack:///./src/app/modules/editor/components/propertyinput/propertyinput.component.html","webpack:///./src/app/modules/editor/components/propertyinput/propertyinput.component.scss","webpack:///./src/app/modules/editor/components/propertyinput/propertyinput.component.ts","webpack:///./src/app/modules/editor/components/root/droptarget.directive.ts","webpack:///./src/app/modules/editor/components/root/root.component.html","webpack:///./src/app/modules/editor/components/root/root.component.scss","webpack:///./src/app/modules/editor/components/root/root.component.ts","webpack:///./src/app/modules/editor/components/scrollgroup/scrollgroup.directive.ts","webpack:///./src/app/modules/editor/components/splashscreen/splashscreen.component.html","webpack:///./src/app/modules/editor/components/splashscreen/splashscreen.component.scss","webpack:///./src/app/modules/editor/components/splashscreen/splashscreen.component.ts","webpack:///./src/app/modules/editor/components/splitter/splitter.component.html","webpack:///./src/app/modules/editor/components/splitter/splitter.component.scss","webpack:///./src/app/modules/editor/components/splitter/splitter.component.ts","webpack:///./src/app/modules/editor/components/toolbar/toolbar.component.html","webpack:///./src/app/modules/editor/components/toolbar/toolbar.component.scss","webpack:///./src/app/modules/editor/components/toolbar/toolbar.component.ts","webpack:///./src/app/modules/editor/components/toolpanel/toolpanel.component.html","webpack:///./src/app/modules/editor/components/toolpanel/toolpanel.component.scss","webpack:///./src/app/modules/editor/components/toolpanel/toolpanel.component.ts","webpack:///./src/app/modules/editor/editor.module.ts","webpack:///./src/app/modules/editor/model/actionmode/index.ts","webpack:///./src/app/modules/editor/model/actionmode/types.ts","webpack:///./src/app/modules/editor/model/interpolators/BezierEasing.ts","webpack:///./src/app/modules/editor/model/interpolators/Interpolator.ts","webpack:///./src/app/modules/editor/model/interpolators/index.ts","webpack:///./src/app/modules/editor/model/layers/Layer.ts","webpack:///./src/app/modules/editor/model/layers/LayerUtil.ts","webpack:///./src/app/modules/editor/model/layers/index.ts","webpack:///./src/app/modules/editor/model/paper/CursorType.ts","webpack:///./src/app/modules/editor/model/paper/ToolMode.ts","webpack:///./src/app/modules/editor/model/paper/index.ts","webpack:///./src/app/modules/editor/model/paths/Command.ts","webpack:///./src/app/modules/editor/model/paths/CommandState.ts","webpack:///./src/app/modules/editor/model/paths/Path.ts","webpack:///./src/app/modules/editor/model/paths/PathParser.ts","webpack:///./src/app/modules/editor/model/paths/PathState.ts","webpack:///./src/app/modules/editor/model/paths/PathUtil.ts","webpack:///./src/app/modules/editor/model/paths/SubPath.ts","webpack:///./src/app/modules/editor/model/paths/SubPathState.ts","webpack:///./src/app/modules/editor/model/paths/calculators/BezierCalculator.ts","webpack:///./src/app/modules/editor/model/paths/calculators/Calculator.ts","webpack:///./src/app/modules/editor/model/paths/calculators/LineCalculator.ts","webpack:///./src/app/modules/editor/model/paths/calculators/MoveCalculator.ts","webpack:///./src/app/modules/editor/model/paths/calculators/PointCalculator.ts","webpack:///./src/app/modules/editor/model/paths/calculators/index.ts","webpack:///./src/app/modules/editor/model/paths/index.ts","webpack:///./src/app/modules/editor/model/properties/ColorProperty.ts","webpack:///./src/app/modules/editor/model/properties/EnumProperty.ts","webpack:///./src/app/modules/editor/model/properties/FractionProperty.ts","webpack:///./src/app/modules/editor/model/properties/NameProperty.ts","webpack:///./src/app/modules/editor/model/properties/NumberProperty.ts","webpack:///./src/app/modules/editor/model/properties/PathProperty.ts","webpack:///./src/app/modules/editor/model/properties/Property.ts","webpack:///./src/app/modules/editor/model/properties/index.ts","webpack:///./src/app/modules/editor/model/timeline/Animation.ts","webpack:///./src/app/modules/editor/model/timeline/AnimationBlock.ts","webpack:///./src/app/modules/editor/model/timeline/index.ts","webpack:///./src/app/modules/editor/scripts/actionmode/ActionModeUtil.ts","webpack:///./src/app/modules/editor/scripts/actionmode/index.ts","webpack:///./src/app/modules/editor/scripts/algorithms/AutoAwesome.ts","webpack:///./src/app/modules/editor/scripts/algorithms/NeedlemanWunsch.ts","webpack:///./src/app/modules/editor/scripts/algorithms/index.ts","webpack:///./src/app/modules/editor/scripts/animator/AnimationRenderer.ts","webpack:///./src/app/modules/editor/scripts/animator/index.ts","webpack:///./src/app/modules/editor/scripts/bugsnag/index.ts","webpack:///./src/app/modules/editor/scripts/common/ColorUtil.ts","webpack:///./src/app/modules/editor/scripts/common/MathUtil.ts","webpack:///./src/app/modules/editor/scripts/common/Matrix.ts","webpack:///./src/app/modules/editor/scripts/common/ModelUtil.ts","webpack:///./src/app/modules/editor/scripts/common/TransformUtil.ts","webpack:///./src/app/modules/editor/scripts/common/index.ts","webpack:///./src/app/modules/editor/scripts/demos/index.ts","webpack:///./src/app/modules/editor/scripts/dragger/Dragger.ts","webpack:///./src/app/modules/editor/scripts/dragger/index.ts","webpack:///./src/app/modules/editor/scripts/export/AvdSerializer.ts","webpack:///./src/app/modules/editor/scripts/export/SpriteSerializer.ts","webpack:///./src/app/modules/editor/scripts/export/SvgSerializer.ts","webpack:///./src/app/modules/editor/scripts/export/XmlSerializer.ts","webpack:///./src/app/modules/editor/scripts/export/index.ts","webpack:///./src/app/modules/editor/scripts/import/SvgLoader.ts","webpack:///./src/app/modules/editor/scripts/import/VectorDrawableLoader.ts","webpack:///./src/app/modules/editor/scripts/import/index.ts","webpack:///./src/app/modules/editor/scripts/intervals/IntervalTree.ts","webpack:///./src/app/modules/editor/scripts/intervals/index.ts","webpack:///./src/app/modules/editor/scripts/mixins/DestroyableMixin.ts","webpack:///./src/app/modules/editor/scripts/mixins/index.ts","webpack:///./src/app/modules/editor/scripts/paper/PaperProject.ts","webpack:///./src/app/modules/editor/scripts/paper/detector/ClickDetector.ts","webpack:///./src/app/modules/editor/scripts/paper/detector/Handler.ts","webpack:///./src/app/modules/editor/scripts/paper/detector/index.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/Gesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/create/EllipseGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/create/PencilGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/create/RectangleGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/create/ShapeGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/create/index.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/edit/BatchSelectSegmentsGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/edit/MouldCurveGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/edit/SelectDragDrawSegmentsGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/edit/SelectDragHandleGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/edit/ToggleSegmentHandlesGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/edit/index.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/hover/HoverGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/hover/HoverItemsGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/hover/HoverSegmentsCurvesGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/hover/index.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/index.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/rotate/RotateItemsDragPivotGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/rotate/RotateItemsGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/rotate/index.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/scale/ScaleItemsGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/scale/index.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/select/BatchSelectItemsGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/select/DeselectItemGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/select/EditPathGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/select/SelectDragCloneItemsGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/select/index.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/transform/TransformPathsGesture.ts","webpack:///./src/app/modules/editor/scripts/paper/gesture/transform/index.ts","webpack:///./src/app/modules/editor/scripts/paper/index.ts","webpack:///./src/app/modules/editor/scripts/paper/item/EditPathRaster.ts","webpack:///./src/app/modules/editor/scripts/paper/item/HitTests.ts","webpack:///./src/app/modules/editor/scripts/paper/item/PaperLayer.ts","webpack:///./src/app/modules/editor/scripts/paper/item/RotateItemsPivotRaster.ts","webpack:///./src/app/modules/editor/scripts/paper/item/SelectionBoundsRaster.ts","webpack:///./src/app/modules/editor/scripts/paper/item/index.ts","webpack:///./src/app/modules/editor/scripts/paper/tool/GestureTool.ts","webpack:///./src/app/modules/editor/scripts/paper/tool/MasterToolPicker.ts","webpack:///./src/app/modules/editor/scripts/paper/tool/Tool.ts","webpack:///./src/app/modules/editor/scripts/paper/tool/ZoomPanTool.ts","webpack:///./src/app/modules/editor/scripts/paper/tool/index.ts","webpack:///./src/app/modules/editor/scripts/paper/util/PaperUtil.ts","webpack:///./src/app/modules/editor/scripts/paper/util/index.ts","webpack:///./src/app/modules/editor/scripts/paper/util/snap/Constants.ts","webpack:///./src/app/modules/editor/scripts/paper/util/snap/SnapBounds.ts","webpack:///./src/app/modules/editor/scripts/paper/util/snap/SnapUtil.ts","webpack:///./src/app/modules/editor/scripts/paper/util/snap/index.ts","webpack:///./src/app/modules/editor/scripts/svgo/index.ts","webpack:///./src/app/modules/editor/scripts/svgo/plugins/convertRoundedRectToPath.ts","webpack:///./src/app/modules/editor/scripts/svgo/plugins/replaceUseElems.ts","webpack:///./src/app/modules/editor/services/StoreUtil.ts","webpack:///./src/app/modules/editor/services/actionmode.service.ts","webpack:///./src/app/modules/editor/services/clipboard.service.ts","webpack:///./src/app/modules/editor/services/fileexport.service.ts","webpack:///./src/app/modules/editor/services/fileimport.service.ts","webpack:///./src/app/modules/editor/services/index.ts","webpack:///./src/app/modules/editor/services/layertimeline.service.ts","webpack:///./src/app/modules/editor/services/paper.service.ts","webpack:///./src/app/modules/editor/services/playback.service.ts","webpack:///./src/app/modules/editor/services/shortcut.service.ts","webpack:///./src/app/modules/editor/services/snackbar.service.ts","webpack:///./src/app/modules/editor/services/theme.service.ts","webpack:///./src/app/modules/editor/store/actionmode/actions.ts","webpack:///./src/app/modules/editor/store/actionmode/reducer.ts","webpack:///./src/app/modules/editor/store/actionmode/selectors.ts","webpack:///./src/app/modules/editor/store/batch/actions.ts","webpack:///./src/app/modules/editor/store/batch/metareducer.ts","webpack:///./src/app/modules/editor/store/common/selectors.ts","webpack:///./src/app/modules/editor/store/index.ts","webpack:///./src/app/modules/editor/store/layers/actions.ts","webpack:///./src/app/modules/editor/store/layers/reducer.ts","webpack:///./src/app/modules/editor/store/layers/selectors.ts","webpack:///./src/app/modules/editor/store/paper/actions.ts","webpack:///./src/app/modules/editor/store/paper/reducer.ts","webpack:///./src/app/modules/editor/store/paper/selectors.ts","webpack:///./src/app/modules/editor/store/playback/actions.ts","webpack:///./src/app/modules/editor/store/playback/reducer.ts","webpack:///./src/app/modules/editor/store/playback/selectors.ts","webpack:///./src/app/modules/editor/store/reducer.ts","webpack:///./src/app/modules/editor/store/reset/actions.ts","webpack:///./src/app/modules/editor/store/reset/metareducer.ts","webpack:///./src/app/modules/editor/store/reset/reducer.ts","webpack:///./src/app/modules/editor/store/reset/selectors.ts","webpack:///./src/app/modules/editor/store/selectors.ts","webpack:///./src/app/modules/editor/store/storefreeze/metareducer.ts","webpack:///./src/app/modules/editor/store/theme/actions.ts","webpack:///./src/app/modules/editor/store/theme/reducer.ts","webpack:///./src/app/modules/editor/store/theme/selectors.ts","webpack:///./src/app/modules/editor/store/timeline/actions.ts","webpack:///./src/app/modules/editor/store/timeline/reducer.ts","webpack:///./src/app/modules/editor/store/timeline/selectors.ts","webpack:///./src/app/modules/editor/store/undoredo/metareducer.ts","webpack:///./src/environments/environment.ts","webpack:///./src/environments/version.ts","webpack:///./src/main.ts","webpack:///util (ignored)","webpack:///util (ignored)?220a","webpack:///./node/self.js (ignored)","webpack:///./node/extend.js (ignored)"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import * as _ from 'lodash';\n\nexport function CanvasLayoutMixin<T extends Constructor>(Base = class {} as T) {\n  return class extends Base {\n    private bounds = { w: 24, h: 24 };\n    private viewport = { w: 24, h: 24 };\n    private zoom = 1;\n    private translation = { tx: 0, ty: 0 };\n\n    /**\n     * The 'cssScale' represents the number of CSS pixels per SVG viewport pixel.\n     */\n    get cssScale() {\n      const { w: vWidth, h: vHeight } = this.getViewport();\n      const { w: bWidth, h: bHeight } = this.getBounds();\n      const vectorAspectRatio = vWidth / vHeight;\n      const containerAspectRatio = bWidth / bHeight;\n      if (vectorAspectRatio > containerAspectRatio) {\n        return bWidth / vWidth;\n      } else {\n        return bHeight / vHeight;\n      }\n    }\n\n    /**\n     * The 'attrScale' represents the number of physical pixels per SVG viewport pixel.\n     */\n    get attrScale() {\n      return this.cssScale * devicePixelRatio;\n    }\n\n    getBounds() {\n      return this.bounds;\n    }\n\n    getViewport() {\n      return this.viewport;\n    }\n\n    getZoom() {\n      return this.zoom;\n    }\n\n    getTranslation() {\n      return this.translation;\n    }\n\n    setDimensions(bounds: Size, viewport: Size) {\n      if (!_.isEqual(this.bounds, bounds) || !_.isEqual(this.viewport, viewport)) {\n        this.bounds = bounds;\n        this.viewport = viewport;\n        this.onDimensionsChanged(this.bounds, this.viewport);\n      }\n    }\n\n    protected onDimensionsChanged(bounds: Size, viewport: Size) {}\n\n    setZoomPan(zoom: number, translation: Readonly<{ tx: number; ty: number }>) {\n      if (this.zoom !== zoom || !_.isEqual(this.translation, translation)) {\n        this.zoom = zoom;\n        this.translation = translation;\n        this.onZoomPanChanged(zoom, translation);\n      }\n    }\n\n    protected onZoomPanChanged(zoom: number, translation: Readonly<{ tx: number; ty: number }>) {}\n  };\n}\n\nexport interface Size {\n  readonly w: number;\n  readonly h: number;\n}\n\nexport interface CanvasLayoutMixin {\n  readonly cssScale: number;\n  readonly attrScale: number;\n  getViewport(): Size;\n  getBounds(): Size;\n  setDimensions(bounds: Size, viewport: Size): void;\n  onDimensionsChanged(bounds: Size, viewport: Size): void;\n}\n","import { Command } from 'app/modules/editor/model/paths';\nimport { MathUtil, Matrix, Point } from 'app/modules/editor/scripts/common';\n\ntype Context = CanvasRenderingContext2D;\n\n/**\n * Executes a series of canvas commands for a given path.\n */\nexport function executeCommands(ctx: Context, commands: ReadonlyArray<Command>, transform: Matrix) {\n  ctx.save();\n  const { a, b, c, d, e, f } = transform;\n  ctx.transform(a, b, c, d, e, f);\n  ctx.beginPath();\n\n  if (commands.length === 1 && commands[0].type !== 'M') {\n    ctx.moveTo(commands[0].start.x, commands[0].start.y);\n  }\n\n  let previousEndPoint: Point;\n  commands.forEach(cmd => {\n    const start = cmd.start;\n    const end = cmd.end;\n\n    if (start && !MathUtil.arePointsEqual(start, previousEndPoint)) {\n      // This is to support the case where the list of commands\n      // is size fragmented.\n      ctx.moveTo(start.x, start.y);\n    }\n\n    if (cmd.type === 'M') {\n      ctx.moveTo(end.x, end.y);\n    } else if (cmd.type === 'L') {\n      ctx.lineTo(end.x, end.y);\n    } else if (cmd.type === 'Q') {\n      ctx.quadraticCurveTo(cmd.points[1].x, cmd.points[1].y, cmd.points[2].x, cmd.points[2].y);\n    } else if (cmd.type === 'C') {\n      ctx.bezierCurveTo(\n        cmd.points[1].x,\n        cmd.points[1].y,\n        cmd.points[2].x,\n        cmd.points[2].y,\n        cmd.points[3].x,\n        cmd.points[3].y,\n      );\n    } else if (cmd.type === 'Z') {\n      if (MathUtil.arePointsEqual(start, previousEndPoint)) {\n        ctx.closePath();\n      } else {\n        // This is to support the case where the list of commands\n        // is size fragmented.\n        ctx.lineTo(end.x, end.y);\n      }\n    }\n    previousEndPoint = end;\n  });\n  ctx.restore();\n}\n","import { ActionMode, ActionSource, HoverType } from 'app/modules/editor/model/actionmode';\nimport { Point } from 'app/modules/editor/scripts/common';\nimport { ActionModeService } from 'app/modules/editor/services';\nimport * as _ from 'lodash';\n\nimport { CanvasOverlayDirective } from './canvasoverlay.directive';\n\n// TODO: clean up this class' messy communication w/ the overlay directive\n\n/**\n * Helper class that tracks information during morph subpath mode.\n */\nexport class PairSubPathHelper {\n  private readonly actionSource: ActionSource;\n  private readonly actionModeService: ActionModeService;\n\n  constructor(private readonly component: CanvasOverlayDirective) {\n    this.actionSource = component.actionSource;\n    this.actionModeService = component.actionModeService;\n  }\n\n  onMouseDown(mouseDown: Point, isShiftOrMetaPressed: boolean) {\n    const hitResult = this.performHitTest(mouseDown);\n\n    if (hitResult.isSegmentHit || hitResult.isShapeHit) {\n      const hits = hitResult.isShapeHit ? hitResult.shapeHits : hitResult.segmentHits;\n      const { subIdx } = this.findHitSubPath(hits);\n      this.actionModeService.pairSubPath(subIdx, this.actionSource);\n    } else if (!isShiftOrMetaPressed) {\n      this.actionModeService.setActionMode(ActionMode.Selection);\n    }\n  }\n\n  onMouseMove(mouseMove: Point) {\n    this.checkForHovers(mouseMove);\n    this.component.draw();\n  }\n\n  onMouseUp(mouseUp: Point) {\n    this.component.draw();\n  }\n\n  onMouseLeave(mouseLeave: Point) {\n    this.component.actionModeService.clearHover();\n    this.component.draw();\n  }\n\n  private performHitTest(mousePoint: Point) {\n    return this.component.performHitTest(mousePoint);\n  }\n\n  private checkForHovers(mousePoint: Point) {\n    const hitResult = this.performHitTest(mousePoint);\n    if (!hitResult.isHit) {\n      this.component.actionModeService.clearHover();\n    } else if (hitResult.isSegmentHit || hitResult.isShapeHit) {\n      const hits = hitResult.isShapeHit ? hitResult.shapeHits : hitResult.segmentHits;\n      const { subIdx } = this.findHitSubPath(hits);\n      this.component.actionModeService.setHover({\n        type: HoverType.SubPath,\n        source: this.actionSource,\n        subIdx,\n      });\n    }\n  }\n\n  private findHitSubPath(hits: ReadonlyArray<{ subIdx: number }>) {\n    const infos = hits.map(index => {\n      const { subIdx } = index;\n      return { subIdx, subPath: this.component.activePath.getSubPath(subIdx) };\n    });\n    const lastSplitIndex = _.findLastIndex(infos, info => info.subPath.isSplit());\n    return infos[lastSplitIndex < 0 ? infos.length - 1 : lastSplitIndex];\n  }\n}\n","import { ActionMode, ActionSource } from 'app/modules/editor/model/actionmode';\nimport { ProjectionOntoPath } from 'app/modules/editor/model/paths';\nimport { Point } from 'app/modules/editor/scripts/common';\nimport { ActionModeService } from 'app/modules/editor/services';\n\nimport { CanvasOverlayDirective } from './canvasoverlay.directive';\n\ninterface ProjInfo {\n  readonly proj: ProjectionOntoPath;\n  readonly isEndPt: boolean;\n}\n\n// TODO: prefer previous selections over others when performing splits?\n// TODO: clean up this class' messy communication w/ the overlay directive\n\n/**\n * Helper class that can be used to split a segment.\n */\nexport class SegmentSplitter {\n  private readonly actionSource: ActionSource;\n  private readonly actionModeService: ActionModeService;\n  private currProjInfo: ProjInfo;\n  private lastKnownMouseLocation: Point;\n\n  constructor(private readonly component: CanvasOverlayDirective) {\n    this.actionSource = component.actionSource;\n    this.actionModeService = component.actionModeService;\n  }\n\n  onMouseDown(mouseDown: Point) {\n    this.lastKnownMouseLocation = mouseDown;\n    this.currProjInfo = this.findProjInfo(mouseDown);\n    const activePathLayer = this.component.activePathLayer;\n    if (this.currProjInfo) {\n      const {\n        proj: { subIdx, cmdIdx, projection },\n        isEndPt,\n      } = this.currProjInfo;\n      const mode = this.component.actionMode;\n      const pathMutator = activePathLayer.pathData.mutate();\n      if (mode === ActionMode.SplitCommands) {\n        pathMutator.splitCommand(subIdx, cmdIdx, projection.t);\n      } else if (mode === ActionMode.SplitSubPaths) {\n        if (!isEndPt) {\n          pathMutator.splitCommand(subIdx, cmdIdx, projection.t);\n        }\n        pathMutator.splitStrokedSubPath(subIdx, cmdIdx);\n      }\n\n      this.component.actionModeService.clearHover();\n      this.actionModeService.setSelections([]);\n      this.currProjInfo = undefined;\n      this.actionModeService.updateActivePathBlock(this.actionSource, pathMutator.build());\n      this.component.draw();\n      return;\n    }\n\n    this.actionModeService.setActionMode(ActionMode.Selection);\n  }\n\n  onMouseMove(mouseMove: Point) {\n    this.lastKnownMouseLocation = mouseMove;\n    this.currProjInfo = this.findProjInfo(mouseMove);\n    this.component.draw();\n  }\n\n  onMouseUp(mouseUp: Point) {\n    this.lastKnownMouseLocation = mouseUp;\n    this.component.draw();\n  }\n\n  onMouseLeave(mouseLeave: Point) {\n    this.lastKnownMouseLocation = mouseLeave;\n    this.currProjInfo = undefined;\n    this.component.draw();\n  }\n\n  getProjectionOntoPath() {\n    if (!this.currProjInfo) {\n      return undefined;\n    }\n    return this.currProjInfo.proj;\n  }\n\n  getLastKnownMouseLocation() {\n    return this.lastKnownMouseLocation;\n  }\n\n  private findProjInfo(mousePoint: Point) {\n    const projInfos: ProjInfo[] = [];\n    const hitResult = this.component.performHitTest(mousePoint, { withExtraSegmentPadding: true });\n    const { isEndPointHit, isSegmentHit, endPointHits, segmentHits } = hitResult;\n    if (isEndPointHit) {\n      for (const proj of endPointHits) {\n        projInfos.push({ proj, isEndPt: true });\n      }\n    }\n    if (isSegmentHit) {\n      for (const proj of segmentHits) {\n        projInfos.push({ proj, isEndPt: false });\n      }\n    }\n    if (!projInfos.length) {\n      return undefined;\n    }\n    projInfos.sort((p1, p2) => {\n      const { proj: proj1, isEndPt: isEndPt1 } = p1;\n      const { proj: proj2, isEndPt: isEndPt2 } = p2;\n      if (isEndPt1 !== isEndPt2) {\n        return isEndPt1 ? -1 : 1;\n      }\n      if (proj1.projection.d !== proj2.projection.d) {\n        return proj1.projection.d - proj2.projection.d;\n      }\n      if (proj1.subIdx !== proj2.subIdx) {\n        return proj1.subIdx - proj2.subIdx;\n      }\n      if (proj1.cmdIdx !== proj2.cmdIdx) {\n        return proj1.cmdIdx - proj2.cmdIdx;\n      }\n      return 0;\n    });\n    return projInfos[0];\n  }\n}\n","import { ActionSource, HoverType } from 'app/modules/editor/model/actionmode';\nimport { LayerUtil } from 'app/modules/editor/model/layers';\nimport { ProjectionOntoPath } from 'app/modules/editor/model/paths';\nimport { MathUtil, Point } from 'app/modules/editor/scripts/common';\nimport { ActionModeService } from 'app/modules/editor/services';\nimport * as _ from 'lodash';\n\nimport { CanvasOverlayDirective } from './canvasoverlay.directive';\n\n// TODO: use the 'Dragger' to drag points to different locations\n// TODO: clean up this class' messy communication w/ the overlay directive\n\n/**\n * Helper class that tracks information about a user's mouse gesture, allowing\n * for the selection of path points, segments, and shapes.\n */\nexport class SelectionHelper {\n  private readonly actionSource: ActionSource;\n  private readonly actionModeService: ActionModeService;\n\n  // Holds a reference to the currently selected split point, which\n  // may or may not begin to drag.\n  private currentDraggableSplitIndex: { subIdx: number; cmdIdx: number } | undefined;\n  private projectionOntoPath: ProjectionOntoPath;\n  private isDragTriggered_ = false;\n  private lastKnownMouseLocation: Point;\n  private initialMouseDown: Point;\n\n  constructor(private readonly component: CanvasOverlayDirective) {\n    this.actionSource = component.actionSource;\n    this.actionModeService = component.actionModeService;\n  }\n\n  onMouseDown(mouseDown: Point, isShiftOrMetaPressed: boolean) {\n    this.initialMouseDown = mouseDown;\n    this.lastKnownMouseLocation = mouseDown;\n\n    const hitResult = this.performHitTest(mouseDown);\n    if (hitResult.isEndPointHit) {\n      const { subIdx, cmdIdx, cmd } = this.findHitPoint(hitResult.endPointHits);\n      if (cmd.isSplitPoint()) {\n        // Then a click has occurred on top of a split point.\n        // Don't select the point yet because the user might want\n        // to drag it to a different location.\n        this.currentDraggableSplitIndex = { subIdx, cmdIdx };\n      } else {\n        // Then a click has occurred on top of a non-split point.\n      }\n      return;\n    }\n\n    if (this.component.activePathLayer.isFilled() && hitResult.isSegmentHit) {\n      const { subIdx, cmdIdx, cmd } = this.findHitSegment(hitResult.segmentHits);\n      if (cmd.isSplitSegment()) {\n        this.actionModeService.toggleSegmentSelections(this.actionSource, [{ subIdx, cmdIdx }]);\n        return;\n      }\n    }\n\n    if (hitResult.isSegmentHit || hitResult.isShapeHit) {\n      const hits = hitResult.isShapeHit ? hitResult.shapeHits : hitResult.segmentHits;\n      const { subIdx } = this.findHitSubPath(hits);\n      this.actionModeService.toggleSubPathSelection(this.actionSource, subIdx);\n    } else if (!isShiftOrMetaPressed) {\n      // If the mouse down event didn't result in a hit, then\n      // clear any existing selections, but only if the user isn't in\n      // the middle of selecting multiple points at once.\n      this.actionModeService.setSelections([]);\n    }\n  }\n\n  onMouseMove(mouseMove: Point) {\n    this.lastKnownMouseLocation = mouseMove;\n    if (this.currentDraggableSplitIndex) {\n      const distance = MathUtil.distance(this.initialMouseDown, mouseMove);\n      if (this.component.dragTriggerTouchSlop < distance) {\n        this.isDragTriggered_ = true;\n      }\n    }\n    if (this.isDragTriggered_) {\n      this.projectionOntoPath = this.calculateProjectionOntoPath(\n        mouseMove,\n        this.currentDraggableSplitIndex.subIdx,\n      );\n    } else {\n      this.checkForHovers(mouseMove);\n    }\n    this.component.draw();\n  }\n\n  onMouseUp(mouseUp: Point, isShiftOrMetaPressed: boolean) {\n    this.lastKnownMouseLocation = mouseUp;\n    if (this.isDragTriggered_) {\n      const projOntoPath = this.projectionOntoPath;\n\n      // TODO: Make this user experience better. There could be other subIdxs that we could use.\n      const { subIdx: newSubIdx, cmdIdx: newCmdIdx } = projOntoPath;\n      const { subIdx: oldSubIdx, cmdIdx: oldCmdIdx } = this.currentDraggableSplitIndex;\n      if (newSubIdx === oldSubIdx) {\n        const activeLayer = this.component.activePathLayer;\n        const startingPath = activeLayer.pathData;\n        let pathMutator = startingPath.mutate();\n\n        // Note that the order is important here, as it preserves the command indices.\n        if (newCmdIdx > oldCmdIdx) {\n          pathMutator.splitCommand(newSubIdx, newCmdIdx, projOntoPath.projection.t);\n          pathMutator.unsplitCommand(oldSubIdx, oldCmdIdx);\n        } else if (newCmdIdx < oldCmdIdx) {\n          pathMutator.unsplitCommand(oldSubIdx, oldCmdIdx);\n          pathMutator.splitCommand(newSubIdx, newCmdIdx, projOntoPath.projection.t);\n        } else {\n          // Unsplitting will cause the projection t value to change, so recalculate the\n          // projection before the split.\n          // TODO: improve this API somehow... having to set the active layer here is kind of hacky\n          activeLayer.pathData = pathMutator.unsplitCommand(oldSubIdx, oldCmdIdx).build();\n          const tempProjOntoPath = this.calculateProjectionOntoPath(mouseUp);\n          if (oldSubIdx === tempProjOntoPath.subIdx) {\n            pathMutator.splitCommand(\n              tempProjOntoPath.subIdx,\n              tempProjOntoPath.cmdIdx,\n              tempProjOntoPath.projection.t,\n            );\n          } else {\n            // If for some reason the projection subIdx changes after the unsplit, we have no\n            // choice but to give up.\n            // TODO: Make this user experience better. There could be other subIdxs that we could use.\n            pathMutator = startingPath.mutate();\n          }\n        }\n\n        // Notify the global layer state service about the change and draw.\n        // Clear any existing selections and/or hovers as well.\n        this.actionModeService.clearHover();\n        this.actionModeService.setSelections([]);\n        this.reset();\n\n        this.actionModeService.updateActivePathBlock(this.actionSource, pathMutator.build());\n      }\n    } else if (this.currentDraggableSplitIndex) {\n      const hitResult = this.performHitTest(mouseUp);\n      if (!hitResult.isHit) {\n        this.actionModeService.setSelections([]);\n      } else if (hitResult.isEndPointHit) {\n        const { subIdx, cmdIdx } = this.findHitPoint(hitResult.endPointHits);\n        this.actionModeService.togglePointSelection(\n          this.actionSource,\n          subIdx,\n          cmdIdx,\n          isShiftOrMetaPressed,\n        );\n      } else if (hitResult.isSegmentHit || hitResult.isShapeHit) {\n        const hits = hitResult.isShapeHit ? hitResult.shapeHits : hitResult.segmentHits;\n        const { subIdx } = this.findHitSubPath(hits);\n        this.actionModeService.toggleSubPathSelection(this.actionSource, subIdx);\n      }\n    }\n\n    this.reset();\n    this.checkForHovers(mouseUp);\n    this.component.draw();\n  }\n\n  onMouseLeave(mouseLeave: Point) {\n    this.lastKnownMouseLocation = mouseLeave;\n    this.reset();\n    this.component.actionModeService.clearHover();\n    this.component.draw();\n  }\n\n  private performHitTest(mousePoint: Point) {\n    return this.component.performHitTest(mousePoint);\n  }\n\n  private reset() {\n    this.initialMouseDown = undefined;\n    this.projectionOntoPath = undefined;\n    this.currentDraggableSplitIndex = undefined;\n    this.isDragTriggered_ = false;\n    this.lastKnownMouseLocation = undefined;\n  }\n\n  isDragTriggered() {\n    return this.isDragTriggered_;\n  }\n\n  getDraggableSplitIndex() {\n    return this.currentDraggableSplitIndex;\n  }\n\n  getProjectionOntoPath() {\n    return this.projectionOntoPath;\n  }\n\n  getLastKnownMouseLocation() {\n    return this.lastKnownMouseLocation;\n  }\n\n  private checkForHovers(mousePoint: Point) {\n    if (this.currentDraggableSplitIndex) {\n      // Don't broadcast new hover events if a point has been selected.\n      return;\n    }\n    const hitResult = this.performHitTest(mousePoint);\n    if (!hitResult.isHit) {\n      this.component.actionModeService.clearHover();\n      return;\n    }\n    if (hitResult.isEndPointHit) {\n      const { subIdx, cmdIdx } = this.findHitPoint(hitResult.endPointHits);\n      this.component.actionModeService.setHover({\n        type: HoverType.Point,\n        source: this.actionSource,\n        subIdx,\n        cmdIdx,\n      });\n      return;\n    }\n    if (hitResult.isSegmentHit) {\n      if (this.component.activePathLayer.isFilled()) {\n        const { subIdx, cmdIdx } = this.findHitSegment(hitResult.segmentHits);\n        if (this.component.activePath.getCommand(subIdx, cmdIdx).isSplitSegment()) {\n          this.component.actionModeService.setHover({\n            type: HoverType.Segment,\n            source: this.actionSource,\n            subIdx,\n            cmdIdx,\n          });\n          return;\n        }\n      } else if (this.component.activePathLayer.isStroked()) {\n        const { subIdx } = this.findHitSegment(hitResult.segmentHits);\n        this.component.actionModeService.setHover({\n          type: HoverType.SubPath,\n          source: this.actionSource,\n          subIdx,\n        });\n        return;\n      }\n    }\n    if (hitResult.isShapeHit && this.component.activePathLayer.isFilled()) {\n      const { subIdx } = this.findHitSubPath(hitResult.shapeHits);\n      this.component.actionModeService.setHover({\n        type: HoverType.SubPath,\n        source: this.actionSource,\n        subIdx,\n      });\n      return;\n    }\n  }\n\n  private findHitSubPath(hits: ReadonlyArray<{ subIdx: number }>) {\n    const infos = hits.map(index => {\n      const { subIdx } = index;\n      return { subIdx, subPath: this.component.activePath.getSubPath(subIdx) };\n    });\n    const lastSplitIndex = _.findLastIndex(infos, info => info.subPath.isSplit());\n    return infos[lastSplitIndex < 0 ? infos.length - 1 : lastSplitIndex];\n  }\n\n  private findHitSegment(hits: ReadonlyArray<{ subIdx: number; cmdIdx: number }>) {\n    const infos = hits.map(index => {\n      const { subIdx, cmdIdx } = index;\n      return { subIdx, cmdIdx, cmd: this.component.activePath.getCommand(subIdx, cmdIdx) };\n    });\n    const lastSplitIndex = _.findLastIndex(infos, info => info.cmd.isSplitSegment());\n    return infos[lastSplitIndex < 0 ? infos.length - 1 : lastSplitIndex];\n  }\n\n  private findHitPoint(hits: ReadonlyArray<{ subIdx: number; cmdIdx: number }>) {\n    const infos = hits.map(index => {\n      const { subIdx, cmdIdx } = index;\n      return { subIdx, cmdIdx, cmd: this.component.activePath.getCommand(subIdx, cmdIdx) };\n    });\n    const lastSplitIndex = _.findLastIndex(infos, info => info.cmd.isSplitPoint());\n    return infos[lastSplitIndex < 0 ? infos.length - 1 : lastSplitIndex];\n  }\n\n  /**\n   * Calculates the projection onto the path with the specified path ID.\n   * The resulting projection is our way of determining the on-curve point\n   * closest to the specified off-curve mouse point.\n   */\n  private calculateProjectionOntoPath(mousePoint: Point, restrictToSubIdx?: number) {\n    const canvasToLayerMatrix = LayerUtil.getCanvasTransformForLayer(\n      this.component.vectorLayer,\n      this.component.activePathLayer.id,\n    ).invert();\n    if (!canvasToLayerMatrix) {\n      // Do nothing if matrix is non-invertible.\n      return undefined;\n    }\n    const transformedMousePoint = MathUtil.transformPoint(mousePoint, canvasToLayerMatrix);\n    const projInfo = this.component.activePath.project(transformedMousePoint, restrictToSubIdx);\n    if (!projInfo) {\n      return undefined;\n    }\n    return {\n      subIdx: projInfo.subIdx,\n      cmdIdx: projInfo.cmdIdx,\n      projection: projInfo.projection,\n    };\n  }\n}\n","import { ActionMode } from 'app/modules/editor/model/actionmode';\nimport { HitResult, ProjectionOntoPath } from 'app/modules/editor/model/paths';\nimport { Point } from 'app/modules/editor/scripts/common';\nimport { ActionModeService } from 'app/modules/editor/services';\nimport * as _ from 'lodash';\n\nimport { CanvasOverlayDirective } from './canvasoverlay.directive';\n\ninterface ProjInfo {\n  readonly proj: ProjectionOntoPath;\n  readonly isEndPt: boolean;\n}\n\n// TODO: prefer previous selections over others when performing splits?\n// TODO: clean up this class' messy communication w/ the overlay directive\n\n/**\n * Helper class that can be used to split a filled subpath.\n */\nexport class ShapeSplitter {\n  private readonly actionModeService: ActionModeService;\n  private initProjInfos: ProjInfo[] = [];\n  private finalProjInfos: ProjInfo[] = [];\n  private hitResult: HitResult;\n  private lastKnownMouseLocation: Point;\n\n  constructor(private readonly component: CanvasOverlayDirective) {\n    this.actionModeService = component.actionModeService;\n  }\n\n  onMouseDown(mouseDown: Point) {\n    this.initProjInfos = [];\n    this.finalProjInfos = [];\n    this.lastKnownMouseLocation = mouseDown;\n    this.hitResult = this.performHitTest(mouseDown);\n    const { isEndPointHit, isSegmentHit, endPointHits, segmentHits } = this.hitResult;\n    if (isEndPointHit || isSegmentHit) {\n      for (const proj of endPointHits) {\n        this.initProjInfos.push({ proj, isEndPt: true });\n      }\n      for (const proj of segmentHits) {\n        this.initProjInfos.push({ proj, isEndPt: false });\n      }\n      this.component.draw();\n      return;\n    }\n    this.actionModeService.setActionMode(ActionMode.Selection);\n  }\n\n  onMouseMove(mouseMove: Point) {\n    this.finalProjInfos = [];\n    this.lastKnownMouseLocation = mouseMove;\n    this.hitResult = this.performHitTest(mouseMove);\n    if (!this.initProjInfos.length) {\n      this.component.draw();\n      return;\n    }\n    this.populateFinalProjInfos(mouseMove);\n    this.component.draw();\n  }\n\n  onMouseUp(mouseUp: Point) {\n    this.finalProjInfos = [];\n    this.lastKnownMouseLocation = mouseUp;\n    if (!this.initProjInfos.length) {\n      this.reset();\n      this.component.draw();\n      return;\n    }\n    this.populateFinalProjInfos(mouseUp);\n\n    const sortProjInfosFn = (projInfos: ProjInfo[]) => {\n      projInfos.sort((p1, p2) => {\n        const { proj: proj1, isEndPt: isEndPt1 } = p1;\n        const { proj: proj2, isEndPt: isEndPt2 } = p2;\n        if (isEndPt1 !== isEndPt2) {\n          // Prefer snapping to existing end points first...\n          return isEndPt1 ? -1 : 1;\n        }\n        if (proj1.projection.d !== proj2.projection.d) {\n          // Then take into account the distance to the new point...\n          return proj1.projection.d - proj2.projection.d;\n        }\n        if (proj1.subIdx !== proj2.subIdx) {\n          // Then prefer sub paths with higher z-orders...\n          return proj1.subIdx - proj2.subIdx;\n        }\n        if (proj1.cmdIdx !== proj2.cmdIdx) {\n          // And then finally commands with higher z-orders.\n          return proj1.cmdIdx - proj2.cmdIdx;\n        }\n        return 0;\n      });\n    };\n\n    sortProjInfosFn(this.initProjInfos);\n    sortProjInfosFn(this.finalProjInfos);\n\n    let initProjInfo: ProjInfo;\n    let finalProjInfo: ProjInfo;\n    for (const p1 of this.initProjInfos) {\n      for (const p2 of this.finalProjInfos) {\n        const {\n          proj: { subIdx: subIdx1, cmdIdx: cmdIdx1 },\n        } = p1;\n        const {\n          proj: { subIdx: subIdx2, cmdIdx: cmdIdx2 },\n        } = p2;\n        if (subIdx1 === subIdx2) {\n          if (cmdIdx1 === cmdIdx2) {\n            continue;\n          }\n          initProjInfo = p1;\n          finalProjInfo = p2;\n          break;\n        }\n      }\n      if (initProjInfo && finalProjInfo) {\n        break;\n      }\n    }\n\n    if (initProjInfo && finalProjInfo) {\n      const activeLayer = this.component.activePathLayer;\n      const pathMutator = activeLayer.pathData.mutate();\n      const {\n        proj: { subIdx: initSubIdx, cmdIdx: initCmdIdx },\n        isEndPt: isInitEndPt,\n      } = initProjInfo;\n      const {\n        proj: { subIdx: finalSubIdx, cmdIdx: finalCmdIdx },\n        isEndPt: isFinalEndPt,\n      } = finalProjInfo;\n      let lastCmdOffset = 0;\n      if (!isInitEndPt || !isFinalEndPt) {\n        if (initCmdIdx > finalCmdIdx) {\n          if (!isInitEndPt) {\n            pathMutator.splitCommand(initSubIdx, initCmdIdx, initProjInfo.proj.projection.t);\n            if (!isFinalEndPt) {\n              lastCmdOffset++;\n            }\n          }\n          if (!isFinalEndPt) {\n            pathMutator.splitCommand(finalSubIdx, finalCmdIdx, finalProjInfo.proj.projection.t);\n            if (isInitEndPt) {\n              lastCmdOffset++;\n            }\n          }\n        } else {\n          if (!isFinalEndPt) {\n            pathMutator.splitCommand(finalSubIdx, finalCmdIdx, finalProjInfo.proj.projection.t);\n            if (!isInitEndPt) {\n              lastCmdOffset++;\n            }\n          }\n          if (!isInitEndPt) {\n            pathMutator.splitCommand(initSubIdx, initCmdIdx, initProjInfo.proj.projection.t);\n            if (isFinalEndPt) {\n              lastCmdOffset++;\n            }\n          }\n        }\n      }\n\n      this.component.actionModeService.clearHover();\n      this.actionModeService.setSelections([]);\n      this.reset();\n\n      // TODO: some bugs with this path: M 0 20 v -16 h 20 v 2 h -12 v 2 h 12 v 2 h -12 Z\n      // TODO: how should we deal with collinear intersections? (i.e. drawing a line across the same line)\n      const startingCmdIdx = initCmdIdx > finalCmdIdx ? finalCmdIdx : initCmdIdx;\n      const endingCmdIdx =\n        initCmdIdx > finalCmdIdx ? initCmdIdx + lastCmdOffset : finalCmdIdx + lastCmdOffset;\n      this.actionModeService.updateActivePathBlock(\n        this.component.actionSource,\n        pathMutator.splitFilledSubPath(initSubIdx, startingCmdIdx, endingCmdIdx).build(),\n      );\n    }\n    this.reset();\n    this.component.draw();\n  }\n\n  onMouseLeave(mouseLeave: Point) {\n    this.finalProjInfos = [];\n    this.lastKnownMouseLocation = mouseLeave;\n    this.hitResult = this.performHitTest(mouseLeave);\n    if (!this.initProjInfos.length) {\n      return;\n    }\n    this.reset();\n    this.component.draw();\n  }\n\n  private populateFinalProjInfos(mousePoint: Point) {\n    const { isEndPointHit, isSegmentHit, endPointHits, segmentHits } = this.hitResult;\n    if (isEndPointHit || isSegmentHit) {\n      for (const proj of endPointHits) {\n        this.finalProjInfos.push({ proj, isEndPt: true });\n      }\n      for (const proj of segmentHits) {\n        this.finalProjInfos.push({ proj, isEndPt: false });\n      }\n      const allowedSubIdxs = new Set<number>(\n        this.initProjInfos.map(projInfo => projInfo.proj.subIdx),\n      );\n      _.remove(this.finalProjInfos, projInfo => !allowedSubIdxs.has(projInfo.proj.subIdx));\n    }\n  }\n\n  private performHitTest(mousePoint: Point) {\n    return this.component.performHitTest(mousePoint, { withExtraSegmentPadding: true });\n  }\n\n  private reset() {\n    this.initProjInfos = [];\n    this.finalProjInfos = [];\n    this.hitResult = undefined;\n    this.lastKnownMouseLocation = undefined;\n  }\n\n  getCurrentProjectionOntoPath() {\n    if (!this.hitResult) {\n      return undefined;\n    }\n    const { isEndPointHit, isSegmentHit, endPointHits, segmentHits } = this.hitResult;\n    if (isEndPointHit) {\n      return _.last(endPointHits);\n    }\n    if (isSegmentHit) {\n      return _.last(segmentHits);\n    }\n    return undefined;\n  }\n\n  getInitialProjectionOntoPath() {\n    if (!this.initProjInfos.length) {\n      return undefined;\n    }\n    return this.initProjInfos[0].proj;\n  }\n\n  getFinalProjectionOntoPath() {\n    if (!this.finalProjInfos.length) {\n      return undefined;\n    }\n    return this.finalProjInfos[0].proj;\n  }\n\n  willFinalProjectionOntoPathCreateSplitPoint() {\n    if (!this.finalProjInfos.length) {\n      return true;\n    }\n    return !this.finalProjInfos[0].isEndPt;\n  }\n\n  getLastKnownMouseLocation() {\n    return this.lastKnownMouseLocation;\n  }\n}\n","module.exports = \"<div class=\\\"app-canvas-container\\\"\\n  (click)=\\\"$event.stopPropagation()\\\">\\n  <canvas appCanvasRuler\\n    class=\\\"canvas-ruler orientation-horizontal\\\"\\n    [orientation]=\\\"'horizontal'\\\">\\n  </canvas>\\n  <canvas appCanvasRuler\\n    class=\\\"canvas-ruler orientation-vertical\\\"\\n    [orientation]=\\\"'vertical'\\\">\\n  </canvas>\\n  <div appCanvasContainer\\n    class=\\\"canvas-container\\\">\\n    <canvas appCanvasLayers\\n      *ngIf=\\\"!this.IS_BETA || (this.isActionMode$ | async) === true\\\"\\n      class=\\\"rendering-canvas mat-elevation-z4\\\"\\n      [actionSource]=\\\"this.actionSource\\\">\\n    </canvas>\\n    <canvas appCanvasOverlay\\n      *ngIf=\\\"!this.IS_BETA || (this.isActionMode$ | async) === true\\\"\\n      class=\\\"overlay-canvas\\\"\\n      [actionSource]=\\\"this.actionSource\\\">\\n    </canvas>\\n    <canvas appCanvasPaper\\n      *ngIf=\\\"this.IS_BETA && (this.isActionMode$ | async) === false\\\"\\n      class=\\\"paper-canvas mat-elevation-z4\\\"\\n      [actionSource]=\\\"this.actionSource\\\">\\n    </canvas>\\n  </div>\\n</div>\"","module.exports = \".app-canvas-container {\\n  position: relative; }\\n  .app-canvas-container .canvas-ruler {\\n    position: absolute;\\n    transition: opacity 0.15s ease, visibility 0s linear 0.15s;\\n    opacity: 0;\\n    visibility: hidden; }\\n  .app-canvas-container:hover .canvas-ruler {\\n    transition: opacity 0.15s ease;\\n    opacity: 1;\\n    visibility: visible; }\\n  .app-canvas-container .canvas-container {\\n    position: relative; }\\n  .app-canvas-container .canvas-container canvas.rendering-canvas {\\n      position: absolute;\\n      z-index: 1; }\\n  .app-canvas-container .canvas-container canvas.overlay-canvas {\\n      position: absolute;\\n      background-color: transparent;\\n      z-index: 2; }\\n  .app-canvas-container .canvas-container canvas.paper-canvas {\\n      position: absolute;\\n      background-color: transparent;\\n      z-index: 3; }\\n  .app-canvas-container .orientation-horizontal {\\n    left: -12px;\\n    top: -32px;\\n    height: 32px; }\\n  .app-canvas-container .orientation-vertical {\\n    top: -12px;\\n    left: -32px;\\n    width: 32px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL2NhbnZhcy9jYW52YXMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxtQkFBa0IsRUF3Q25CO0VBekNEO0lBR0ksbUJBQWtCO0lBQ2xCLDJEQUEwRDtJQUMxRCxXQUFVO0lBQ1YsbUJBQWtCLEVBQ25CO0VBUEg7SUFTSSwrQkFBOEI7SUFDOUIsV0FBVTtJQUNWLG9CQUFtQixFQUNwQjtFQVpIO0lBY0ksbUJBQWtCLEVBZW5CO0VBN0JIO01BZ0JNLG1CQUFrQjtNQUNsQixXQUFVLEVBQ1g7RUFsQkw7TUFvQk0sbUJBQWtCO01BQ2xCLDhCQUE2QjtNQUM3QixXQUFVLEVBQ1g7RUF2Qkw7TUF5Qk0sbUJBQWtCO01BQ2xCLDhCQUE2QjtNQUM3QixXQUFVLEVBQ1g7RUE1Qkw7SUFnQ0ksWUFBVztJQUNYLFdBSGU7SUFJZixhQUplLEVBS2hCO0VBbkNIO0lBcUNJLFdBQVU7SUFDVixZQVJlO0lBU2YsWUFUZSxFQVVoQiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvZWRpdG9yL2NvbXBvbmVudHMvY2FudmFzL2NhbnZhcy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5hcHAtY2FudmFzLWNvbnRhaW5lciB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgLmNhbnZhcy1ydWxlciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4xNXMgZWFzZSwgdmlzaWJpbGl0eSAwcyBsaW5lYXIgMC4xNXM7XG4gICAgb3BhY2l0eTogMDtcbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gIH1cbiAgJjpob3ZlciAuY2FudmFzLXJ1bGVyIHtcbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMTVzIGVhc2U7XG4gICAgb3BhY2l0eTogMTtcbiAgICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xuICB9XG4gIC5jYW52YXMtY29udGFpbmVyIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgY2FudmFzLnJlbmRlcmluZy1jYW52YXMge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgei1pbmRleDogMTtcbiAgICB9XG4gICAgY2FudmFzLm92ZXJsYXktY2FudmFzIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgei1pbmRleDogMjtcbiAgICB9XG4gICAgY2FudmFzLnBhcGVyLWNhbnZhcyB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIHotaW5kZXg6IDM7XG4gICAgfVxuICB9XG4gICRydWxlcldpZHRoOiAzMnB4O1xuICAub3JpZW50YXRpb24taG9yaXpvbnRhbCB7XG4gICAgbGVmdDogLTEycHg7XG4gICAgdG9wOiAtJHJ1bGVyV2lkdGg7XG4gICAgaGVpZ2h0OiAkcnVsZXJXaWR0aDtcbiAgfVxuICAub3JpZW50YXRpb24tdmVydGljYWwge1xuICAgIHRvcDogLTEycHg7XG4gICAgbGVmdDogLSRydWxlcldpZHRoO1xuICAgIHdpZHRoOiAkcnVsZXJXaWR0aDtcbiAgfVxufVxuIl19 */\"","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  HostListener,\n  Input,\n  OnInit,\n  QueryList,\n  ViewChildren,\n} from '@angular/core';\nimport { ActionSource } from 'app/modules/editor/model/actionmode';\nimport { MathUtil, Matrix } from 'app/modules/editor/scripts/common';\nimport { DestroyableMixin } from 'app/modules/editor/scripts/mixins';\nimport { ThemeService } from 'app/modules/editor/services';\nimport { State, Store } from 'app/modules/editor/store';\nimport { isActionMode } from 'app/modules/editor/store/actionmode/selectors';\nimport { getVectorLayer } from 'app/modules/editor/store/layers/selectors';\nimport { getZoomPanInfo } from 'app/modules/editor/store/paper/selectors';\nimport { environment } from 'environments/environment';\nimport * as $ from 'jquery';\nimport * as _ from 'lodash';\nimport { Observable, combineLatest } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\n\nimport { CanvasContainerDirective } from './canvascontainer.directive';\nimport { CanvasLayersDirective } from './canvaslayers.directive';\nimport { CanvasLayoutMixin, Size } from './CanvasLayoutMixin';\nimport { CanvasOverlayDirective } from './canvasoverlay.directive';\nimport { CanvasPaperDirective } from './canvaspaper.directive';\nimport { CanvasRulerDirective } from './canvasruler.directive';\n\n// Canvas margin in css pixels.\nconst CANVAS_MARGIN = 36;\n\n@Component({\n  selector: 'app-canvas',\n  templateUrl: './canvas.component.html',\n  styleUrls: ['./canvas.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CanvasComponent extends CanvasLayoutMixin(DestroyableMixin())\n  implements OnInit, AfterViewInit {\n  readonly IS_BETA = environment.beta;\n\n  @ViewChildren(CanvasContainerDirective)\n  canvasContainer: QueryList<CanvasContainerDirective>;\n  @ViewChildren(CanvasLayersDirective)\n  canvasLayers: QueryList<CanvasLayersDirective>;\n  @ViewChildren(CanvasOverlayDirective)\n  canvasOverlay: QueryList<CanvasOverlayDirective>;\n  @ViewChildren(CanvasPaperDirective)\n  canvasPaper: QueryList<CanvasPaperDirective>;\n  @ViewChildren(CanvasRulerDirective)\n  canvasRulers: QueryList<CanvasRulerDirective>;\n\n  @Input()\n  actionSource: ActionSource;\n  @Input()\n  canvasBounds$: Observable<Size>;\n\n  private readonly $element: JQuery;\n  isActionMode$: Observable<boolean>;\n\n  constructor(\n    elementRef: ElementRef,\n    private readonly store: Store<State>,\n    readonly themeService: ThemeService,\n  ) {\n    super();\n    this.$element = $(elementRef.nativeElement);\n  }\n\n  ngOnInit() {\n    this.isActionMode$ = this.store.select(isActionMode);\n  }\n\n  ngAfterViewInit() {\n    const activeViewport$ = this.store.select(getVectorLayer).pipe(\n      map(vl => ({ w: vl.width, h: vl.height })),\n      distinctUntilChanged(_.isEqual),\n    );\n    this.registerSubscription(\n      combineLatest(this.canvasBounds$, activeViewport$).subscribe(([bounds, viewport]) => {\n        const w = Math.max(1, bounds.w - CANVAS_MARGIN * 2);\n        const h = Math.max(1, bounds.h - CANVAS_MARGIN * 2);\n        this.setDimensions({ w, h }, viewport);\n      }),\n    );\n    this.registerSubscription(\n      this.store.select(getZoomPanInfo).subscribe(info => {\n        this.setZoomPan(info.zoom, info.translation);\n      }),\n    );\n  }\n\n  // @Override\n  protected onDimensionsChanged(bounds: Size, viewport: Size) {\n    const directives = [\n      ...this.canvasContainer.toArray(),\n      ...this.canvasLayers.toArray(),\n      ...this.canvasOverlay.toArray(),\n      ...this.canvasPaper.toArray(),\n      ...this.canvasRulers.toArray(),\n    ];\n    directives.forEach(d => d.setDimensions(bounds, viewport));\n  }\n\n  // @Override\n  protected onZoomPanChanged(zoom: number, translation: Readonly<{ tx: number; ty: number }>) {\n    const directives = [\n      ...this.canvasContainer.toArray(),\n      ...this.canvasLayers.toArray(),\n      ...this.canvasOverlay.toArray(),\n      ...this.canvasPaper.toArray(),\n      ...this.canvasRulers.toArray(),\n    ];\n    directives.forEach(d => d.setZoomPan(zoom, translation));\n  }\n\n  @HostListener('mousedown', ['$event'])\n  onMouseDown(event: MouseEvent) {\n    this.canvasOverlay.forEach(c => c.onMouseDown(event));\n    this.showRuler(event);\n  }\n\n  @HostListener('mousemove', ['$event'])\n  onMouseMove(event: MouseEvent) {\n    this.canvasOverlay.forEach(c => c.onMouseMove(event));\n    this.showRuler(event);\n  }\n\n  @HostListener('mouseup', ['$event'])\n  onMouseUp(event: MouseEvent) {\n    this.canvasOverlay.forEach(c => c.onMouseUp(event));\n    this.showRuler(event);\n  }\n\n  @HostListener('mouseleave', ['$event'])\n  onMouseLeave(event: MouseEvent) {\n    this.canvasOverlay.forEach(c => c.onMouseLeave(event));\n    this.hideRuler();\n  }\n\n  private showRuler(event: MouseEvent) {\n    const canvasOffset = this.$element.offset();\n    const zoom = this.getZoom();\n    const { tx, ty } = this.getTranslation();\n    const point = MathUtil.transformPoint(\n      { x: event.pageX - canvasOffset.left, y: event.pageY - canvasOffset.top },\n      new Matrix(zoom, 0, 0, zoom, tx, ty).invert(),\n    );\n    const x = point.x / Math.max(1, this.cssScale);\n    const y = point.y / Math.max(1, this.cssScale);\n    this.canvasRulers.forEach(r => r.showMouse({ x: _.round(x), y: _.round(y) }));\n  }\n\n  private hideRuler() {\n    this.canvasRulers.forEach(r => r.hideMouse());\n  }\n}\n","import { Directive, ElementRef } from '@angular/core';\nimport * as $ from 'jquery';\n\nimport { CanvasLayoutMixin, Size } from './CanvasLayoutMixin';\n\n/**\n * Directive that resizes the canvas container when necessary.\n */\n@Directive({ selector: '[appCanvasContainer]' })\nexport class CanvasContainerDirective extends CanvasLayoutMixin() {\n  private readonly element: JQuery;\n\n  constructor(elementRef: ElementRef) {\n    super();\n    this.element = $(elementRef.nativeElement);\n  }\n\n  // @Override\n  protected onDimensionsChanged(bounds: Size, viewport: Size) {\n    const { w, h } = viewport;\n    this.element.attr({ width: w * this.attrScale, height: h * this.attrScale });\n    this.element.css({ width: w * this.cssScale, height: h * this.cssScale });\n  }\n}\n","import { AfterViewInit, Directive, ElementRef, Input } from '@angular/core';\nimport { ActionSource } from 'app/modules/editor/model/actionmode';\nimport {\n  ClipPathLayer,\n  Layer,\n  LayerUtil,\n  PathLayer,\n  VectorLayer,\n} from 'app/modules/editor/model/layers';\nimport { ColorUtil } from 'app/modules/editor/scripts/common';\nimport { DestroyableMixin } from 'app/modules/editor/scripts/mixins';\nimport { PlaybackService } from 'app/modules/editor/services';\nimport { State, Store } from 'app/modules/editor/store';\nimport {\n  getActionModeEndState,\n  getActionModeStartState,\n} from 'app/modules/editor/store/actionmode/selectors';\nimport { getHiddenLayerIds, getVectorLayer } from 'app/modules/editor/store/layers/selectors';\nimport * as $ from 'jquery';\nimport { combineLatest, merge } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { CanvasLayoutMixin, Size } from './CanvasLayoutMixin';\nimport * as CanvasUtil from './CanvasUtil';\n\ntype Context = CanvasRenderingContext2D;\n\n/**\n * Directive that draws the current vector layer to the canvas.\n */\n@Directive({ selector: '[appCanvasLayers]' })\nexport class CanvasLayersDirective extends CanvasLayoutMixin(DestroyableMixin())\n  implements AfterViewInit {\n  @Input()\n  actionSource: ActionSource;\n\n  private readonly $renderingCanvas: JQuery<HTMLCanvasElement>;\n  private readonly $offscreenCanvas: JQuery<HTMLCanvasElement>;\n  private vectorLayer: VectorLayer;\n  private hiddenLayerIds: ReadonlySet<string> = new Set<string>();\n\n  constructor(\n    elementRef: ElementRef,\n    private readonly playbackService: PlaybackService,\n    private readonly store: Store<State>,\n  ) {\n    super();\n    this.$renderingCanvas = $(elementRef.nativeElement) as JQuery<HTMLCanvasElement>;\n    this.$offscreenCanvas = $(document.createElement('canvas')) as JQuery<HTMLCanvasElement>;\n  }\n\n  ngAfterViewInit() {\n    if (this.actionSource === ActionSource.Animated) {\n      // Preview canvas specific setup.\n      this.registerSubscription(\n        combineLatest(\n          // TODO: don't think this is necessary anymore? only need to query playback service now?\n          merge(\n            this.playbackService.asObservable().pipe(map(event => event.vl)),\n            this.store.select(getVectorLayer),\n          ),\n          this.store.select(getHiddenLayerIds),\n        ).subscribe(([vectorLayer, hiddenLayerIds]) => {\n          this.vectorLayer = vectorLayer;\n          this.hiddenLayerIds = hiddenLayerIds;\n          this.draw();\n        }),\n      );\n    } else {\n      // Start & end canvas specific setup.\n      const actionModeSelector =\n        this.actionSource === ActionSource.From ? getActionModeStartState : getActionModeEndState;\n      this.registerSubscription(\n        this.store.select(actionModeSelector).subscribe(({ vectorLayer, hiddenLayerIds }) => {\n          this.vectorLayer = vectorLayer;\n          this.hiddenLayerIds = hiddenLayerIds;\n          this.draw();\n        }),\n      );\n    }\n  }\n\n  private get renderingCtx() {\n    return this.$renderingCanvas.get(0).getContext('2d');\n  }\n\n  private get offscreenCtx() {\n    return this.$offscreenCanvas.get(0).getContext('2d');\n  }\n\n  // @Override\n  protected onDimensionsChanged(bounds: Size, viewport: Size) {\n    const { w, h } = this.getViewport();\n    [this.$renderingCanvas, this.$offscreenCanvas].forEach(canvas => {\n      canvas.attr({ width: w * this.attrScale, height: h * this.attrScale });\n      canvas.css({ width: w * this.cssScale, height: h * this.cssScale });\n    });\n    this.draw();\n  }\n\n  private draw() {\n    if (!this.vectorLayer) {\n      return;\n    }\n\n    // Scale the canvas so that everything from this point forward is drawn\n    // in terms of the SVG's viewport coordinates.\n    const setupCtxWithViewportCoordsFn = (ctx: Context) => {\n      ctx.scale(this.attrScale, this.attrScale);\n      const { w, h } = this.getViewport();\n      ctx.clearRect(0, 0, w, h);\n    };\n\n    this.renderingCtx.save();\n    setupCtxWithViewportCoordsFn(this.renderingCtx);\n    if (this.vectorLayer.canvasColor) {\n      this.renderingCtx.fillStyle = ColorUtil.androidToCssRgbaColor(this.vectorLayer.canvasColor);\n      this.renderingCtx.fillRect(0, 0, this.vectorLayer.width, this.vectorLayer.height);\n    }\n\n    const currentAlpha = this.vectorLayer ? this.vectorLayer.alpha : 1;\n    if (currentAlpha < 1) {\n      this.offscreenCtx.save();\n      setupCtxWithViewportCoordsFn(this.offscreenCtx);\n    }\n\n    // If the canvas is disabled, draw the layer to an offscreen canvas\n    // so that we can draw it translucently w/o affecting the rest of\n    // the layer's appearance.\n    const layerCtx = currentAlpha < 1 ? this.offscreenCtx : this.renderingCtx;\n    this.drawLayer(this.vectorLayer, this.vectorLayer, layerCtx);\n\n    if (currentAlpha < 1) {\n      this.renderingCtx.save();\n      this.renderingCtx.globalAlpha = currentAlpha;\n      // Bring the canvas back to its original coordinates before\n      // drawing the offscreen canvas contents.\n      this.renderingCtx.scale(1 / this.attrScale, 1 / this.attrScale);\n      this.renderingCtx.drawImage(this.offscreenCtx.canvas, 0, 0);\n      this.renderingCtx.restore();\n      this.offscreenCtx.restore();\n    }\n    this.renderingCtx.restore();\n  }\n\n  private drawLayer(vl: VectorLayer, layer: Layer, ctx: Context) {\n    if (this.hiddenLayerIds.has(layer.id)) {\n      return;\n    }\n    if (layer instanceof ClipPathLayer) {\n      this.drawClipPathLayer(vl, layer, ctx);\n    } else if (layer instanceof PathLayer) {\n      this.drawPathLayer(vl, layer, ctx);\n    } else {\n      ctx.save();\n      layer.children.forEach(child => this.drawLayer(vl, child, ctx));\n      ctx.restore();\n    }\n  }\n\n  private drawClipPathLayer(vl: VectorLayer, layer: ClipPathLayer, ctx: Context) {\n    if (!layer.pathData || !layer.pathData.getCommands().length) {\n      return;\n    }\n    const flattenedTransform = LayerUtil.getCanvasTransformForLayer(vl, layer.id);\n    CanvasUtil.executeCommands(ctx, layer.pathData.getCommands(), flattenedTransform);\n    ctx.clip();\n  }\n\n  private drawPathLayer(vl: VectorLayer, layer: PathLayer, ctx: Context) {\n    if (!layer.pathData || !layer.pathData.getCommands().length) {\n      return;\n    }\n    const layerToCanvasMatrix = LayerUtil.getCanvasTransformForLayer(vl, layer.id);\n    const canvasToLayerMatrix = layerToCanvasMatrix.invert();\n    if (!canvasToLayerMatrix) {\n      // Do nothing if matrix is non-invertible.\n      return;\n    }\n\n    ctx.save();\n    CanvasUtil.executeCommands(ctx, layer.pathData.getCommands(), layerToCanvasMatrix);\n\n    const strokeWidthMultiplier = canvasToLayerMatrix.getScaleFactor();\n    ctx.strokeStyle = ColorUtil.androidToCssRgbaColor(layer.strokeColor, layer.strokeAlpha);\n    ctx.lineWidth = layer.strokeWidth * strokeWidthMultiplier;\n    ctx.fillStyle = ColorUtil.androidToCssRgbaColor(layer.fillColor, layer.fillAlpha);\n    ctx.lineCap = layer.strokeLinecap;\n    ctx.lineJoin = layer.strokeLinejoin;\n    ctx.miterLimit = layer.strokeMiterLimit;\n\n    if (layer.trimPathStart !== 0 || layer.trimPathEnd !== 1 || layer.trimPathOffset !== 0) {\n      const { a, d } = canvasToLayerMatrix;\n      // Note that we only return the length of the first sub path due to\n      // https://code.google.com/p/android/issues/detail?id=172547\n      let pathLength: number;\n      if (Math.abs(a) !== 1 || Math.abs(d) !== 1) {\n        // Then recompute the scaled path length.\n        pathLength = layer.pathData\n          .mutate()\n          .transform(canvasToLayerMatrix)\n          .build()\n          .getSubPathLength(0);\n      } else {\n        pathLength = layer.pathData.getSubPathLength(0);\n      }\n\n      const strokeDashArray = LayerUtil.toStrokeDashArray(\n        layer.trimPathStart,\n        layer.trimPathEnd,\n        layer.trimPathOffset,\n        pathLength,\n        0.001,\n      );\n      const strokeDashOffset = LayerUtil.toStrokeDashOffset(\n        layer.trimPathStart,\n        layer.trimPathEnd,\n        layer.trimPathOffset,\n        pathLength,\n      );\n      ctx.setLineDash(strokeDashArray);\n      ctx.lineDashOffset = strokeDashOffset;\n    } else {\n      ctx.setLineDash([]);\n    }\n    if (layer.isStroked() && layer.strokeWidth && layer.trimPathStart !== layer.trimPathEnd) {\n      ctx.stroke();\n    }\n    if (layer.isFilled()) {\n      if (layer.fillType === 'evenOdd') {\n        // Unlike VectorDrawables, SVGs spell 'evenodd' with a lowercase 'o'.\n        ctx.fill('evenodd');\n      } else {\n        ctx.fill();\n      }\n    }\n    ctx.restore();\n  }\n}\n","import { AfterViewInit, Directive, ElementRef, Input } from '@angular/core';\nimport {\n  ActionMode,\n  ActionSource,\n  Hover,\n  HoverType,\n  Selection,\n  SelectionType,\n} from 'app/modules/editor/model/actionmode';\nimport {\n  ClipPathLayer,\n  GroupLayer,\n  Layer,\n  LayerUtil,\n  MorphableLayer,\n  PathLayer,\n  VectorLayer,\n} from 'app/modules/editor/model/layers';\nimport { Command, HitResult, Path, SubPath } from 'app/modules/editor/model/paths';\nimport { MathUtil, Matrix, Point } from 'app/modules/editor/scripts/common';\nimport { DestroyableMixin } from 'app/modules/editor/scripts/mixins';\nimport {\n  ActionModeService,\n  LayerTimelineService,\n  PlaybackService,\n  ShortcutService,\n} from 'app/modules/editor/services';\nimport { State, Store } from 'app/modules/editor/store';\nimport {\n  getActionMode,\n  getActionModeEndState,\n  getActionModeHover,\n  getActionModeStartState,\n} from 'app/modules/editor/store/actionmode/selectors';\nimport { getCanvasOverlayState } from 'app/modules/editor/store/common/selectors';\nimport { getVectorLayer } from 'app/modules/editor/store/layers/selectors';\nimport * as $ from 'jquery';\nimport * as _ from 'lodash';\nimport { combineLatest ,  merge } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { CanvasLayoutMixin } from './CanvasLayoutMixin';\nimport * as CanvasUtil from './CanvasUtil';\nimport { PairSubPathHelper } from './PairSubPathHelper';\nimport { SegmentSplitter } from './SegmentSplitter';\nimport { SelectionHelper } from './SelectionHelper';\nimport { ShapeSplitter } from './ShapeSplitter';\n\n// The line width of a highlight in css pixels.\nconst HIGHLIGHT_LINE_WIDTH = 6;\n// The line dash of a highlight in css pixels.\nconst HIGHLIGHT_LINE_DASH = 12;\n// The minimum distance between a point and a path that causes a snap.\nconst MIN_SNAP_THRESHOLD = 12;\n// The distance of a mouse gesture that triggers a drag, in css pixels.\nconst DRAG_TRIGGER_TOUCH_SLOP = 6;\n// The radius of a medium point in css pixels.\nconst MEDIUM_POINT_RADIUS = 8;\n// The radius of a small point in css pixels.\nconst SMALL_POINT_RADIUS = MEDIUM_POINT_RADIUS / 1.7;\n\nconst SPLIT_POINT_RADIUS_FACTOR = 0.8;\nconst SELECTED_POINT_RADIUS_FACTOR = 1.25;\nconst POINT_BORDER_FACTOR = 1.075;\n\nconst NORMAL_POINT_COLOR = '#2962FF'; // Blue A400\nconst SPLIT_POINT_COLOR = '#E65100'; // Orange 900\nconst HIGHLIGHT_COLOR = '#448AFF';\nconst POINT_BORDER_COLOR = '#000';\nconst POINT_TEXT_COLOR = '#fff';\nconst ERROR_COLOR = '#F44336';\n\n// TODO: make shape shifter mode work with clip paths\n// TODO: make segment splitter work with trim paths\n// TODO: make trim paths work with shifts/reversals\n// TODO: make cursor 'drag' in selection mode when dragging points\n// TODO: need to avoid cases where the pathData could be undefined\n// (i.e. this could happen if the user enters action mode w/o setting a path string on the layer)\n\ntype Context = CanvasRenderingContext2D;\n\n/**\n * A directive that draws overlay selections and other content on top\n * of the currently active vector layer.\n */\n@Directive({ selector: '[appCanvasOverlay]' })\nexport class CanvasOverlayDirective extends CanvasLayoutMixin(DestroyableMixin())\n  implements AfterViewInit {\n  @Input() actionSource: ActionSource;\n\n  private readonly $canvas: JQuery<HTMLCanvasElement>;\n  vectorLayer: VectorLayer;\n  // Normal mode variables.\n  private hiddenLayerIds: ReadonlySet<string> = new Set<string>();\n  private selectedLayerIds: ReadonlySet<string> = new Set<string>();\n  // Shape Shifter mode variables.\n  private blockLayerId: string;\n  actionMode: ActionMode;\n  private actionHover: Hover;\n  actionSelections: ReadonlyArray<Selection>;\n  private currentHoverPreviewPath: Path | undefined;\n  pairedSubPaths: Set<number>;\n  unpairedSubPath: { source: ActionSource; subIdx: number };\n  private isActionMode: boolean;\n  private selectedBlockLayerIds: ReadonlySet<string> = new Set<string>();\n  private subIdxWithError: number;\n\n  private selectionHelper: SelectionHelper | undefined;\n  private pairSubPathHelper: PairSubPathHelper | undefined;\n  private segmentSplitter: SegmentSplitter | undefined;\n  private shapeSplitter: ShapeSplitter | undefined;\n\n  constructor(\n    elementRef: ElementRef,\n    readonly store: Store<State>,\n    readonly actionModeService: ActionModeService,\n    private readonly playbackService: PlaybackService,\n    private readonly layerTimelineService: LayerTimelineService,\n  ) {\n    super();\n    this.$canvas = $(elementRef.nativeElement) as JQuery<HTMLCanvasElement>;\n  }\n\n  ngAfterViewInit() {\n    if (this.actionSource === ActionSource.Animated) {\n      // Animated canvas specific setup.\n      this.registerSubscription(\n        combineLatest(\n          // TODO: don't think this is necessary anymore? only need to query playback service now?\n          merge(\n            this.playbackService.asObservable().pipe(map(event => event.vl)),\n            this.store.select(getVectorLayer),\n          ),\n          this.store.select(getCanvasOverlayState),\n        ).subscribe(\n          ([\n            vectorLayer,\n            { hiddenLayerIds, selectedLayerIds, isActionMode, selectedBlockLayerIds },\n          ]) => {\n            this.vectorLayer = vectorLayer;\n            this.hiddenLayerIds = hiddenLayerIds;\n            this.selectedLayerIds = selectedLayerIds;\n            this.isActionMode = isActionMode;\n            this.selectedBlockLayerIds = selectedBlockLayerIds;\n            this.draw();\n          },\n        ),\n      );\n    } else {\n      // From & to canvas specific setup.\n      const shapeShifterSelector =\n        this.actionSource === ActionSource.From ? getActionModeStartState : getActionModeEndState;\n      this.registerSubscription(\n        this.store\n          .select(shapeShifterSelector)\n          .subscribe(\n            ({\n              vectorLayer,\n              blockLayerId,\n              isActionMode,\n              hover,\n              selections,\n              pairedSubPaths,\n              unpairedSubPath,\n              hiddenLayerIds,\n              selectedLayerIds,\n              subIdxWithError,\n            }) => {\n              this.vectorLayer = vectorLayer;\n              this.blockLayerId = blockLayerId;\n              this.isActionMode = isActionMode;\n              this.actionHover = hover;\n              this.actionSelections = selections;\n              this.pairedSubPaths = new Set(pairedSubPaths);\n              this.unpairedSubPath = unpairedSubPath;\n              this.hiddenLayerIds = hiddenLayerIds;\n              this.selectedLayerIds = selectedLayerIds;\n              this.subIdxWithError = subIdxWithError;\n              this.draw();\n            },\n          ),\n      );\n      this.registerSubscription(\n        this.store.select(getActionMode).subscribe(mode => {\n          this.actionMode = mode;\n          const layer = this.activePathLayer;\n          if (\n            this.actionMode === ActionMode.SplitCommands ||\n            (this.actionMode === ActionMode.SplitSubPaths &&\n              layer &&\n              layer.isStroked() &&\n              !layer.isFilled())\n          ) {\n            const subIdxs = new Set<number>();\n            for (const s of this.actionSelections) {\n              subIdxs.add(s.subIdx);\n            }\n            this.segmentSplitter = new SegmentSplitter(this);\n          } else {\n            this.segmentSplitter = undefined;\n          }\n          this.selectionHelper =\n            this.actionMode === ActionMode.Selection ? new SelectionHelper(this) : undefined;\n          if (this.actionMode === ActionMode.PairSubPaths) {\n            this.pairSubPathHelper = new PairSubPathHelper(this);\n            const selections = this.actionSelections.filter(s => s.type === SelectionType.SubPath);\n            if (selections.length) {\n              const { source, subIdx } = selections[0];\n              // TODO: avoid calling this in a subscription (should automatically do this)\n              this.actionModeService.setUnpairedSubPath({ source, subIdx });\n            }\n          } else {\n            this.pairSubPathHelper = undefined;\n          }\n          this.shapeSplitter =\n            this.actionMode === ActionMode.SplitSubPaths && layer && layer.isFilled()\n              ? new ShapeSplitter(this)\n              : undefined;\n          this.currentHoverPreviewPath = undefined;\n          this.draw();\n        }),\n      );\n      const updateCurrentHoverFn = (hover: Hover | undefined) => {\n        let previewPath: Path;\n        if (this.vectorLayer && this.activePath && hover) {\n          // If the user is hovering over the inspector split button, then build\n          // a snapshot of what the path would look like after the action\n          // and display the result.\n          const mutator = this.activePath.mutate();\n          const { type, subIdx, cmdIdx } = hover;\n          switch (type) {\n            case HoverType.Split:\n              previewPath = mutator.splitCommandInHalf(subIdx, cmdIdx).build();\n              break;\n            case HoverType.Unsplit:\n              previewPath = mutator.unsplitCommand(subIdx, cmdIdx).build();\n              break;\n          }\n        }\n        this.currentHoverPreviewPath = previewPath;\n        this.draw();\n      };\n      // TODO: avoid re-executing the draw by combining with the above subscriptions\n      this.registerSubscription(\n        this.store.select(getActionModeHover).subscribe(hover => {\n          if (!hover) {\n            // Clear the current hover.\n            updateCurrentHoverFn(undefined);\n            return;\n          }\n          if (hover.source !== this.actionSource && hover.type !== HoverType.Point) {\n            updateCurrentHoverFn(undefined);\n            return;\n          }\n          updateCurrentHoverFn(hover);\n        }),\n      );\n    }\n  }\n\n  private get overlayCtx() {\n    return this.$canvas.get(0).getContext('2d');\n  }\n\n  private get highlightLineWidth() {\n    return HIGHLIGHT_LINE_WIDTH / this.cssScale;\n  }\n\n  private get minSnapThreshold() {\n    return MIN_SNAP_THRESHOLD / this.cssScale;\n  }\n\n  private get highlightLineDash() {\n    return [HIGHLIGHT_LINE_DASH / this.cssScale, HIGHLIGHT_LINE_DASH / this.cssScale];\n  }\n\n  private get smallPointRadius() {\n    return SMALL_POINT_RADIUS / this.cssScale;\n  }\n\n  private get mediumPointRadius() {\n    return MEDIUM_POINT_RADIUS / this.cssScale;\n  }\n\n  private get splitPointRadius() {\n    return this.mediumPointRadius * SPLIT_POINT_RADIUS_FACTOR;\n  }\n\n  private get selectedSegmentLineWidth() {\n    return HIGHLIGHT_LINE_WIDTH / this.cssScale / 1.9;\n  }\n\n  private get unselectedSegmentLineWidth() {\n    return HIGHLIGHT_LINE_WIDTH / this.cssScale / 3;\n  }\n\n  get dragTriggerTouchSlop() {\n    return DRAG_TRIGGER_TOUCH_SLOP / this.cssScale;\n  }\n\n  // NOTE: only use this for action mode\n  get activePathLayer() {\n    if (!this.vectorLayer) {\n      return undefined;\n    }\n    return this.vectorLayer.findLayerById(this.blockLayerId) as MorphableLayer;\n  }\n\n  // NOTE: only use this for action mode\n  get activePath() {\n    const layer = this.activePathLayer;\n    if (!layer) {\n      return undefined;\n    }\n    return layer.pathData;\n  }\n\n  // @Override\n  protected onDimensionsChanged() {\n    const { w, h } = this.getViewport();\n    this.$canvas.attr({ width: w * this.attrScale, height: h * this.attrScale });\n    this.$canvas.css({ width: w * this.cssScale, height: h * this.cssScale });\n    this.draw();\n  }\n\n  draw() {\n    const ctx = this.overlayCtx;\n    if (this.vectorLayer) {\n      const { w, h } = this.getViewport();\n      ctx.save();\n      ctx.scale(this.attrScale, this.attrScale);\n      ctx.clearRect(0, 0, w, h);\n      this.drawLayerSelections(ctx, this.vectorLayer);\n      this.drawHighlights(ctx);\n      ctx.restore();\n      // Draw points in terms of physical pixels, not viewport pixels.\n      this.drawLabeledPoints(ctx);\n      this.drawDraggingPoints(ctx);\n      this.drawFloatingPreviewPoint(ctx);\n      this.drawFloatingSplitFilledPathPreviewPoints(ctx);\n    }\n    this.drawPixelGrid(ctx);\n  }\n\n  // Recursively draws all layer selections to the canvas.\n  private drawLayerSelections(ctx: Context, curr: Layer) {\n    if (this.isActionMode) {\n      // Don't draw selections for hidden layers or while in action mode.\n      return;\n    }\n    if (this.selectedLayerIds.has(curr.id) || this.selectedBlockLayerIds.has(curr.id)) {\n      const root = this.vectorLayer;\n      const flattenedTransform = LayerUtil.getCanvasTransformForLayer(root, curr.id);\n      if (curr instanceof ClipPathLayer) {\n        if (curr.pathData && curr.pathData.getCommands().length) {\n          CanvasUtil.executeCommands(ctx, curr.pathData.getCommands(), flattenedTransform);\n          executeHighlights(ctx, HIGHLIGHT_COLOR, this.highlightLineWidth, this.highlightLineDash);\n          ctx.clip();\n        }\n      } else if (curr instanceof PathLayer) {\n        if (curr.pathData && curr.pathData.getCommands().length) {\n          ctx.save();\n          CanvasUtil.executeCommands(ctx, curr.pathData.getCommands(), flattenedTransform);\n          executeHighlights(ctx, HIGHLIGHT_COLOR, this.highlightLineWidth);\n          ctx.restore();\n        }\n      } else if (curr instanceof VectorLayer || curr instanceof GroupLayer) {\n        const bounds = curr.bounds;\n        if (bounds) {\n          ctx.save();\n          const { a, b, c, d, e, f } = flattenedTransform;\n          ctx.transform(a, b, c, d, e, f);\n          ctx.beginPath();\n          ctx.rect(bounds.l, bounds.t, bounds.r - bounds.l, bounds.b - bounds.t);\n          executeHighlights(ctx, HIGHLIGHT_COLOR, this.highlightLineWidth);\n          ctx.restore();\n        }\n      }\n    }\n    curr.children.forEach(child => this.drawLayerSelections(ctx, child));\n  }\n\n  // Draw any highlighted segments.\n  private drawHighlights(ctx: Context) {\n    if (!this.isActionMode || this.actionSource === ActionSource.Animated || !this.activePath) {\n      return;\n    }\n\n    const flattenedTransform = LayerUtil.getCanvasTransformForLayer(\n      this.vectorLayer,\n      this.blockLayerId,\n    );\n    const pathLayer = this.activePathLayer;\n    const activePath = pathLayer.pathData;\n    const currentHover = this.actionHover;\n\n    if (this.selectionHelper) {\n      // Draw any highlighted subpaths. We'll highlight a subpath if a subpath\n      // selection or a point selection exists.\n      const selectedSubPaths = _(this.actionSelections as Selection[])\n        .filter(s => {\n          return (\n            s.source === this.actionSource &&\n            (s.type === SelectionType.Point || s.type === SelectionType.SubPath)\n          );\n        })\n        .map(s => s.subIdx)\n        .uniq()\n        .map(subIdx => activePath.getSubPath(subIdx))\n        .filter(subPath => !subPath.isCollapsing())\n        .value();\n\n      for (const subPath of selectedSubPaths) {\n        // If the subpath has a split segment, highlight it in orange. Otherwise,\n        // use the default blue highlight color.\n        const isSplitSubPath = subPath.getCommands().some(c => c.isSplitSegment());\n        const highlightColor = isSplitSubPath ? SPLIT_POINT_COLOR : HIGHLIGHT_COLOR;\n        CanvasUtil.executeCommands(ctx, subPath.getCommands(), flattenedTransform);\n        executeHighlights(ctx, highlightColor, this.selectedSegmentLineWidth);\n      }\n\n      const segmentSelections = this.actionSelections\n        .filter(s => s.type === SelectionType.Segment)\n        .filter(s => s.source === this.actionSource)\n        .map(s => {\n          return { subIdx: s.subIdx, cmdIdx: s.cmdIdx };\n        });\n      const hover = currentHover;\n      if (hover && hover.source === this.actionSource && hover.type === HoverType.Segment) {\n        segmentSelections.push({\n          subIdx: hover.subIdx,\n          cmdIdx: hover.cmdIdx,\n        });\n      }\n      const segmentSelectionCmds = segmentSelections\n        .map(s => activePath.getCommand(s.subIdx, s.cmdIdx))\n        .filter(cmd => cmd.isSplitSegment());\n      CanvasUtil.executeCommands(ctx, segmentSelectionCmds, flattenedTransform);\n      executeHighlights(ctx, SPLIT_POINT_COLOR, this.selectedSegmentLineWidth);\n\n      // Highlight any subpaths with errors.\n      if (this.subIdxWithError !== undefined) {\n        const cmds = activePath.getSubPath(this.subIdxWithError).getCommands();\n        CanvasUtil.executeCommands(ctx, cmds, flattenedTransform);\n        executeHighlights(ctx, ERROR_COLOR, this.highlightLineWidth, this.highlightLineDash);\n      }\n    } else if (this.segmentSplitter && this.segmentSplitter.getProjectionOntoPath()) {\n      // Highlight the segment as the user hovers over it.\n      const {\n        subIdx,\n        cmdIdx,\n        projection: { d },\n      } = this.segmentSplitter.getProjectionOntoPath();\n      if (d < this.minSnapThreshold) {\n        CanvasUtil.executeCommands(\n          ctx,\n          [activePath.getCommand(subIdx, cmdIdx)],\n          flattenedTransform,\n        );\n        executeHighlights(ctx, SPLIT_POINT_COLOR, this.selectedSegmentLineWidth);\n      }\n    }\n\n    // Draw any existing split shape segments to the canvas.\n    const commands = _(activePath.getSubPaths() as SubPath[])\n      .filter(s => !s.isCollapsing())\n      .flatMap(s => s.getCommands() as Command[])\n      .filter(c => c.isSplitSegment())\n      .value();\n    CanvasUtil.executeCommands(ctx, commands, flattenedTransform);\n    executeHighlights(ctx, SPLIT_POINT_COLOR, this.unselectedSegmentLineWidth);\n\n    if (this.pairSubPathHelper) {\n      const currUnpair = this.unpairedSubPath;\n      if (currUnpair) {\n        // Draw the current unpaired subpath in orange, if it exists.\n        const { source, subIdx } = currUnpair;\n        if (source === this.actionSource) {\n          const subPath = activePath.getSubPath(subIdx);\n          CanvasUtil.executeCommands(ctx, subPath.getCommands(), flattenedTransform);\n          executeHighlights(ctx, SPLIT_POINT_COLOR, this.selectedSegmentLineWidth);\n        }\n      }\n      const pairedSubPaths = this.pairedSubPaths;\n      const hasHover =\n        currentHover &&\n        currentHover.source === this.actionSource &&\n        currentHover.type === HoverType.SubPath;\n      if (hasHover) {\n        pairedSubPaths.delete(currentHover.subIdx);\n      }\n      if (pairedSubPaths.size) {\n        // Draw any already paired subpaths in blue.\n        const pairedCmds = _.flatMap(\n          Array.from(pairedSubPaths),\n          subIdx => activePath.getSubPath(subIdx).getCommands() as Command[],\n        );\n        CanvasUtil.executeCommands(ctx, pairedCmds, flattenedTransform);\n        executeHighlights(ctx, NORMAL_POINT_COLOR, this.selectedSegmentLineWidth);\n      }\n      if (hasHover) {\n        // Highlight the hover in orange, if it exists.\n        const hoverCmds = activePath.getSubPath(currentHover.subIdx).getCommands();\n        CanvasUtil.executeCommands(ctx, hoverCmds, flattenedTransform);\n        executeHighlights(ctx, SPLIT_POINT_COLOR, this.selectedSegmentLineWidth);\n      }\n    } else if (this.shapeSplitter) {\n      // If we are splitting a filled subpath, draw the in progress drag segment.\n      const proj1 = this.shapeSplitter.getInitialProjectionOntoPath();\n      const proj2 = this.shapeSplitter.getFinalProjectionOntoPath();\n      if (proj1) {\n        // Draw a line from the starting projection to the final projection (or\n        // to the last known mouse location, if one doesn't exist).\n        const startPoint = applyGroupTransform(proj1.projection, flattenedTransform);\n        const endPoint = proj2\n          ? applyGroupTransform(proj2.projection, flattenedTransform)\n          : this.shapeSplitter.getLastKnownMouseLocation();\n        ctx.beginPath();\n        ctx.moveTo(startPoint.x, startPoint.y);\n        ctx.lineTo(endPoint.x, endPoint.y);\n        executeHighlights(ctx, SPLIT_POINT_COLOR, this.selectedSegmentLineWidth);\n      }\n      if (!proj1 || proj2) {\n        // Highlight the segment as the user hovers over it.\n        const projectionOntoPath = this.shapeSplitter.getCurrentProjectionOntoPath();\n        if (projectionOntoPath) {\n          const projection = projectionOntoPath.projection;\n          if (projection && projection.d < this.minSnapThreshold) {\n            const { subIdx, cmdIdx } = projectionOntoPath;\n            CanvasUtil.executeCommands(\n              ctx,\n              [activePath.getCommand(subIdx, cmdIdx)],\n              flattenedTransform,\n            );\n            executeHighlights(ctx, SPLIT_POINT_COLOR, this.selectedSegmentLineWidth);\n          }\n        }\n      }\n    }\n  }\n\n  // Draw any labeled points.\n  private drawLabeledPoints(ctx: Context) {\n    if (!this.isActionMode || this.actionSource === ActionSource.Animated || !this.activePath) {\n      return;\n    }\n\n    const pathLayer = this.activePathLayer;\n    let path = pathLayer.pathData;\n    if (this.currentHoverPreviewPath) {\n      path = this.currentHoverPreviewPath;\n    }\n\n    interface PointInfo {\n      cmd: Command;\n      subIdx: number;\n      cmdIdx: number;\n    }\n\n    // Create a list of all path points in their normal order.\n    const pointInfos = _(path.getSubPaths() as SubPath[])\n      .filter(s => !s.isCollapsing())\n      .map((s, subIdx) => {\n        return s.getCommands().map((cmd, cmdIdx) => {\n          return { cmd, subIdx, cmdIdx } as PointInfo;\n        });\n      })\n      .flatMap(pis => pis)\n      .reverse()\n      .value();\n\n    const subPathSelections = this.actionSelections.filter(s => s.type === SelectionType.SubPath);\n    const pointSelections = this.actionSelections.filter(s => s.type === SelectionType.Point);\n\n    // Remove all selected points from the list.\n    const isPointInfoSelectedFn = ({ subIdx, cmdIdx }: PointInfo) => {\n      return (\n        subPathSelections.some(s => s.subIdx === subIdx) ||\n        pointSelections.some(s => s.subIdx === subIdx && s.cmdIdx === cmdIdx)\n      );\n    };\n    const selectedPointInfos = _.remove(pointInfos, pi => isPointInfoSelectedFn(pi));\n    // Remove any subpath points that share the same subIdx as an existing selection.\n    // We'll call these 'medium' points (i.e. labeled, but not selected), and we'll\n    // always draw selected points on top of medium points, and medium points\n    // on top of small points.\n    const isPointInfoAtLeastMediumFn = ({ subIdx }: PointInfo) => {\n      return (\n        subPathSelections.some(s => s.subIdx === subIdx) ||\n        pointSelections.some(s => s.subIdx === subIdx)\n      );\n    };\n    pointInfos.push(..._.remove(pointInfos, pi => isPointInfoAtLeastMediumFn(pi)));\n    pointInfos.push(...selectedPointInfos);\n\n    const currentHover = this.actionHover;\n\n    // Remove a hovering point, if one exists.\n    const hoveringPointInfos = _.remove(pointInfos, ({ subIdx, cmdIdx }: PointInfo) => {\n      const hover = currentHover;\n      return (\n        hover &&\n        hover.type === HoverType.Point &&\n        hover.subIdx === subIdx &&\n        hover.cmdIdx === cmdIdx\n      );\n    });\n    // Remove any subpath points that share the same subIdx as an existing hover.\n    const isPointInfoHoveringFn = ({ subIdx }: PointInfo) => {\n      const hover = currentHover;\n      return hover && hover.type !== HoverType.Segment && hover.subIdx === subIdx;\n    };\n    // Similar to above, always draw hover points on top of subpath hover points.\n    pointInfos.push(..._.remove(pointInfos, pi => isPointInfoHoveringFn(pi)));\n    pointInfos.push(...hoveringPointInfos);\n\n    const draggingIndex =\n      this.selectionHelper && this.selectionHelper.isDragTriggered()\n        ? this.selectionHelper.getDraggableSplitIndex()\n        : undefined;\n\n    for (const { cmd, subIdx, cmdIdx } of pointInfos) {\n      if (draggingIndex && subIdx === draggingIndex.subIdx && cmdIdx === draggingIndex.cmdIdx) {\n        // Skip the currently dragged point. We'll draw that next.\n        continue;\n      }\n      let radius = this.smallPointRadius;\n      let text: string;\n      const isHovering = isPointInfoHoveringFn({ cmd, subIdx, cmdIdx });\n      const isAtLeastMedium = isPointInfoAtLeastMediumFn({ cmd, subIdx, cmdIdx });\n      if ((isAtLeastMedium || isHovering) && this.actionMode === ActionMode.Selection) {\n        radius = this.mediumPointRadius * SELECTED_POINT_RADIUS_FACTOR;\n        const isPointEnlargedFn = (source: ActionSource, sIdx: number, cIdx: number) => {\n          return pointSelections.some(s => {\n            return s.subIdx === sIdx && s.cmdIdx === cIdx && s.source === source;\n          });\n        };\n        if (\n          (isHovering && cmdIdx === currentHover.cmdIdx) ||\n          isPointEnlargedFn(ActionSource.From, subIdx, cmdIdx) ||\n          isPointEnlargedFn(ActionSource.To, subIdx, cmdIdx)\n        ) {\n          radius /= SPLIT_POINT_RADIUS_FACTOR;\n        }\n        text = (cmdIdx + 1).toString();\n      }\n      let color: string;\n      if (cmd.isSplitPoint()) {\n        radius *= SPLIT_POINT_RADIUS_FACTOR;\n        color = SPLIT_POINT_COLOR;\n      } else {\n        color = NORMAL_POINT_COLOR;\n      }\n      const flattenedTransform = LayerUtil.getCanvasTransformForLayer(\n        this.vectorLayer,\n        this.blockLayerId,\n      );\n      executeLabeledPoint(\n        ctx,\n        this.attrScale,\n        applyGroupTransform(_.last(cmd.points), flattenedTransform),\n        radius,\n        color,\n        text,\n      );\n    }\n  }\n\n  // Draw any actively dragged points along the path in selection mode.\n  private drawDraggingPoints(ctx: Context) {\n    if (!this.isActionMode || this.actionSource === ActionSource.Animated || !this.activePath) {\n      return;\n    }\n\n    if (\n      this.actionMode !== ActionMode.Selection ||\n      !this.selectionHelper ||\n      !this.selectionHelper.isDragTriggered()\n    ) {\n      return;\n    }\n    const flattenedTransform = LayerUtil.getCanvasTransformForLayer(\n      this.vectorLayer,\n      this.blockLayerId,\n    );\n    const projection = this.selectionHelper.getProjectionOntoPath().projection;\n    const point =\n      projection.d < this.minSnapThreshold\n        ? applyGroupTransform(projection, flattenedTransform)\n        : this.selectionHelper.getLastKnownMouseLocation();\n    executeLabeledPoint(ctx, this.attrScale, point, this.splitPointRadius, SPLIT_POINT_COLOR);\n  }\n\n  // Draw a floating point preview over the canvas in split commands mode\n  // and split subpaths mode for stroked paths.\n  private drawFloatingPreviewPoint(ctx: Context) {\n    if (!this.isActionMode || this.actionSource === ActionSource.Animated || !this.activePath) {\n      return;\n    }\n\n    const pathLayer = this.activePathLayer;\n    if (\n      (this.actionMode !== ActionMode.SplitCommands &&\n        this.actionMode !== ActionMode.SplitSubPaths &&\n        !pathLayer.isStroked()) ||\n      !this.segmentSplitter ||\n      !this.segmentSplitter.getProjectionOntoPath()\n    ) {\n      return;\n    }\n    const projection = this.segmentSplitter.getProjectionOntoPath().projection;\n    if (projection.d < this.minSnapThreshold) {\n      const flattenedTransform = LayerUtil.getCanvasTransformForLayer(\n        this.vectorLayer,\n        this.blockLayerId,\n      );\n      executeLabeledPoint(\n        ctx,\n        this.attrScale,\n        applyGroupTransform(projection, flattenedTransform),\n        this.splitPointRadius,\n        SPLIT_POINT_COLOR,\n      );\n    }\n  }\n\n  // Draw the floating points on top of the drag line in split filled subpath mode.\n  private drawFloatingSplitFilledPathPreviewPoints(ctx: Context) {\n    if (!this.isActionMode || this.actionSource === ActionSource.Animated || !this.activePath) {\n      return;\n    }\n    if (this.actionMode !== ActionMode.SplitSubPaths || !this.shapeSplitter) {\n      return;\n    }\n    const flattenedTransform = LayerUtil.getCanvasTransformForLayer(\n      this.vectorLayer,\n      this.blockLayerId,\n    );\n    const proj1 = this.shapeSplitter.getInitialProjectionOntoPath();\n    if (proj1) {\n      const proj2 = this.shapeSplitter.getFinalProjectionOntoPath();\n      executeLabeledPoint(\n        ctx,\n        this.attrScale,\n        applyGroupTransform(proj1.projection, flattenedTransform),\n        this.splitPointRadius,\n        SPLIT_POINT_COLOR,\n      );\n      if (this.shapeSplitter.willFinalProjectionOntoPathCreateSplitPoint()) {\n        const endPoint = proj2\n          ? applyGroupTransform(proj2.projection, flattenedTransform)\n          : this.shapeSplitter.getLastKnownMouseLocation();\n        executeLabeledPoint(\n          ctx,\n          this.attrScale,\n          endPoint,\n          this.splitPointRadius,\n          SPLIT_POINT_COLOR,\n        );\n      }\n    } else if (this.shapeSplitter.getCurrentProjectionOntoPath()) {\n      const projection = this.shapeSplitter.getCurrentProjectionOntoPath().projection;\n      if (projection.d < this.minSnapThreshold) {\n        executeLabeledPoint(\n          ctx,\n          this.attrScale,\n          applyGroupTransform(projection, flattenedTransform),\n          this.splitPointRadius,\n          SPLIT_POINT_COLOR,\n        );\n      }\n    }\n  }\n\n  // Draws the pixel grid on top of the canvas content.\n  private drawPixelGrid(ctx: Context) {\n    // Note that we draw the pixel grid in terms of physical pixels,\n    // not viewport pixels.\n    if (this.cssScale > 4) {\n      ctx.save();\n      ctx.fillStyle = 'rgba(128, 128, 128, .25)';\n      const devicePixelRatio = window.devicePixelRatio || 1;\n      const viewport = this.getViewport();\n      for (let x = 1; x < viewport.w; x++) {\n        ctx.fillRect(\n          x * this.attrScale - devicePixelRatio / 2,\n          0,\n          devicePixelRatio,\n          viewport.h * this.attrScale,\n        );\n      }\n      for (let y = 1; y < viewport.h; y++) {\n        ctx.fillRect(\n          0,\n          y * this.attrScale - devicePixelRatio / 2,\n          viewport.w * this.attrScale,\n          devicePixelRatio,\n        );\n      }\n      ctx.restore();\n    }\n  }\n\n  // Called by the CanvasComponent.\n  onMouseDown(event: MouseEvent) {\n    const mouseDown = this.mouseEventToViewportCoords(event);\n    if (this.actionSource === ActionSource.Animated && !this.isActionMode) {\n      // Detect layer selections.\n      const hitLayer = this.hitTestForLayer(mouseDown);\n      const isMetaOrShiftPressed =\n        ShortcutService.isOsDependentModifierKey(event) || event.shiftKey;\n      if (hitLayer) {\n        this.layerTimelineService.selectLayer(hitLayer.id, !isMetaOrShiftPressed);\n      } else if (!isMetaOrShiftPressed) {\n        this.layerTimelineService.clearSelections();\n      }\n      return;\n    }\n    if (this.actionSource === ActionSource.Animated) {\n      // Don't need to do anything for the animated canvas if we are in action mode.\n      return;\n    }\n    if (this.actionMode === ActionMode.Selection) {\n      this.selectionHelper.onMouseDown(\n        mouseDown,\n        event.shiftKey || ShortcutService.isOsDependentModifierKey(event),\n      );\n    } else if (this.actionMode === ActionMode.PairSubPaths) {\n      this.pairSubPathHelper.onMouseDown(\n        mouseDown,\n        event.shiftKey || ShortcutService.isOsDependentModifierKey(event),\n      );\n    } else if (this.actionMode === ActionMode.SplitCommands) {\n      this.segmentSplitter.onMouseDown(mouseDown);\n    } else if (this.actionMode === ActionMode.SplitSubPaths) {\n      const pathLayer = this.activePathLayer;\n      if (!pathLayer.isFilled() && pathLayer.isStroked()) {\n        this.segmentSplitter.onMouseDown(mouseDown);\n      } else {\n        this.shapeSplitter.onMouseDown(mouseDown);\n      }\n    }\n  }\n\n  // Called by the CanvasComponent.\n  onMouseMove(event: MouseEvent) {\n    if (this.actionSource === ActionSource.Animated && !this.isActionMode) {\n      return;\n    }\n    const mouseMove = this.mouseEventToViewportCoords(event);\n    if (this.actionMode === ActionMode.Selection) {\n      this.selectionHelper.onMouseMove(mouseMove);\n    } else if (this.actionMode === ActionMode.PairSubPaths) {\n      this.pairSubPathHelper.onMouseMove(mouseMove);\n    } else if (this.actionMode === ActionMode.SplitCommands) {\n      this.segmentSplitter.onMouseMove(mouseMove);\n    } else if (this.actionMode === ActionMode.SplitSubPaths) {\n      const pathLayer = this.activePathLayer;\n      if (!pathLayer.isFilled() && pathLayer.isStroked()) {\n        this.segmentSplitter.onMouseMove(mouseMove);\n      } else {\n        this.shapeSplitter.onMouseMove(mouseMove);\n      }\n    }\n  }\n\n  // Called by the CanvasComponent.\n  onMouseUp(event: MouseEvent) {\n    if (this.actionSource === ActionSource.Animated && !this.isActionMode) {\n      return;\n    }\n    const mouseUp = this.mouseEventToViewportCoords(event);\n    if (this.actionMode === ActionMode.Selection) {\n      this.selectionHelper.onMouseUp(\n        mouseUp,\n        event.shiftKey || ShortcutService.isOsDependentModifierKey(event),\n      );\n    } else if (this.actionMode === ActionMode.PairSubPaths) {\n      this.pairSubPathHelper.onMouseUp(mouseUp);\n    } else if (this.actionMode === ActionMode.SplitCommands) {\n      this.segmentSplitter.onMouseUp(mouseUp);\n    } else if (this.actionMode === ActionMode.SplitSubPaths) {\n      const pathLayer = this.activePathLayer;\n      if (!pathLayer.isFilled() && pathLayer.isStroked()) {\n        this.segmentSplitter.onMouseUp(mouseUp);\n      } else {\n        this.shapeSplitter.onMouseUp(mouseUp);\n      }\n    }\n  }\n\n  // Called by the CanvasComponent.\n  onMouseLeave(event: MouseEvent) {\n    if (this.actionSource === ActionSource.Animated && !this.isActionMode) {\n      return;\n    }\n    const mouseLeave = this.mouseEventToViewportCoords(event);\n    if (this.actionMode === ActionMode.Selection) {\n      // TODO: how to handle the case where the mouse leaves and re-enters mid-gesture?\n      this.selectionHelper.onMouseLeave(mouseLeave);\n    } else if (this.actionMode === ActionMode.PairSubPaths) {\n      this.pairSubPathHelper.onMouseLeave(mouseLeave);\n    } else if (this.actionMode === ActionMode.SplitCommands) {\n      this.segmentSplitter.onMouseLeave(mouseLeave);\n    } else if (this.actionMode === ActionMode.SplitSubPaths) {\n      const pathLayer = this.activePathLayer;\n      if (!pathLayer.isFilled() && pathLayer.isStroked()) {\n        this.segmentSplitter.onMouseLeave(mouseLeave);\n      } else {\n        this.shapeSplitter.onMouseLeave(mouseLeave);\n      }\n    }\n    this.actionModeService.clearHover();\n  }\n\n  private mouseEventToViewportCoords(event: MouseEvent) {\n    const canvasOffset = this.$canvas.offset();\n    const x = (event.pageX - canvasOffset.left) / this.cssScale;\n    const y = (event.pageY - canvasOffset.top) / this.cssScale;\n    return { x, y };\n  }\n\n  private hitTestForLayer(point: Point) {\n    const root = this.vectorLayer;\n    if (!root) {\n      return undefined;\n    }\n    const recurseFn = (layer: Layer): Layer => {\n      if (this.hiddenLayerIds.has(layer.id)) {\n        return undefined;\n      }\n      // TODO: use a user-defined type check to confirm this layer is an instance of MorphableLayer\n      if ((layer instanceof PathLayer || layer instanceof ClipPathLayer) && layer.pathData) {\n        const canvasToLayerMatrix = LayerUtil.getCanvasTransformForLayer(root, layer.id).invert();\n        if (!canvasToLayerMatrix) {\n          // Do nothing if matrix is non-invertible.\n          return undefined;\n        }\n        const transformedPoint = MathUtil.transformPoint(point, canvasToLayerMatrix);\n        let isSegmentInRangeFn: (distance: number, cmd: Command) => boolean;\n        isSegmentInRangeFn = distance => {\n          let maxDistance = 0;\n          if (layer instanceof PathLayer && layer.isStroked()) {\n            maxDistance = Math.max(this.minSnapThreshold, layer.strokeWidth / 2);\n          }\n          return distance <= maxDistance;\n        };\n        const findShapesInRange = layer.isFilled();\n        const hitResult = layer.pathData.hitTest(transformedPoint, {\n          isSegmentInRangeFn,\n          findShapesInRange,\n        });\n        return hitResult.isHit ? layer : undefined;\n      }\n      // Use 'hitTestLayer || h' and not the other way around because of reverse z-order.\n      return layer.children.reduce((h, l) => recurseFn(l) || h, undefined);\n    };\n    return recurseFn(root) as MorphableLayer;\n  }\n\n  // NOTE: this should only be used in action mode\n  performHitTest(mousePoint: Point, opts: HitTestOpts = {}) {\n    const flattenedTransform = LayerUtil.getCanvasTransformForLayer(\n      this.vectorLayer,\n      this.blockLayerId,\n    ).invert();\n    const transformedMousePoint = MathUtil.transformPoint(mousePoint, flattenedTransform);\n    let isPointInRangeFn: (distance: number, cmd: Command) => boolean;\n    if (!opts.noPoints) {\n      isPointInRangeFn = (distance, cmd) => {\n        const multiplyFactor = cmd.isSplitPoint() ? SPLIT_POINT_RADIUS_FACTOR : 1;\n        return distance <= this.mediumPointRadius * multiplyFactor;\n      };\n    }\n    const pathLayer = this.vectorLayer.findLayerById(this.blockLayerId) as MorphableLayer;\n    if (!pathLayer.pathData) {\n      return { isHit: false } as HitResult;\n    }\n    let isSegmentInRangeFn: (distance: number, cmd: Command) => boolean;\n    if (!opts.noSegments) {\n      isSegmentInRangeFn = distance => {\n        let maxDistance = opts.withExtraSegmentPadding ? this.minSnapThreshold : 0;\n        if (pathLayer.isStroked()) {\n          maxDistance = Math.max(maxDistance, (pathLayer as PathLayer).strokeWidth / 2);\n        }\n        return distance <= maxDistance;\n      };\n    }\n    const findShapesInRange = pathLayer.isFilled() && !opts.noShapes;\n    const restrictToSubIdx = opts.restrictToSubIdx;\n    return pathLayer.pathData.hitTest(transformedMousePoint, {\n      isPointInRangeFn,\n      isSegmentInRangeFn,\n      findShapesInRange,\n      restrictToSubIdx,\n    });\n  }\n}\n\nfunction executeHighlights(\n  ctx: Context,\n  color: string,\n  lineWidth: number,\n  lineDash: number[] = [],\n) {\n  ctx.save();\n  ctx.setLineDash(lineDash);\n  ctx.lineCap = 'round';\n  ctx.strokeStyle = color;\n  ctx.lineWidth = lineWidth;\n  ctx.stroke();\n  ctx.restore();\n}\n\n// Draws a labeled point with optional text.\nfunction executeLabeledPoint(\n  ctx: Context,\n  attrScale: number,\n  point: Point,\n  radius: number,\n  color: string,\n  text?: string,\n) {\n  // Convert the point and the radius to physical pixel coordinates.\n  // We do this to avoid fractional font sizes less than 1px, which\n  // show up OK on Chrome but not on Firefox or Safari.\n  point = MathUtil.transformPoint(point, Matrix.scaling(attrScale, attrScale));\n  radius *= attrScale;\n\n  ctx.save();\n  ctx.beginPath();\n  ctx.arc(point.x, point.y, radius * POINT_BORDER_FACTOR, 0, 2 * Math.PI, false);\n  ctx.fillStyle = POINT_BORDER_COLOR;\n  ctx.fill();\n\n  ctx.beginPath();\n  ctx.arc(point.x, point.y, radius, 0, 2 * Math.PI, false);\n  ctx.fillStyle = color;\n  ctx.fill();\n\n  if (text) {\n    ctx.beginPath();\n    ctx.fillStyle = POINT_TEXT_COLOR;\n    ctx.font = radius + 'px Roboto, Helvetica Neue, sans-serif';\n    const width = ctx.measureText(text).width;\n    // TODO: is there a better way to get the height?\n    const height = ctx.measureText('o').width;\n    ctx.fillText(text, point.x - width / 2, point.y + height / 2);\n    ctx.fill();\n  }\n  ctx.restore();\n}\n\n// Takes a path point and transforms it so that its coordinates are in terms\n// of the VectorLayer's viewport coordinates.\nfunction applyGroupTransform(mousePoint: Point, transform: Matrix) {\n  return MathUtil.transformPoint(mousePoint, transform);\n}\n\ninterface HitTestOpts {\n  readonly noPoints?: boolean;\n  readonly noSegments?: boolean;\n  readonly noShapes?: boolean;\n  readonly restrictToSubIdx?: ReadonlyArray<number>;\n  readonly withExtraSegmentPadding?: boolean;\n}\n","import { AfterViewInit, Directive, ElementRef, Input, OnDestroy } from '@angular/core';\nimport { ActionSource } from 'app/modules/editor/model/actionmode';\nimport { DestroyableMixin } from 'app/modules/editor/scripts/mixins';\nimport { PaperProject } from 'app/modules/editor/scripts/paper';\nimport { PaperService } from 'app/modules/editor/services';\nimport { State, Store } from 'app/modules/editor/store';\nimport * as $ from 'jquery';\n\nimport { CanvasLayoutMixin } from './CanvasLayoutMixin';\n\n@Directive({ selector: '[appCanvasPaper]' })\nexport class CanvasPaperDirective extends CanvasLayoutMixin(DestroyableMixin())\n  implements AfterViewInit, OnDestroy {\n  @Input()\n  actionSource: ActionSource;\n  private readonly $canvas: JQuery<HTMLCanvasElement>;\n  private paperProject: PaperProject;\n\n  constructor(\n    elementRef: ElementRef,\n    private readonly ps: PaperService,\n    private readonly store: Store<State>,\n  ) {\n    super();\n    this.$canvas = $(elementRef.nativeElement) as JQuery<HTMLCanvasElement>;\n  }\n\n  ngAfterViewInit() {\n    this.paperProject = new PaperProject(this.$canvas.get(0), this.ps, this.store);\n  }\n\n  ngOnDestroy() {\n    this.paperProject.remove();\n  }\n\n  // @Override\n  protected onDimensionsChanged() {\n    const { w, h } = this.getViewport();\n    const scale = this.cssScale;\n    this.$canvas.css({ width: w * scale, height: h * scale });\n    this.paperProject.setDimensions(w, h, w * scale, h * scale);\n  }\n}\n","import { Directive, ElementRef, Input } from '@angular/core';\nimport { MathUtil, Point } from 'app/modules/editor/scripts/common';\nimport { ThemeService } from 'app/modules/editor/services';\nimport * as $ from 'jquery';\n\nimport { CanvasLayoutMixin } from './CanvasLayoutMixin';\n\n// All dimensions are in CSS pixels.\nconst RULER_SIZE = 32;\nconst EXTRA_RULER_PADDING = 12;\nconst GRID_INTERVALS_PX: ReadonlyArray<number> = [1, 2, 4, 8, 16, 24, 48, 100, 100, 250];\nconst LABEL_OFFSET = 12;\nconst TICK_SIZE = 6;\n\n@Directive({ selector: '[appCanvasRuler]' })\nexport class CanvasRulerDirective extends CanvasLayoutMixin() {\n  @Input()\n  orientation: Orientation;\n\n  private readonly $canvas: JQuery<HTMLCanvasElement>;\n\n  // The current mouse point in viewport coordinates.\n  private vpMousePoint: Point;\n\n  constructor(elementRef: ElementRef, private readonly themeService: ThemeService) {\n    super();\n    this.$canvas = $(elementRef.nativeElement) as JQuery<HTMLCanvasElement>;\n  }\n\n  // @Override\n  protected onDimensionsChanged() {\n    this.draw();\n  }\n\n  // @Override\n  protected onZoomPanChanged() {\n    this.draw();\n  }\n\n  hideMouse() {\n    if (this.vpMousePoint) {\n      this.vpMousePoint = undefined;\n      this.draw();\n    }\n  }\n\n  // TODO: need to transform mouse point to account for zoom and translation\n  showMouse(mousePoint: Point) {\n    if (!this.vpMousePoint || !MathUtil.arePointsEqual(this.vpMousePoint, mousePoint)) {\n      this.vpMousePoint = mousePoint;\n      this.draw();\n    }\n  }\n\n  private draw() {\n    const isHorizontal = this.orientation === 'horizontal';\n\n    const viewport = this.getViewport();\n    const zoom = this.getZoom();\n    const { cssScale } = this;\n    const width = isHorizontal\n      ? viewport.w * cssScale * zoom + EXTRA_RULER_PADDING * 2\n      : RULER_SIZE;\n    const height = isHorizontal\n      ? RULER_SIZE\n      : viewport.h * cssScale * zoom + EXTRA_RULER_PADDING * 2;\n    this.$canvas.css({ width, height });\n    this.$canvas.attr({ width: width * devicePixelRatio, height: height * devicePixelRatio });\n\n    const ctx = this.$canvas.get(0).getContext('2d');\n    ctx.scale(devicePixelRatio, devicePixelRatio);\n    const { tx, ty } = this.getTranslation();\n    ctx.translate(\n      isHorizontal ? tx + EXTRA_RULER_PADDING : 0,\n      isHorizontal ? 0 : ty + EXTRA_RULER_PADDING,\n    );\n\n    const widthMinusPadding = width - EXTRA_RULER_PADDING * 2;\n    const heightMinusPadding = height - EXTRA_RULER_PADDING * 2;\n    const rulerZoom = Math.max(\n      1,\n      isHorizontal ? widthMinusPadding / viewport.w : heightMinusPadding / viewport.h,\n    );\n\n    // TODO: change the grid spacing depending on the current zoom?\n    // Compute grid spacing (40 = minimum grid spacing in pixels).\n    let interval = 0;\n    let spacingViewportPx = GRID_INTERVALS_PX[interval];\n    while (spacingViewportPx * rulerZoom < 40 || interval >= GRID_INTERVALS_PX.length) {\n      interval++;\n      spacingViewportPx = GRID_INTERVALS_PX[interval];\n    }\n\n    const spacingRulerPx = spacingViewportPx * rulerZoom;\n\n    // Text labels.\n    ctx.fillStyle = this.themeService.getDisabledTextColor();\n    ctx.font = '10px Roboto, Helvetica Neue, sans-serif';\n    if (isHorizontal) {\n      ctx.textBaseline = 'alphabetic';\n      ctx.textAlign = 'center';\n      const minX = -tx;\n      const maxX = minX + widthMinusPadding / zoom;\n      for (\n        let x = 0, t = 0;\n        MathUtil.round(x) <= MathUtil.round(width - EXTRA_RULER_PADDING * 2);\n        x += spacingRulerPx, t += spacingViewportPx\n      ) {\n        if (minX <= x && x <= maxX) {\n          ctx.fillText(t.toString(), x, height - LABEL_OFFSET);\n          ctx.fillRect(x - 0.5, height - TICK_SIZE, 1, TICK_SIZE);\n        }\n      }\n    } else {\n      ctx.textBaseline = 'middle';\n      ctx.textAlign = 'right';\n      const minY = -ty;\n      const maxY = minY + heightMinusPadding / zoom;\n      for (\n        let y = 0, t = 0;\n        MathUtil.round(y) <= MathUtil.round(height - EXTRA_RULER_PADDING * 2);\n        y += spacingRulerPx, t += spacingViewportPx\n      ) {\n        if (minY <= y && y <= maxY) {\n          ctx.fillText(t.toString(), width - LABEL_OFFSET, y);\n          ctx.fillRect(width - TICK_SIZE, y - 0.5, TICK_SIZE, 1);\n        }\n      }\n    }\n\n    if (this.vpMousePoint) {\n      const { x, y } = this.vpMousePoint;\n      ctx.fillStyle = this.themeService.getSecondaryTextColor();\n      if (isHorizontal) {\n        ctx.fillText(x.toString(), x * rulerZoom, height - LABEL_OFFSET);\n      } else {\n        ctx.fillText(y.toString(), width - LABEL_OFFSET, y * rulerZoom);\n      }\n    }\n  }\n}\n\nexport type Orientation = 'horizontal' | 'vertical';\n","export { CanvasComponent } from './canvas.component';\nexport { CanvasContainerDirective } from './canvascontainer.directive';\nexport { CanvasLayersDirective } from './canvaslayers.directive';\nexport { CanvasOverlayDirective } from './canvasoverlay.directive';\nexport { CanvasRulerDirective } from './canvasruler.directive';\nexport { CanvasPaperDirective } from './canvaspaper.directive';\n","module.exports = \"button {\\n  text-transform: uppercase; }\\n  button:mat-dialog-close {\\n    margin-right: 8px; }\\n  mat-dialog-actions {\\n  min-width: 220px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL2RpYWxvZ3MvY29uZmlybWRpYWxvZy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLDBCQUF5QixFQUk1QjtFQUxEO0lBR1Esa0JBQWlCLEVBQ3BCO0VBR0w7RUFDSSxpQkFBZ0IsRUFDbkIiLCJmaWxlIjoic3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL2RpYWxvZ3MvY29uZmlybWRpYWxvZy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImJ1dHRvbiB7XG4gICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgICAmOm1hdC1kaWFsb2ctY2xvc2Uge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICB9XG59XG5cbm1hdC1kaWFsb2ctYWN0aW9ucyB7XG4gICAgbWluLXdpZHRoOiAyMjBweDtcbn1cbiJdfQ== */\"","import { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material';\n\n@Component({\n  selector: 'app-confirmdialog',\n  template: `\n  <span matDialogTitle>{{ this.data.title }}</span>\n  <mat-dialog-content>\n    <p>{{ this.data.message }}</p>\n  </mat-dialog-content>\n  <mat-dialog-actions fxLayout=\"row\">\n    <!-- The ordering here matters (it ensures that 'OK' gets focus first). -->\n    <span fxFlex></span>\n    <button fxFlexOrder=\"2\" mat-button (click)=\"dialogRef.close(true)\">OK</button>\n    <button fxFlexOrder=\"1\" mat-button matDialogClose>Cancel</button>\n  </mat-dialog-actions>`,\n  styleUrls: ['./confirmdialog.component.scss'],\n})\nexport class ConfirmDialogComponent {\n  constructor(\n    readonly dialogRef: MatDialogRef<ConfirmDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) readonly data: { title: string; message: string },\n  ) {}\n}\n","module.exports = \"button {\\n  text-transform: uppercase; }\\n  button:mat-dialog-close {\\n    margin-right: 8px; }\\n  mat-dialog-actions {\\n  min-width: 220px; }\\n  .dialog-radio-group {\\n  display: inline-flex;\\n  flex-direction: column; }\\n  .dialog-radio-button {\\n  margin-bottom: 16px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL2RpYWxvZ3MvZGVtb2RpYWxvZy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLDBCQUF5QixFQUk1QjtFQUxEO0lBR1Esa0JBQWlCLEVBQ3BCO0VBR0w7RUFDSSxpQkFBZ0IsRUFDbkI7RUFFRDtFQUNJLHFCQUFvQjtFQUNwQix1QkFBc0IsRUFDekI7RUFFRDtFQUNJLG9CQUFtQixFQUN0QiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvZWRpdG9yL2NvbXBvbmVudHMvZGlhbG9ncy9kZW1vZGlhbG9nLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiYnV0dG9uIHtcbiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICY6bWF0LWRpYWxvZy1jbG9zZSB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgIH1cbn1cblxubWF0LWRpYWxvZy1hY3Rpb25zIHtcbiAgICBtaW4td2lkdGg6IDIyMHB4O1xufVxuXG4uZGlhbG9nLXJhZGlvLWdyb3VwIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xufVxuXG4uZGlhbG9nLXJhZGlvLWJ1dHRvbiB7XG4gICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbn1cbiJdfQ== */\"","import { Component } from '@angular/core';\nimport { MatDialogRef } from '@angular/material';\nimport { DEMO_INFOS } from 'app/modules/editor/scripts/demos';\n\n@Component({\n  selector: 'app-demodialog',\n  template: `\n  <span matDialogTitle>Choose a demo</span>\n  <mat-radio-group class=\"dialog-radio-group\" [(ngModel)]=\"this.selectedDemoInfo\">\n    <mat-radio-button class=\"dialog-radio-button\"\n      *ngFor=\"let demoInfo of this.demoInfos\" [value]=\"demoInfo\">\n      {{ demoInfo.title }}\n    </mat-radio-button>\n  </mat-radio-group>\n  <mat-dialog-actions fxLayout=\"row\">\n    <!-- The ordering here matters (it ensures that 'OK' gets focus first). -->\n    <span fxFlex></span>\n    <button fxFlexOrder=\"2\" mat-button (click)=\"this.dialogRef.close(this.selectedDemoInfo)\">OK</button>\n    <button fxFlexOrder=\"1\" mat-button matDialogClose>Cancel</button>\n  </mat-dialog-actions>`,\n  styleUrls: ['./demodialog.component.scss'],\n})\nexport class DemoDialogComponent {\n  readonly demoInfos = DEMO_INFOS;\n  selectedDemoInfo = DEMO_INFOS[0];\n\n  constructor(readonly dialogRef: MatDialogRef<DemoDialogComponent>) {}\n}\n","import { Injectable } from '@angular/core';\nimport { MatDialog, MatDialogConfig } from '@angular/material';\nimport { ConfirmDialogComponent } from 'app/modules/editor/components/dialogs/confirmdialog.component';\nimport { DemoDialogComponent } from 'app/modules/editor/components/dialogs/demodialog.component';\nimport {\n  DropFilesAction,\n  DropFilesDialogComponent,\n} from 'app/modules/editor/components/dialogs/dropfilesdialog.component';\nimport { DemoInfo } from 'app/modules/editor/scripts/demos';\nimport { Observable } from 'rxjs';\n\n@Injectable({ providedIn: 'root' })\nexport class DialogService {\n  constructor(private readonly dialog: MatDialog) {}\n\n  confirm(title: string, message: string): Observable<boolean> {\n    const config = new MatDialogConfig();\n    config.data = { title, message };\n    return this.dialog.open(ConfirmDialogComponent, config).afterClosed();\n  }\n\n  pickDemo(): Observable<DemoInfo> {\n    return this.dialog.open(DemoDialogComponent, new MatDialogConfig()).afterClosed();\n  }\n\n  dropFiles(): Observable<DropFilesAction> {\n    return this.dialog.open(DropFilesDialogComponent, new MatDialogConfig()).afterClosed();\n  }\n}\n","module.exports = \"button {\\n  text-transform: uppercase; }\\n  button:mat-dialog-close {\\n    margin-right: 8px; }\\n  mat-dialog-actions {\\n  min-width: 220px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL2RpYWxvZ3MvZHJvcGZpbGVzZGlhbG9nLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksMEJBQXlCLEVBSTVCO0VBTEQ7SUFHUSxrQkFBaUIsRUFDcEI7RUFHTDtFQUNJLGlCQUFnQixFQUNuQiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvZWRpdG9yL2NvbXBvbmVudHMvZGlhbG9ncy9kcm9wZmlsZXNkaWFsb2cuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJidXR0b24ge1xuICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgJjptYXQtZGlhbG9nLWNsb3NlIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgfVxufVxuXG5tYXQtZGlhbG9nLWFjdGlvbnMge1xuICAgIG1pbi13aWR0aDogMjIwcHg7XG59XG4iXX0= */\"","import { Component } from '@angular/core';\nimport { MatDialogRef } from '@angular/material';\n\nexport enum DropFilesAction {\n  AddToWorkspace = 1,\n  ResetWorkspace,\n}\n\n@Component({\n  selector: 'app-dropfilesdialog',\n  template: `\n  <span matDialogTitle>Start from scratch?</span>\n  <mat-dialog-content>\n    <p>Do you want to start from scratch or add the imported layers to the existing animation?</p>\n  </mat-dialog-content>\n  <mat-dialog-actions fxLayout=\"row\">\n    <!-- The ordering here matters (it ensures that 'OK' gets focus first). -->\n    <span fxFlex></span>\n    <button fxFlexOrder=\"3\" mat-button (click)=\"dialogRef.close(this.ADD_TO_WORKSPACE)\">Add layers</button>\n    <button fxFlexOrder=\"2\" mat-button (click)=\"dialogRef.close(this.RESET_WORKSPACE)\">Start from scratch</button>\n    <button fxFlexOrder=\"1\" mat-button matDialogClose>Cancel</button>\n  </mat-dialog-actions>`,\n  styleUrls: ['./dropfilesdialog.component.scss'],\n})\nexport class DropFilesDialogComponent {\n  readonly ADD_TO_WORKSPACE = DropFilesAction.AddToWorkspace;\n  readonly RESET_WORKSPACE = DropFilesAction.ResetWorkspace;\n\n  constructor(readonly dialogRef: MatDialogRef<DropFilesDialogComponent>) {}\n}\n","export { ConfirmDialogComponent } from './confirmdialog.component';\nexport { DemoDialogComponent } from './demodialog.component';\nexport { DropFilesDialogComponent, DropFilesAction } from './dropfilesdialog.component';\nexport { DialogService } from './dialog.service';\n","export const TIMELINE_ANIMATION_PADDING = 20; // 20px\n","export { LayerListTreeComponent } from './layerlisttree.component';\nexport { LayerTimelineComponent } from './layertimeline.component';\nexport { LayerTimelineGridDirective } from './layertimelinegrid.directive';\nexport { TimelineAnimationRowComponent } from './timelineanimationrow.component';\n","module.exports = \"<ng-container *ngIf=\\\"(this.layerModel$ | async) as model\\\">\\n  <div class=\\\"slt-layer slt-layer-type-{{ this.layer.type }}\\\"\\n    fxLayout=\\\"row\\\"\\n    fxLayoutAlign=\\\"start center\\\"\\n    [ngClass]=\\\"{\\n      'is-selected': model.isSelected,\\n      'is-hovered': model.isHovered,\\n      'is-disabled': model.isActionMode\\n    }\\\"\\n    (click)=\\\"this.onLayerClick($event, this.layer)\\\"\\n    (dblclick)=\\\"this.onLayerToggleExpanded($event, this.layer)\\\"\\n    (mousedown)=\\\"this.onLayerMouseDown($event, this.layer)\\\">\\n    <button mat-icon-button\\n      *ngIf=\\\"model.isExpandable\\\"\\n      (click)=\\\"this.onLayerToggleExpanded($event, this.layer)\\\"\\n      [disabled]=\\\"model.isActionMode\\\"\\n      matTooltip=\\\"{{ model.isExpanded ? 'Collapse layer' : 'Expand layer' }}\\\"\\n      matTooltipPosition=\\\"right\\\"\\n      matTooltipShowDelay=\\\"1000\\\">\\n      <mat-icon>{{ model.isExpanded ? 'expand_more' : 'chevron_right' }}</mat-icon>\\n    </button>\\n    <!-- Add extra 20px margin if the expand/collapse icon isn't being displayed -->\\n    <mat-icon svgIcon=\\\"{{ this.layer.type }}\\\"\\n      [style.margin-left]=\\\"model.isExpandable ? '0px' : '20px'\\\">\\n    </mat-icon>\\n    <span class=\\\"slt-layer-id-text\\\"\\n      fxFlex>\\n      {{ this.layer.name }}\\n    </span>\\n    <!-- Show overflow options. -->\\n    <mat-menu #showOverflowOptionsMenu=\\\"matMenu\\\">\\n      <button *ngIf=\\\"model.canBeConvertedToClipPath\\\"\\n        (click)=\\\"this.onConvertToClipPathClick($event, layer)\\\"\\n        mat-menu-item>\\n        Convert to clip path\\n      </button>\\n      <button *ngIf=\\\"model.canBeConvertedToPath\\\"\\n        (click)=\\\"this.onConvertToPathClick($event, layer)\\\"\\n        mat-menu-item>\\n        Convert to path\\n      </button>\\n      <button *ngIf=\\\"model.canBeFlattened\\\"\\n        (click)=\\\"this.onFlattenGroupClick($event, layer)\\\"\\n        mat-menu-item>\\n        Flatten group\\n      </button>\\n    </mat-menu>\\n    <button mat-icon-button\\n      *ngIf=\\\"model.canBeConvertedToClipPath || model.canBeConvertedToPath || model.canBeFlattened\\\"\\n      class=\\\"slt-layer-action-button slt-layer-more-actions\\\"\\n      (click)=\\\"$event.stopPropagation()\\\"\\n      [disabled]=\\\"model.isActionMode\\\"\\n      [matMenuTriggerFor]=\\\"showOverflowOptionsMenu\\\">\\n      <mat-icon>more_vert</mat-icon>\\n    </button>\\n    <!-- Visibility toggle. -->\\n    <button mat-icon-button\\n      class=\\\"slt-layer-action-button slt-layer-visibility-toggle\\\"\\n      (click)=\\\"this.onLayerToggleVisibility($event, this.layer)\\\"\\n      [disabled]=\\\"model.isActionMode\\\"\\n      matTooltip=\\\"{{ model.isVisible ? 'Hide layer' : 'Show layer' }}\\\"\\n      matTooltipPosition=\\\"below\\\"\\n      matTooltipShowDelay=\\\"1000\\\"\\n      [ngClass]=\\\"{'is-checked': model.isVisible}\\\">\\n      <mat-icon>{{ model.isVisible ? 'visibility' : 'visibility_off' }}</mat-icon>\\n    </button>\\n    <!-- Animate layer. -->\\n    <mat-menu #addTimelineBlockMenu=\\\"matMenu\\\">\\n      <button *ngFor=\\\"let propertyName of model.availablePropertyNames\\\"\\n        (click)=\\\"this.onAddTimelineBlockClick($event, layer, propertyName)\\\"\\n        mat-menu-item>\\n        {{ propertyName }}\\n      </button>\\n    </mat-menu>\\n    <button mat-icon-button\\n      *ngIf=\\\"model.availablePropertyNames.length > 0\\\"\\n      class=\\\"slt-layer-action-button\\\"\\n      (click)=\\\"$event.stopPropagation()\\\"\\n      [disabled]=\\\"model.isActionMode\\\"\\n      matTooltip=\\\"Animate this layer\\\"\\n      matTooltipPosition=\\\"below\\\"\\n      matTooltipShowDelay=\\\"1000\\\"\\n      [matMenuTriggerFor]=\\\"addTimelineBlockMenu\\\">\\n      <mat-icon svgIcon=\\\"animationblock\\\"></mat-icon>\\n    </button>\\n  </div>\\n\\n  <!-- List the property names that have been animated. -->\\n  <div class=\\\"slt-properties\\\"\\n    *ngIf=\\\"model.isExpanded && model.existingPropertyNames.length > 0\\\">\\n    <div class=\\\"slt-property\\\"\\n      fxLayout=\\\"row\\\"\\n      fxLayoutAlign=\\\"start center\\\"\\n      *ngFor=\\\"let propertyName of model.existingPropertyNames\\\">\\n      <span class=\\\"slt-property-name\\\">{{ propertyName }}</span>\\n      <button mat-icon-button\\n        class=\\\"slt-property-add-timeline-block-button\\\"\\n        (click)=\\\"this.onAddTimelineBlockClick($event, layer, propertyName)\\\"\\n        [disabled]=\\\"model.isActionMode\\\"\\n        matTooltip=\\\"Add another animation\\\"\\n        matTooltipPosition=\\\"below\\\"\\n        matTooltipShowDelay=\\\"1000\\\">\\n        <mat-icon>add</mat-icon>\\n      </button>\\n    </div>\\n  </div>\\n\\n  <!-- List the layer's children if it is expanded. -->\\n  <ul *ngIf=\\\"model.isExpanded && this.layer.children.length > 0\\\"\\n    class=\\\"slt-children\\\">\\n    <li *ngFor=\\\"let child of this.layer.children; trackBy: this.trackLayerFn\\\"\\n      class=\\\"slt-layer-container\\\"\\n      [attr.data-layer-id]=\\\"child.id\\\">\\n      <app-layerlisttree [layer]=\\\"child\\\"\\n        (layerMouseDown)=\\\"this.onLayerMouseDown($event.event, $event.layer)\\\"\\n        (layerClick)=\\\"this.onLayerClick($event.event, $event.layer)\\\"\\n        (layerToggleExpanded)=\\\"this.onLayerToggleExpanded($event.event, $event.layer)\\\"\\n        (layerToggleVisibility)=\\\"this.onLayerToggleVisibility($event.event, $event.layer)\\\"\\n        (addTimelineBlockClick)=\\\"this.onAddTimelineBlockClick($event.event, $event.layer, $event.propertyName)\\\"\\n        (convertToClipPathClick)=\\\"this.onConvertToClipPathClick($event.event, $event.layer)\\\"\\n        (convertToPathClick)=\\\"this.onConvertToPathClick($event.event, $event.layer)\\\"\\n        (flattenGroupClick)=\\\"this.onFlattenGroupClick($event.event, $event.layer)\\\">\\n      </app-layerlisttree>\\n    </li>\\n  </ul>\\n</ng-container>\"","module.exports = \":host {\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none; }\\n\\nul {\\n  margin: 0;\\n  padding: 0; }\\n\\nli {\\n  list-style: none; }\\n\\n.slt-layer {\\n  box-sizing: border-box;\\n  height: 20px;\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  padding: 2px;\\n  font-size: 12px;\\n  cursor: pointer;\\n  outline: none;\\n  border-radius: 2px 0 0 2px; }\\n\\n.slt-layer.is-selected {\\n    box-shadow: none; }\\n\\n.slt-layer.is-disabled {\\n    cursor: default; }\\n\\n.slt-layer span.slt-layer-id-text {\\n    flex: 1 1 0;\\n    min-width: 0;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    margin-left: 4px; }\\n\\n.slt-layer mat-icon {\\n    width: 16px;\\n    height: 16px;\\n    font-size: 16px; }\\n\\n.slt-layer button {\\n    line-height: 16px;\\n    height: 20px;\\n    width: 20px;\\n    min-height: 20px; }\\n\\n.slt-layer button[mat-icon-button] mat-icon {\\n      line-height: normal;\\n      vertical-align: top; }\\n\\n.slt-layer-type-group,\\n.slt-layer-type-vector {\\n  font-weight: 500; }\\n\\n.slt-children {\\n  padding: 0;\\n  margin: 0 0 0 20px; }\\n\\n.slt-layer:hover .slt-layer-action-button[disabled].is-checked {\\n  opacity: 0; }\\n\\n.slt-layer:hover .slt-layer-action-button:not([disabled]) {\\n  opacity: 1; }\\n\\n.slt-layer.is-selected .slt-layer-action-button {\\n  opacity: 1; }\\n\\n.slt-layer-expanded-toggle {\\n  margin: 0;\\n  padding: 2px;\\n  height: 20px;\\n  width: 20px;\\n  line-height: 16px;\\n  min-height: 20px;\\n  visibility: hidden; }\\n\\n.slt-layer-expanded-toggle mat-icon {\\n    vertical-align: top; }\\n\\n.slt-layer-expanded-toggle.is-visible {\\n    visibility: visible; }\\n\\n.slt-layer-id {\\n  flex: 1 1 0;\\n  min-width: 0;\\n  overflow: hidden;\\n  text-overflow: ellipsis; }\\n\\n.slt-layer-action-button {\\n  margin: 0;\\n  padding: 2px;\\n  height: 20px;\\n  width: 20px;\\n  line-height: 16px;\\n  min-height: 20px;\\n  opacity: 0.2; }\\n\\n.slt-layer-action-button mat-icon {\\n    vertical-align: top; }\\n\\n.slt-layer-action-button[disabled] {\\n    opacity: 0; }\\n\\nmat-menu {\\n  display: flex; }\\n\\n.slt-layer-visibility-toggle.is-checked {\\n  opacity: 0; }\\n\\n.slt-layer-visibility-toggle:not(.is-checked) {\\n  opacity: 0.7; }\\n\\n.slt-layer-more-actions {\\n  opacity: 0; }\\n\\n.slt-layer-type-group {\\n  font-weight: 500; }\\n\\n.slt-properties {\\n  margin-top: 4px;\\n  margin-bottom: 4px;\\n  margin-left: 40px;\\n  margin-right: -2px;\\n  padding-right: 2px;\\n  border-radius: 2px; }\\n\\n.slt-property {\\n  padding-left: 8px;\\n  font-size: 12px; }\\n\\n.slt-property .slt-property-name {\\n    flex: 1 1 0;\\n    min-width: 0;\\n    overflow: hidden;\\n    text-overflow: ellipsis; }\\n\\n.slt-property button {\\n    margin: 2px;\\n    padding: 2px;\\n    line-height: 16px;\\n    height: 20px;\\n    width: 20px;\\n    min-height: 20px; }\\n\\n.slt-property button[mat-icon-button] mat-icon {\\n      width: 16px;\\n      height: 16px;\\n      font-size: 16px;\\n      line-height: normal;\\n      vertical-align: top; }\\n\\n.slt-layers-list-drag-indicator {\\n  position: absolute;\\n  height: 2px;\\n  left: 0;\\n  right: 0;\\n  margin-top: -1px;\\n  pointer-events: none; }\\n\\n.slt-layers-list-drag-indicator::before {\\n    position: absolute;\\n    content: '';\\n    left: -4px;\\n    top: -3px;\\n    height: 8px;\\n    width: 8px;\\n    border-radius: 50%; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL2xheWVydGltZWxpbmUvbGF5ZXJsaXN0dHJlZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLDBCQUFpQjtLQUFqQix1QkFBaUI7TUFBakIsc0JBQWlCO1VBQWpCLGtCQUFpQixFQUNsQjs7QUFFRDtFQUNFLFVBQVM7RUFDVCxXQUFVLEVBQ1g7O0FBRUQ7RUFDRSxpQkFBZ0IsRUFDakI7O0FBRUQ7RUFDRSx1QkFBc0I7RUFDdEIsYUFBWTtFQUNaLGNBQWE7RUFDYixvQkFBbUI7RUFDbkIsb0JBQW1CO0VBQ25CLGFBQVk7RUFDWixnQkFBZTtFQUNmLGdCQUFlO0VBQ2YsY0FBYTtFQUNiLDJCQUEwQixFQStCM0I7O0FBekNEO0lBWUksaUJBQWdCLEVBQ2pCOztBQWJIO0lBZUksZ0JBQWUsRUFDaEI7O0FBaEJIO0lBa0JJLFlBQVc7SUFDWCxhQUFZO0lBQ1osaUJBQWdCO0lBQ2hCLHdCQUF1QjtJQUN2QixpQkFBZ0IsRUFDakI7O0FBdkJIO0lBeUJJLFlBQVc7SUFDWCxhQUFZO0lBQ1osZ0JBQWUsRUFDaEI7O0FBNUJIO0lBOEJJLGtCQUFpQjtJQUNqQixhQUFZO0lBQ1osWUFBVztJQUNYLGlCQUFnQixFQU9qQjs7QUF4Q0g7TUFvQ1Esb0JBQW1CO01BQ25CLG9CQUFtQixFQUNwQjs7QUFLUDs7RUFFRSxpQkFBZ0IsRUFDakI7O0FBRUQ7RUFDRSxXQUFVO0VBQ1YsbUJBQWtCLEVBQ25COztBQWNEO0VBR00sV0FBVSxFQUNYOztBQUpMO0VBTU0sV0FBVSxFQUNYOztBQUlMO0VBRUksV0FBVSxFQUNYOztBQUdIO0VBNUJFLFVBQVM7RUFDVCxhQUFZO0VBQ1osYUFBWTtFQUNaLFlBQVc7RUFDWCxrQkFBaUI7RUFDakIsaUJBQWdCO0VBeUJoQixtQkFBa0IsRUFJbkI7O0FBNUJDO0lBQ0Usb0JBQW1CLEVBQ3BCOztBQW9CSDtJQUlJLG9CQUFtQixFQUNwQjs7QUFHSDtFQUNFLFlBQVc7RUFDWCxhQUFZO0VBQ1osaUJBQWdCO0VBQ2hCLHdCQUF1QixFQUN4Qjs7QUFFRDtFQTNDRSxVQUFTO0VBQ1QsYUFBWTtFQUNaLGFBQVk7RUFDWixZQUFXO0VBQ1gsa0JBQWlCO0VBQ2pCLGlCQUFnQjtFQXdDaEIsYUFBWSxFQUliOztBQTNDQztJQUNFLG9CQUFtQixFQUNwQjs7QUFtQ0g7SUFJSSxXQUFVLEVBQ1g7O0FBR0g7RUFDRSxjQUFhLEVBQ2Q7O0FBRUQ7RUFFSSxXQUFVLEVBQ1g7O0FBSEg7RUFLSSxhQUFZLEVBQ2I7O0FBR0g7RUFDRSxXQUFVLEVBQ1g7O0FBRUQ7RUFDRSxpQkFBZ0IsRUFDakI7O0FBRUQ7RUFDRSxnQkFBZTtFQUNmLG1CQUFrQjtFQUNsQixrQkFBaUI7RUFDakIsbUJBQWtCO0VBQ2xCLG1CQUFrQjtFQUNsQixtQkFBa0IsRUFDbkI7O0FBRUQ7RUFDRSxrQkFBaUI7RUFDakIsZ0JBQWUsRUF3QmhCOztBQTFCRDtJQUlJLFlBQVc7SUFDWCxhQUFZO0lBQ1osaUJBQWdCO0lBQ2hCLHdCQUF1QixFQUN4Qjs7QUFSSDtJQVVJLFlBQVc7SUFDWCxhQUFZO0lBQ1osa0JBQWlCO0lBQ2pCLGFBQVk7SUFDWixZQUFXO0lBQ1gsaUJBQWdCLEVBVWpCOztBQXpCSDtNQWtCUSxZQUFXO01BQ1gsYUFBWTtNQUNaLGdCQUFlO01BQ2Ysb0JBQW1CO01BQ25CLG9CQUFtQixFQUNwQjs7QUFLUDtFQUNFLG1CQUFrQjtFQUNsQixZQUFXO0VBQ1gsUUFBTztFQUNQLFNBQVE7RUFDUixpQkFBZ0I7RUFDaEIscUJBQW9CLEVBVXJCOztBQWhCRDtJQVFJLG1CQUFrQjtJQUNsQixZQUFXO0lBQ1gsV0FBVTtJQUNWLFVBQVM7SUFDVCxZQUFXO0lBQ1gsV0FBVTtJQUNWLG1CQUFrQixFQUNuQiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvZWRpdG9yL2NvbXBvbmVudHMvbGF5ZXJ0aW1lbGluZS9sYXllcmxpc3R0cmVlLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbn1cblxudWwge1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG59XG5cbmxpIHtcbiAgbGlzdC1zdHlsZTogbm9uZTtcbn1cblxuLnNsdC1sYXllciB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGhlaWdodDogMjBweDtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMnB4O1xuICBmb250LXNpemU6IDEycHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgb3V0bGluZTogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogMnB4IDAgMCAycHg7XG4gICYuaXMtc2VsZWN0ZWQge1xuICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gIH1cbiAgJi5pcy1kaXNhYmxlZCB7XG4gICAgY3Vyc29yOiBkZWZhdWx0O1xuICB9XG4gIHNwYW4uc2x0LWxheWVyLWlkLXRleHQge1xuICAgIGZsZXg6IDEgMSAwO1xuICAgIG1pbi13aWR0aDogMDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIG1hcmdpbi1sZWZ0OiA0cHg7XG4gIH1cbiAgbWF0LWljb24ge1xuICAgIHdpZHRoOiAxNnB4O1xuICAgIGhlaWdodDogMTZweDtcbiAgICBmb250LXNpemU6IDE2cHg7XG4gIH1cbiAgYnV0dG9uIHtcbiAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgbWluLWhlaWdodDogMjBweDtcbiAgICAmW21hdC1pY29uLWJ1dHRvbl0ge1xuICAgICAgbWF0LWljb24ge1xuICAgICAgICBsaW5lLWhlaWdodDogbm9ybWFsO1xuICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4uc2x0LWxheWVyLXR5cGUtZ3JvdXAsXG4uc2x0LWxheWVyLXR5cGUtdmVjdG9yIHtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbn1cblxuLnNsdC1jaGlsZHJlbiB7XG4gIHBhZGRpbmc6IDA7XG4gIG1hcmdpbjogMCAwIDAgMjBweDtcbn1cblxuQG1peGluIGxheWVyLWxpc3QtYnV0dG9uIHtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAycHg7XG4gIGhlaWdodDogMjBweDtcbiAgd2lkdGg6IDIwcHg7XG4gIGxpbmUtaGVpZ2h0OiAxNnB4O1xuICBtaW4taGVpZ2h0OiAyMHB4O1xuICBtYXQtaWNvbiB7XG4gICAgdmVydGljYWwtYWxpZ246IHRvcDtcbiAgfVxufVxuXG4uc2x0LWxheWVyOmhvdmVyIHtcbiAgLnNsdC1sYXllci1hY3Rpb24tYnV0dG9uIHtcbiAgICAmW2Rpc2FibGVkXS5pcy1jaGVja2VkIHtcbiAgICAgIG9wYWNpdHk6IDA7XG4gICAgfVxuICAgICY6bm90KFtkaXNhYmxlZF0pIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuICB9XG59XG5cbi5zbHQtbGF5ZXIuaXMtc2VsZWN0ZWQge1xuICAuc2x0LWxheWVyLWFjdGlvbi1idXR0b24ge1xuICAgIG9wYWNpdHk6IDE7XG4gIH1cbn1cblxuLnNsdC1sYXllci1leHBhbmRlZC10b2dnbGUge1xuICBAaW5jbHVkZSBsYXllci1saXN0LWJ1dHRvbjtcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICAmLmlzLXZpc2libGUge1xuICAgIHZpc2liaWxpdHk6IHZpc2libGU7XG4gIH1cbn1cblxuLnNsdC1sYXllci1pZCB7XG4gIGZsZXg6IDEgMSAwO1xuICBtaW4td2lkdGg6IDA7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xufVxuXG4uc2x0LWxheWVyLWFjdGlvbi1idXR0b24ge1xuICBAaW5jbHVkZSBsYXllci1saXN0LWJ1dHRvbjtcbiAgb3BhY2l0eTogMC4yO1xuICAmW2Rpc2FibGVkXSB7XG4gICAgb3BhY2l0eTogMDtcbiAgfVxufVxuXG5tYXQtbWVudSB7XG4gIGRpc3BsYXk6IGZsZXg7XG59XG5cbi5zbHQtbGF5ZXItdmlzaWJpbGl0eS10b2dnbGUge1xuICAmLmlzLWNoZWNrZWQge1xuICAgIG9wYWNpdHk6IDA7XG4gIH1cbiAgJjpub3QoLmlzLWNoZWNrZWQpIHtcbiAgICBvcGFjaXR5OiAwLjc7XG4gIH1cbn1cblxuLnNsdC1sYXllci1tb3JlLWFjdGlvbnMge1xuICBvcGFjaXR5OiAwO1xufVxuXG4uc2x0LWxheWVyLXR5cGUtZ3JvdXAge1xuICBmb250LXdlaWdodDogNTAwO1xufVxuXG4uc2x0LXByb3BlcnRpZXMge1xuICBtYXJnaW4tdG9wOiA0cHg7XG4gIG1hcmdpbi1ib3R0b206IDRweDtcbiAgbWFyZ2luLWxlZnQ6IDQwcHg7IC8vIGluZGVudCBieSBib3RoIHRoZSBpY29uICgyMHB4KSBhbmQgZXhwYW5kIHRvZ2dsZSAoMjBweClcbiAgbWFyZ2luLXJpZ2h0OiAtMnB4OyAvLyBoaWRlIGluc2V0IHNoYWRvd1xuICBwYWRkaW5nLXJpZ2h0OiAycHg7IC8vIG9mZnNldCBtYXJnaW5cbiAgYm9yZGVyLXJhZGl1czogMnB4O1xufVxuXG4uc2x0LXByb3BlcnR5IHtcbiAgcGFkZGluZy1sZWZ0OiA4cHg7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgLnNsdC1wcm9wZXJ0eS1uYW1lIHtcbiAgICBmbGV4OiAxIDEgMDtcbiAgICBtaW4td2lkdGg6IDA7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgfVxuICBidXR0b24ge1xuICAgIG1hcmdpbjogMnB4O1xuICAgIHBhZGRpbmc6IDJweDtcbiAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgbWluLWhlaWdodDogMjBweDtcbiAgICAmW21hdC1pY29uLWJ1dHRvbl0ge1xuICAgICAgbWF0LWljb24ge1xuICAgICAgICB3aWR0aDogMTZweDtcbiAgICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7XG4gICAgICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi5zbHQtbGF5ZXJzLWxpc3QtZHJhZy1pbmRpY2F0b3Ige1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGhlaWdodDogMnB4O1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgbWFyZ2luLXRvcDogLTFweDtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICY6OmJlZm9yZSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGNvbnRlbnQ6ICcnO1xuICAgIGxlZnQ6IC00cHg7XG4gICAgdG9wOiAtM3B4O1xuICAgIGhlaWdodDogOHB4O1xuICAgIHdpZHRoOiA4cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICB9XG59XG4iXX0= */\"","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { ClipPathLayer, GroupLayer, Layer, PathLayer, VectorLayer } from 'app/modules/editor/model/layers';\nimport { Animation, PathAnimationBlock } from 'app/modules/editor/model/timeline';\nimport { ModelUtil } from 'app/modules/editor/scripts/common';\nimport { ActionModeService } from 'app/modules/editor/services';\nimport { State, Store } from 'app/modules/editor/store';\nimport { getLayerListTreeState } from 'app/modules/editor/store/common/selectors';\nimport * as _ from 'lodash';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-layerlisttree',\n  templateUrl: './layerlisttree.component.html',\n  styleUrls: ['./layerlisttree.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LayerListTreeComponent implements OnInit, Callbacks {\n  layerModel$: Observable<LayerModel>;\n\n  @Input() layer: Layer;\n\n  // MouseEvents from this layer (or children layers further down the tree)\n  // are recursively handled by parent components until they reach\n  // the LayerTimelineComponent.\n  @Output() layerClick = new EventEmitter<LayerEvent>();\n  @Output() layerDoubleClick = new EventEmitter<LayerEvent>();\n  @Output() layerMouseDown = new EventEmitter<LayerEvent>();\n  @Output() layerToggleExpanded = new EventEmitter<LayerEvent>();\n  @Output() layerToggleVisibility = new EventEmitter<LayerEvent>();\n  @Output() addTimelineBlockClick = new EventEmitter<TimelineBlockEvent>();\n  @Output() convertToClipPathClick = new EventEmitter<LayerEvent>();\n  @Output() convertToPathClick = new EventEmitter<LayerEvent>();\n  @Output() flattenGroupClick = new EventEmitter<LayerEvent>();\n\n  constructor(\n    private readonly store: Store<State>,\n    private readonly actionModeService: ActionModeService,\n  ) {}\n\n  ngOnInit() {\n    this.layerModel$ = this.store.select(getLayerListTreeState).pipe(\n      map(\n        ({\n          animation,\n          selectedLayerIds,\n          collapsedLayerIds,\n          hiddenLayerIds,\n          hoveredLayerId,\n          isActionMode,\n        }) => {\n          const isExpandable = this.isLayerExpandable();\n          const availablePropertyNames = Array.from(\n            ModelUtil.getAvailablePropertyNamesForLayer(this.layer, animation),\n          );\n          const getExistingPropertyNamesFn = (layerId: string) => {\n            return _.keys(ModelUtil.getOrderedBlocksByPropertyByLayer(animation)[layerId]);\n          };\n          const existingPropertyNames = getExistingPropertyNamesFn(this.layer.id);\n          const canBeConvertedToPath = this.layer instanceof ClipPathLayer;\n          // We can't convert a path into a clip path if it has incompatible animation blocks.\n          const canBeConvertedToClipPath =\n            this.layer instanceof PathLayer &&\n            // TODO: comparing the sets of all animatable properties for each layer type would be more robust\n            !animation.blocks.some(b => !(b instanceof PathAnimationBlock));\n          const canBeFlattened =\n            this.layer instanceof GroupLayer &&\n            this.layer.children.length > 0 &&\n            // TODO: allow merging groups w/ existing blocks in some cases?\n            existingPropertyNames.length === 0 &&\n            this.layer.children.every(l => {\n              return (\n                l instanceof PathLayer ||\n                l instanceof ClipPathLayer ||\n                // TODO: allow merging groups into groups w/ existing blocks in some cases?\n                getExistingPropertyNamesFn(l.id).length === 0\n              );\n            });\n          return {\n            animation,\n            isSelected: selectedLayerIds.has(this.layer.id),\n            isHovered: hoveredLayerId === this.layer.id,\n            isExpandable,\n            isExpanded: !collapsedLayerIds.has(this.layer.id),\n            isVisible: !hiddenLayerIds.has(this.layer.id),\n            availablePropertyNames,\n            existingPropertyNames,\n            isActionMode,\n            canBeConvertedToClipPath,\n            canBeConvertedToPath,\n            canBeFlattened,\n          };\n        },\n      ),\n    );\n  }\n\n  // @Override\n  onLayerClick(event: MouseEvent, layer: Layer) {\n    event.stopPropagation();\n    if (!this.actionModeService.isActionMode()) {\n      this.layerClick.emit({ event, layer });\n    }\n  }\n\n  // @Override\n  onLayerMouseDown(event: MouseEvent, layer: Layer) {\n    if (!this.actionModeService.isActionMode()) {\n      this.layerMouseDown.emit({ event, layer });\n    }\n  }\n\n  // @Override\n  onLayerToggleExpanded(event: MouseEvent, layer: Layer) {\n    event.stopPropagation();\n    if (this.isLayerExpandable()) {\n      this.layerToggleExpanded.emit({ event, layer });\n    }\n  }\n\n  // @Override\n  onLayerToggleVisibility(event: MouseEvent, layer: Layer) {\n    event.stopPropagation();\n    if (!this.actionModeService.isActionMode()) {\n      this.layerToggleVisibility.emit({ event, layer });\n    }\n  }\n\n  // @Override\n  onAddTimelineBlockClick(event: MouseEvent, layer: Layer, propertyName: string) {\n    if (!this.actionModeService.isActionMode()) {\n      this.addTimelineBlockClick.emit({ event, layer, propertyName });\n    }\n  }\n\n  // @Override\n  onConvertToClipPathClick(event: MouseEvent, layer: Layer) {\n    if (!this.actionModeService.isActionMode()) {\n      this.convertToClipPathClick.emit({ event, layer });\n    }\n  }\n\n  // @Override\n  onConvertToPathClick(event: MouseEvent, layer: Layer) {\n    if (!this.actionModeService.isActionMode()) {\n      this.convertToPathClick.emit({ event, layer });\n    }\n  }\n\n  // @Override\n  onFlattenGroupClick(event: MouseEvent, layer: Layer) {\n    if (!this.actionModeService.isActionMode()) {\n      this.flattenGroupClick.emit({ event, layer });\n    }\n  }\n\n  // Used by *ngFor loop.\n  trackLayerFn(index: number, layer: Layer) {\n    return layer.id;\n  }\n\n  private isLayerExpandable() {\n    return this.layer instanceof VectorLayer || this.layer instanceof GroupLayer;\n  }\n}\n\nexport interface Callbacks {\n  onLayerClick(event: MouseEvent, layer: Layer): void;\n  onLayerMouseDown(event: MouseEvent, layer: Layer): void;\n  onLayerToggleExpanded(event: MouseEvent, layer: Layer): void;\n  onLayerToggleVisibility(event: MouseEvent, layer: Layer): void;\n  onAddTimelineBlockClick(event: MouseEvent, layer: Layer, propertyName: string): void;\n  onConvertToClipPathClick(event: MouseEvent, layer: Layer): void;\n  onConvertToPathClick(event: MouseEvent, layer: Layer): void;\n  onFlattenGroupClick(event: MouseEvent, layer: Layer): void;\n}\n\ninterface LayerEvent {\n  readonly event: MouseEvent;\n  readonly layer: Layer;\n}\n\ninterface TimelineBlockEvent {\n  readonly event: MouseEvent;\n  readonly layer: Layer;\n  readonly propertyName: string;\n}\n\ninterface LayerModel {\n  readonly animation: Animation;\n  readonly isSelected: boolean;\n  readonly isHovered: boolean;\n  readonly isExpandable: boolean;\n  readonly isExpanded: boolean;\n  readonly isVisible: boolean;\n  readonly availablePropertyNames: ReadonlyArray<string>;\n  readonly existingPropertyNames: ReadonlyArray<string>;\n  readonly isActionMode: boolean;\n  readonly canBeConvertedToPath: boolean;\n  readonly canBeConvertedToClipPath: boolean;\n  readonly canBeFlattened: boolean;\n}\n","module.exports = \"<ng-container *ngIf=\\\"(this.layerTimelineModel$ | async) as model\\\">\\n  <div class=\\\"studio-layer-timeline mat-elevation-z8\\\"\\n    *ngIf=\\\"(this.themeService.asObservable() | async) as theme\\\"\\n    [class.dark-to-light-base100]=\\\"!theme.isInitialPageLoad && theme.themeType === 'light'\\\"\\n    [class.light-to-dark-base100]=\\\"!theme.isInitialPageLoad && theme.themeType === 'dark'\\\">\\n    <app-splitter [edge]=\\\"'top'\\\"\\n      (split)=\\\"onTopSplitterChanged()\\\"\\n      [min]=\\\"200\\\"\\n      [persistId]=\\\"'layer-timeline'\\\">\\n    </app-splitter>\\n\\n    <div class=\\\"slt-layers mat-elevation-z2\\\"\\n      fxLayout=\\\"column\\\"\\n      [class.dark-to-light-base100]=\\\"!theme.isInitialPageLoad && theme.themeType === 'light'\\\"\\n      [class.light-to-dark-base100]=\\\"!theme.isInitialPageLoad && theme.themeType === 'dark'\\\">\\n      <app-splitter [edge]=\\\"'right'\\\"\\n        [min]=\\\"200\\\"\\n        [persistId]=\\\"'layer-list'\\\">\\n      </app-splitter>\\n\\n      <div class=\\\"slt-header mat-elevation-z2\\\"\\n        fxLayout=\\\"row\\\"\\n        fxLayoutAlign=\\\"start center\\\">\\n\\n        <!-- File menu. -->\\n        <mat-menu #fileMenu=\\\"matMenu\\\">\\n          <button mat-menu-item\\n            (click)=\\\"this.onNewWorkspaceClick()\\\">\\n            New\\n          </button>\\n          <button mat-menu-item\\n            (click)=\\\"this.onLaunchFilePickerClick($event, 'openFileButton')\\\">\\n            Open\\n            <input id=\\\"openFileButton\\\"\\n              type=\\\"file\\\"\\n              accept=\\\".shapeshifter\\\"\\n              (click)=\\\"$event.stopPropagation()\\\"\\n              (change)=\\\"this.onImportedFilesPicked($event, ($event.target || $event.srcElement).files)\\\">\\n          </button>\\n          <button mat-menu-item\\n            (click)=\\\"this.onSaveToFileClick()\\\">\\n            Save\\n          </button>\\n          <button mat-menu-item\\n            (click)=\\\"this.onLoadDemoClick()\\\">\\n            Demo\\n          </button>\\n        </mat-menu>\\n        <button class=\\\"slt-layers-menu-group-button\\\"\\n          (click)=\\\"$event.stopPropagation()\\\"\\n          [matMenuTriggerFor]=\\\"fileMenu\\\">\\n          File\\n        </button>\\n\\n        <!-- Import menu. -->\\n        <mat-menu #importMenu=\\\"matMenu\\\">\\n          <button mat-menu-item\\n            (click)=\\\"this.onLaunchFilePickerClick($event, 'addPathsFromSvgButton')\\\">\\n            SVG\\n            <input multiple\\n              id=\\\"addPathsFromSvgButton\\\"\\n              type=\\\"file\\\"\\n              accept=\\\".svg\\\"\\n              (click)=\\\"$event.stopPropagation()\\\"\\n              (change)=\\\"this.onImportedFilesPicked($event, ($event.target || $event.srcElement).files)\\\">\\n          </button>\\n          <button mat-menu-item\\n            (click)=\\\"this.onLaunchFilePickerClick($event, 'addPathsFromXmlButton')\\\">\\n            Vector Drawable\\n            <input multiple\\n              id=\\\"addPathsFromXmlButton\\\"\\n              type=\\\"file\\\"\\n              accept=\\\".xml\\\"\\n              (click)=\\\"$event.stopPropagation()\\\"\\n              (change)=\\\"this.onImportedFilesPicked($event, ($event.target || $event.srcElement).files)\\\">\\n          </button>\\n        </mat-menu>\\n        <button class=\\\"slt-layers-menu-group-button\\\"\\n          (click)=\\\"$event.stopPropagation()\\\"\\n          [ngClass]=\\\"{'is-disabled': model.isActionMode}\\\"\\n          [disabled]=\\\"model.isActionMode\\\"\\n          [matMenuTriggerFor]=\\\"importMenu\\\">\\n          Import\\n        </button>\\n\\n        <!-- Export menu. -->\\n        <mat-menu #exportMenu=\\\"matMenu\\\">\\n          <button mat-menu-item\\n            (click)=\\\"this.onExportSvgClick()\\\">\\n            SVG\\n          </button>\\n          <button mat-menu-item\\n            (click)=\\\"this.onExportVectorDrawableClick()\\\">\\n            Vector Drawable\\n          </button>\\n          <button mat-menu-item\\n            (click)=\\\"this.onExportAnimatedVectorDrawableClick()\\\">\\n            Animated Vector Drawable\\n          </button>\\n          <button mat-menu-item\\n            (click)=\\\"this.onExportSvgSpritesheetClick()\\\">\\n            SVG spritesheet\\n          </button>\\n          <!--<button mat-menu-item\\n          [disabled]=\\\"true\\\"\\n          (click)=\\\"this.onExportCssKeyframesClick()\\\">\\n          CSS keyframes\\n        </button>-->\\n        </mat-menu>\\n        <button class=\\\"slt-layers-menu-group-button\\\"\\n          (click)=\\\"$event.stopPropagation()\\\"\\n          [ngClass]=\\\"{'is-disabled': model.isActionMode}\\\"\\n          [disabled]=\\\"model.isActionMode\\\"\\n          [matMenuTriggerFor]=\\\"exportMenu\\\">\\n          Export\\n        </button>\\n\\n        <div fxFlex></div>\\n\\n        <!-- Add layer menu. -->\\n        <mat-menu #addLayerMenu=\\\"matMenu\\\">\\n          <button mat-menu-item\\n            (click)=\\\"this.onAddPathLayerClick()\\\">\\n            New path\\n          </button>\\n          <button mat-menu-item\\n            (click)=\\\"this.onAddClipPathLayerClick()\\\">\\n            New clip path\\n          </button>\\n          <button mat-menu-item\\n            (click)=\\\"this.onAddGroupLayerClick()\\\">\\n            New group layer\\n          </button>\\n        </mat-menu>\\n        <button mat-icon-button\\n          (click)=\\\"$event.stopPropagation()\\\"\\n          matTooltip=\\\"Add layer\\\"\\n          matTooltipPosition=\\\"below\\\"\\n          matTooltipShowDelay=\\\"500\\\"\\n          [disabled]=\\\"model.isActionMode\\\"\\n          [matMenuTriggerFor]=\\\"addLayerMenu\\\">\\n          <mat-icon svgIcon=\\\"addlayer\\\"></mat-icon>\\n        </button>\\n      </div>\\n\\n      <div appScrollGroup=\\\"timeline\\\"\\n        class=\\\"slt-layers-list-scroller\\\"\\n        fxFlex>\\n        <!-- Layer list. -->\\n        <div class=\\\"slt-layers-list\\\">\\n          <!-- Note the *ngFor loop is intentional here even though there is only\\n             ever one layer in the list. We use it because it allows us to recreate\\n             the component from scratch when the layer id changes (i.e. when\\n             the workspace is reset). -->\\n          <app-layerlisttree fxLayout=\\\"column\\\"\\n            class=\\\"slt-layer-container\\\"\\n            *ngFor=\\\"let vectorLayer of [model.vectorLayer]; trackBy: trackLayerFn\\\"\\n            [layer]=\\\"vectorLayer\\\"\\n            (layerClick)=\\\"this.onLayerClick($event.event, $event.layer)\\\"\\n            (layerToggleExpanded)=\\\"this.onLayerToggleExpanded($event.event, $event.layer)\\\"\\n            (layerToggleVisibility)=\\\"this.onLayerToggleVisibility($event.event, $event.layer)\\\"\\n            (layerMouseDown)=\\\"this.onLayerMouseDown($event.event, $event.layer)\\\"\\n            (addTimelineBlockClick)=\\\"this.onAddTimelineBlockClick($event.event, $event.layer, $event.propertyName)\\\"\\n            (convertToClipPathClick)=\\\"this.onConvertToClipPathClick($event.event, $event.layer)\\\"\\n            (convertToPathClick)=\\\"this.onConvertToPathClick($event.event, $event.layer)\\\"\\n            (flattenGroupClick)=\\\"this.onFlattenGroupClick($event.event, $event.layer)\\\">\\n          </app-layerlisttree>\\n        </div>\\n        <div *ngIf=\\\"(this.dragIndicatorObservable | async) as dragData\\\"\\n          class=\\\"slt-layers-list-drag-indicator\\\"\\n          [ngStyle]=\\\"{\\n            'display': dragData.isVisible ? 'block' : 'none',\\n            'left': dragData.left + 'px',\\n            'top': dragData.top + 'px'\\n          }\\\">\\n        </div>\\n        <div class=\\\"slt-layers-empty\\\"\\n          *ngIf=\\\"model.vectorLayer.children.length === 0 && model.animation.blocks.length === 0\\\">\\n          To get started, drag + drop an SVG file here\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- Animation timeline. -->\\n    <div #timeline\\n      class=\\\"slt-timeline\\\"\\n      (mousewheel)=\\\"this.onWheelEvent($event)\\\">\\n      <div #timelineAnimation\\n        *ngIf=\\\"{ horizZoom: (this.horizZoomObservable | async) } as animationData\\\"\\n        class=\\\"slt-timeline-animation is-active\\\"\\n        [ngStyle]=\\\"{'width': (model.animation.duration * animationData.horizZoom + 40) + 'px'}\\\"\\n        fxLayout=\\\"column\\\">\\n        <div class=\\\"slt-header mat-elevation-z2\\\">\\n          <div fxLayout=\\\"row\\\"\\n            fxLayoutAlign=\\\"start center\\\">\\n            <div class=\\\"slt-timeline-animation-meta\\\"\\n              [class.is-disabled]=\\\"model.isActionMode\\\"\\n              [class.is-selected]=\\\"model.isAnimationSelected\\\"\\n              (click)=\\\"this.onAnimationHeaderTextClick($event)\\\">\\n              <span class=\\\"slt-timeline-animation-name\\\"\\n                [class.is-disabled]=\\\"model.isActionMode\\\">\\n                {{ model.animation.name }}\\n              </span>\\n              <span class=\\\"slt-timeline-animation-duration\\\"\\n                [class.is-disabled]=\\\"model.isActionMode\\\">\\n                {{ model.animation.duration }}ms\\n              </span>\\n            </div>\\n            <button mat-icon-button\\n              (click)=\\\"this.onZoomToFitClick($event)\\\"\\n              matTooltip=\\\"Zoom to fit ({{ this.shortcutService.getZoomToFitText() }})\\\"\\n              matTooltipPosition=\\\"below\\\"\\n              matTooltipShowDelay=\\\"500\\\">\\n              <mat-icon>zoom_out_map</mat-icon>\\n            </button>\\n          </div>\\n          <canvas appLayerTimelineGrid\\n            class=\\\"slt-timeline-header-grid\\\"\\n            [class.dark-to-light-base100]=\\\"!theme.isInitialPageLoad && theme.themeType === 'light'\\\"\\n            [class.light-to-dark-base100]=\\\"!theme.isInitialPageLoad && theme.themeType === 'dark'\\\"\\n            [animation]=\\\"model.animation\\\"\\n            [horizZoom]=\\\"animationData.horizZoom\\\"\\n            [isHeader]=\\\"true\\\"\\n            (scrub)=\\\"this.onTimelineHeaderScrub($event)\\\">\\n          </canvas>\\n        </div>\\n        <canvas appLayerTimelineGrid\\n          class=\\\"slt-timeline-grid\\\"\\n          [isHeader]=\\\"false\\\"\\n          [animation]=\\\"model.animation\\\"\\n          [horizZoom]=\\\"animationData.horizZoom\\\">\\n        </canvas>\\n\\n        <div appScrollGroup=\\\"timeline\\\"\\n          class=\\\"slt-timeline-animation-scroller\\\">\\n          <div class=\\\"slt-timeline-animation-rows\\\">\\n            <!-- Note the *ngFor loop is intentional here even though there is only\\n               ever one layer in the list. We use it because it allows us to recreate\\n               the component from scratch when the layer id changes (i.e. when\\n               the workspace is reset). -->\\n            <app-timelineanimationrow *ngFor=\\\"let vl of [model.vectorLayer]; trackBy: trackLayerFn\\\"\\n              [layer]=\\\"vl\\\"\\n              (timelineBlockMouseDown)=\\\"this.onTimelineBlockMouseDown($event.event, $event.block)\\\"\\n              (timelineBlockClick)=\\\"this.onTimelineBlockClick($event.event, $event.block)\\\"\\n              (timelineBlockDoubleClick)=\\\"this.onTimelineBlockDoubleClick($event.event, $event.block)\\\">\\n            </app-timelineanimationrow>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</ng-container>\"","module.exports = \".studio-layer-timeline {\\n  height: 300px;\\n  display: flex;\\n  flex-direction: row;\\n  flex-shrink: 0;\\n  overflow: hidden;\\n  z-index: 1;\\n  position: relative; }\\n  .studio-layer-timeline ul {\\n    margin: 0;\\n    padding: 0; }\\n  .studio-layer-timeline li {\\n    list-style: none; }\\n  .studio-layer-timeline .slt-layers-list {\\n    z-index: 2; }\\n  .studio-layer-timeline .slt-layer-container {\\n    padding-top: 8px; }\\n  .studio-layer-timeline .slt-layer {\\n    box-sizing: border-box;\\n    line-height: 20px;\\n    height: 20px; }\\n  .studio-layer-timeline .slt-layers {\\n    width: 300px;\\n    position: relative;\\n    z-index: 3;\\n    -webkit-user-select: none;\\n       -moz-user-select: none;\\n        -ms-user-select: none;\\n            user-select: none;\\n    flex: 0 0 auto; }\\n  .studio-layer-timeline .slt-layers mat-icon {\\n      width: 16px;\\n      height: 16px;\\n      font-size: 16px; }\\n  .studio-layer-timeline .slt-layers .slt-layers-list-scroller {\\n      position: relative;\\n      overflow-x: hidden;\\n      overflow-y: auto;\\n      -ms-overflow-style: none; }\\n  .studio-layer-timeline .slt-layers .slt-layers-list-scroller::-webkit-scrollbar {\\n        display: none; }\\n  .studio-layer-timeline .slt-layers .slt-layers-list {\\n      padding-left: 8px; }\\n  .studio-layer-timeline .slt-layers mat-menu {\\n      display: flex; }\\n  .studio-layer-timeline .slt-layers .slt-header {\\n      padding: 0 0 0 4px;\\n      overflow: hidden; }\\n  .studio-layer-timeline .slt-layers .slt-header .slt-layers-menu-group-button {\\n        position: relative;\\n        cursor: pointer;\\n        border: 0;\\n        height: 40px;\\n        font-size: 12px;\\n        font-weight: 500;\\n        line-height: 40px;\\n        padding: 0 8px 0 8px;\\n        margin: 0;\\n        outline: 0;\\n        background-color: transparent; }\\n  .studio-layer-timeline .slt-layers .slt-header .slt-layers-menu-group-button.is-disabled {\\n          cursor: default; }\\n  .studio-layer-timeline .slt-layers .slt-header button[mat-icon-button] mat-icon {\\n        line-height: 0px; }\\n  .studio-layer-timeline .slt-layers .slt-header button[mat-icon-button][disabled] mat-icon {\\n        line-height: 0px; }\\n  .studio-layer-timeline .slt-layers .slt-layers-list-drag-indicator {\\n      position: absolute;\\n      height: 2px;\\n      left: 0;\\n      right: 0;\\n      margin-top: -1px;\\n      pointer-events: none; }\\n  .studio-layer-timeline .slt-layers .slt-layers-list-drag-indicator::before {\\n        position: absolute;\\n        content: '';\\n        left: -4px;\\n        top: -3px;\\n        height: 8px;\\n        width: 8px;\\n        border-radius: 50%; }\\n  .studio-layer-timeline .slt-layers-empty {\\n    padding: 32px;\\n    text-align: center;\\n    font-size: 14px;\\n    line-height: 20px; }\\n  .studio-layer-timeline .slt-timeline {\\n    overflow-x: auto;\\n    overflow-y: hidden;\\n    flex: 1;\\n    -webkit-user-select: none;\\n       -moz-user-select: none;\\n        -ms-user-select: none;\\n            user-select: none;\\n    cursor: default;\\n    display: flex;\\n    flex-direction: row;\\n    align-items: stretch; }\\n  .studio-layer-timeline .slt-timeline .slt-timeline-animation-scroller {\\n      position: relative;\\n      overflow-x: hidden;\\n      overflow-y: auto;\\n      -ms-overflow-style: none; }\\n  .studio-layer-timeline .slt-timeline .slt-timeline-animation-scroller::-webkit-scrollbar {\\n        display: none; }\\n  .studio-layer-timeline .slt-timeline .slt-timeline-animation {\\n      position: relative;\\n      margin-left: 4px;\\n      box-sizing: content-box;\\n      width: 100px;\\n      overflow: hidden;\\n      flex: 0 0 auto;\\n      opacity: 1; }\\n  .studio-layer-timeline .slt-timeline .slt-timeline-animation.is-disabled {\\n        opacity: 0.5; }\\n  .studio-layer-timeline .slt-timeline .slt-timeline-animation-rows {\\n      padding-top: 8px;\\n      padding-left: 20px;\\n      padding-right: 20px;\\n      z-index: 2; }\\n  .studio-layer-timeline .slt-timeline .slt-timeline-grid {\\n      position: absolute;\\n      left: 0;\\n      top: 0;\\n      width: 100%;\\n      height: 100%;\\n      pointer-events: none;\\n      z-index: 1; }\\n  .studio-layer-timeline .slt-timeline .slt-header {\\n      display: flex;\\n      flex-direction: column;\\n      margin: 0; }\\n  .studio-layer-timeline .slt-timeline .slt-header .slt-timeline-animation-meta {\\n        height: 16px;\\n        line-height: 16px;\\n        margin: 2px -4px;\\n        padding: 0 4px;\\n        border-radius: 2px;\\n        cursor: pointer;\\n        outline: 0;\\n        align-self: flex-start;\\n        display: flex;\\n        flex-direction: row; }\\n  .studio-layer-timeline .slt-timeline .slt-header .slt-timeline-animation-meta.is-disabled {\\n          cursor: default; }\\n  .studio-layer-timeline .slt-timeline .slt-header .slt-timeline-animation-name {\\n        margin-right: 4px;\\n        font-weight: 500; }\\n  .studio-layer-timeline .slt-timeline .slt-header .slt-timeline-header-grid {\\n        position: absolute;\\n        left: 0;\\n        top: 50%;\\n        width: 100%;\\n        height: 50%;\\n        z-index: 1;\\n        cursor: pointer; }\\n  .studio-layer-timeline .slt-timeline .slt-header mat-icon {\\n        width: 13px;\\n        height: 13px;\\n        font-size: 13px; }\\n  .studio-layer-timeline .slt-timeline .slt-header button {\\n        line-height: 16px;\\n        height: 16px;\\n        width: 16px;\\n        min-height: 16px;\\n        padding-left: 1.5px;\\n        padding-right: 1.5px;\\n        padding-top: 1px;\\n        padding-bottom: 1px;\\n        margin-left: 4px; }\\n  .studio-layer-timeline .slt-timeline .slt-header button[mat-icon-button] mat-icon {\\n          line-height: normal;\\n          vertical-align: top; }\\n  .studio-layer-timeline .slt-header {\\n    position: relative;\\n    flex: 0 0 auto;\\n    height: 40px;\\n    box-sizing: border-box;\\n    width: 100%;\\n    font-size: 12px;\\n    line-height: 40px;\\n    padding: 0 16px;\\n    z-index: 2; }\\n  button[mat-menu-item] input[type='file'] {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  opacity: 0;\\n  cursor: pointer;\\n  width: 0.1px;\\n  height: 0.1px; }\\n  button[mat-menu-item] ::-webkit-file-upload-button {\\n  cursor: pointer; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL2xheWVydGltZWxpbmUvbGF5ZXJ0aW1lbGluZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQWE7RUFDYixjQUFhO0VBQ2Isb0JBQW1CO0VBQ25CLGVBQWM7RUFDZCxpQkFBZ0I7RUFDaEIsV0FBVTtFQUNWLG1CQUFrQixFQXVObkI7RUE5TkQ7SUFXSSxVQUFTO0lBQ1QsV0FBVSxFQUNYO0VBYkg7SUFlSSxpQkFBZ0IsRUFDakI7RUFoQkg7SUFrQkksV0FBVSxFQUNYO0VBbkJIO0lBcUJJLGlCQUFnQixFQUNqQjtFQXRCSDtJQXdCSSx1QkFBc0I7SUFDdEIsa0JBQWlCO0lBQ2pCLGFBQVksRUFDYjtFQTNCSDtJQTZCSSxhQUFZO0lBQ1osbUJBQWtCO0lBQ2xCLFdBQVU7SUFDViwwQkFBaUI7T0FBakIsdUJBQWlCO1FBQWpCLHNCQUFpQjtZQUFqQixrQkFBaUI7SUFDakIsZUFBYyxFQXNFZjtFQXZHSDtNQW1DTSxZQUFXO01BQ1gsYUFBWTtNQUNaLGdCQUFlLEVBQ2hCO0VBdENMO01Bd0NNLG1CQUFrQjtNQUNsQixtQkFBa0I7TUFDbEIsaUJBQWdCO01BQ2hCLHlCQUF3QixFQUl6QjtFQS9DTDtRQTZDUSxjQUFhLEVBQ2Q7RUE5Q1A7TUFpRE0sa0JBQWlCLEVBQ2xCO0VBbERMO01Bb0RNLGNBQWEsRUFDZDtFQXJETDtNQXVETSxtQkFBa0I7TUFDbEIsaUJBQWdCLEVBNkJqQjtFQXJGTDtRQTBEUSxtQkFBa0I7UUFDbEIsZ0JBQWU7UUFDZixVQUFTO1FBQ1QsYUFyRGE7UUFzRGIsZ0JBQWU7UUFDZixpQkFBZ0I7UUFDaEIsa0JBeERhO1FBeURiLHFCQUFvQjtRQUNwQixVQUFTO1FBQ1QsV0FBVTtRQUNWLDhCQUE2QixFQUk5QjtFQXhFUDtVQXNFVSxnQkFBZSxFQUNoQjtFQXZFVDtRQTRFWSxpQkFBZ0IsRUFDakI7RUE3RVg7UUFpRlksaUJBQWdCLEVBQ2pCO0VBbEZYO01BdUZNLG1CQUFrQjtNQUNsQixZQUFXO01BQ1gsUUFBTztNQUNQLFNBQVE7TUFDUixpQkFBZ0I7TUFDaEIscUJBQW9CLEVBVXJCO0VBdEdMO1FBOEZRLG1CQUFrQjtRQUNsQixZQUFXO1FBQ1gsV0FBVTtRQUNWLFVBQVM7UUFDVCxZQUFXO1FBQ1gsV0FBVTtRQUNWLG1CQUFrQixFQUNuQjtFQXJHUDtJQXlHSSxjQUFhO0lBQ2IsbUJBQWtCO0lBQ2xCLGdCQUFlO0lBQ2Ysa0JBQWlCLEVBQ2xCO0VBN0dIO0lBK0dJLGlCQUFnQjtJQUNoQixtQkFBa0I7SUFDbEIsUUFBTztJQUNQLDBCQUFpQjtPQUFqQix1QkFBaUI7UUFBakIsc0JBQWlCO1lBQWpCLGtCQUFpQjtJQUNqQixnQkFBZTtJQUNmLGNBQWE7SUFDYixvQkFBbUI7SUFDbkIscUJBQW9CLEVBNEZyQjtFQWxOSDtNQXdITSxtQkFBa0I7TUFDbEIsbUJBQWtCO01BQ2xCLGlCQUFnQjtNQUNoQix5QkFBd0IsRUFJekI7RUEvSEw7UUE2SFEsY0FBYSxFQUNkO0VBOUhQO01BaUlNLG1CQUFrQjtNQUNsQixpQkFBZ0I7TUFDaEIsd0JBQXVCO01BQ3ZCLGFBQVk7TUFDWixpQkFBZ0I7TUFDaEIsZUFBYztNQUNkLFdBQVUsRUFJWDtFQTNJTDtRQXlJUSxhQUFZLEVBQ2I7RUExSVA7TUE2SU0saUJBQWdCO01BQ2hCLG1CQXJJMkI7TUFzSTNCLG9CQXRJMkI7TUF1STNCLFdBQVUsRUFDWDtFQWpKTDtNQW1KTSxtQkFBa0I7TUFDbEIsUUFBTztNQUNQLE9BQU07TUFDTixZQUFXO01BQ1gsYUFBWTtNQUNaLHFCQUFvQjtNQUNwQixXQUFVLEVBQ1g7RUExSkw7TUE0Sk0sY0FBYTtNQUNiLHVCQUFzQjtNQUN0QixVQUFTLEVBbURWO0VBak5MO1FBZ0tRLGFBQStCO1FBQy9CLGtCQUFvQztRQUNwQyxpQkFBZ0I7UUFDaEIsZUFBYztRQUNkLG1CQUFrQjtRQUNsQixnQkFBZTtRQUNmLFdBQVU7UUFDVix1QkFBc0I7UUFDdEIsY0FBYTtRQUNiLG9CQUFtQixFQUlwQjtFQTdLUDtVQTJLVSxnQkFBZSxFQUNoQjtFQTVLVDtRQStLUSxrQkFBaUI7UUFDakIsaUJBQWdCLEVBQ2pCO0VBakxQO1FBbUxRLG1CQUFrQjtRQUNsQixRQUFPO1FBQ1AsU0FBUTtRQUNSLFlBQVc7UUFDWCxZQUFXO1FBQ1gsV0FBVTtRQUNWLGdCQUFlLEVBQ2hCO0VBMUxQO1FBNExRLFlBQVc7UUFDWCxhQUFZO1FBQ1osZ0JBQWUsRUFDaEI7RUEvTFA7UUFpTVEsa0JBQWlCO1FBQ2pCLGFBQVk7UUFDWixZQUFXO1FBQ1gsaUJBQWdCO1FBQ2hCLG9CQUFtQjtRQUNuQixxQkFBb0I7UUFDcEIsaUJBQWdCO1FBQ2hCLG9CQUFtQjtRQUNuQixpQkFBZ0IsRUFPakI7RUFoTlA7VUE0TVksb0JBQW1CO1VBQ25CLG9CQUFtQixFQUNwQjtFQTlNWDtJQW9OSSxtQkFBa0I7SUFDbEIsZUFBYztJQUNkLGFBOU1pQjtJQStNakIsdUJBQXNCO0lBQ3RCLFlBQVc7SUFDWCxnQkFBZTtJQUNmLGtCQWxOaUI7SUFtTmpCLGdCQUFlO0lBQ2YsV0FBVSxFQUNYO0VBR0g7RUFHTSxtQkFBa0I7RUFDbEIsUUFBTztFQUNQLE9BQU07RUFDTixTQUFRO0VBQ1IsVUFBUztFQUNULFdBQVU7RUFDVixnQkFBZTtFQUNmLGFBQVk7RUFDWixjQUFhLEVBQ2Q7RUFaTDtFQWNNLGdCQUFlLEVBQ2hCIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9lZGl0b3IvY29tcG9uZW50cy9sYXllcnRpbWVsaW5lL2xheWVydGltZWxpbmUuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuc3R1ZGlvLWxheWVyLXRpbWVsaW5lIHtcbiAgaGVpZ2h0OiAzMDBweDtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgZmxleC1zaHJpbms6IDA7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHotaW5kZXg6IDE7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgJGhlYWRlckhlaWdodDogNDBweDtcbiAgJHRpbWVsaW5lQW5pbWF0aW9uUGFkZGluZzogMjBweDtcbiAgdWwge1xuICAgIG1hcmdpbjogMDtcbiAgICBwYWRkaW5nOiAwO1xuICB9XG4gIGxpIHtcbiAgICBsaXN0LXN0eWxlOiBub25lO1xuICB9XG4gIC5zbHQtbGF5ZXJzLWxpc3Qge1xuICAgIHotaW5kZXg6IDI7XG4gIH1cbiAgLnNsdC1sYXllci1jb250YWluZXIge1xuICAgIHBhZGRpbmctdG9wOiA4cHg7XG4gIH1cbiAgLnNsdC1sYXllciB7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBsaW5lLWhlaWdodDogMjBweDtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gIH1cbiAgLnNsdC1sYXllcnMge1xuICAgIHdpZHRoOiAzMDBweDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgei1pbmRleDogMztcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICBmbGV4OiAwIDAgYXV0bztcbiAgICBtYXQtaWNvbiB7XG4gICAgICB3aWR0aDogMTZweDtcbiAgICAgIGhlaWdodDogMTZweDtcbiAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICB9XG4gICAgLnNsdC1sYXllcnMtbGlzdC1zY3JvbGxlciB7XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICBvdmVyZmxvdy14OiBoaWRkZW47XG4gICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgLW1zLW92ZXJmbG93LXN0eWxlOiBub25lO1xuICAgICAgJjo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuICAgIH1cbiAgICAuc2x0LWxheWVycy1saXN0IHtcbiAgICAgIHBhZGRpbmctbGVmdDogOHB4O1xuICAgIH1cbiAgICBtYXQtbWVudSB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cbiAgICAuc2x0LWhlYWRlciB7XG4gICAgICBwYWRkaW5nOiAwIDAgMCA0cHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgLnNsdC1sYXllcnMtbWVudS1ncm91cC1idXR0b24ge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgYm9yZGVyOiAwO1xuICAgICAgICBoZWlnaHQ6ICRoZWFkZXJIZWlnaHQ7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgbGluZS1oZWlnaHQ6ICRoZWFkZXJIZWlnaHQ7XG4gICAgICAgIHBhZGRpbmc6IDAgOHB4IDAgOHB4O1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIG91dGxpbmU6IDA7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAmLmlzLWRpc2FibGVkIHtcbiAgICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJ1dHRvbiB7XG4gICAgICAgICZbbWF0LWljb24tYnV0dG9uXSB7XG4gICAgICAgICAgbWF0LWljb24ge1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDBweDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJlttYXQtaWNvbi1idXR0b25dW2Rpc2FibGVkXSB7XG4gICAgICAgICAgbWF0LWljb24ge1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDBweDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLnNsdC1sYXllcnMtbGlzdC1kcmFnLWluZGljYXRvciB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBoZWlnaHQ6IDJweDtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICByaWdodDogMDtcbiAgICAgIG1hcmdpbi10b3A6IC0xcHg7XG4gICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICY6OmJlZm9yZSB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgY29udGVudDogJyc7XG4gICAgICAgIGxlZnQ6IC00cHg7XG4gICAgICAgIHRvcDogLTNweDtcbiAgICAgICAgaGVpZ2h0OiA4cHg7XG4gICAgICAgIHdpZHRoOiA4cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLnNsdC1sYXllcnMtZW1wdHkge1xuICAgIHBhZGRpbmc6IDMycHg7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBsaW5lLWhlaWdodDogMjBweDtcbiAgfVxuICAuc2x0LXRpbWVsaW5lIHtcbiAgICBvdmVyZmxvdy14OiBhdXRvO1xuICAgIG92ZXJmbG93LXk6IGhpZGRlbjtcbiAgICBmbGV4OiAxO1xuICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIGN1cnNvcjogZGVmYXVsdDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG4gICAgLnNsdC10aW1lbGluZS1hbmltYXRpb24tc2Nyb2xsZXIge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgb3ZlcmZsb3cteDogaGlkZGVuO1xuICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgIC1tcy1vdmVyZmxvdy1zdHlsZTogbm9uZTtcbiAgICAgICY6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLnNsdC10aW1lbGluZS1hbmltYXRpb24ge1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgbWFyZ2luLWxlZnQ6IDRweDtcbiAgICAgIGJveC1zaXppbmc6IGNvbnRlbnQtYm94O1xuICAgICAgd2lkdGg6IDEwMHB4O1xuICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIGZsZXg6IDAgMCBhdXRvO1xuICAgICAgb3BhY2l0eTogMTtcbiAgICAgICYuaXMtZGlzYWJsZWQge1xuICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICB9XG4gICAgfVxuICAgIC5zbHQtdGltZWxpbmUtYW5pbWF0aW9uLXJvd3Mge1xuICAgICAgcGFkZGluZy10b3A6IDhweDtcbiAgICAgIHBhZGRpbmctbGVmdDogJHRpbWVsaW5lQW5pbWF0aW9uUGFkZGluZztcbiAgICAgIHBhZGRpbmctcmlnaHQ6ICR0aW1lbGluZUFuaW1hdGlvblBhZGRpbmc7XG4gICAgICB6LWluZGV4OiAyO1xuICAgIH1cbiAgICAuc2x0LXRpbWVsaW5lLWdyaWQge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgbGVmdDogMDtcbiAgICAgIHRvcDogMDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICB6LWluZGV4OiAxO1xuICAgIH1cbiAgICAuc2x0LWhlYWRlciB7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIG1hcmdpbjogMDtcbiAgICAgIC5zbHQtdGltZWxpbmUtYW5pbWF0aW9uLW1ldGEge1xuICAgICAgICBoZWlnaHQ6ICRoZWFkZXJIZWlnaHQgLyAyIC0gNHB4O1xuICAgICAgICBsaW5lLWhlaWdodDogJGhlYWRlckhlaWdodCAvIDIgLSA0cHg7XG4gICAgICAgIG1hcmdpbjogMnB4IC00cHg7XG4gICAgICAgIHBhZGRpbmc6IDAgNHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgb3V0bGluZTogMDtcbiAgICAgICAgYWxpZ24tc2VsZjogZmxleC1zdGFydDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICAgICAgJi5pcy1kaXNhYmxlZCB7XG4gICAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAuc2x0LXRpbWVsaW5lLWFuaW1hdGlvbi1uYW1lIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG4gICAgICAuc2x0LXRpbWVsaW5lLWhlYWRlci1ncmlkIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogNTAlO1xuICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG4gICAgICBtYXQtaWNvbiB7XG4gICAgICAgIHdpZHRoOiAxM3B4O1xuICAgICAgICBoZWlnaHQ6IDEzcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgIH1cbiAgICAgIGJ1dHRvbiB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxNnB4O1xuICAgICAgICBoZWlnaHQ6IDE2cHg7XG4gICAgICAgIHdpZHRoOiAxNnB4O1xuICAgICAgICBtaW4taGVpZ2h0OiAxNnB4O1xuICAgICAgICBwYWRkaW5nLWxlZnQ6IDEuNXB4O1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAxLjVweDtcbiAgICAgICAgcGFkZGluZy10b3A6IDFweDtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDFweDtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDRweDtcbiAgICAgICAgJlttYXQtaWNvbi1idXR0b25dIHtcbiAgICAgICAgICBtYXQtaWNvbiB7XG4gICAgICAgICAgICBsaW5lLWhlaWdodDogbm9ybWFsO1xuICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IHRvcDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLnNsdC1oZWFkZXIge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBmbGV4OiAwIDAgYXV0bztcbiAgICBoZWlnaHQ6ICRoZWFkZXJIZWlnaHQ7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgbGluZS1oZWlnaHQ6ICRoZWFkZXJIZWlnaHQ7XG4gICAgcGFkZGluZzogMCAxNnB4O1xuICAgIHotaW5kZXg6IDI7XG4gIH1cbn1cblxuYnV0dG9uIHtcbiAgJlttYXQtbWVudS1pdGVtXSB7XG4gICAgaW5wdXRbdHlwZT0nZmlsZSddIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICB0b3A6IDA7XG4gICAgICByaWdodDogMDtcbiAgICAgIGJvdHRvbTogMDtcbiAgICAgIG9wYWNpdHk6IDA7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB3aWR0aDogMC4xcHg7XG4gICAgICBoZWlnaHQ6IDAuMXB4O1xuICAgIH1cbiAgICA6Oi13ZWJraXQtZmlsZS11cGxvYWQtYnV0dG9uIHtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB9XG4gIH1cbn1cbiJdfQ== */\"","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  OnInit,\n  QueryList,\n  ViewChild,\n  ViewChildren,\n} from '@angular/core';\nimport { DialogService } from 'app/modules/editor/components/dialogs';\nimport { ProjectService } from 'app/modules/editor/components/project';\nimport { ActionMode } from 'app/modules/editor/model/actionmode';\nimport {\n  ClipPathLayer,\n  GroupLayer,\n  Layer,\n  LayerUtil,\n  PathLayer,\n  VectorLayer,\n} from 'app/modules/editor/model/layers';\nimport { Animation, AnimationBlock } from 'app/modules/editor/model/timeline';\nimport { ModelUtil } from 'app/modules/editor/scripts/common';\nimport { Dragger } from 'app/modules/editor/scripts/dragger';\nimport { IntervalTree } from 'app/modules/editor/scripts/intervals';\nimport { DestroyableMixin } from 'app/modules/editor/scripts/mixins';\nimport {\n  ActionModeService,\n  FileExportService,\n  FileImportService,\n  LayerTimelineService,\n  PlaybackService,\n  ThemeService,\n} from 'app/modules/editor/services';\nimport { Shortcut, ShortcutService } from 'app/modules/editor/services/shortcut.service';\nimport { Duration, SnackBarService } from 'app/modules/editor/services/snackbar.service';\nimport { State, Store } from 'app/modules/editor/store';\nimport { BatchAction } from 'app/modules/editor/store/batch/actions';\nimport { getLayerTimelineState, isWorkspaceDirty } from 'app/modules/editor/store/common/selectors';\nimport { SetSelectedLayers, SetVectorLayer } from 'app/modules/editor/store/layers/actions';\nimport { getVectorLayer } from 'app/modules/editor/store/layers/selectors';\nimport { ResetWorkspace } from 'app/modules/editor/store/reset/actions';\nimport { getAnimation } from 'app/modules/editor/store/timeline/selectors';\nimport { environment } from 'environments/environment';\nimport * as $ from 'jquery';\nimport * as _ from 'lodash';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { filter, first, map } from 'rxjs/operators';\n\nimport * as TimelineConsts from './constants';\nimport { Callbacks as LayerListTreeCallbacks } from './layerlisttree.component';\nimport { LayerTimelineGridDirective, ScrubEvent } from './layertimelinegrid.directive';\nimport { Callbacks as TimelineAnimationRowCallbacks } from './timelineanimationrow.component';\n\nconst IS_DEV_BUILD = !environment.production;\n\n// Distance in pixels from a snap point before snapping to the point.\nconst SNAP_PIXELS = 10;\nconst LAYER_INDENT_PIXELS = 20;\nconst MIN_BLOCK_DURATION = 10;\nconst MAX_ZOOM = 10;\nconst MIN_ZOOM = 0.01;\nconst DEFAULT_HORIZ_ZOOM = 2; // 1ms = 2px.\n\nenum MouseActions {\n  // We are dragging a block to a different location on the timeline.\n  Moving = 1,\n  // Scales all selected blocks w/o altering their initial positions.\n  ScalingUniformStart,\n  ScalingUniformEnd,\n  // Scales all blocks and also translates their initial positions.\n  ScalingTogetherStart,\n  ScalingTogetherEnd,\n}\n\ndeclare const ga: Function;\n\n@Component({\n  selector: 'app-layertimeline',\n  templateUrl: './layertimeline.component.html',\n  styleUrls: ['./layertimeline.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LayerTimelineComponent extends DestroyableMixin()\n  implements OnInit, AfterViewInit, TimelineAnimationRowCallbacks, LayerListTreeCallbacks {\n  @ViewChild('timeline')\n  private timelineRef: ElementRef;\n  private $timeline: JQuery;\n\n  @ViewChild('timelineAnimation')\n  private timelineAnimationRef: ElementRef;\n  @ViewChildren(LayerTimelineGridDirective)\n  timelineDirectives: QueryList<LayerTimelineGridDirective>;\n\n  private readonly dragIndicatorSubject = new BehaviorSubject<DragIndicatorInfo>({\n    isVisible: false,\n    left: 0,\n    top: 0,\n  });\n  dragIndicatorObservable = this.dragIndicatorSubject.asObservable();\n  private readonly horizZoomSubject = new BehaviorSubject<number>(DEFAULT_HORIZ_ZOOM);\n  horizZoomObservable = this.horizZoomSubject.asObservable();\n  private currentTime_ = 0;\n\n  private shouldSuppressRebuildSnapTimes = false;\n  private snapTimes: Map<string, number[]>;\n\n  private animation: Animation;\n  private vectorLayer: VectorLayer;\n  private selectedBlockIds: ReadonlySet<string>;\n\n  layerTimelineModel$: Observable<LayerTimelineModel>;\n\n  // Mouse wheel zoom variables.\n  private $zoomStartActiveAnimation: JQuery;\n  private targetHorizZoom: number;\n  private performZoomRAF: number = undefined;\n  private endZoomTimeout: number = undefined;\n  private zoomStartTimeCursorPos: number;\n\n  constructor(\n    private readonly fileImportService: FileImportService,\n    private readonly fileExportService: FileExportService,\n    private readonly snackBarService: SnackBarService,\n    private readonly playbackService: PlaybackService,\n    private readonly store: Store<State>,\n    private readonly dialogService: DialogService,\n    private readonly projectService: ProjectService,\n    private readonly actionModeService: ActionModeService,\n    readonly shortcutService: ShortcutService,\n    private readonly layerTimelineService: LayerTimelineService,\n    readonly themeService: ThemeService,\n  ) {\n    super();\n  }\n\n  ngOnInit() {\n    let currActionMode: ActionMode;\n    this.layerTimelineModel$ = this.store.select(getLayerTimelineState).pipe(\n      map(\n        ({\n          animation,\n          vectorLayer,\n          isAnimationSelected,\n          selectedBlockIds,\n          isBeingReset,\n          isActionMode,\n          actionMode,\n          singleSelectedPathBlock,\n        }) => {\n          this.animation = animation;\n          this.rebuildSnapTimes();\n          this.vectorLayer = vectorLayer;\n          this.selectedBlockIds = selectedBlockIds;\n          if (isBeingReset) {\n            // TODO: store the 'zoom' info in the store to avoid using this isBeingReset flag\n            this.autoZoomToAnimation();\n          }\n          if (currActionMode === ActionMode.None && actionMode === ActionMode.Selection) {\n            // Move the current time to the beginning of the selected block when\n            // entering action mode.\n            this.playbackService.setCurrentTime(singleSelectedPathBlock.startTime);\n          }\n          currActionMode = actionMode;\n          return {\n            animation,\n            vectorLayer,\n            isAnimationSelected,\n            isActionMode,\n          };\n        },\n      ),\n    );\n    this.registerSubscription(\n      this.shortcutService.asObservable().subscribe(shortcut => {\n        if (shortcut === Shortcut.ZoomToFit) {\n          this.autoZoomToAnimation();\n        }\n      }),\n    );\n  }\n\n  ngAfterViewInit() {\n    this.$timeline = $(this.timelineRef.nativeElement);\n    this.registerSubscription(\n      this.playbackService.asObservable().subscribe(event => {\n        // TODO: make this reactive/avoid storing current time locally\n        this.currentTime = event.currentTime;\n      }),\n    );\n    setTimeout(() => this.autoZoomToAnimation());\n  }\n\n  private get horizZoom() {\n    return this.horizZoomSubject.getValue();\n  }\n\n  private set horizZoom(horizZoom: number) {\n    this.horizZoomSubject.next(horizZoom);\n  }\n\n  private get currentTime() {\n    return this.currentTime_;\n  }\n\n  private set currentTime(currentTime: number) {\n    this.currentTime_ = currentTime;\n    this.timelineDirectives.forEach(dir => (dir.currentTime = currentTime));\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onNewWorkspaceClick() {\n    const resetWorkspaceFn = () => {\n      ga('send', 'event', 'File', 'New');\n      this.store.dispatch(new ResetWorkspace());\n    };\n    this.store\n      .select(isWorkspaceDirty)\n      .pipe(first())\n      .subscribe(isDirty => {\n        if (isDirty && !IS_DEV_BUILD) {\n          this.dialogService\n            .confirm('Start over?', `You'll lose any unsaved changes.`)\n            .pipe(filter(result => result))\n            .subscribe(resetWorkspaceFn);\n        } else {\n          resetWorkspaceFn();\n        }\n      });\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onSaveToFileClick() {\n    ga('send', 'event', 'File', 'Save');\n    this.fileExportService.exportJSON();\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onLoadDemoClick() {\n    ga('send', 'event', 'File', 'Demo');\n    this.dialogService\n      .pickDemo()\n      .pipe(filter(demoInfo => !!demoInfo))\n      .subscribe(selectedDemoInfo => {\n        ga('send', 'event', 'Demos', 'Demo selected', selectedDemoInfo.title);\n\n        this.projectService\n          .getProject(`demos/${selectedDemoInfo.id}.shapeshifter`)\n          .then(({ vectorLayer, animation, hiddenLayerIds }) => {\n            this.store.dispatch(new ResetWorkspace(vectorLayer, animation, hiddenLayerIds));\n          })\n          .catch(error => {\n            const msg =\n              'serviceWorker' in navigator && navigator.serviceWorker.controller\n                ? 'Demo not available offline'\n                : `Couldn't fetch demo`;\n            this.snackBarService.show(msg, 'Dismiss', Duration.Long);\n            return Promise.reject(error.message || error);\n          });\n      });\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onExportSvgClick() {\n    ga('send', 'event', 'Export', 'SVG');\n    this.fileExportService.exportSvg();\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onExportVectorDrawableClick() {\n    ga('send', 'event', 'Export', 'Vector Drawable');\n    this.fileExportService.exportVectorDrawable();\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onExportAnimatedVectorDrawableClick() {\n    ga('send', 'event', 'Export', 'Animated Vector Drawable');\n    this.fileExportService.exportAnimatedVectorDrawable();\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onExportSvgSpritesheetClick() {\n    ga('send', 'event', 'Export', 'SVG Spritesheet');\n    this.fileExportService.exportSvgSpritesheet();\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onExportCssKeyframesClick() {\n    // TODO: implement this feature\n    ga('send', 'event', 'Export', 'CSS Keyframes');\n    this.fileExportService.exportCssKeyframes();\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onAnimationHeaderTextClick(event: MouseEvent) {\n    // Stop propagation to ensure that animationTimelineClick() isn't called.\n    event.stopPropagation();\n    if (!this.actionModeService.isActionMode()) {\n      const isSelected = !ShortcutService.isOsDependentModifierKey(event) && !event.shiftKey;\n      this.layerTimelineService.selectAnimation(isSelected);\n    }\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onTimelineHeaderScrub(event: ScrubEvent) {\n    let time = event.time;\n    if (!event.disableSnap) {\n      time = this.snapTime(time, false);\n    }\n    this.currentTime = time;\n    this.playbackService.setCurrentTime(time);\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onAddPathLayerClick() {\n    this.store\n      .select(getVectorLayer)\n      .pipe(first())\n      .subscribe(vl => {\n        const layer = new PathLayer({\n          name: LayerUtil.getUniqueLayerName([vl], 'path'),\n          children: [],\n          pathData: undefined,\n        });\n        this.layerTimelineService.addLayer(layer);\n      });\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onAddClipPathLayerClick() {\n    this.store\n      .select(getVectorLayer)\n      .pipe(first())\n      .subscribe(vl => {\n        const layer = new ClipPathLayer({\n          name: LayerUtil.getUniqueLayerName([vl], 'mask'),\n          children: [],\n          pathData: undefined,\n        });\n        this.layerTimelineService.addLayer(layer);\n      });\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onAddGroupLayerClick() {\n    this.store\n      .select(getVectorLayer)\n      .pipe(first())\n      .subscribe(vl => {\n        const name = LayerUtil.getUniqueLayerName([vl], 'group');\n        const layer = new GroupLayer({ name, children: [] });\n        this.layerTimelineService.addLayer(layer);\n      });\n  }\n\n  // @Override TimelineAnimationRowCallbacks\n  onTimelineBlockMouseDown(mouseDownEvent: MouseEvent, dragBlock: AnimationBlock) {\n    const animation = this.animation;\n    // TODO: this JQuery 'class' stuff may not work with view encapsulation enabled\n    const $target = $(mouseDownEvent.target);\n\n    // Some geometry and hit-testing basics.\n    const animRect = $(mouseDownEvent.target as Element)\n      .parents('.slt-property')\n      .get(0)\n      .getBoundingClientRect();\n    const xToTimeFn = (x: number) => ((x - animRect.left) / animRect.width) * animation.duration;\n    const downTime = xToTimeFn(mouseDownEvent.clientX);\n\n    // Determine the action based on where the user clicked and the modifier keys.\n    const metaKey = ShortcutService.isOsDependentModifierKey(mouseDownEvent);\n    let action = MouseActions.Moving;\n    if ($target.hasClass('slt-timeline-block-edge-end')) {\n      action =\n        mouseDownEvent.shiftKey || metaKey\n          ? MouseActions.ScalingTogetherEnd\n          : MouseActions.ScalingUniformEnd;\n    } else if ($target.hasClass('slt-timeline-block-edge-start')) {\n      action =\n        mouseDownEvent.shiftKey || metaKey\n          ? MouseActions.ScalingTogetherStart\n          : MouseActions.ScalingUniformStart;\n    }\n\n    // Start up a cache of info for each selected block, calculating the left and right\n    // bounds for each selected block, based on adjacent non-dragging blocks.\n    const blocksByPropertyByLayer = ModelUtil.getOrderedBlocksByPropertyByLayer(animation);\n\n    // Either drag all selected blocks or just the mousedown block.\n    const draggingBlocks = this.selectedBlockIds.has(dragBlock.id)\n      ? animation.blocks.filter(b => this.selectedBlockIds.has(b.id))\n      : [dragBlock];\n    const stagnantBlocks = animation.blocks.filter(block => {\n      return (\n        draggingBlocks.every(b => block.id !== b.id) &&\n        draggingBlocks.some(({ layerId, propertyName }) => {\n          return block.layerId === layerId && block.propertyName === propertyName;\n        })\n      );\n    });\n\n    interface IntervalInfo {\n      readonly blockId: string;\n      readonly layerId: string;\n      readonly propertyName: string;\n      readonly startTime: number;\n      readonly endTime: number;\n    }\n\n    const intervalTree = new IntervalTree<IntervalInfo>();\n    stagnantBlocks.forEach(b => {\n      const { id, layerId, propertyName, startTime, endTime } = b;\n      intervalTree.insert(Math.min(startTime, animation.duration), Math.max(0, endTime), {\n        blockId: id,\n        layerId,\n        propertyName,\n        startTime,\n        endTime,\n      });\n    });\n\n    interface BlockInfo {\n      readonly block: AnimationBlock;\n      readonly downStartTime: number;\n      readonly downEndTime: number;\n      readonly startBound?: number;\n      readonly endBound?: number;\n      newStartTime?: number;\n      newEndTime?: number;\n    }\n\n    const blockInfos: BlockInfo[] = draggingBlocks.map(block => {\n      const blockNeighbors = blocksByPropertyByLayer[block.layerId][block.propertyName];\n      const indexIntoNeighbors = _.findIndex(blockNeighbors, b => block.id === b.id);\n\n      // By default the block is only bound by the animation duration.\n      let startBound = 0;\n      let endBound = animation.duration;\n\n      // For each block find the left-most non-selected block and use that as\n      // the start bound.\n      if (indexIntoNeighbors > 0) {\n        for (let i = indexIntoNeighbors - 1; i >= 0; i--) {\n          const neighbor = blockNeighbors[i];\n          if (!draggingBlocks.includes(neighbor) || action === MouseActions.ScalingUniformStart) {\n            // Only be bound by neighbors not being dragged\n            // except when uniformly changing just start time.\n            startBound = neighbor.endTime;\n            break;\n          }\n        }\n      }\n\n      // For each block find the right-most non-selected block and use that as\n      // the end bound.\n      if (indexIntoNeighbors < blockNeighbors.length - 1) {\n        for (let i = indexIntoNeighbors + 1; i < blockNeighbors.length; i++) {\n          const neighbor = blockNeighbors[i];\n          if (!draggingBlocks.includes(neighbor) || action === MouseActions.ScalingUniformEnd) {\n            // Only be bound by neighbors not being dragged\n            // except when uniformly changing just end time.\n            endBound = neighbor.startTime;\n            break;\n          }\n        }\n      }\n\n      return {\n        block,\n        startBound,\n        endBound,\n        downStartTime: block.startTime,\n        downEndTime: block.endTime,\n      };\n    });\n\n    const dragBlockDownStartTime = dragBlock.startTime;\n    const dragBlockDownEndTime = dragBlock.endTime;\n\n    let minStartTime: number;\n    let maxEndTime: number;\n    if (\n      action === MouseActions.ScalingTogetherStart ||\n      action === MouseActions.ScalingTogetherEnd\n    ) {\n      minStartTime = blockInfos.reduce((t, info) => Math.min(t, info.block.startTime), Infinity);\n      maxEndTime = blockInfos.reduce((t, info) => Math.max(t, info.block.endTime), 0);\n      // Avoid divide by zero.\n      maxEndTime = Math.max(maxEndTime, minStartTime + MIN_BLOCK_DURATION);\n    }\n\n    const isOverlappingBlockFn = (info: BlockInfo, low: number, high: number) => {\n      const { layerId, propertyName } = info.block;\n      return intervalTree.intersectsWith(\n        low,\n        high,\n        d => d.layerId === layerId && d.propertyName === propertyName,\n      );\n    };\n\n    // tslint:disable-next-line: no-unused-expression\n    new Dragger({\n      direction: 'horizontal',\n      downX: mouseDownEvent.clientX,\n      downY: mouseDownEvent.clientY,\n      draggingCursor: action === MouseActions.Moving ? 'grabbing' : 'ew-resize',\n      onBeginDragFn: () => {\n        this.shouldSuppressRebuildSnapTimes = true;\n      },\n      onDropFn: () =>\n        setTimeout(() => {\n          this.shouldSuppressRebuildSnapTimes = false;\n          this.rebuildSnapTimes();\n        }, 0),\n      onDragFn: event => {\n        // Calculate the 'time delta' (the number of milliseconds the user has moved\n        // since the gesture began).\n        let timeDelta = Math.round(xToTimeFn(event.clientX) - downTime);\n        const allowSnap = !event.shiftKey && !ShortcutService.isOsDependentModifierKey(event);\n        const replacementBlocks: AnimationBlock[] = [];\n        switch (action) {\n          case MouseActions.Moving: {\n            blockInfos.forEach(info => {\n              // Snap time delta.\n              if (allowSnap && info.block.id === dragBlock.id) {\n                const newStartTime = info.downStartTime + timeDelta;\n                const newStartTimeSnapDelta = this.snapTime(newStartTime) - newStartTime;\n                const newEndTime = info.downEndTime + timeDelta;\n                const newEndTimeSnapDelta = this.snapTime(newEndTime) - newEndTime;\n                if (newStartTimeSnapDelta) {\n                  if (newEndTimeSnapDelta) {\n                    timeDelta += Math.min(newStartTimeSnapDelta, newEndTimeSnapDelta);\n                  } else {\n                    timeDelta += newStartTimeSnapDelta;\n                  }\n                } else if (newEndTimeSnapDelta) {\n                  timeDelta += newEndTimeSnapDelta;\n                }\n              }\n              // Clamp time delta to ensure it remains within the duration's bounds.\n              const min = -info.downStartTime;\n              const max = animation.duration - info.downEndTime;\n              timeDelta = _.clamp(timeDelta, min, max);\n            });\n\n            const deltas = _(blockInfos)\n              .filter(info => {\n                // For each block, check if it overlaps with any of the stagnant blocks.\n                const low = info.downStartTime + timeDelta;\n                const end = info.downEndTime + timeDelta;\n                return isOverlappingBlockFn(info, low, end);\n              })\n              .flatMap(info => {\n                const {\n                  block: { id, layerId, propertyName },\n                } = info;\n                const neighbors = blocksByPropertyByLayer[layerId][propertyName].filter(\n                  ngh => id !== ngh.id,\n                );\n                return _.flatMap(neighbors, ngh => {\n                  return [ngh.startTime - info.downEndTime, ngh.endTime - info.downStartTime];\n                });\n              })\n              .sort((a, b) => Math.abs(a - timeDelta) - Math.abs(b - timeDelta))\n              .value();\n\n            const deltaIndex = _.findIndex(deltas, delta => {\n              return blockInfos.every(info => {\n                const low = info.downStartTime + delta;\n                const high = info.downEndTime + delta;\n                if (low < 0 || high > animation.duration) {\n                  return false;\n                }\n                return !isOverlappingBlockFn(info, low, high);\n              });\n            });\n            if (deltaIndex >= 0) {\n              timeDelta = deltas[deltaIndex];\n            }\n\n            blockInfos.forEach(info => {\n              const blockDuration = info.block.endTime - info.block.startTime;\n              const block = info.block.clone();\n              block.startTime = info.downStartTime + timeDelta;\n              block.endTime = block.startTime + blockDuration;\n              replacementBlocks.push(block);\n            });\n            break;\n          }\n          case MouseActions.ScalingUniformStart: {\n            blockInfos.forEach(info => {\n              // Snap time delta.\n              if (allowSnap && info.block.id === dragBlock.id) {\n                const newStartTime = info.downStartTime + timeDelta;\n                const newStartTimeSnapDelta = this.snapTime(newStartTime) - newStartTime;\n                if (newStartTimeSnapDelta) {\n                  timeDelta += newStartTimeSnapDelta;\n                }\n              }\n              // Clamp time delta.\n              const min = info.startBound - info.downStartTime;\n              const max = info.block.endTime - MIN_BLOCK_DURATION - info.downStartTime;\n              timeDelta = _.clamp(timeDelta, min, max);\n            });\n            blockInfos.forEach(info => {\n              const block = info.block.clone();\n              block.startTime = info.downStartTime + timeDelta;\n              replacementBlocks.push(block);\n            });\n            break;\n          }\n          case MouseActions.ScalingUniformEnd: {\n            blockInfos.forEach(info => {\n              // Snap time delta.\n              if (allowSnap && info.block === dragBlock) {\n                const newEndTime = info.downEndTime + timeDelta;\n                const newEndTimeSnapDelta = this.snapTime(newEndTime) - newEndTime;\n                if (newEndTimeSnapDelta) {\n                  timeDelta += newEndTimeSnapDelta;\n                }\n              }\n              // Clamp time delta.\n              const min = info.block.startTime + MIN_BLOCK_DURATION - info.downEndTime;\n              const max = info.endBound - info.downEndTime;\n              timeDelta = _.clamp(timeDelta, min, max);\n            });\n            blockInfos.forEach(info => {\n              const block = info.block.clone();\n              block.endTime = info.downEndTime + timeDelta;\n              replacementBlocks.push(block);\n            });\n            break;\n          }\n          case MouseActions.ScalingTogetherStart: {\n            let scale =\n              (dragBlockDownStartTime + timeDelta - maxEndTime) /\n              (dragBlockDownStartTime - maxEndTime);\n            scale = Math.min(scale, maxEndTime / (maxEndTime - minStartTime));\n            let cancel = false;\n            blockInfos.forEach(info => {\n              info.newStartTime = maxEndTime - (maxEndTime - info.downStartTime) * scale;\n              info.newEndTime = Math.max(\n                maxEndTime - (maxEndTime - info.downEndTime) * scale,\n                info.newStartTime + MIN_BLOCK_DURATION,\n              );\n              if (info.newStartTime < info.startBound || info.newEndTime > info.endBound) {\n                cancel = true;\n              }\n            });\n            if (!cancel) {\n              blockInfos.forEach(info => {\n                const block = info.block.clone();\n                block.startTime = info.newStartTime;\n                block.endTime = info.newEndTime;\n                replacementBlocks.push(block);\n              });\n            }\n            break;\n          }\n          case MouseActions.ScalingTogetherEnd: {\n            let scale =\n              (dragBlockDownEndTime + timeDelta - minStartTime) /\n              (dragBlockDownEndTime - minStartTime);\n            scale = Math.min(\n              scale,\n              (animation.duration - minStartTime) / (maxEndTime - minStartTime),\n            );\n            let cancel = false;\n            blockInfos.forEach(info => {\n              info.newStartTime = minStartTime + (info.downStartTime - minStartTime) * scale;\n              info.newEndTime = Math.max(\n                minStartTime + (info.downEndTime - minStartTime) * scale,\n                info.newStartTime + MIN_BLOCK_DURATION,\n              );\n              if (info.newStartTime < info.startBound || info.newEndTime > info.endBound) {\n                cancel = true;\n              }\n            });\n            if (!cancel) {\n              blockInfos.forEach(info => {\n                const block = info.block.clone();\n                block.startTime = info.newStartTime;\n                block.endTime = info.newEndTime;\n                replacementBlocks.push(block);\n              });\n            }\n            break;\n          }\n        }\n        this.store\n          .select(getAnimation)\n          .pipe(first())\n          .subscribe(anim => {\n            const blocks = replacementBlocks.filter(replacementBlock => {\n              // Note that existingBlock may not be found if changes were made to the animation\n              // (i.e. a block was deleted during a drag).\n              const existingBlock = _.find(anim.blocks, b => replacementBlock.id === b.id);\n              return (\n                existingBlock &&\n                (replacementBlock.startTime !== existingBlock.startTime ||\n                  replacementBlock.endTime !== existingBlock.endTime)\n              );\n            });\n            this.layerTimelineService.updateBlocks(blocks);\n          });\n      },\n    });\n  }\n\n  /**\n   * Builds a cache of snap times for all available animations.\n   */\n  private rebuildSnapTimes() {\n    if (this.shouldSuppressRebuildSnapTimes) {\n      return;\n    }\n    this.snapTimes = new Map();\n    const snapTimesSet = new Set<number>();\n    snapTimesSet.add(0);\n    snapTimesSet.add(this.animation.duration);\n    this.animation.blocks.forEach(block => {\n      snapTimesSet.add(block.startTime);\n      snapTimesSet.add(block.endTime);\n    });\n    this.snapTimes.set(this.animation.id, Array.from(snapTimesSet));\n  }\n\n  /**\n   * Returns a new time, possibly snapped to animation boundaries\n   */\n  private snapTime(time: number, includeActiveTime = true) {\n    const animation = this.animation;\n    const snapTimes = this.snapTimes.get(animation.id);\n    const snapDelta = SNAP_PIXELS / this.horizZoom;\n    const reducerFn = (best: number, snapTime: number) => {\n      const dist = Math.abs(time - snapTime);\n      return dist < snapDelta && dist < Math.abs(time - best) ? snapTime : best;\n    };\n    let bestSnapTime = snapTimes.reduce(reducerFn, Infinity);\n    if (includeActiveTime) {\n      bestSnapTime = reducerFn(bestSnapTime, this.currentTime);\n    }\n    return isFinite(bestSnapTime) ? bestSnapTime : time;\n  }\n\n  // @Override TimelineAnimationRowCallbacks\n  onTimelineBlockClick(event: MouseEvent, block: AnimationBlock) {\n    const clearExisting = !ShortcutService.isOsDependentModifierKey(event) && !event.shiftKey;\n    this.layerTimelineService.selectBlock(block.id, clearExisting);\n  }\n\n  // @Override TimelineAnimationRowCallbacks\n  onTimelineBlockDoubleClick(event: MouseEvent, block: AnimationBlock) {\n    this.playbackService.setCurrentTime(block.startTime);\n  }\n\n  // @Override LayerListTreeComponentCallbacks\n  onAddTimelineBlockClick(event: MouseEvent, layer: Layer, propertyName: string) {\n    const clonedValue = layer.inspectableProperties\n      .get(propertyName)\n      .cloneValue((layer as any)[propertyName]);\n    this.layerTimelineService.addBlocks([\n      {\n        layerId: layer.id,\n        propertyName,\n        fromValue: clonedValue,\n        toValue: clonedValue,\n        currentTime: this.currentTime,\n      },\n    ]);\n  }\n\n  // @Override LayerListTreeComponentCallbacks\n  onConvertToClipPathClick(event: MouseEvent, layer: Layer) {\n    const clipPathLayer = new ClipPathLayer(layer as PathLayer);\n    clipPathLayer.id = _.uniqueId();\n    this.layerTimelineService.swapLayers(layer.id, clipPathLayer);\n  }\n\n  // @Override LayerListTreeComponentCallbacks\n  onConvertToPathClick(event: MouseEvent, layer: Layer) {\n    const pathLayer = new PathLayer(layer as ClipPathLayer);\n    pathLayer.id = _.uniqueId();\n    this.layerTimelineService.swapLayers(layer.id, pathLayer);\n  }\n\n  // @Override LayerListTreeComponentCallbacks\n  onFlattenGroupClick(event: MouseEvent, layer: Layer) {\n    this.layerTimelineService.flattenGroupLayer(layer.id);\n  }\n\n  // @Override LayerListTreeComponentCallbacks\n  onLayerClick(event: MouseEvent, clickedLayer: Layer) {\n    const isMeta = ShortcutService.isOsDependentModifierKey(event);\n    const isShift = event.shiftKey;\n    if (!isMeta && !isShift) {\n      // Clear the existing selections.\n      this.layerTimelineService.selectLayer(clickedLayer.id, true);\n      return;\n    }\n\n    if (isMeta && !isShift) {\n      // Add the single layer to the existing selections, toggling the\n      // layer if it is already selected.\n      this.layerTimelineService.selectLayer(clickedLayer.id, false);\n      return;\n    }\n\n    if (isMeta && isShift) {\n      // Add the single layer to the existing selections.\n      const layerIds = this.layerTimelineService.getSelectedLayerIds();\n      layerIds.add(clickedLayer.id);\n      this.layerTimelineService.setSelectedLayers(layerIds);\n      return;\n    }\n\n    // Batch add layers to the existing selections.\n    const { vectorLayer } = this;\n    const topDownSortedLayers = LayerUtil.runPreorderTraversal(vectorLayer);\n    const clickedLayerIndex = _.findIndex(topDownSortedLayers, l => l.id === clickedLayer.id);\n    const selectedLayerIds = this.layerTimelineService.getSelectedLayerIds();\n    // TODO: re-implement this behavior to match the behavior of Sketch\n    // TODO will need to store most recently selected layer ID in order to implement this behavior\n    const { startIndex, endIndex } = (function() {\n      // Find the first selected layer before clickedLayerIndex.\n      const beforeLayerIndex = _.findLastIndex(\n        topDownSortedLayers,\n        l => selectedLayerIds.has(l.id),\n        clickedLayerIndex,\n      );\n      if (beforeLayerIndex >= 0) {\n        // Batch select [beforeLayerIndex, clickedLayerIndex].\n        return { startIndex: beforeLayerIndex, endIndex: clickedLayerIndex };\n      }\n      // Find the first selected layer after clickedLayerIndex.\n      const afterLayerIndex = _.findIndex(\n        topDownSortedLayers,\n        l => selectedLayerIds.has(l.id),\n        clickedLayerIndex,\n      );\n      if (afterLayerIndex >= 0) {\n        // Batch select [clickedLayerIndex, afterLayerIndex].\n        return { startIndex: clickedLayerIndex, endIndex: afterLayerIndex };\n      }\n      // Batch select [0, clickedLayerIndex].\n      return { startIndex: 0, endIndex: clickedLayerIndex };\n    })();\n    for (let i = startIndex; i <= endIndex; i++) {\n      selectedLayerIds.add(topDownSortedLayers[i].id);\n    }\n    this.layerTimelineService.setSelectedLayers(selectedLayerIds);\n  }\n\n  // @Override LayerListTreeComponentCallbacks\n  onLayerToggleExpanded(event: MouseEvent, layer: Layer) {\n    const recursive = ShortcutService.isOsDependentModifierKey(event) || event.shiftKey;\n    this.layerTimelineService.toggleExpandedLayer(layer.id, recursive);\n  }\n\n  // @Override LayerListTreeComponentCallbacks\n  onLayerToggleVisibility(event: MouseEvent, layer: Layer) {\n    this.layerTimelineService.toggleVisibleLayer(layer.id);\n  }\n\n  // @Override LayerListTreeComponentCallbacks\n  onLayerMouseDown(mouseDownEvent: MouseEvent, mouseDownDragLayer: Layer) {\n    const $layersList = $(mouseDownEvent.target as Element).parents('.slt-layers-list');\n    const $scroller = $(mouseDownEvent.target as Element).parents('.slt-layers-list-scroller');\n\n    interface LayerInfo {\n      layer: Layer;\n      element: Element;\n      localRect: ClientRect;\n      moveIntoEmptyLayerGroup?: boolean;\n    }\n\n    let orderedLayerInfos: LayerInfo[] = [];\n    let scrollerRect: ClientRect;\n    let targetLayerInfo: LayerInfo;\n    let targetEdge: string;\n\n    const dragLayers: ReadonlyArray<Layer> = (function(lts: LayerTimelineService) {\n      const selectedLayerIds = lts.getSelectedLayerIds();\n      // Don't drag any other selected layers if the drag layer isn't selected itself.\n      // At the end of the drag, we will select the drag layer and deselect the others.\n      const dragLayerIdSet = selectedLayerIds.has(mouseDownDragLayer.id)\n        ? selectedLayerIds\n        : new Set([mouseDownDragLayer.id]);\n      const topDownSortedLayers = LayerUtil.runPreorderTraversal(lts.getVectorLayer());\n      return topDownSortedLayers.filter(l => dragLayerIdSet.has(l.id));\n    })(this.layerTimelineService);\n\n    // tslint:disable-next-line: no-unused-expression\n    new Dragger({\n      direction: 'both',\n      downX: mouseDownEvent.clientX,\n      downY: mouseDownEvent.clientY,\n\n      onBeginDragFn: () => {\n        // Build up a list of all layers ordered by Y position.\n        orderedLayerInfos = [];\n        scrollerRect = $scroller.get(0).getBoundingClientRect();\n        const scrollTop = $scroller.scrollTop();\n        $layersList.find('.slt-layer-container').each((__, element) => {\n          // toString() is necessary because JQuery converts the ID into a number.\n          const layerId: string = ($(element).data('layer-id') || '').toString();\n          if (!layerId) {\n            // The root layer doesn't have an ID set.\n            return;\n          }\n\n          let rect = element.getBoundingClientRect();\n          rect = {\n            left: rect.left,\n            top: rect.top + scrollTop - scrollerRect.top,\n            bottom: rect.bottom + scrollTop - scrollerRect.top,\n            height: rect.height,\n            right: rect.right,\n            width: rect.width,\n          };\n\n          const layer = this.vectorLayer.findLayerById(layerId);\n          orderedLayerInfos.push({ layer, element, localRect: rect });\n\n          // Add a fake target for empty groups.\n          if (layer instanceof GroupLayer && !layer.children.length) {\n            const left = rect.left + LAYER_INDENT_PIXELS;\n            const top = rect.bottom;\n            rect = { ...rect, ...{ left, top } };\n            orderedLayerInfos.push({\n              layer,\n              element,\n              localRect: rect,\n              moveIntoEmptyLayerGroup: true,\n            });\n          }\n        });\n\n        orderedLayerInfos.sort((a, b) => a.localRect.top - b.localRect.top);\n        this.updateDragIndicator({ isVisible: true, left: 0, top: 0 });\n      },\n\n      onDragFn: event => {\n        const localEventY = event.clientY - scrollerRect.top + $scroller.scrollTop();\n        // Find the target layer and edge (top or bottom).\n        targetLayerInfo = undefined;\n        let minDistance = Infinity;\n        let minDistanceIndent = Infinity; // Tie break to most indented layer.\n        for (const layerInfo of orderedLayerInfos) {\n          // Skip if mouse to the left of this layer.\n          if (event.clientX < layerInfo.localRect.left) {\n            continue;\n          }\n\n          for (const edge of ['top', 'bottom']) {\n            // Test distance to top edge.\n            const distance = Math.abs(localEventY - layerInfo.localRect[edge as 'top' | 'bottom']);\n            const indent = layerInfo.localRect.left;\n            if (distance <= minDistance) {\n              if (distance !== minDistance || indent > minDistanceIndent) {\n                minDistance = distance;\n                minDistanceIndent = indent;\n                targetLayerInfo = layerInfo;\n                targetEdge = edge;\n              }\n            }\n          }\n        }\n\n        // Disallow dragging a layer into itself or its children.\n        if (targetLayerInfo) {\n          let { layer } = targetLayerInfo;\n          while (layer) {\n            if (_.find(dragLayers, l => l.id === layer.id)) {\n              targetLayerInfo = undefined;\n              break;\n            }\n            layer = LayerUtil.findParent(this.vectorLayer, layer.id);\n          }\n        }\n\n        if (targetLayerInfo && targetEdge === 'bottom') {\n          const nextSibling = LayerUtil.findNextSibling(this.vectorLayer, targetLayerInfo.layer.id);\n          if (nextSibling && nextSibling.id === mouseDownDragLayer.id) {\n            targetLayerInfo = undefined;\n          }\n        }\n\n        const dragIndicatorInfo: DragIndicatorInfo = { isVisible: !!targetLayerInfo };\n        if (targetLayerInfo) {\n          dragIndicatorInfo.left = targetLayerInfo.localRect.left;\n          dragIndicatorInfo.top = targetLayerInfo.localRect[targetEdge as 'top' | 'bottom'];\n        }\n        this.updateDragIndicator(dragIndicatorInfo);\n      },\n\n      onDropFn: () => {\n        this.updateDragIndicator({ isVisible: false });\n\n        if (!targetLayerInfo) {\n          return;\n        }\n\n        const dragLayerIds: ReadonlyArray<string> = dragLayers.map(l => l.id);\n\n        const addDragLayersFn = (\n          vl: VectorLayer,\n          parent: Layer,\n          startingIndex = parent.children.length,\n        ) => {\n          const layersToAdd = dragLayers.map(l => {\n            const otherDragLayerIds = dragLayerIds.filter(id => id !== l.id);\n            return LayerUtil.removeLayers(l, ...otherDragLayerIds);\n          });\n          return LayerUtil.addLayers(vl, parent.id, startingIndex, ...layersToAdd);\n        };\n\n        const removeDragLayersFn = (vl: VectorLayer) => LayerUtil.removeLayers(vl, ...dragLayerIds);\n\n        const initialVl = this.vectorLayer;\n        let replacementVl: VectorLayer;\n\n        if (targetLayerInfo.moveIntoEmptyLayerGroup) {\n          // Moving into an empty layer group.\n          replacementVl = addDragLayersFn(removeDragLayersFn(initialVl), targetLayerInfo.layer);\n        } else if (LayerUtil.findParent(initialVl, targetLayerInfo.layer.id)) {\n          // Moving next to another layer.\n          const tempVl = removeDragLayersFn(initialVl);\n          const parent = LayerUtil.findParent(tempVl, targetLayerInfo.layer.id);\n          const index = _.findIndex(parent.children, l => l.id === targetLayerInfo.layer.id);\n          if (index >= 0) {\n            replacementVl = addDragLayersFn(tempVl, parent, index + (targetEdge === 'top' ? 0 : 1));\n          }\n        }\n\n        if (replacementVl) {\n          this.store.dispatch(\n            new BatchAction(\n              new SetVectorLayer(replacementVl),\n              new SetSelectedLayers(new Set(dragLayerIds)),\n            ),\n          );\n        }\n      },\n    });\n  }\n\n  private updateDragIndicator(info: DragIndicatorInfo) {\n    const curr = this.dragIndicatorSubject.getValue();\n    this.dragIndicatorSubject.next({ ...curr, ...info });\n  }\n\n  /**\n   * Handles ctrl + mouse wheel event for zooming into and out of the timeline.\n   */\n  onWheelEvent(event: WheelEvent) {\n    const startZoomFn = () => {\n      this.$zoomStartActiveAnimation = $(this.timelineAnimationRef.nativeElement);\n      this.zoomStartTimeCursorPos =\n        this.$zoomStartActiveAnimation.position().left +\n        this.currentTime * this.horizZoom +\n        TimelineConsts.TIMELINE_ANIMATION_PADDING;\n    };\n\n    const performZoomFn = () => {\n      this.horizZoom = this.targetHorizZoom;\n\n      // Set the scroll offset such that the time cursor remains at zoomStartTimeCursorPos\n      if (this.$zoomStartActiveAnimation) {\n        const newScrollLeft =\n          this.$zoomStartActiveAnimation.position().left +\n          this.$timeline.scrollLeft() +\n          this.currentTime * this.horizZoom +\n          TimelineConsts.TIMELINE_ANIMATION_PADDING -\n          this.zoomStartTimeCursorPos;\n        this.$timeline.scrollLeft(newScrollLeft);\n      }\n    };\n\n    const endZoomFn = () => {\n      this.zoomStartTimeCursorPos = 0;\n      this.$zoomStartActiveAnimation = undefined;\n      this.endZoomTimeout = undefined;\n      this.targetHorizZoom = 0;\n    };\n\n    // chrome+mac trackpad pinch-zoom = ctrlKey\n    if (ShortcutService.isOsDependentModifierKey(event) || event.ctrlKey) {\n      if (!this.targetHorizZoom) {\n        // Multiple changes can happen to targetHorizZoom before the\n        // actual zoom level is updated (see performZoom_).\n        this.targetHorizZoom = this.horizZoom;\n      }\n\n      event.preventDefault();\n      this.targetHorizZoom *= 1.01 ** -event.deltaY;\n      this.targetHorizZoom = _.clamp(this.targetHorizZoom, MIN_ZOOM, MAX_ZOOM);\n      if (this.targetHorizZoom !== this.horizZoom) {\n        // Zoom has changed.\n        if (this.performZoomRAF) {\n          window.cancelAnimationFrame(this.performZoomRAF);\n        }\n        this.performZoomRAF = window.requestAnimationFrame(() => performZoomFn());\n        if (this.endZoomTimeout) {\n          window.clearTimeout(this.endZoomTimeout);\n        } else {\n          startZoomFn();\n        }\n        this.endZoomTimeout = window.setTimeout(() => endZoomFn(), 100);\n      }\n      return false;\n    }\n    return undefined;\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onZoomToFitClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.autoZoomToAnimation();\n  }\n\n  /**\n   * Zooms the timeline to fit the first animation.\n   */\n  private autoZoomToAnimation() {\n    // Shave off 48 pixels for safety.\n    this.horizZoom = (this.$timeline.width() - 48) / this.animation.duration;\n  }\n\n  // Proxies a button click to the <input> tag that opens the file picker.\n  // We clear the element's value to make it possible to import the same file\n  // more than once.\n  onLaunchFilePickerClick(event: MouseEvent, sourceElementId: string) {\n    $(`#${sourceElementId}`)\n      .val('')\n      .trigger('click');\n  }\n\n  // Called from the LayerTimelineComponent template.\n  onImportedFilesPicked(event: MouseEvent, fileList: FileList) {\n    // TODO: determine if calling stopPropogation() is needed?\n    event.stopPropagation();\n    this.fileImportService.import(fileList);\n  }\n\n  onTopSplitterChanged() {\n    if (this.timelineDirectives) {\n      this.timelineDirectives.forEach(d => d.redraw());\n    }\n  }\n\n  // Used by *ngFor loop.\n  trackLayerFn(index: number, layer: Layer) {\n    return layer.id;\n  }\n}\n\ninterface LayerTimelineModel {\n  readonly animation: Animation;\n  readonly vectorLayer: VectorLayer;\n  readonly isAnimationSelected: boolean;\n  readonly isActionMode: boolean;\n}\n\ninterface DragIndicatorInfo {\n  left?: number;\n  top?: number;\n  isVisible?: boolean;\n}\n","import {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { Animation } from 'app/modules/editor/model/timeline';\nimport { Dragger } from 'app/modules/editor/scripts/dragger';\nimport { DestroyableMixin } from 'app/modules/editor/scripts/mixins';\nimport { ShortcutService, ThemeService } from 'app/modules/editor/services';\nimport * as $ from 'jquery';\nimport * as _ from 'lodash';\nimport { filter } from 'rxjs/operators';\n\nimport { TIMELINE_ANIMATION_PADDING } from './constants';\n\nconst HEADER_HEIGHT = 40;\nconst GRID_INTERVALS_MS = [10, 25, 50, 100, 250, 500, 1000, 2500, 5000, 10000, 30000, 60000];\n\n@Directive({ selector: '[appLayerTimelineGrid]' })\nexport class LayerTimelineGridDirective extends DestroyableMixin() implements OnInit {\n  @Input()\n  isHeader: boolean;\n  @Output()\n  scrub = new EventEmitter<ScrubEvent>();\n\n  private readonly canvas: HTMLCanvasElement;\n  private readonly $canvas: JQuery;\n  private animation_: Animation;\n  private currentTime_: number;\n  private horizZoom_: number;\n\n  constructor(elementRef: ElementRef, private readonly themeService: ThemeService) {\n    super();\n    this.canvas = elementRef.nativeElement;\n    this.$canvas = $(this.canvas);\n  }\n\n  ngOnInit() {\n    this.registerSubscription(\n      this.themeService\n        .asObservable()\n        .pipe(filter(t => !t.isInitialPageLoad))\n        .subscribe(t => this.redraw()),\n    );\n  }\n\n  get horizZoom() {\n    return this.horizZoom_;\n  }\n\n  @Input()\n  set horizZoom(horizZoom: number) {\n    if (this.horizZoom_ !== horizZoom) {\n      this.horizZoom_ = horizZoom;\n      this.redraw();\n    }\n  }\n\n  get currentTime() {\n    return this.currentTime_;\n  }\n\n  set currentTime(currentTime: number) {\n    if (this.currentTime_ !== currentTime) {\n      this.currentTime_ = currentTime;\n      this.redraw();\n    }\n  }\n\n  get animation() {\n    return this.animation_;\n  }\n\n  @Input()\n  set animation(animation: Animation) {\n    this.animation_ = animation;\n    this.redraw();\n  }\n\n  @HostListener('mousedown', ['$event'])\n  onMouseDown(event: MouseEvent) {\n    this.handleScrubEvent(event.clientX, ShortcutService.isOsDependentModifierKey(event));\n    // tslint:disable-next-line: no-unused-expression\n    new Dragger({\n      direction: 'horizontal',\n      downX: event.clientX,\n      downY: event.clientY,\n      shouldSkipSlopCheck: true,\n      onDragFn: e => this.handleScrubEvent(e.clientX, ShortcutService.isOsDependentModifierKey(e)),\n    });\n    event.preventDefault();\n    return false;\n  }\n\n  private handleScrubEvent(clientX: number, disableSnap: boolean) {\n    const x = clientX - this.$canvas.offset().left;\n    let time =\n      ((x - TIMELINE_ANIMATION_PADDING) / (this.$canvas.width() - TIMELINE_ANIMATION_PADDING * 2)) *\n      this.animation.duration;\n    time = _.clamp(time, 0, this.animation.duration);\n    this.scrub.emit({ time, disableSnap });\n  }\n\n  redraw() {\n    if (!this.$canvas.is(':visible')) {\n      return;\n    }\n\n    const width = this.$canvas.width();\n    const height = this.$canvas.height();\n    this.$canvas.attr('width', width * window.devicePixelRatio);\n    this.$canvas.attr('height', height * window.devicePixelRatio);\n\n    const ctx = this.canvas.getContext('2d');\n    ctx.scale(window.devicePixelRatio, window.devicePixelRatio);\n    ctx.translate(TIMELINE_ANIMATION_PADDING, 0);\n\n    // Compute grid spacing (40 = minimum grid spacing in pixels).\n    let interval = 0;\n    let spacingMs = GRID_INTERVALS_MS[interval];\n    while (spacingMs * this.horizZoom < 40 || interval >= GRID_INTERVALS_MS.length) {\n      interval++;\n      spacingMs = GRID_INTERVALS_MS[interval];\n    }\n\n    const spacingPx = spacingMs * this.horizZoom;\n\n    if (this.isHeader) {\n      // Text labels.\n      ctx.fillStyle = this.themeService.getSecondaryTextColor();\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.font = '10px Roboto';\n      for (let x = 0, t = 0; round(x) <= round(width); x += spacingPx, t += spacingMs) {\n        ctx.fillText(`${t / 1000}s`, x, height / 2);\n      }\n      ctx.fillStyle = 'rgba(244, 67, 54, .7)';\n      ctx.beginPath();\n      ctx.arc(this.currentTime * this.horizZoom, height / 2, 4, 0, 2 * Math.PI, false);\n      ctx.fill();\n      ctx.closePath();\n      ctx.fillRect(this.currentTime * this.horizZoom - 1, height / 2 + 4, 2, height);\n    } else {\n      // Grid lines.\n      ctx.fillStyle = this.themeService.getDividerTextColor();\n      for (\n        let x = spacingPx;\n        round(x) < round(width - TIMELINE_ANIMATION_PADDING * 2);\n        x += spacingPx\n      ) {\n        ctx.fillRect(x - 0.5, HEADER_HEIGHT, 1, height - HEADER_HEIGHT);\n      }\n      ctx.fillStyle = 'rgba(244, 67, 54, .7)';\n      ctx.fillRect(this.currentTime * this.horizZoom - 1, HEADER_HEIGHT, 2, height - HEADER_HEIGHT);\n    }\n  }\n\n  @HostListener('click', ['$event'])\n  onClick(event: MouseEvent) {\n    // This ensures that click events originating on top of the\n    // host element aren't triggered in the component.\n    event.stopPropagation();\n  }\n}\n\nfunction round(n: number) {\n  return _.round(n, 8);\n}\n\nexport interface ScrubEvent {\n  time: number;\n  disableSnap: boolean;\n}\n","module.exports = \"<div class=\\\"slt-layer-row\\\"></div>\\n\\n<ng-container *ngIf=\\\"(this.animationRowModel$ | async) as model\\\">\\n  <div class=\\\"slt-properties\\\"\\n    *ngIf=\\\"model.isExpanded\\\"\\n    [ngClass]=\\\"{'slt-properties-empty': !model.blocksByPropertyNameValues.length}\\\">\\n    <div class=\\\"slt-property\\\"\\n      *ngFor=\\\"let blocks of model.blocksByPropertyNameValues\\\">\\n      <div class=\\\"slt-timeline-block\\\"\\n        *ngFor=\\\"let block of blocks\\\"\\n        (dblclick)=\\\"this.onTimelineBlockDoubleClick($event, block, this.layer)\\\"\\n        (click)=\\\"this.onTimelineBlockClick($event, block, this.layer)\\\"\\n        (mousedown)=\\\"this.onTimelineBlockMouseDown($event, block, this.layer)\\\"\\n        tabindex=\\\"-1\\\"\\n        [ngStyle]=\\\"{\\n          'left': (100 * block.startTime / model.animation.duration) + '%',\\n          'width': (100 * (block.endTime - block.startTime) / model.animation.duration) + '%'\\n        }\\\"\\n        [ngClass]=\\\"{\\n          'is-disabled': model.isActionMode,\\n          'is-selected': block.isAnimatable() && model.selectedBlockIds.has(block.id),\\n          'has-error': !block.isAnimatable() && !model.selectedBlockIds.has(block.id),\\n          'is-selected-with-error': !block.isAnimatable() && model.selectedBlockIds.has(block.id)\\n        }\\\">\\n        <div class=\\\"slt-timeline-block-edge slt-timeline-block-edge-start\\\"></div>\\n        <div class=\\\"slt-timeline-block-edge slt-timeline-block-edge-end\\\"></div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <ul class=\\\"slt-children-row\\\"\\n    *ngIf=\\\"layer.children.length > 0 && model.isExpanded\\\">\\n    <li *ngFor=\\\"let child of layer.children; trackBy: trackLayerFn\\\">\\n      <app-timelineanimationrow [layer]=\\\"child\\\"\\n        (timelineBlockMouseDown)=\\\"this.onTimelineBlockMouseDown($event.event, $event.block, $event.layer)\\\"\\n        (timelineBlockClick)=\\\"this.onTimelineBlockClick($event.event, $event.block, $event.layer)\\\"\\n        (timelineBlockDoubleClick)=\\\"this.onTimelineBlockDoubleClick($event.event, $event.block, $event.layer)\\\">\\n      </app-timelineanimationrow>\\n    </li>\\n  </ul>\\n</ng-container>\\n\"","module.exports = \"ul {\\n  margin: 0;\\n  padding: 0; }\\n\\nli {\\n  list-style: none; }\\n\\n.slt-layer-row {\\n  box-sizing: border-box;\\n  line-height: 20px;\\n  height: 20px; }\\n\\n.slt-children-row {\\n  padding: 0;\\n  margin: 0 0 0 0px; }\\n\\n.slt-properties {\\n  margin: 4px 0;\\n  border-radius: 2px; }\\n\\n.slt-properties .slt-property {\\n    position: relative;\\n    line-height: 24px;\\n    height: 24px; }\\n\\n.slt-properties .slt-property .slt-timeline-block {\\n      position: absolute;\\n      height: 12px;\\n      border-radius: 6px;\\n      top: 50%;\\n      transform: translate(0, -50%);\\n      outline: 0;\\n      cursor: pointer; }\\n\\n.slt-properties .slt-property .slt-timeline-block .slt-timeline-block-edge {\\n        position: absolute;\\n        top: 0;\\n        bottom: 0;\\n        width: 6px;\\n        cursor: ew-resize; }\\n\\n.slt-properties .slt-property .slt-timeline-block .slt-timeline-block-edge-start {\\n        left: 0; }\\n\\n.slt-properties .slt-property .slt-timeline-block .slt-timeline-block-edge-end {\\n        right: 0; }\\n\\n.slt-properties .slt-property .slt-timeline-block.is-disabled {\\n        cursor: default; }\\n\\n.slt-properties-empty {\\n  display: none; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL2xheWVydGltZWxpbmUvdGltZWxpbmVhbmltYXRpb25yb3cuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDSSxVQUFTO0VBQ1QsV0FBVSxFQUNiOztBQUVEO0VBQ0ksaUJBQWdCLEVBQ25COztBQUVEO0VBQ0ksdUJBQXNCO0VBQ3RCLGtCQUFpQjtFQUNqQixhQUFZLEVBQ2Y7O0FBRUQ7RUFDSSxXQUFVO0VBQ1Ysa0JBQWlCLEVBQ3BCOztBQUVEO0VBQ0ksY0FBYTtFQUNiLG1CQUFrQixFQStCckI7O0FBakNEO0lBSVEsbUJBQWtCO0lBQ2xCLGtCQUFpQjtJQUNqQixhQUFZLEVBMEJmOztBQWhDTDtNQVFZLG1CQUFrQjtNQUNsQixhQUFZO01BQ1osbUJBQWtCO01BQ2xCLFNBQVE7TUFDUiw4QkFBNkI7TUFDN0IsV0FBVTtNQUNWLGdCQUFlLEVBaUJsQjs7QUEvQlQ7UUFnQmdCLG1CQUFrQjtRQUNsQixPQUFNO1FBQ04sVUFBUztRQUNULFdBQVU7UUFDVixrQkFBaUIsRUFDcEI7O0FBckJiO1FBdUJnQixRQUFPLEVBQ1Y7O0FBeEJiO1FBMEJnQixTQUFRLEVBQ1g7O0FBM0JiO1FBNkJnQixnQkFBZSxFQUNsQjs7QUFLYjtFQUNJLGNBQWEsRUFDaEIiLCJmaWxlIjoic3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL2xheWVydGltZWxpbmUvdGltZWxpbmVhbmltYXRpb25yb3cuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIkdGltZWxpbmVBbmltYXRpb25QYWRkaW5nOiAyMHB4O1xudWwge1xuICAgIG1hcmdpbjogMDtcbiAgICBwYWRkaW5nOiAwO1xufVxuXG5saSB7XG4gICAgbGlzdC1zdHlsZTogbm9uZTtcbn1cblxuLnNsdC1sYXllci1yb3cge1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gICAgaGVpZ2h0OiAyMHB4O1xufVxuXG4uc2x0LWNoaWxkcmVuLXJvdyB7XG4gICAgcGFkZGluZzogMDtcbiAgICBtYXJnaW46IDAgMCAwIDBweDtcbn1cblxuLnNsdC1wcm9wZXJ0aWVzIHtcbiAgICBtYXJnaW46IDRweCAwO1xuICAgIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgICAuc2x0LXByb3BlcnR5IHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBsaW5lLWhlaWdodDogMjRweDtcbiAgICAgICAgaGVpZ2h0OiAyNHB4O1xuICAgICAgICAuc2x0LXRpbWVsaW5lLWJsb2NrIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGhlaWdodDogMTJweDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwgLTUwJSk7XG4gICAgICAgICAgICBvdXRsaW5lOiAwO1xuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgLnNsdC10aW1lbGluZS1ibG9jay1lZGdlIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgICAgICAgICB3aWR0aDogNnB4O1xuICAgICAgICAgICAgICAgIGN1cnNvcjogZXctcmVzaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLnNsdC10aW1lbGluZS1ibG9jay1lZGdlLXN0YXJ0IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLnNsdC10aW1lbGluZS1ibG9jay1lZGdlLWVuZCB7XG4gICAgICAgICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAmLmlzLWRpc2FibGVkIHtcbiAgICAgICAgICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi5zbHQtcHJvcGVydGllcy1lbXB0eSB7XG4gICAgZGlzcGxheTogbm9uZTtcbn1cbiJdfQ== */\"","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { Layer } from 'app/modules/editor/model/layers';\nimport { Animation, AnimationBlock } from 'app/modules/editor/model/timeline';\nimport { ModelUtil } from 'app/modules/editor/scripts/common';\nimport { ActionModeService } from 'app/modules/editor/services';\nimport { State, Store } from 'app/modules/editor/store';\nimport { getTimelineAnimationRowState } from 'app/modules/editor/store/common/selectors';\nimport * as _ from 'lodash';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-timelineanimationrow',\n  templateUrl: './timelineanimationrow.component.html',\n  styleUrls: ['./timelineanimationrow.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TimelineAnimationRowComponent implements OnInit, Callbacks {\n  animationRowModel$: Observable<AnimationRowModel>;\n\n  @Input() layer: Layer;\n\n  // MouseEvents from this layer (or children layers further down the tree)\n  // are recursively handled by parent components until they reach\n  // the LayerTimelineComponent.\n  @Output() timelineBlockClick = new EventEmitter<AnimationRowEvent>();\n  @Output() timelineBlockMouseDown = new EventEmitter<AnimationRowEvent>();\n  @Output() timelineBlockDoubleClick = new EventEmitter<AnimationRowEvent>();\n\n  constructor(\n    private readonly store: Store<State>,\n    private readonly actionModeService: ActionModeService,\n  ) {}\n\n  ngOnInit() {\n    this.animationRowModel$ = this.store.select(getTimelineAnimationRowState).pipe(\n      map(({ animation, collapsedLayerIds, selectedBlockIds, isActionMode }) => {\n        // Returns a list of animation block lists. Each animation block list corresponds to\n        // a property name displayed in the layer list tree.\n        const blocksByPropertyNameValues = _.values(\n          ModelUtil.getOrderedBlocksByPropertyByLayer(animation)[this.layer.id],\n        );\n        return {\n          animation,\n          blocksByPropertyNameValues,\n          isExpanded: !collapsedLayerIds.has(this.layer.id),\n          selectedBlockIds,\n          isActionMode,\n        };\n      }),\n    );\n  }\n\n  // @Override Callbacks\n  onTimelineBlockClick(event: MouseEvent, block: AnimationBlock) {\n    event.stopPropagation();\n    if (!this.actionModeService.isActionMode()) {\n      this.timelineBlockClick.emit({ event, block });\n    }\n  }\n\n  // @Override Callbacks\n  onTimelineBlockDoubleClick(event: MouseEvent, block: AnimationBlock) {\n    event.stopPropagation();\n    if (!this.actionModeService.isActionMode()) {\n      this.timelineBlockDoubleClick.emit({ event, block });\n    }\n  }\n\n  // @Override Callbacks\n  onTimelineBlockMouseDown(event: MouseEvent, block: AnimationBlock) {\n    if (!this.actionModeService.isActionMode()) {\n      this.timelineBlockMouseDown.emit({ event, block });\n    }\n  }\n\n  // Used by *ngFor loop.\n  trackLayerFn(index: number, layer: Layer) {\n    return layer.id;\n  }\n}\n\nexport interface Callbacks {\n  onTimelineBlockMouseDown(event: MouseEvent, block: AnimationBlock): void;\n  onTimelineBlockClick(event: MouseEvent, block: AnimationBlock): void;\n  onTimelineBlockDoubleClick(event: MouseEvent, block: AnimationBlock): void;\n}\n\ninterface AnimationRowEvent {\n  readonly event: MouseEvent;\n  readonly block: AnimationBlock;\n}\n\ninterface AnimationRowModel {\n  readonly animation: Animation;\n  readonly blocksByPropertyNameValues: ReadonlyTable<AnimationBlock>;\n  readonly isExpanded: boolean;\n  readonly selectedBlockIds: ReadonlySet<string>;\n  readonly isActionMode: boolean;\n}\n","export { PlaybackComponent } from './playback.component';\n","module.exports = \"<div *ngIf=\\\"(this.playbackModel$ | async) as model\\\"\\n  class=\\\"playback\\\"\\n  fxLayout=\\\"row\\\"\\n  fxLayoutAlign=\\\"center center\\\">\\n  <span fxFlex></span>\\n  <button class=\\\"slow-motion-button\\\"\\n    mat-icon-button\\n    matTooltip=\\\"Slow motion (S)\\\"\\n    matTooltipPosition=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    (click)=\\\"this.isSlowMotionClick($event)\\\">\\n    <mat-icon [class.activated]=\\\"model.isSlowMotion\\\">slow_motion_video</mat-icon>\\n  </button>\\n  <button mat-icon-button\\n    matTooltip=\\\"Rewind (Left)\\\"\\n    matTooltipPosition=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    (click)=\\\"this.rewindClick($event)\\\">\\n    <mat-icon>skip_previous</mat-icon>\\n  </button>\\n  <button mat-mini-fab\\n    matTooltip=\\\"{{ (model.isPlaying) ? 'Pause' : 'Play' }} (Spacebar)\\\"\\n    matTooltipPosition=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    (click)=\\\"this.playPauseButtonClick($event)\\\">\\n    <div\\n      class=\\\"play-pause-icon\\\"\\n      [ngClass]=\\\"{\\n        'can-animate': true,\\n        'is-playing': model.isPlaying\\n      }\\\">\\n    </div>\\n  </button>\\n  <button mat-icon-button\\n    matTooltip=\\\"Fast forward (Right)\\\"\\n    matTooltipPosition=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    (click)=\\\"this.fastForwardClick($event)\\\">\\n    <mat-icon>skip_next</mat-icon>\\n  </button>\\n  <button class=\\\"repeating-button\\\"\\n    mat-icon-button\\n    matTooltip=\\\"Repeat (R)\\\"\\n    matTooltipPosition=\\\"below\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    (click)=\\\"this.isRepeatingClick($event)\\\">\\n    <mat-icon [class.activated]=\\\"model.isRepeating\\\">repeat</mat-icon>\\n  </button>\\n  <span fxFlex></span>\\n</div>\\n\"","module.exports = \".playback button {\\n  margin: 0px 3px; }\\n\\n.playback .play-pause-icon {\\n  position: absolute;\\n  overflow: hidden;\\n  left: 50%;\\n  top: 50%;\\n  width: 24px;\\n  height: 24px;\\n  transform: translate(-50%, -50%); }\\n\\n.playback .play-pause-icon::after {\\n    content: '';\\n    display: block;\\n    pointer-events: none;\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    width: 504px;\\n    height: 24px;\\n    background-size: 504px 24px;\\n    background-position: 0% 0%;\\n    background-image: url(/assets/icons/pauseplay-white.png);\\n    transform: translateX(-480px);\\n    -webkit-animation-duration: 0.35s;\\n            animation-duration: 0.35s;\\n    -webkit-animation-timing-function: steps(20);\\n            animation-timing-function: steps(20); }\\n\\n.playback .play-pause-icon.can-animate::after {\\n    -webkit-animation-name: pauseplay;\\n            animation-name: pauseplay; }\\n\\n.playback .play-pause-icon.can-animate.is-playing::after {\\n    background-image: url(/assets/icons/playpause-white.png);\\n    -webkit-animation-name: playpause;\\n            animation-name: playpause; }\\n\\n@-webkit-keyframes playpause {\\n  from {\\n    transform: translateX(0); }\\n  to {\\n    transform: translateX(-480px); } }\\n\\n@keyframes playpause {\\n  from {\\n    transform: translateX(0); }\\n  to {\\n    transform: translateX(-480px); } }\\n\\n@-webkit-keyframes pauseplay {\\n  from {\\n    transform: translateX(0); }\\n  to {\\n    transform: translateX(-480px); } }\\n\\n@keyframes pauseplay {\\n  from {\\n    transform: translateX(0); }\\n  to {\\n    transform: translateX(-480px); } }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL3BsYXliYWNrL3BsYXliYWNrLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRVEsZ0JBQWUsRUFDbEI7O0FBSEw7RUFNUSxtQkFBa0I7RUFDbEIsaUJBQWdCO0VBQ2hCLFVBQVM7RUFDVCxTQUFRO0VBQ1IsWUFBVztFQUNYLGFBQVk7RUFDWixpQ0FBZ0MsRUF3Q25DOztBQXBETDtJQWNZLFlBQVc7SUFDWCxlQUFjO0lBQ2QscUJBQW9CO0lBQ3BCLG1CQUFrQjtJQUNsQixRQUFPO0lBQ1AsT0FBTTtJQUNOLGFBQW1DO0lBQ25DLGFBQVk7SUFDWiw0QkFBa0Q7SUFDbEQsMkJBQTBCO0lBQzFCLHlEQUF3RDtJQUN4RCw4QkFBd0Q7SUFDeEQsa0NBQW1EO1lBQW5ELDBCQUFtRDtJQUNuRCw2Q0FBeUQ7WUFBekQscUNBQXlELEVBQzVEOztBQTVCVDtJQThCWSxrQ0FBeUI7WUFBekIsMEJBQXlCLEVBQzVCOztBQS9CVDtJQWlDWSx5REFBd0Q7SUFDeEQsa0NBQXlCO1lBQXpCLDBCQUF5QixFQUM1Qjs7QUFDRDtFQUNJO0lBQ0kseUJBQXdCLEVBQUE7RUFFNUI7SUFDSSw4QkFBd0QsRUFBQSxFQUFBOztBQUxoRTtFQUNJO0lBQ0kseUJBQXdCLEVBQUE7RUFFNUI7SUFDSSw4QkFBd0QsRUFBQSxFQUFBOztBQUdoRTtFQUNJO0lBQ0kseUJBQXdCLEVBQUE7RUFFNUI7SUFDSSw4QkFBd0QsRUFBQSxFQUFBOztBQUxoRTtFQUNJO0lBQ0kseUJBQXdCLEVBQUE7RUFFNUI7SUFDSSw4QkFBd0QsRUFBQSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9lZGl0b3IvY29tcG9uZW50cy9wbGF5YmFjay9wbGF5YmFjay5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wbGF5YmFjayB7XG4gICAgYnV0dG9uIHtcbiAgICAgICAgbWFyZ2luOiAwcHggM3B4O1xuICAgIH1cbiAgICAucGxheS1wYXVzZS1pY29uIHtcbiAgICAgICAgJG51bUFuaW1hdGlvbkZyYW1lczogMjE7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgd2lkdGg6IDI0cHg7XG4gICAgICAgIGhlaWdodDogMjRweDtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICAgICY6OmFmdGVyIHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICB3aWR0aDogKCRudW1BbmltYXRpb25GcmFtZXMgKiAyNHB4KTtcbiAgICAgICAgICAgIGhlaWdodDogMjRweDtcbiAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogKCRudW1BbmltYXRpb25GcmFtZXMgKiAyNHB4KSAyNHB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogMCUgMCU7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoL2Fzc2V0cy9pY29ucy9wYXVzZXBsYXktd2hpdGUucG5nKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgoJG51bUFuaW1hdGlvbkZyYW1lcyAtIDEpICogLTI0cHgpO1xuICAgICAgICAgICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAoMXMgKiAkbnVtQW5pbWF0aW9uRnJhbWVzIC8gNjApO1xuICAgICAgICAgICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogc3RlcHMoJG51bUFuaW1hdGlvbkZyYW1lcyAtIDEpO1xuICAgICAgICB9XG4gICAgICAgICYuY2FuLWFuaW1hdGU6OmFmdGVyIHtcbiAgICAgICAgICAgIGFuaW1hdGlvbi1uYW1lOiBwYXVzZXBsYXk7XG4gICAgICAgIH1cbiAgICAgICAgJi5jYW4tYW5pbWF0ZS5pcy1wbGF5aW5nOjphZnRlciB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoL2Fzc2V0cy9pY29ucy9wbGF5cGF1c2Utd2hpdGUucG5nKTtcbiAgICAgICAgICAgIGFuaW1hdGlvbi1uYW1lOiBwbGF5cGF1c2U7XG4gICAgICAgIH1cbiAgICAgICAgQGtleWZyYW1lcyBwbGF5cGF1c2Uge1xuICAgICAgICAgICAgZnJvbSB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG8ge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgoJG51bUFuaW1hdGlvbkZyYW1lcyAtIDEpICogLTI0cHgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIEBrZXlmcmFtZXMgcGF1c2VwbGF5IHtcbiAgICAgICAgICAgIGZyb20ge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoKCRudW1BbmltYXRpb25GcmFtZXMgLSAxKSAqIC0yNHB4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiJdfQ== */\"","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { PlaybackService } from 'app/modules/editor/services';\nimport { State, Store } from 'app/modules/editor/store';\nimport { getPlaybackState } from 'app/modules/editor/store/playback/selectors';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'app-playback',\n  templateUrl: './playback.component.html',\n  styleUrls: ['./playback.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PlaybackComponent implements OnInit {\n  playbackModel$: Observable<PlaybackModel>;\n\n  constructor(\n    private readonly store: Store<State>,\n    private readonly playbackService: PlaybackService,\n  ) {}\n\n  ngOnInit() {\n    this.playbackModel$ = this.store.select(getPlaybackState);\n  }\n\n  isSlowMotionClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.playbackService.toggleIsSlowMotion();\n  }\n\n  rewindClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.playbackService.rewind();\n  }\n\n  playPauseButtonClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.playbackService.toggleIsPlaying();\n  }\n\n  fastForwardClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.playbackService.fastForward();\n  }\n\n  isRepeatingClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.playbackService.toggleIsRepeating();\n  }\n}\n\ninterface PlaybackModel {\n  readonly isSlowMotion: boolean;\n  readonly isPlaying: boolean;\n  readonly isRepeating: boolean;\n}\n","export { ProjectService } from './project.service';\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { VectorLayer } from 'app/modules/editor/model/layers';\nimport { Animation } from 'app/modules/editor/model/timeline';\nimport { ModelUtil } from 'app/modules/editor/scripts/common';\nimport { FileExportService } from 'app/modules/editor/services/fileexport.service';\n\n// TODO: store hidden layer IDs and vector layer inside the animations?\ninterface Project {\n  readonly vectorLayer: VectorLayer;\n  readonly animation: Animation;\n  readonly hiddenLayerIds: ReadonlySet<string>;\n}\n\n@Injectable({ providedIn: 'root' })\nexport class ProjectService {\n  constructor(private readonly http: HttpClient) {}\n\n  /**\n   * Fetches a shape shifter project via HTTP.\n   * @param url the URL of the shape shifter project\n   */\n  getProject(url: string): Promise<Project> {\n    return this.http\n      .get(url)\n      .toPromise()\n      .then(response => {\n        const jsonObj = response;\n        const { vectorLayer, animation, hiddenLayerIds } = FileExportService.fromJSON(jsonObj);\n        return ModelUtil.regenerateModelIds(vectorLayer, animation, hiddenLayerIds) as Project;\n      });\n  }\n}\n","import { Property } from 'app/modules/editor/model/properties';\n\n/**\n * Stores information about an inspected property.\n * V is the property value type (number, string, or path).\n */\nexport class InspectedProperty<V> {\n  readonly typeName: string;\n\n  constructor(\n    // The model object being inspected (a layer, animation, or animation block).\n    model: any,\n    // The model object's inspected property.\n    readonly property: Property<V>,\n    // The model object's inspected property name.\n    readonly propertyName: string,\n    // The in-memory entered value map.\n    private readonly enteredValueMap: Map<string, any>,\n    // Stores the model's entered value for the given property name in the application store.\n    private readonly setValueFn: (value: V) => void,\n    // Returns the value associated with this model's property name.\n    private readonly getValueFn = () => model[propertyName],\n    // Provides an opportunity to edit the value before it is set.\n    private readonly transformEditedValueFn = (enteredValue: V) => enteredValue,\n    // Returns whether or not this property name is editable.\n    readonly isEditable = () => true,\n  ) {\n    this.typeName = this.property.getTypeName();\n  }\n\n  get value() {\n    return this.getValueFn();\n  }\n\n  set value(value: V) {\n    this.setValueFn(value);\n  }\n\n  getDisplayValue() {\n    return this.property.displayValueForValue(this.value);\n  }\n\n  get editableValue() {\n    const enteredValue = this.getEnteredValue();\n    return enteredValue === undefined\n      ? this.property.getEditableValue(this, 'value')\n      : enteredValue;\n  }\n\n  set editableValue(enteredValue: V) {\n    this.setEnteredValue(enteredValue);\n    enteredValue = this.transformEditedValueFn(enteredValue);\n    this.property.setEditableValue(this, 'value', enteredValue);\n  }\n\n  resolveEnteredValue() {\n    this.setEnteredValue(undefined);\n  }\n\n  private getEnteredValue() {\n    if (this.enteredValueMap.has(this.propertyName)) {\n      return this.enteredValueMap.get(this.propertyName);\n    }\n    return undefined;\n  }\n\n  private setEnteredValue(value: any) {\n    if (value === undefined) {\n      this.enteredValueMap.delete(this.propertyName);\n    } else {\n      this.enteredValueMap.set(this.propertyName, value);\n    }\n  }\n}\n","export { PropertyInputComponent } from './propertyinput.component';\n","module.exports = \"<div class=\\\"property-input mat-elevation-z4\\\"\\n  *ngIf=\\\"(this.themeState$ | async) as theme\\\"\\n  [class.dark-to-light-base200]=\\\"theme.prevThemeType === 'dark' && theme.currThemeType === 'light'\\\"\\n  [class.light-to-dark-base200]=\\\"theme.prevThemeType === 'light' && theme.currThemeType === 'dark'\\\"\\n  fxLayout=\\\"column\\\"\\n  fxFlex>\\n  <app-splitter [persistId]=\\\"'property-inspector'\\\"\\n    [edge]=\\\"'left'\\\"\\n    [min]=\\\"200\\\">\\n  </app-splitter>\\n  <ng-container *ngIf=\\\"(this.propertyInputModel$ | async) as model\\\">\\n    <!-- No models selected. -->\\n    <div *ngIf=\\\"model.numSelections === 0\\\"\\n      class=\\\"spi-empty\\\"\\n      fxFlex>\\n      Select something to edit its properties\\n    </div>\\n    <!-- At least one model selected. -->\\n    <div *ngIf=\\\"model.numSelections > 0\\\"\\n      fxLayout=\\\"column\\\"\\n      fxFlex>\\n      <div class=\\\"spi-header mat-elevation-z2\\\"\\n        [class.dark-to-light-base]=\\\"theme.prevThemeType === 'dark' && theme.currThemeType === 'light'\\\"\\n        [class.light-to-dark-base]=\\\"theme.prevThemeType === 'light' && theme.currThemeType === 'dark'\\\"\\n        fxLayoutAlign=\\\"center center\\\"\\n        fxFlex=\\\"none\\\">\\n        <mat-icon class=\\\"spi-selection-icon\\\"\\n          svgIcon=\\\"{{model.icon}}\\\">\\n        </mat-icon>\\n        <div class=\\\"spi-selection-description-container\\\"\\n          fxLayout=\\\"column\\\"\\n          fxFlex>\\n          <span class=\\\"spi-selection-description\\\">{{ model.description }}</span>\\n          <span class=\\\"spi-selection-sub-description\\\">{{ model.subDescription }}</span>\\n        </div>\\n        <mat-menu #addTimelineBlockMenu=\\\"matMenu\\\">\\n          <button mat-menu-item\\n            *ngFor=\\\"let propertyName of model.availablePropertyNames\\\"\\n            (click)=\\\"this.onAnimateLayerClick(model.model, propertyName)\\\">\\n            {{ propertyName }}\\n          </button>\\n        </mat-menu>\\n        <button mat-icon-button\\n          class=\\\"spi-secondary-icon\\\"\\n          *ngIf=\\\"this.shouldShowAnimateLayerButton(model)\\\"\\n          matTooltip=\\\"Animate this layer\\\"\\n          matTooltipPosition=\\\"left\\\"\\n          matTooltipShowDelay=\\\"500\\\"\\n          [matMenuTriggerFor]=\\\"addTimelineBlockMenu\\\">\\n          <mat-icon svgIcon=\\\"animationblock\\\"></mat-icon>\\n        </button>\\n        <button mat-icon-button\\n          class=\\\"spi-secondary-icon\\\"\\n          [disabled]=\\\"this.shouldDisableStartActionModeButton(model)\\\"\\n          *ngIf=\\\"this.shouldShowStartActionModeButton(model)\\\"\\n          (click)=\\\"this.onStartActionModeClick()\\\"\\n          matTooltip=\\\"Edit path morphing animation\\\"\\n          matTooltipPosition=\\\"left\\\"\\n          matTooltipShowDelay=\\\"500\\\">\\n          <mat-icon>edit</mat-icon>\\n        </button>\\n      </div>\\n      <div class=\\\"spi-body\\\"\\n        fxLayout=\\\"column\\\"\\n        fxFlex>\\n        <div class=\\\"spi-empty\\\"\\n          *ngIf=\\\"!model.inspectedProperties.length\\\"\\n          fxFlex>\\n          No shared properties to view or edit\\n        </div>\\n        <div class=\\\"spi-property\\\"\\n          *ngFor=\\\"let ip of model.inspectedProperties; trackBy: trackInspectedPropertyFn\\\">\\n          <div class=\\\"spi-property-name\\\">{{ ip.propertyName }}</div>\\n          <div class=\\\"spi-property-value\\\"\\n            fxLayout=\\\"row\\\">\\n            <div *ngIf=\\\"ip.typeName === 'ColorProperty'\\\"\\n              class=\\\"spi-property-color-preview\\\"\\n              [style.background-color]=\\\"this.androidToCssColor(ip.value)\\\">\\n            </div>\\n            <span *ngIf=\\\"!ip.isEditable()\\\"\\n              class=\\\"spi-property-value-static\\\"\\n              fxFlex>\\n              <!-- Only show text if the property isn't inspectable. -->\\n              {{ ip.getDisplayValue() }}\\n            </span>\\n            <div *ngIf=\\\"ip.isEditable()\\\"\\n              class=\\\"spi-property-value-editor\\\"\\n              fxLayout=\\\"column\\\"\\n              fxFlex>\\n              <input (keydown)=\\\"this.onValueEditorKeyDown($event, ip)\\\"\\n                [ngClass]=\\\"{\\n                  'has-input-error': ip.typeName === 'PathProperty' && this.shouldShowInvalidPathAnimationBlockMsg(model)\\n                }\\\"\\n                (blur)=\\\"ip.resolveEnteredValue()\\\"\\n                name=\\\"{{ip.propertyName}}\\\"\\n                [(ngModel)]=\\\"ip.editableValue\\\"\\n                *ngIf=\\\"ip.typeName === 'NameProperty'\\n                || ip.typeName === 'PathProperty'\\n                || ip.typeName === 'ColorProperty'\\n                || ip.typeName === 'NumberProperty'\\n                || ip.typeName === 'FractionProperty'\\\">\\n              <ng-container *ngIf=\\\"ip.typeName === 'EnumProperty'\\\">\\n                <mat-menu #enumMenu=\\\"matMenu\\\">\\n                  <button mat-menu-item\\n                    *ngFor=\\\"let option of ip.property.options; trackBy: trackEnumOptionFn\\\"\\n                    (click)=\\\"ip.value = option.value;\\\">\\n                  {{ option.label }}\\n                </button>\\n                </mat-menu>\\n                <button class=\\\"spi-property-value-menu-target\\\"\\n                  [matMenuTriggerFor]=\\\"enumMenu\\\">\\n                  <span class=\\\"spi-property-value-menu-current-value\\\">\\n                    {{ ip.getDisplayValue() }}\\n                  </span>\\n                </button>\\n              </ng-container>\\n            </div>\\n          </div>\\n        </div>\\n        <div *ngIf=\\\"this.shouldShowInvalidPathAnimationBlockMsg(model)\\\"\\n          class=\\\"alert alert-danger\\\"\\n          fxLayout=\\\"row\\\">\\n          <span class=\\\"paths-incompatible-text\\\"\\n            [innerHTML]=\\\"\\n            (this.isPathBlockFromValueEmpty(model.model) && !this.isPathBlockToValueEmpty(model.model))\\n              ? '<i>fromValue</i> must not be empty'\\n              : (!this.isPathBlockFromValueEmpty(model.model) && this.isPathBlockToValueEmpty(model.model))\\n                ? '<i>toValue</i> must not be empty'\\n                : (this.isPathBlockFromValueEmpty(model.model) && this.isPathBlockToValueEmpty(model.model))\\n                  ? '<i>fromValue</i> and <i>toValue</i> must not be empty'\\n                  : 'Paths are incompatible. <i>Auto fix</i> or click the <i>edit path morphing animation</i> button above.'\\\">\\n          </span>\\n          <button mat-icon-button\\n            class=\\\"auto-fix-button\\\"\\n            *ngIf=\\\"!this.isPathBlockFromValueEmpty(model.model) && !this.isPathBlockToValueEmpty(model.model)\\\"\\n            (click)=\\\"this.onAutoFixPathsClick(model)\\\"\\n            matTooltip=\\\"Auto fix\\\"\\n            matTooltipPosition=\\\"below\\\"\\n            matTooltipShowDelay=\\\"500\\\">\\n            <mat-icon svgIcon=\\\"autofix\\\"></mat-icon>\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </ng-container>\\n</div>\\n\"","module.exports = \".material-icons {\\n  font-weight: normal;\\n  font-style: normal;\\n  font-size: 24px;\\n  display: inline-block;\\n  width: 1em;\\n  height: 1em;\\n  line-height: 1;\\n  text-transform: none;\\n  letter-spacing: normal;\\n  word-wrap: normal;\\n  -webkit-font-smoothing: antialiased;\\n  text-rendering: optimizeLegibility;\\n  -moz-osx-font-smoothing: grayscale;\\n  font-feature-settings: 'liga';\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  font-family: 'Material Icons'; }\\n\\n.property-input {\\n  width: 320px;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  cursor: default;\\n  position: relative; }\\n\\n.spi-header {\\n  z-index: 1;\\n  display: flex;\\n  flex-direction: row;\\n  padding: 16px; }\\n\\n.spi-header .spi-selection-icon {\\n    margin-right: 12px;\\n    width: 32px;\\n    height: 32px; }\\n\\n.spi-header .spi-selection-description-container {\\n    padding: 4px 0; }\\n\\n.spi-header .spi-selection-description {\\n    font-weight: 500;\\n    font-size: 20px;\\n    line-height: 24px; }\\n\\n.spi-header .spi-selection-sub-description {\\n    font-size: 14px;\\n    line-height: 20px; }\\n\\n.spi-header .spi-selection-sub-description:empty {\\n      display: none; }\\n\\n.spi-body {\\n  overflow-y: auto;\\n  padding: 8px 0; }\\n\\n.spi-body .spi-property {\\n    display: flex;\\n    flex-direction: row;\\n    padding: 4px 16px;\\n    min-height: 24px; }\\n\\n.spi-body .spi-property-name {\\n    font-size: 14px;\\n    line-height: 24px;\\n    flex: 1 1 0; }\\n\\n.spi-body .spi-property-value {\\n    flex: 2 1 0;\\n    min-width: 0;\\n    font-size: 14px;\\n    line-height: 24px; }\\n\\n.spi-body .spi-property-value-static,\\n  .spi-body .spi-property-value-editor input,\\n  .spi-body .spi-property-value-menu-target {\\n    border: 0;\\n    border-radius: 2px;\\n    font-size: 14px;\\n    line-height: 20px;\\n    height: 24px;\\n    box-sizing: border-box;\\n    padding: 2px 6px;\\n    outline: 0; }\\n\\n.spi-body .spi-property-value-static {\\n    overflow-x: scroll;\\n    white-space: nowrap;\\n    overflow-y: hidden;\\n    -ms-overflow-style: none;\\n    -webkit-user-select: all;\\n       -moz-user-select: all;\\n        -ms-user-select: all;\\n            user-select: all;\\n    cursor: text; }\\n\\n.spi-body .spi-property-value-static::-webkit-scrollbar {\\n      display: none; }\\n\\n.spi-body .spi-property-value-menu-target {\\n    border: 0;\\n    text-align: left;\\n    position: relative;\\n    padding-right: 24px; }\\n\\n.spi-body .spi-property-value-menu-target::after {\\n      font-weight: normal;\\n      font-style: normal;\\n      font-size: 24px;\\n      display: inline-block;\\n      width: 1em;\\n      height: 1em;\\n      line-height: 1;\\n      text-transform: none;\\n      letter-spacing: normal;\\n      word-wrap: normal;\\n      -webkit-font-smoothing: antialiased;\\n      text-rendering: optimizeLegibility;\\n      -moz-osx-font-smoothing: grayscale;\\n      font-feature-settings: 'liga';\\n      -webkit-user-select: none;\\n         -moz-user-select: none;\\n          -ms-user-select: none;\\n              user-select: none;\\n      font-family: 'Material Icons';\\n      content: 'arrow_drop_down';\\n      position: absolute;\\n      font-size: 24px;\\n      right: 0;\\n      top: 50%;\\n      transform: translate(0, -50%); }\\n\\n.spi-body .spi-property-value-menu-current-value {\\n    display: block;\\n    width: 100%;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    white-space: nowrap; }\\n\\n.spi-body .spi-property-color-preview {\\n    width: 16px;\\n    height: 16px;\\n    min-width: 16px;\\n    min-height: 16px;\\n    margin: 4px 8px 4px 4px;\\n    border-radius: 50%; }\\n\\n.spi-empty {\\n  padding: 32px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  text-align: center;\\n  font-size: 14px;\\n  line-height: 20px; }\\n\\n.launch-shape-shifter-button {\\n  min-height: 72px;\\n  text-transform: uppercase; }\\n\\n.alert {\\n  padding: 16px;\\n  margin-top: 6px;\\n  margin-left: 16px;\\n  margin-right: 16px;\\n  margin-bottom: 16px;\\n  border: 1px solid transparent;\\n  border-radius: 4px; }\\n\\n.auto-fix-button {\\n  margin-left: 8px; }\\n\\n.paths-incompatible-text {\\n  font-size: 14px;\\n  line-height: 20px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9zdHlsZXMvbWF0ZXJpYWwtaWNvbnMuc2NzcyIsIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL3Byb3BlcnR5aW5wdXQvcHJvcGVydHlpbnB1dC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5QkE7RUF4Qkksb0JBQW1CO0VBQ25CLG1CQUFrQjtFQUNsQixnQkFBZTtFQUNmLHNCQUFxQjtFQUNyQixXQUFVO0VBQ1YsWUFBVztFQUNYLGVBQWM7RUFDZCxxQkFBb0I7RUFDcEIsdUJBQXNCO0VBQ3RCLGtCQUFpQjtFQUNqQixvQ0FBbUM7RUFDbkMsbUNBQWtDO0VBQ2xDLG1DQUFrQztFQUdsQyw4QkFBNkI7RUFDN0IsMEJBQWlCO0tBQWpCLHVCQUFpQjtNQUFqQixzQkFBaUI7VUFBakIsa0JBQWlCO0VBS2pCLDhCQUE2QixFQUtoQzs7QUN6QkQ7RUFDSSxhQUFZO0VBQ1osMEJBQWlCO0tBQWpCLHVCQUFpQjtNQUFqQixzQkFBaUI7VUFBakIsa0JBQWlCO0VBQ2pCLGdCQUFlO0VBQ2YsbUJBQWtCLEVBQ3JCOztBQUVEO0VBQ0ksV0FBVTtFQUNWLGNBQWE7RUFDYixvQkFBbUI7RUFDbkIsY0FBYSxFQXFCaEI7O0FBekJEO0lBTVEsbUJBQWtCO0lBQ2xCLFlBQVc7SUFDWCxhQUFZLEVBQ2Y7O0FBVEw7SUFXUSxlQUE0QixFQUMvQjs7QUFaTDtJQWNRLGlCQUFnQjtJQUNoQixnQkFBZTtJQUNmLGtCQUFpQixFQUNwQjs7QUFqQkw7SUFtQlEsZ0JBQWU7SUFDZixrQkFBaUIsRUFJcEI7O0FBeEJMO01Bc0JZLGNBQWEsRUFDaEI7O0FBSVQ7RUFDSSxpQkFBZ0I7RUFDaEIsZUFBYyxFQXVFakI7O0FBekVEO0lBSVEsY0FBYTtJQUNiLG9CQUFtQjtJQUNuQixrQkFBaUI7SUFDakIsaUJBQWdCLEVBQ25COztBQVJMO0lBVVEsZ0JBQWU7SUFDZixrQkFBaUI7SUFDakIsWUFBVyxFQUNkOztBQWJMO0lBZVEsWUFBVztJQUNYLGFBQVk7SUFDWixnQkFBZTtJQUNmLGtCQUFpQixFQUNwQjs7QUFuQkw7OztJQXVCUSxVQUFTO0lBQ1QsbUJBQWtCO0lBQ2xCLGdCQUFlO0lBQ2Ysa0JBQWlCO0lBQ2pCLGFBQVk7SUFDWix1QkFBc0I7SUFDdEIsaUJBQWdCO0lBQ2hCLFdBQVUsRUFDYjs7QUEvQkw7SUFpQ1EsbUJBQWtCO0lBQ2xCLG9CQUFtQjtJQUNuQixtQkFBa0I7SUFDbEIseUJBQXdCO0lBSXhCLHlCQUFnQjtPQUFoQixzQkFBZ0I7UUFBaEIscUJBQWdCO1lBQWhCLGlCQUFnQjtJQUNoQixhQUFZLEVBQ2Y7O0FBMUNMO01Bc0NZLGNBQWEsRUFDaEI7O0FBdkNUO0lBNENRLFVBQVM7SUFDVCxpQkFBZ0I7SUFDaEIsbUJBQWtCO0lBQ2xCLG9CQUFtQixFQVV0Qjs7QUF6REw7TURuQ0ksb0JBQW1CO01BQ25CLG1CQUFrQjtNQUNsQixnQkFBZTtNQUNmLHNCQUFxQjtNQUNyQixXQUFVO01BQ1YsWUFBVztNQUNYLGVBQWM7TUFDZCxxQkFBb0I7TUFDcEIsdUJBQXNCO01BQ3RCLGtCQUFpQjtNQUNqQixvQ0FBbUM7TUFDbkMsbUNBQWtDO01BQ2xDLG1DQUFrQztNQUdsQyw4QkFBNkI7TUFDN0IsMEJBQWlCO1NBQWpCLHVCQUFpQjtVQUFqQixzQkFBaUI7Y0FBakIsa0JBQWlCO01BS2pCLDhCQUE2QjtNQ2dFckIsMkJBQTBCO01BQzFCLG1CQUFrQjtNQUNsQixnQkFBZTtNQUNmLFNBQVE7TUFDUixTQUFRO01BQ1IsOEJBQTZCLEVBQ2hDOztBQXhEVDtJQTJEUSxlQUFjO0lBQ2QsWUFBVztJQUNYLGlCQUFnQjtJQUNoQix3QkFBdUI7SUFDdkIsb0JBQW1CLEVBQ3RCOztBQWhFTDtJQWtFUSxZQUFXO0lBQ1gsYUFBWTtJQUNaLGdCQUFlO0lBQ2YsaUJBQWdCO0lBQ2hCLHdCQUF1QjtJQUN2QixtQkFBa0IsRUFDckI7O0FBR0w7RUFDSSxjQUFhO0VBQ2IsY0FBYTtFQUNiLG9CQUFtQjtFQUNuQix3QkFBdUI7RUFDdkIsbUJBQWtCO0VBQ2xCLGdCQUFlO0VBQ2Ysa0JBQWlCLEVBQ3BCOztBQUVEO0VBQ0ksaUJBQWdCO0VBQ2hCLDBCQUF5QixFQUM1Qjs7QUFFRDtFQUNJLGNBQWE7RUFDYixnQkFBZTtFQUNmLGtCQUFpQjtFQUNqQixtQkFBa0I7RUFDbEIsb0JBQW1CO0VBQ25CLDhCQUE2QjtFQUM3QixtQkFBa0IsRUFDckI7O0FBRUQ7RUFDSSxpQkFBZ0IsRUFDbkI7O0FBRUQ7RUFDSSxnQkFBZTtFQUNmLGtCQUFpQixFQUNwQiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvZWRpdG9yL2NvbXBvbmVudHMvcHJvcGVydHlpbnB1dC9wcm9wZXJ0eWlucHV0LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQG1peGluIHVzZS1pY29uLWZvbnQge1xuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gICAgZm9udC1zdHlsZTogbm9ybWFsO1xuICAgIGZvbnQtc2l6ZTogMjRweDsgLy8gUHJlZmVycmVkIGljb24gc2l6ZVxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB3aWR0aDogMWVtO1xuICAgIGhlaWdodDogMWVtO1xuICAgIGxpbmUtaGVpZ2h0OiAxO1xuICAgIHRleHQtdHJhbnNmb3JtOiBub25lO1xuICAgIGxldHRlci1zcGFjaW5nOiBub3JtYWw7XG4gICAgd29yZC13cmFwOiBub3JtYWw7IC8vIFN1cHBvcnQgZm9yIGFsbCBXZWJLaXQgYnJvd3NlcnMuXG4gICAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7IC8vIFN1cHBvcnQgZm9yIFNhZmFyaSBhbmQgQ2hyb21lLlxuICAgIHRleHQtcmVuZGVyaW5nOiBvcHRpbWl6ZUxlZ2liaWxpdHk7IC8vIFN1cHBvcnQgZm9yIEZpcmVmb3guXG4gICAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTsgLy8gU3VwcG9ydCBmb3IgSUUuXG4gICAgLXdlYmtpdC1mb250LWZlYXR1cmUtc2V0dGluZ3M6ICdsaWdhJztcbiAgICAtbW96LWZvbnQtZmVhdHVyZS1zZXR0aW5nczogJ2xpZ2EnO1xuICAgIGZvbnQtZmVhdHVyZS1zZXR0aW5nczogJ2xpZ2EnOyAvLyBDdXN0b20gYWRkZWQgZm9yIEdNUFxuICAgIHVzZXItc2VsZWN0OiBub25lO1xufVxuXG5AbWl4aW4gbWF0ZXJpYWwtaWNvbnMge1xuICAgIEBpbmNsdWRlIHVzZS1pY29uLWZvbnQ7XG4gICAgZm9udC1mYW1pbHk6ICdNYXRlcmlhbCBJY29ucyc7XG59XG5cbi5tYXRlcmlhbC1pY29ucyB7XG4gICAgQGluY2x1ZGUgbWF0ZXJpYWwtaWNvbnM7XG59XG4iLCJAaW1wb3J0ICcuLi8uLi9zdHlsZXMvbWF0ZXJpYWwtaWNvbnMnO1xuXG4ucHJvcGVydHktaW5wdXQge1xuICAgIHdpZHRoOiAzMjBweDtcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICBjdXJzb3I6IGRlZmF1bHQ7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uc3BpLWhlYWRlciB7XG4gICAgei1pbmRleDogMTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgcGFkZGluZzogMTZweDtcbiAgICAuc3BpLXNlbGVjdGlvbi1pY29uIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMnB4O1xuICAgICAgICB3aWR0aDogMzJweDtcbiAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgIH1cbiAgICAuc3BpLXNlbGVjdGlvbi1kZXNjcmlwdGlvbi1jb250YWluZXIge1xuICAgICAgICBwYWRkaW5nOiAoMzJweCAtIDI0cHgpIC8gMiAwO1xuICAgIH1cbiAgICAuc3BpLXNlbGVjdGlvbi1kZXNjcmlwdGlvbiB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDI0cHg7XG4gICAgfVxuICAgIC5zcGktc2VsZWN0aW9uLXN1Yi1kZXNjcmlwdGlvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gICAgICAgICY6ZW1wdHkge1xuICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLnNwaS1ib2R5IHtcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgIHBhZGRpbmc6IDhweCAwO1xuICAgIC5zcGktcHJvcGVydHkge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgICBwYWRkaW5nOiA0cHggMTZweDtcbiAgICAgICAgbWluLWhlaWdodDogMjRweDtcbiAgICB9XG4gICAgLnNwaS1wcm9wZXJ0eS1uYW1lIHtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMjRweDtcbiAgICAgICAgZmxleDogMSAxIDA7XG4gICAgfVxuICAgIC5zcGktcHJvcGVydHktdmFsdWUge1xuICAgICAgICBmbGV4OiAyIDEgMDtcbiAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4O1xuICAgIH1cbiAgICAuc3BpLXByb3BlcnR5LXZhbHVlLXN0YXRpYyxcbiAgICAuc3BpLXByb3BlcnR5LXZhbHVlLWVkaXRvciBpbnB1dCxcbiAgICAuc3BpLXByb3BlcnR5LXZhbHVlLW1lbnUtdGFyZ2V0IHtcbiAgICAgICAgYm9yZGVyOiAwO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gICAgICAgIGhlaWdodDogMjRweDtcbiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgcGFkZGluZzogMnB4IDZweDtcbiAgICAgICAgb3V0bGluZTogMDtcbiAgICB9XG4gICAgLnNwaS1wcm9wZXJ0eS12YWx1ZS1zdGF0aWMge1xuICAgICAgICBvdmVyZmxvdy14OiBzY3JvbGw7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIG92ZXJmbG93LXk6IGhpZGRlbjtcbiAgICAgICAgLW1zLW92ZXJmbG93LXN0eWxlOiBub25lO1xuICAgICAgICAmOjotd2Via2l0LXNjcm9sbGJhciB7XG4gICAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB9XG4gICAgICAgIHVzZXItc2VsZWN0OiBhbGw7XG4gICAgICAgIGN1cnNvcjogdGV4dDtcbiAgICB9XG4gICAgLnNwaS1wcm9wZXJ0eS12YWx1ZS1tZW51LXRhcmdldCB7XG4gICAgICAgIGJvcmRlcjogMDtcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyNHB4O1xuICAgICAgICAmOjphZnRlciB7XG4gICAgICAgICAgICBAaW5jbHVkZSBtYXRlcmlhbC1pY29ucztcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdhcnJvd19kcm9wX2Rvd24nO1xuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgICAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsIC01MCUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC5zcGktcHJvcGVydHktdmFsdWUtbWVudS1jdXJyZW50LXZhbHVlIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICB9XG4gICAgLnNwaS1wcm9wZXJ0eS1jb2xvci1wcmV2aWV3IHtcbiAgICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICAgIGhlaWdodDogMTZweDtcbiAgICAgICAgbWluLXdpZHRoOiAxNnB4O1xuICAgICAgICBtaW4taGVpZ2h0OiAxNnB4O1xuICAgICAgICBtYXJnaW46IDRweCA4cHggNHB4IDRweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIH1cbn1cblxuLnNwaS1lbXB0eSB7XG4gICAgcGFkZGluZzogMzJweDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBsaW5lLWhlaWdodDogMjBweDtcbn1cblxuLmxhdW5jaC1zaGFwZS1zaGlmdGVyLWJ1dHRvbiB7XG4gICAgbWluLWhlaWdodDogNzJweDtcbiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xufVxuXG4uYWxlcnQge1xuICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgbWFyZ2luLXRvcDogNnB4O1xuICAgIG1hcmdpbi1sZWZ0OiAxNnB4O1xuICAgIG1hcmdpbi1yaWdodDogMTZweDtcbiAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbn1cblxuLmF1dG8tZml4LWJ1dHRvbiB7XG4gICAgbWFyZ2luLWxlZnQ6IDhweDtcbn1cblxuLnBhdGhzLWluY29tcGF0aWJsZS10ZXh0IHtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgbGluZS1oZWlnaHQ6IDIwcHg7XG59XG4iXX0= */\"","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { ActionMode } from 'app/modules/editor/model/actionmode';\nimport {\n  ClipPathLayer,\n  GroupLayer,\n  Layer,\n  LayerUtil,\n  PathLayer,\n  VectorLayer,\n} from 'app/modules/editor/model/layers';\nimport { FractionProperty, NameProperty, Option } from 'app/modules/editor/model/properties';\nimport { Animation, PathAnimationBlock } from 'app/modules/editor/model/timeline';\nimport { ColorUtil, ModelUtil } from 'app/modules/editor/scripts/common';\nimport {\n  ActionModeService,\n  LayerTimelineService,\n  PlaybackService,\n  ShortcutService,\n  ThemeService,\n} from 'app/modules/editor/services';\nimport { State, Store } from 'app/modules/editor/store';\nimport { getPropertyInputState } from 'app/modules/editor/store/common/selectors';\nimport { ThemeType } from 'app/modules/editor/store/theme/reducer';\nimport { SetAnimation } from 'app/modules/editor/store/timeline/actions';\nimport * as $ from 'jquery';\nimport * as _ from 'lodash';\nimport { Observable, combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { InspectedProperty } from './InspectedProperty';\n\ndeclare const ga: Function;\n\n// TODO: when you enter a 'start time' larger than 'end time', transform 'end time' correctly\n@Component({\n  selector: 'app-propertyinput',\n  templateUrl: './propertyinput.component.html',\n  styleUrls: ['./propertyinput.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PropertyInputComponent implements OnInit {\n  propertyInputModel$: Observable<PropertyInputModel>;\n\n  // Map used to track user state that has been entered into textfields\n  // but may not have been saved in the store.\n  private readonly enteredValueMap = new Map<string>();\n\n  themeState$: Observable<{ prevThemeType: ThemeType; currThemeType: ThemeType }>;\n\n  constructor(\n    private readonly store: Store<State>,\n    private readonly actionModeService: ActionModeService,\n    private readonly playbackService: PlaybackService,\n    private readonly layerTimelineService: LayerTimelineService,\n    readonly themeService: ThemeService,\n  ) {}\n\n  ngOnInit() {\n    let prevThemeType: ThemeType;\n    let currThemeType = this.themeService.getThemeType().themeType;\n    this.propertyInputModel$ = this.store.select(getPropertyInputState).pipe(\n      map(({ animation, isAnimationSelected, selectedBlockIds, vectorLayer, selectedLayerIds }) => {\n        prevThemeType = currThemeType = this.themeService.getThemeType().themeType;\n        if (selectedLayerIds.size) {\n          return this.buildInspectedLayerProperties(vectorLayer, selectedLayerIds, animation);\n        } else if (selectedBlockIds.size) {\n          return this.buildInspectedBlockProperties(vectorLayer, animation, selectedBlockIds);\n        } else if (isAnimationSelected) {\n          return this.buildInspectedAnimationProperties(animation);\n        } else {\n          return {\n            numSelections: 0,\n            inspectedProperties: [],\n            availablePropertyNames: [],\n          } as PropertyInputModel;\n        }\n      }),\n    );\n    this.themeState$ = combineLatest(\n      this.propertyInputModel$,\n      this.themeService.asObservable(),\n    ).pipe(\n      map(([unused, { themeType }]) => {\n        prevThemeType = currThemeType;\n        currThemeType = this.themeService.getThemeType().themeType;\n        return { prevThemeType, currThemeType };\n      }),\n    );\n  }\n\n  shouldShowStartActionModeButton(pim: PropertyInputModel) {\n    return pim.numSelections === 1 && pim.model instanceof PathAnimationBlock;\n  }\n\n  shouldDisableStartActionModeButton(pim: PropertyInputModel) {\n    if (!this.shouldShowStartActionModeButton(pim)) {\n      return false;\n    }\n    const { fromValue, toValue } = pim.model as PathAnimationBlock;\n    return !fromValue || !fromValue.getPathString() || !toValue || !toValue.getPathString();\n  }\n\n  onAutoFixPathsClick(pim: PropertyInputModel) {\n    this.actionModeService.autoFix();\n  }\n\n  onStartActionModeClick() {\n    ga('send', 'event', 'Action mode', 'Started');\n    this.actionModeService.setActionMode(ActionMode.Selection);\n  }\n\n  shouldShowAnimateLayerButton(pim: PropertyInputModel) {\n    return (\n      pim.availablePropertyNames.length > 0 &&\n      pim.numSelections === 1 &&\n      (pim.model instanceof VectorLayer ||\n        pim.model instanceof GroupLayer ||\n        pim.model instanceof ClipPathLayer ||\n        pim.model instanceof PathLayer)\n    );\n  }\n\n  onAnimateLayerClick(layer: Layer, propertyName: string) {\n    const clonedValue = layer.inspectableProperties\n      .get(propertyName)\n      .cloneValue((layer as any)[propertyName]);\n    const currentTime = this.playbackService.getCurrentTime();\n    this.layerTimelineService.addBlocks([\n      {\n        layerId: layer.id,\n        propertyName,\n        fromValue: clonedValue,\n        toValue: clonedValue,\n        currentTime,\n      },\n    ]);\n  }\n\n  shouldShowInvalidPathAnimationBlockMsg(pim: PropertyInputModel) {\n    return (\n      pim.numSelections === 1 &&\n      pim.model instanceof PathAnimationBlock &&\n      !pim.model.isAnimatable()\n    );\n  }\n\n  isPathBlockFromValueEmpty(block: PathAnimationBlock) {\n    return !block.fromValue || !block.fromValue.getPathString();\n  }\n\n  isPathBlockToValueEmpty(block: PathAnimationBlock) {\n    return !block.toValue || !block.toValue.getPathString();\n  }\n\n  onValueEditorKeyDown(event: KeyboardEvent, ip: InspectedProperty<any>) {\n    switch (event.keyCode) {\n      // Up/down arrow buttons.\n      case 38:\n      case 40:\n        ip.resolveEnteredValue();\n        const $target = $(event.target) as JQuery<HTMLInputElement>;\n        const numberValue = Number($target.val());\n        if (isNaN(numberValue)) {\n          break;\n        }\n        let delta = event.keyCode === 38 ? 1 : -1;\n\n        if (ip.property instanceof FractionProperty) {\n          delta *= 0.1;\n        }\n\n        if (event.shiftKey) {\n          // TODO: make this more obvious somehow\n          delta *= 10;\n        } else if (ShortcutService.isOsDependentModifierKey(event)) {\n          // TODO: make this more obvious somehow\n          delta /= 10;\n        }\n\n        ip.property.setEditableValue(ip, 'value', Number((numberValue + delta).toFixed(6)));\n        setTimeout(() => $target.get(0).select(), 0);\n        return false;\n    }\n    return undefined;\n  }\n\n  private buildInspectedLayerProperties(\n    vl: VectorLayer,\n    selectedLayerIds: ReadonlySet<string>,\n    animation: Animation,\n  ) {\n    const numSelections = selectedLayerIds.size;\n    const selectedLayers = Array.from(selectedLayerIds).map(id => vl.findLayerById(id));\n    if (numSelections > 1) {\n      return {\n        numSelections,\n        icon: 'collection',\n        description: `${numSelections} layers`,\n        // TODO: implement batch editting\n        inspectedProperties: [],\n        availablePropertyNames: [],\n      } as PropertyInputModel;\n    }\n    // Edit a single layer.\n    const enteredValueMap = this.enteredValueMap;\n    const layer = selectedLayers[0];\n    const icon = layer.type;\n    const description = layer.name;\n    const inspectedProperties: InspectedProperty<any>[] = [];\n    layer.inspectableProperties.forEach((property, propertyName) => {\n      inspectedProperties.push(\n        new InspectedProperty<any>(\n          layer,\n          property,\n          propertyName,\n          enteredValueMap,\n          value => {\n            // TODO: avoid dispatching the action if the properties are equal\n            const clonedLayer: any = layer.clone();\n            clonedLayer[propertyName] = value;\n            this.layerTimelineService.updateLayer(clonedLayer);\n          },\n          // TODO: return the 'rendered' value if an animation is ongoing? (see AIA)\n          undefined,\n          enteredValue => {\n            if (property instanceof NameProperty) {\n              return LayerUtil.getUniqueLayerName([vl], NameProperty.sanitize(enteredValue));\n            }\n            return enteredValue;\n          },\n          // TODO: copy AIA conditions to determine whether this should be editable\n          undefined,\n        ),\n      );\n    });\n    const availablePropertyNames = Array.from(\n      ModelUtil.getAvailablePropertyNamesForLayer(layer, animation),\n    );\n    return {\n      model: layer,\n      numSelections,\n      inspectedProperties,\n      icon,\n      description,\n      availablePropertyNames,\n    } as PropertyInputModel;\n  }\n\n  private buildInspectedBlockProperties(\n    vl: VectorLayer,\n    animation: Animation,\n    selectedBlockIds: ReadonlySet<string>,\n  ) {\n    const numSelections = selectedBlockIds.size;\n    const selectedBlocks = Array.from(selectedBlockIds).map(id => {\n      return _.find(animation.blocks, b => b.id === id);\n    });\n    if (numSelections > 1) {\n      return {\n        numSelections,\n        icon: 'collection',\n        // TODO: implement batch editting\n        description: `${numSelections} property animations`,\n        inspectedProperties: [],\n        availablePropertyNames: [],\n      } as PropertyInputModel;\n    }\n    const enteredValueMap = this.enteredValueMap;\n    const block = selectedBlocks[0];\n    const icon = 'animationblock';\n    const description = block.propertyName;\n    const blockLayer = vl.findLayerById(block.layerId);\n    const subDescription = `for '${blockLayer.name}'`;\n    const inspectedProperties: InspectedProperty<any>[] = [];\n    block.inspectableProperties.forEach((property, propertyName) => {\n      inspectedProperties.push(\n        new InspectedProperty<any>(block, property, propertyName, enteredValueMap, value => {\n          // TODO: avoid dispatching the action if the properties are equal\n          const clonedBlock: any = block.clone();\n          clonedBlock[propertyName] = value;\n          this.layerTimelineService.updateBlocks([clonedBlock]);\n        }),\n      );\n    });\n    return {\n      model: block,\n      numSelections,\n      inspectedProperties,\n      icon,\n      description,\n      subDescription,\n      availablePropertyNames: [],\n    } as PropertyInputModel;\n  }\n\n  private buildInspectedAnimationProperties(animation: Animation) {\n    const store = this.store;\n    const enteredValueMap = this.enteredValueMap;\n    const icon = 'animation';\n    const description = animation.name;\n    const inspectedProperties: InspectedProperty<any>[] = [];\n    animation.inspectableProperties.forEach((property, propertyName) => {\n      inspectedProperties.push(\n        new InspectedProperty<any>(\n          animation,\n          property,\n          propertyName,\n          enteredValueMap,\n          value => {\n            // TODO: avoid dispatching the action if the properties are equal\n            const clonedAnimation: any = animation.clone();\n            clonedAnimation[propertyName] = value;\n            store.dispatch(new SetAnimation(clonedAnimation));\n          },\n          undefined,\n          undefined,\n          undefined,\n        ),\n      );\n    });\n    return {\n      model: animation,\n      numSelections: 1,\n      inspectedProperties,\n      icon,\n      description,\n      availablePropertyNames: [],\n    } as PropertyInputModel;\n  }\n\n  // Called from the HTML template.\n  androidToCssColor(color: string) {\n    return ColorUtil.androidToCssHexColor(color);\n  }\n\n  trackInspectedPropertyFn(index: number, ip: InspectedProperty<any>) {\n    return ip.propertyName;\n  }\n\n  trackEnumOptionFn(index: number, option: Option) {\n    return option.value;\n  }\n}\n\n// TODO: use this for batch editing\n// function getSharedPropertyNames(items: ReadonlyArray<Inspectable>) {\n//   if (!items || !items.length) {\n//     return [];\n//   }\n//   let shared: ReadonlyArray<string>;\n//   items.forEach(item => {\n//     const names = Array.from(item.inspectableProperties.keys());\n//     if (!shared) {\n//       shared = names;\n//     } else {\n//       shared = shared.filter(n => names.includes(n));\n//     }\n//   });\n//   return shared;\n// }\n\ninterface PropertyInputModel {\n  readonly model?: any;\n  readonly numSelections: number;\n  readonly inspectedProperties: ReadonlyArray<InspectedProperty<any>>;\n  // TODO: use a union type here for better type safety?\n  readonly icon?: string;\n  readonly description?: string;\n  readonly subDescription?: string;\n  readonly availablePropertyNames: ReadonlyArray<string>;\n}\n","import { Directive, ElementRef, EventEmitter, HostListener, OnInit, Output } from '@angular/core';\nimport * as $ from 'jquery';\n\nenum DragState {\n  None = 0,\n  Dragging,\n  Loading,\n}\n\n@Directive({\n  selector: '[appDropTarget]',\n})\nexport class DropTargetDirective implements OnInit {\n  @Output()\n  onDropFiles = new EventEmitter<FileList>();\n\n  private element: JQuery;\n  private dragState = DragState.None;\n  private notDraggingTimeoutId: number;\n\n  constructor(private readonly elementRef: ElementRef) {}\n\n  ngOnInit() {\n    this.element = $(this.elementRef.nativeElement);\n    this.element.addClass('file-drop-target');\n  }\n\n  @HostListener('dragenter', ['$event'])\n  onDragEnter(event: Event) {\n    event.preventDefault();\n    this.setDragging(true);\n    return false;\n  }\n\n  @HostListener('dragover', ['$event'])\n  onDragOver(event: Event) {\n    event.preventDefault();\n    (event as DragEvent).dataTransfer.dropEffect = 'copy';\n    return false;\n  }\n\n  @HostListener('dragleave', ['$event'])\n  onDragLeave(event: Event) {\n    event.preventDefault();\n    this.setDragging(false);\n    return false;\n  }\n\n  @HostListener('drop', ['$event'])\n  onDrop(event: Event) {\n    this.setDragState(DragState.None);\n    this.onDropFiles.emit((event as DragEvent).dataTransfer.files);\n    return false;\n  }\n\n  private setDragState(state: DragState) {\n    this.dragState = state;\n    this.element.toggleClass('is-dragging-over', this.dragState === DragState.Dragging);\n    this.element.toggleClass('is-loading', this.dragState === DragState.Loading);\n  }\n\n  // Set up drag event listeners, with debouncing because dragging over/out\n  // of each child triggers these events on the element.\n  private setDragging(isDragging: boolean) {\n    if (isDragging) {\n      // When moving from child to child, dragenter is sent before dragleave\n      // on previous child.\n      window.setTimeout(() => {\n        if (this.notDraggingTimeoutId) {\n          window.clearTimeout(this.notDraggingTimeoutId);\n          this.notDraggingTimeoutId = undefined;\n        }\n        this.setDragState(DragState.Dragging);\n      }, 0);\n    } else {\n      if (this.notDraggingTimeoutId) {\n        window.clearTimeout(this.notDraggingTimeoutId);\n      }\n      this.notDraggingTimeoutId = window.setTimeout(() => this.setDragState(DragState.None), 100);\n    }\n  }\n}\n","module.exports = \"<div>\\n  <app-splashscreen fxLayoutAlign=\\\"center center\\\"\\n    *ngIf=\\\"this.isMobile()\\\">\\n  </app-splashscreen>\\n\\n  <!-- Disable drag start events by default. -->\\n  <div *ngIf=\\\"!this.isMobile()\\\"\\n    appDropTarget\\n    (onDropFiles)=\\\"onDropFiles($event)\\\"\\n    class=\\\"app-container\\\"\\n    fxLayout=\\\"column\\\"\\n    ondragstart=\\\"return false;\\\"\\n    (click)=\\\"this.onClick($event)\\\"\\n    fxFlex>\\n    <!-- Toolbar. -->\\n    <div class=\\\"toolbar-container\\\">\\n      <app-toolbar></app-toolbar>\\n    </div>\\n    <div fxLayout=\\\"row\\\"\\n      fxFlex>\\n      <!-- Tool Panel -->\\n      <app-toolpanel *ngIf=\\\"this.IS_BETA\\\"\\n        fxLayout=\\\"column\\\">\\n      </app-toolpanel>\\n      <div class=\\\"display-container\\\"\\n        *ngIf=\\\"(this.themeService.asObservable() | async) as theme\\\"\\n        [class.dark-to-light-base300]=\\\"!theme.isInitialPageLoad && theme.themeType === 'light'\\\"\\n        [class.light-to-dark-base300]=\\\"!theme.isInitialPageLoad && theme.themeType === 'dark'\\\"\\n        fxLayout=\\\"column\\\"\\n        fxFlex>\\n        <!-- Canvas -->\\n        <div #displayContainer\\n          fxLayout=\\\"row\\\"\\n          fxLayoutAlign=\\\"center center\\\"\\n          fxFlex\\n          [ngClass]=\\\"this.cursorClassName$ | async\\\">\\n          <app-canvas class=\\\"start\\\"\\n            *ngIf=\\\"this.isActionMode$ | async\\\"\\n            [actionSource]=\\\"ACTION_SOURCE_FROM\\\"\\n            [canvasBounds$]=\\\"this.canvasBounds$\\\">\\n          </app-canvas>\\n          <app-canvas [canvasBounds$]=\\\"this.canvasBounds$\\\"\\n            [actionSource]=\\\"ACTION_SOURCE_ANIMATED\\\">\\n          </app-canvas>\\n          <app-canvas class=\\\"end\\\"\\n            *ngIf=\\\"this.isActionMode$ | async\\\"\\n            [actionSource]=\\\"ACTION_SOURCE_TO\\\"\\n            [canvasBounds$]=\\\"this.canvasBounds$\\\">\\n          </app-canvas>\\n        </div>\\n        <!-- Playback controls. -->\\n        <app-playback></app-playback>\\n      </div>\\n      <!-- Property input panel. -->\\n      <app-propertyinput *ngIf=\\\"(this.isActionMode$ | async) === false\\\"\\n        fxLayout=\\\"column\\\"\\n        (click)=\\\"$event.stopPropagation()\\\">\\n      </app-propertyinput>\\n    </div>\\n    <!-- Layer list & animation timeline. -->\\n    <app-layertimeline></app-layertimeline>\\n  </div>\\n</div>\"","module.exports = \":host,\\n.app-container {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none; }\\n\\napp-canvas.start {\\n  margin-right: 48px; }\\n\\napp-canvas.end {\\n  margin-left: 48px; }\\n\\ndiv.toolbar-container {\\n  position: relative;\\n  z-index: 1; }\\n\\n.file-drop-target.is-dragging-over::after {\\n  content: '';\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 9999;\\n  -webkit-animation: pulsate-color 0.66s ease 0s infinite;\\n          animation: pulsate-color 0.66s ease 0s infinite;\\n  pointer-events: none;\\n  transform: translateZ(0); }\\n\\n@-webkit-keyframes pulsate-color {\\n  0% {\\n    opacity: 0.5; }\\n  50% {\\n    opacity: 1; }\\n  100% {\\n    opacity: 0.5; } }\\n\\n@keyframes pulsate-color {\\n  0% {\\n    opacity: 0.5; }\\n  50% {\\n    opacity: 1; }\\n  100% {\\n    opacity: 0.5; } }\\n\\ndiv.display-container {\\n  box-sizing: border-box;\\n  padding-bottom: 16px;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none; }\\n\\napp-toolpanel {\\n  background-color: white; }\\n\\n.cursor-default {\\n  cursor: default; }\\n\\n.cursor-pointer {\\n  cursor: pointer; }\\n\\n.cursor-resize0 {\\n  cursor: ns-resize; }\\n\\n.cursor-resize45 {\\n  cursor: nesw-resize; }\\n\\n.cursor-resize90 {\\n  cursor: ew-resize; }\\n\\n.cursor-resize135 {\\n  cursor: nwse-resize; }\\n\\n.cursor-zoom-in {\\n  cursor: zoom-in; }\\n\\n.cursor-zoom-out {\\n  cursor: zoom-out; }\\n\\n.cursor-grab {\\n  cursor: -webkit-grab;\\n  cursor: grab; }\\n\\n.cursor-grabbing {\\n  cursor: -webkit-grabbing;\\n  cursor: grabbing; }\\n\\n.cursor-point-select {\\n  cursor: url(/assets/cursor/point-select.png) 3 3, auto; }\\n\\n.cursor-crosshair {\\n  cursor: url(/assets/cursor/crosshair.png) 10 10, auto; }\\n\\n.cursor-pen {\\n  cursor: url(/assets/cursor/pen.png) 6 0, auto; }\\n\\n.cursor-pen-add {\\n  cursor: url(/assets/cursor/pen-add.png) 6 0, auto; }\\n\\n.cursor-pen-close {\\n  cursor: url(/assets/cursor/pen-close.png) 6 0, auto; }\\n\\n.cursor-pencil {\\n  cursor: url(/assets/cursor/pencil.png) 0 18, auto; }\\n\\n.cursor-rotate0 {\\n  cursor: url(/assets/cursor/rotate-top.png) 11 11, auto; }\\n\\n.cursor-rotate45 {\\n  cursor: url(/assets/cursor/rotate-top-right.png) 10 11, auto; }\\n\\n.cursor-rotate90 {\\n  cursor: url(/assets/cursor/rotate-right.png) 10 12, auto; }\\n\\n.cursor-rotate135 {\\n  cursor: url(/assets/cursor/rotate-bottom-right.png) 11 11, auto; }\\n\\n.cursor-rotate180 {\\n  cursor: url(/assets/cursor/rotate-bottom.png) 11 10, auto; }\\n\\n.cursor-rotate225 {\\n  cursor: url(/assets/cursor/rotate-bottom-left.png) 11 10, auto; }\\n\\n.cursor-rotate270 {\\n  cursor: url(/assets/cursor/rotate-left.png) 11 12, auto; }\\n\\n.cursor-rotate315 {\\n  cursor: url(/assets/cursor/rotate-top-left.png) 10 10, auto; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL3Jvb3Qvcm9vdC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7RUFFRSxtQkFBa0I7RUFDbEIsUUFBTztFQUNQLE9BQU07RUFDTixTQUFRO0VBQ1IsVUFBUztFQUNULDBCQUFpQjtLQUFqQix1QkFBaUI7TUFBakIsc0JBQWlCO1VBQWpCLGtCQUFpQixFQUNsQjs7QUFFRDtFQUNFLG1CQUFrQixFQUNuQjs7QUFFRDtFQUNFLGtCQUFpQixFQUNsQjs7QUFFRDtFQUNFLG1CQUFrQjtFQUNsQixXQUFVLEVBQ1g7O0FBRUQ7RUFFSSxZQUFXO0VBQ1gsbUJBQWtCO0VBQ2xCLFFBQU87RUFDUCxPQUFNO0VBQ04sU0FBUTtFQUNSLFVBQVM7RUFDVCxjQUFhO0VBQ2Isd0RBQStDO1VBQS9DLGdEQUErQztFQUMvQyxxQkFBb0I7RUFDcEIseUJBQXdCLEVBQ3pCOztBQUNEO0VBQ0U7SUFDRSxhQUFZLEVBQUE7RUFFZDtJQUNFLFdBQVUsRUFBQTtFQUVaO0lBQ0UsYUFBWSxFQUFBLEVBQUE7O0FBUmhCO0VBQ0U7SUFDRSxhQUFZLEVBQUE7RUFFZDtJQUNFLFdBQVUsRUFBQTtFQUVaO0lBQ0UsYUFBWSxFQUFBLEVBQUE7O0FBS2xCO0VBQ0UsdUJBQXNCO0VBQ3RCLHFCQUFvQjtFQUNwQiwwQkFBaUI7S0FBakIsdUJBQWlCO01BQWpCLHNCQUFpQjtVQUFqQixrQkFBaUIsRUFDbEI7O0FBRUQ7RUFFRSx3QkFBdUIsRUFDeEI7O0FBRUQ7RUFDRSxnQkFBZSxFQUNoQjs7QUFFRDtFQUNFLGdCQUFlLEVBQ2hCOztBQUVEO0VBQ0Usa0JBQWlCLEVBQ2xCOztBQUVEO0VBQ0Usb0JBQW1CLEVBQ3BCOztBQUVEO0VBQ0Usa0JBQWlCLEVBQ2xCOztBQUVEO0VBQ0Usb0JBQW1CLEVBQ3BCOztBQUVEO0VBQ0UsZ0JBQWUsRUFDaEI7O0FBRUQ7RUFDRSxpQkFBZ0IsRUFDakI7O0FBRUQ7RUFDRSxxQkFBWTtFQUFaLGFBQVksRUFDYjs7QUFFRDtFQUNFLHlCQUFnQjtFQUFoQixpQkFBZ0IsRUFDakI7O0FBRUQ7RUFDRSx1REFBc0QsRUFDdkQ7O0FBRUQ7RUFDRSxzREFBcUQsRUFDdEQ7O0FBRUQ7RUFDRSw4Q0FBNkMsRUFDOUM7O0FBRUQ7RUFDRSxrREFBaUQsRUFDbEQ7O0FBRUQ7RUFDRSxvREFBbUQsRUFDcEQ7O0FBRUQ7RUFDRSxrREFBaUQsRUFDbEQ7O0FBRUQ7RUFDRSx1REFBc0QsRUFDdkQ7O0FBRUQ7RUFDRSw2REFBNEQsRUFDN0Q7O0FBRUQ7RUFDRSx5REFBd0QsRUFDekQ7O0FBRUQ7RUFDRSxnRUFBK0QsRUFDaEU7O0FBRUQ7RUFDRSwwREFBeUQsRUFDMUQ7O0FBRUQ7RUFDRSwrREFBOEQsRUFDL0Q7O0FBRUQ7RUFDRSx3REFBdUQsRUFDeEQ7O0FBRUQ7RUFDRSw0REFBMkQsRUFDNUQiLCJmaWxlIjoic3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL3Jvb3Qvcm9vdC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0LFxuLmFwcC1jb250YWluZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG59XG5cbmFwcC1jYW52YXMuc3RhcnQge1xuICBtYXJnaW4tcmlnaHQ6IDQ4cHg7XG59XG5cbmFwcC1jYW52YXMuZW5kIHtcbiAgbWFyZ2luLWxlZnQ6IDQ4cHg7XG59XG5cbmRpdi50b29sYmFyLWNvbnRhaW5lciB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgei1pbmRleDogMTtcbn1cblxuLmZpbGUtZHJvcC10YXJnZXQge1xuICAmLmlzLWRyYWdnaW5nLW92ZXI6OmFmdGVyIHtcbiAgICBjb250ZW50OiAnJztcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogMDtcbiAgICB0b3A6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIHotaW5kZXg6IDk5OTk7XG4gICAgYW5pbWF0aW9uOiBwdWxzYXRlLWNvbG9yIDAuNjZzIGVhc2UgMHMgaW5maW5pdGU7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApO1xuICB9XG4gIEBrZXlmcmFtZXMgcHVsc2F0ZS1jb2xvciB7XG4gICAgMCUge1xuICAgICAgb3BhY2l0eTogMC41O1xuICAgIH1cbiAgICA1MCUge1xuICAgICAgb3BhY2l0eTogMTtcbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICBvcGFjaXR5OiAwLjU7XG4gICAgfVxuICB9XG59XG5cbmRpdi5kaXNwbGF5LWNvbnRhaW5lciB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHBhZGRpbmctYm90dG9tOiAxNnB4O1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbn1cblxuYXBwLXRvb2xwYW5lbCB7XG4gIC8vIFRPRE86IG1ha2UgdGhpcyBjb2xvciB0aGVtZSBkZXBlbmRlbnRcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG59XG5cbi5jdXJzb3ItZGVmYXVsdCB7XG4gIGN1cnNvcjogZGVmYXVsdDtcbn1cblxuLmN1cnNvci1wb2ludGVyIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4uY3Vyc29yLXJlc2l6ZTAge1xuICBjdXJzb3I6IG5zLXJlc2l6ZTtcbn1cblxuLmN1cnNvci1yZXNpemU0NSB7XG4gIGN1cnNvcjogbmVzdy1yZXNpemU7XG59XG5cbi5jdXJzb3ItcmVzaXplOTAge1xuICBjdXJzb3I6IGV3LXJlc2l6ZTtcbn1cblxuLmN1cnNvci1yZXNpemUxMzUge1xuICBjdXJzb3I6IG53c2UtcmVzaXplO1xufVxuXG4uY3Vyc29yLXpvb20taW4ge1xuICBjdXJzb3I6IHpvb20taW47XG59XG5cbi5jdXJzb3Item9vbS1vdXQge1xuICBjdXJzb3I6IHpvb20tb3V0O1xufVxuXG4uY3Vyc29yLWdyYWIge1xuICBjdXJzb3I6IGdyYWI7XG59XG5cbi5jdXJzb3ItZ3JhYmJpbmcge1xuICBjdXJzb3I6IGdyYWJiaW5nO1xufVxuXG4uY3Vyc29yLXBvaW50LXNlbGVjdCB7XG4gIGN1cnNvcjogdXJsKC9hc3NldHMvY3Vyc29yL3BvaW50LXNlbGVjdC5wbmcpIDMgMywgYXV0bztcbn1cblxuLmN1cnNvci1jcm9zc2hhaXIge1xuICBjdXJzb3I6IHVybCgvYXNzZXRzL2N1cnNvci9jcm9zc2hhaXIucG5nKSAxMCAxMCwgYXV0bztcbn1cblxuLmN1cnNvci1wZW4ge1xuICBjdXJzb3I6IHVybCgvYXNzZXRzL2N1cnNvci9wZW4ucG5nKSA2IDAsIGF1dG87XG59XG5cbi5jdXJzb3ItcGVuLWFkZCB7XG4gIGN1cnNvcjogdXJsKC9hc3NldHMvY3Vyc29yL3Blbi1hZGQucG5nKSA2IDAsIGF1dG87XG59XG5cbi5jdXJzb3ItcGVuLWNsb3NlIHtcbiAgY3Vyc29yOiB1cmwoL2Fzc2V0cy9jdXJzb3IvcGVuLWNsb3NlLnBuZykgNiAwLCBhdXRvO1xufVxuXG4uY3Vyc29yLXBlbmNpbCB7XG4gIGN1cnNvcjogdXJsKC9hc3NldHMvY3Vyc29yL3BlbmNpbC5wbmcpIDAgMTgsIGF1dG87XG59XG5cbi5jdXJzb3Itcm90YXRlMCB7XG4gIGN1cnNvcjogdXJsKC9hc3NldHMvY3Vyc29yL3JvdGF0ZS10b3AucG5nKSAxMSAxMSwgYXV0bztcbn1cblxuLmN1cnNvci1yb3RhdGU0NSB7XG4gIGN1cnNvcjogdXJsKC9hc3NldHMvY3Vyc29yL3JvdGF0ZS10b3AtcmlnaHQucG5nKSAxMCAxMSwgYXV0bztcbn1cblxuLmN1cnNvci1yb3RhdGU5MCB7XG4gIGN1cnNvcjogdXJsKC9hc3NldHMvY3Vyc29yL3JvdGF0ZS1yaWdodC5wbmcpIDEwIDEyLCBhdXRvO1xufVxuXG4uY3Vyc29yLXJvdGF0ZTEzNSB7XG4gIGN1cnNvcjogdXJsKC9hc3NldHMvY3Vyc29yL3JvdGF0ZS1ib3R0b20tcmlnaHQucG5nKSAxMSAxMSwgYXV0bztcbn1cblxuLmN1cnNvci1yb3RhdGUxODAge1xuICBjdXJzb3I6IHVybCgvYXNzZXRzL2N1cnNvci9yb3RhdGUtYm90dG9tLnBuZykgMTEgMTAsIGF1dG87XG59XG5cbi5jdXJzb3Itcm90YXRlMjI1IHtcbiAgY3Vyc29yOiB1cmwoL2Fzc2V0cy9jdXJzb3Ivcm90YXRlLWJvdHRvbS1sZWZ0LnBuZykgMTEgMTAsIGF1dG87XG59XG5cbi5jdXJzb3Itcm90YXRlMjcwIHtcbiAgY3Vyc29yOiB1cmwoL2Fzc2V0cy9jdXJzb3Ivcm90YXRlLWxlZnQucG5nKSAxMSAxMiwgYXV0bztcbn1cblxuLmN1cnNvci1yb3RhdGUzMTUge1xuICBjdXJzb3I6IHVybCgvYXNzZXRzL2N1cnNvci9yb3RhdGUtdG9wLWxlZnQucG5nKSAxMCAxMCwgYXV0bztcbn1cbiJdfQ== */\"","import { OverlayContainer } from '@angular/cdk/overlay';\nimport {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  HostBinding,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { DialogService, DropFilesAction } from 'app/modules/editor/components/dialogs';\nimport { ProjectService } from 'app/modules/editor/components/project';\nimport { ActionMode, ActionSource } from 'app/modules/editor/model/actionmode';\nimport { CursorType } from 'app/modules/editor/model/paper';\nimport { bugsnagClient } from 'app/modules/editor/scripts/bugsnag';\nimport { DestroyableMixin } from 'app/modules/editor/scripts/mixins';\nimport {\n  ActionModeService,\n  ClipboardService,\n  FileImportService,\n  LayerTimelineService,\n  ShortcutService,\n  ThemeService,\n} from 'app/modules/editor/services';\nimport { Duration, SnackBarService } from 'app/modules/editor/services/snackbar.service';\nimport { State, Store } from 'app/modules/editor/store';\nimport { getActionMode, getActionModeHover } from 'app/modules/editor/store/actionmode/selectors';\nimport { isWorkspaceDirty } from 'app/modules/editor/store/common/selectors';\nimport { getCursorType } from 'app/modules/editor/store/paper/selectors';\nimport { ResetWorkspace } from 'app/modules/editor/store/reset/actions';\nimport * as erd from 'element-resize-detector';\nimport { environment } from 'environments/environment';\nimport * as $ from 'jquery';\nimport { BehaviorSubject, Observable, combineLatest } from 'rxjs';\nimport { distinctUntilChanged, first, map } from 'rxjs/operators';\n\nconst IS_DEV_BUILD = !environment.production;\nconst ELEMENT_RESIZE_DETECTOR = erd({ strategy: 'scroll' });\nconst STORAGE_KEY_FIRST_TIME_USER = 'storage_key_first_time_user';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './root.component.html',\n  styleUrls: ['./root.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class RootComponent extends DestroyableMixin() implements OnInit, AfterViewInit, OnDestroy {\n  readonly ACTION_SOURCE_FROM = ActionSource.From;\n  readonly ACTION_SOURCE_ANIMATED = ActionSource.Animated;\n  readonly ACTION_SOURCE_TO = ActionSource.To;\n\n  readonly IS_BETA = environment.beta;\n\n  @HostBinding('class.ss-dark-theme')\n  isDarkThemeHostBinding: boolean;\n  @ViewChild('displayContainer')\n  displayContainerRef: ElementRef;\n  private $displayContainer: JQuery;\n\n  private readonly displayBoundsSubject = new BehaviorSubject<Size>({ w: 1, h: 1 });\n  canvasBounds$: Observable<Size>;\n  isActionMode$: Observable<boolean>;\n  cursorClassName$: Observable<string>;\n\n  constructor(\n    private readonly snackBarService: SnackBarService,\n    private readonly fileImportService: FileImportService,\n    private readonly store: Store<State>,\n    private readonly actionModeService: ActionModeService,\n    private readonly shortcutService: ShortcutService,\n    private readonly demoService: ProjectService,\n    private readonly dialogService: DialogService,\n    private readonly clipboardService: ClipboardService,\n    private readonly layerTimelineService: LayerTimelineService,\n    readonly themeService: ThemeService,\n    private readonly overlayContainer: OverlayContainer,\n  ) {\n    super();\n  }\n\n  ngOnInit() {\n    this.shortcutService.init();\n    this.clipboardService.init();\n\n    this.registerSubscription(\n      this.themeService.asObservable().subscribe(t => {\n        const isDark = t.themeType === 'dark';\n        this.isDarkThemeHostBinding = isDark;\n        const { classList } = this.overlayContainer.getContainerElement();\n        if (isDark) {\n          classList.add('ss-dark-theme');\n        } else {\n          classList.remove('ss-dark-theme');\n        }\n      }),\n    );\n\n    $(window).on('beforeunload', event => {\n      let isDirty: boolean;\n      this.store\n        .select(isWorkspaceDirty)\n        .pipe(first())\n        .subscribe(dirty => (isDirty = dirty));\n      if (isDirty && !IS_DEV_BUILD) {\n        return `You've made changes but haven't saved. Are you sure you want to navigate away?`;\n      }\n      return undefined;\n    });\n\n    const displaySize$ = this.displayBoundsSubject.asObservable().pipe(\n      distinctUntilChanged((s1, s2) => {\n        return s1.w === s2.w && s1.h === s2.h;\n      }),\n    );\n    this.isActionMode$ = this.store\n      .select(getActionMode)\n      .pipe(map(mode => mode !== ActionMode.None));\n    this.canvasBounds$ = combineLatest(displaySize$, this.isActionMode$).pipe(\n      map(([{ w, h }, shouldShowThreeCanvases]) => {\n        return { w: w / (shouldShowThreeCanvases ? 3 : 1), h };\n      }),\n    );\n\n    this.cursorClassName$ = combineLatest(\n      this.store.select(getCursorType),\n      this.store.select(getActionMode),\n      this.store.select(getActionModeHover),\n    ).pipe(\n      map(([cursorType, mode, hover]) => {\n        if (mode === ActionMode.SplitCommands || mode === ActionMode.SplitSubPaths) {\n          return CursorType.Pen;\n        } else if (hover) {\n          return CursorType.Pointer;\n        }\n        return cursorType || CursorType.Default;\n      }),\n      map(cursorType => `cursor-${cursorType}`),\n    );\n  }\n\n  ngAfterViewInit() {\n    if (!this.isMobile()) {\n      this.$displayContainer = $(this.displayContainerRef.nativeElement);\n      ELEMENT_RESIZE_DETECTOR.listenTo(this.$displayContainer.get(0), () => {\n        const w = this.$displayContainer.width();\n        const h = this.$displayContainer.height();\n        this.displayBoundsSubject.next({ w, h });\n      });\n    }\n\n    if ('serviceWorker' in navigator) {\n      const isFirstTimeUser = window.localStorage.getItem(STORAGE_KEY_FIRST_TIME_USER);\n      if (!isFirstTimeUser) {\n        window.localStorage.setItem(STORAGE_KEY_FIRST_TIME_USER, 'true');\n        setTimeout(() => {\n          this.snackBarService.show('Ready to work offline', 'Dismiss', Duration.Long);\n        });\n      }\n    }\n\n    const projectUrl = getUrlParameter('project');\n    if (projectUrl) {\n      this.demoService\n        .getProject(projectUrl)\n        .then(({ vectorLayer, animation, hiddenLayerIds }) => {\n          this.store.dispatch(new ResetWorkspace(vectorLayer, animation, hiddenLayerIds));\n        })\n        .catch(e => {\n          this.snackBarService.show(\n            `There was a problem loading the Shape Shifter project`,\n            'Dismiss',\n            Duration.Long,\n          );\n        });\n    }\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n    if (!this.isMobile()) {\n      ELEMENT_RESIZE_DETECTOR.removeAllListeners(this.$displayContainer.get(0));\n    }\n    this.shortcutService.destroy();\n    this.clipboardService.destroy();\n    $(window).unbind('beforeunload');\n  }\n\n  // Called by the DropTargetDirective.\n  onDropFiles(fileList: FileList) {\n    if (this.actionModeService.isActionMode()) {\n      // TODO: make action mode automatically exit when layers/blocks are added in other parts of the app\n      bugsnagClient.notify('Attempt to import files while in action mode', {\n        severity: 'warning',\n      });\n      return;\n    }\n    if (!fileList || !fileList.length) {\n      return;\n    }\n    const files: File[] = [];\n    // tslint:disable-next-line: prefer-for-of\n    for (let i = 0; i < fileList.length; i++) {\n      files.push(fileList[i]);\n    }\n    const type = files[0].type;\n    if (!files.every(file => file.type === type)) {\n      // TODO: handle attempts to import different types of files better\n      return;\n    }\n    if (type === 'application/json' || files[0].name.match(/\\.shapeshifter$/)) {\n      // TODO: Show a dialog here as well?\n      this.fileImportService.import(fileList, true /* resetWorkspace */);\n      return;\n    }\n\n    this.dialogService.dropFiles().subscribe(action => {\n      if (action === DropFilesAction.AddToWorkspace) {\n        this.fileImportService.import(fileList);\n      } else if (action === DropFilesAction.ResetWorkspace) {\n        this.fileImportService.import(fileList, true /* resetWorkspace */);\n      }\n    });\n  }\n\n  onClick(event: MouseEvent) {\n    const actionMode = this.actionModeService.getActionMode();\n    if (actionMode === ActionMode.None) {\n      this.layerTimelineService.clearSelections();\n    } else if (actionMode === ActionMode.Selection) {\n      this.actionModeService.setSelections([]);\n    } else {\n      this.actionModeService.setActionMode(ActionMode.Selection);\n    }\n  }\n\n  isMobile() {\n    return window.navigator.userAgent.includes('Mobile');\n  }\n}\n\ninterface Size {\n  readonly w: number;\n  readonly h: number;\n}\n\nfunction getUrlParameter(name: string) {\n  name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  const regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n  const results = regex.exec(location.search);\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n","import { Directive, ElementRef, HostListener, Input, OnDestroy } from '@angular/core';\nimport * as $ from 'jquery';\n\nconst GROUPS = new Map<string, JQuery[]>();\n\n@Directive({\n  selector: '[appScrollGroup]',\n})\nexport class ScrollGroupDirective implements OnDestroy {\n  @Input()\n  scrollGroup: string;\n\n  private readonly element: JQuery;\n\n  constructor(elementRef: ElementRef) {\n    this.element = $(elementRef.nativeElement);\n    GROUPS.set(this.scrollGroup, GROUPS.get(this.scrollGroup) || []);\n    GROUPS.get(this.scrollGroup).push(this.element);\n  }\n\n  ngOnDestroy() {\n    GROUPS.get(this.scrollGroup).splice(GROUPS.get(this.scrollGroup).indexOf(this.element), 1);\n  }\n\n  @HostListener('scroll', ['$event'])\n  onScrollEvent(event: MouseEvent) {\n    const scrollTop = this.element.scrollTop();\n    GROUPS.get(this.scrollGroup).forEach(e => {\n      if (this.element !== e) {\n        e.scrollTop(scrollTop);\n      }\n    });\n  }\n}\n","module.exports = \"<div fxLayout=\\\"column\\\"\\n  fxLayoutAlign=\\\"center center\\\">\\n\\n  <mat-icon class=\\\"splashscreen-logo\\\"\\n    svgIcon=\\\"shapeshifter\\\">\\n  </mat-icon>\\n\\n  <div class=\\\"splashscreen-text\\\">Shape Shifter is an icon animation tool designed for desktop browsers</div>\\n\\n</div>\\n\"","module.exports = \"/* Theme for the ripple elements.*/\\n/* stylelint-disable material/no-prefixes */\\n/* stylelint-enable */\\n:host {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  background-color: #e0e0e0; }\\n.splashscreen-logo {\\n  width: 144px;\\n  height: 144px;\\n  margin-bottom: 16px; }\\n.splashscreen-text {\\n  font-size: 18px;\\n  line-height: 22px;\\n  padding-left: 16px;\\n  padding-right: 16px;\\n  padding-bottom: 16px;\\n  text-align: center; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvbm9kZV9tb2R1bGVzL0Bhbmd1bGFyL21hdGVyaWFsL190aGVtaW5nLnNjc3MiLCIvaG9tZS91YnVudHUvU2hhcGVTaGlmdGVyL3NyYy9hcHAvbW9kdWxlcy9lZGl0b3IvY29tcG9uZW50cy9zcGxhc2hzY3JlZW4vc3BsYXNoc2NyZWVuLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXkxQ0EsbUNBQW1DO0FBb2hEbkMsNENBQTRDO0FBd0M1QyxzQkFBc0I7QUNwNUZ0QjtFQUNJLG1CQUFrQjtFQUNsQixRQUFPO0VBQ1AsT0FBTTtFQUNOLFNBQVE7RUFDUixVQUFTO0VBQ1QsMEJBQWlCO0tBQWpCLHVCQUFpQjtNQUFqQixzQkFBaUI7VUFBakIsa0JBQWlCO0VBQ2pCLDBCRHFrQ1UsRUNwa0NiO0FBRUQ7RUFDSSxhQUFZO0VBQ1osY0FBYTtFQUNiLG9CQUFtQixFQUN0QjtBQUVEO0VBQ0ksZ0JBQWU7RUFDZixrQkFBaUI7RUFDakIsbUJBQWtCO0VBQ2xCLG9CQUFtQjtFQUNuQixxQkFBb0I7RUFDcEIsbUJBQWtCLEVBQ3JCIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9lZGl0b3IvY29tcG9uZW50cy9zcGxhc2hzY3JlZW4vc3BsYXNoc2NyZWVuLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0IGFsbCB0aGUgdGhlbWluZyBmdW5jdGlvbmFsaXR5LlxuLy8gV2UgY2FuIHVzZSByZWxhdGl2ZSBpbXBvcnRzIGZvciBpbXBvcnRzIGZyb20gdGhlIGNkayBiZWNhdXNlIHdlIGJ1bmRsZSBldmVyeXRoaW5nXG4vLyB1cCBpbnRvIGEgc2luZ2xlIGZsYXQgc2NzcyBmaWxlIGZvciBtYXRlcmlhbC5cbi8vIFdlIHdhbnQgb3ZlcmxheXMgdG8gYWx3YXlzIGFwcGVhciBvdmVyIHVzZXIgY29udGVudCwgc28gc2V0IGEgYmFzZWxpbmVcbi8vIHZlcnkgaGlnaCB6LWluZGV4IGZvciB0aGUgb3ZlcmxheSBjb250YWluZXIsIHdoaWNoIGlzIHdoZXJlIHdlIGNyZWF0ZSB0aGUgbmV3XG4vLyBzdGFja2luZyBjb250ZXh0IGZvciBhbGwgb3ZlcmxheXMuXG4kY2RrLXotaW5kZXgtb3ZlcmxheS1jb250YWluZXI6IDEwMDA7XG4kY2RrLXotaW5kZXgtb3ZlcmxheTogMTAwMDtcbiRjZGstei1pbmRleC1vdmVybGF5LWJhY2tkcm9wOiAxMDAwO1xuXG4vLyBCYWNrZ3JvdW5kIGNvbG9yIGZvciBhbGwgb2YgdGhlIGJhY2tkcm9wc1xuJGNkay1vdmVybGF5LWRhcmstYmFja2Ryb3AtYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjMyKTtcblxuLy8gRGVmYXVsdCBiYWNrZHJvcCBhbmltYXRpb24gaXMgYmFzZWQgb24gdGhlIE1hdGVyaWFsIERlc2lnbiBzd2lmdC1lYXNlLW91dC5cbiRiYWNrZHJvcC1hbmltYXRpb24tZHVyYXRpb246IDQwMG1zICFkZWZhdWx0O1xuJGJhY2tkcm9wLWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllcigwLjI1LCAwLjgsIDAuMjUsIDEpICFkZWZhdWx0O1xuXG5cbkBtaXhpbiBjZGstb3ZlcmxheSgpIHtcbiAgLmNkay1vdmVybGF5LWNvbnRhaW5lciwgLmNkay1nbG9iYWwtb3ZlcmxheS13cmFwcGVyIHtcbiAgICAvLyBEaXNhYmxlIGV2ZW50cyBmcm9tIGJlaW5nIGNhcHR1cmVkIG9uIHRoZSBvdmVybGF5IGNvbnRhaW5lci5cbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcblxuICAgIC8vIFRoZSBjb250YWluZXIgc2hvdWxkIGJlIHRoZSBzaXplIG9mIHRoZSB2aWV3cG9ydC5cbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cblxuICAvLyBUaGUgb3ZlcmxheS1jb250YWluZXIgaXMgYW4gaW52aXNpYmxlIGVsZW1lbnQgd2hpY2ggY29udGFpbnMgYWxsIGluZGl2aWR1YWwgb3ZlcmxheXMuXG4gIC5jZGstb3ZlcmxheS1jb250YWluZXIge1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICB6LWluZGV4OiAkY2RrLXotaW5kZXgtb3ZlcmxheS1jb250YWluZXI7XG5cbiAgICAmOmVtcHR5IHtcbiAgICAgIC8vIEhpZGUgdGhlIGVsZW1lbnQgd2hlbiBpdCBkb2Vzbid0IGhhdmUgYW55IGNoaWxkIG5vZGVzLiBUaGlzIGRvZXNuJ3RcbiAgICAgIC8vIGluY2x1ZGUgb3ZlcmxheXMgdGhhdCBoYXZlIGJlZW4gZGV0YWNoZWQsIHJhdGhlciB0aGFuIGRpc3Bvc2VkLlxuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gIH1cblxuICAvLyBXZSB1c2UgYW4gZXh0cmEgd3JhcHBlciBlbGVtZW50IGluIG9yZGVyIHRvIHVzZSBtYWtlIHRoZSBvdmVybGF5IGl0c2VsZiBhIGZsZXggaXRlbS5cbiAgLy8gVGhpcyBtYWtlcyBjZW50ZXJpbmcgdGhlIG92ZXJsYXkgZWFzeSB3aXRob3V0IHJ1bm5pbmcgaW50byB0aGUgc3VicGl4ZWwgcmVuZGVyaW5nXG4gIC8vIHByb2JsZW1zIHRpZWQgdG8gdXNpbmcgYHRyYW5zZm9ybWAgYW5kIHdpdGhvdXQgaW50ZXJmZXJpbmcgd2l0aCB0aGUgb3RoZXIgcG9zaXRpb25cbiAgLy8gc3RyYXRlZ2llcy5cbiAgLmNkay1nbG9iYWwtb3ZlcmxheS13cmFwcGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiAkY2RrLXotaW5kZXgtb3ZlcmxheTtcbiAgfVxuXG4gIC8vIEEgc2luZ2xlIG92ZXJsYXkgcGFuZS5cbiAgLmNkay1vdmVybGF5LXBhbmUge1xuICAgIC8vIE5vdGU6IGl0J3MgaW1wb3J0YW50IGZvciB0aGlzIG9uZSB0byBzdGFydCBvZmYgYGFic29sdXRlYCxcbiAgICAvLyBpbiBvcmRlciBmb3IgdXMgdG8gYmUgYWJsZSB0byBtZWFzdXJlIGl0IGNvcnJlY3RseS5cbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICB6LWluZGV4OiAkY2RrLXotaW5kZXgtb3ZlcmxheTtcblxuICAgIC8vIEZvciBjb25uZWN0ZWQtcG9zaXRpb24gb3ZlcmxheXMsIHdlIHNldCBgZGlzcGxheTogZmxleGAgaW5cbiAgICAvLyBvcmRlciB0byBmb3JjZSBgbWF4LXdpZHRoYCBhbmQgYG1heC1oZWlnaHRgIHRvIHRha2UgZWZmZWN0LlxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgIG1heC1oZWlnaHQ6IDEwMCU7XG4gIH1cblxuICAuY2RrLW92ZXJsYXktYmFja2Ryb3Age1xuICAgIC8vIFRPRE8oamVsYm91cm4pOiByZXVzZSBzaWRlbmF2IGZ1bGxzY3JlZW4gbWl4aW4uXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBib3R0b206IDA7XG4gICAgbGVmdDogMDtcbiAgICByaWdodDogMDtcblxuICAgIHotaW5kZXg6ICRjZGstei1pbmRleC1vdmVybGF5LWJhY2tkcm9wO1xuICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSAkYmFja2Ryb3AtYW5pbWF0aW9uLWR1cmF0aW9uICRiYWNrZHJvcC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uO1xuICAgIG9wYWNpdHk6IDA7XG5cbiAgICAmLmNkay1vdmVybGF5LWJhY2tkcm9wLXNob3dpbmcge1xuICAgICAgb3BhY2l0eTogMTtcblxuICAgICAgLy8gSW4gaGlnaCBjb250cmFzdCBtb2RlIHRoZSByZ2JhIGJhY2tncm91bmQgd2lsbCBiZWNvbWUgc29saWQgc28gd2UgbmVlZCB0byBmYWxsIGJhY2tcbiAgICAgIC8vIHRvIG1ha2luZyBpdCBvcGFxdWUgdXNpbmcgYG9wYWNpdHlgLiBOb3RlIHRoYXQgd2UgY2FuJ3QgdXNlIHRoZSBgY2RrLWhpZ2gtY29udHJhc3RgXG4gICAgICAvLyBtaXhpbiwgYmVjYXVzZSB3ZSBjYW4ndCBub3JtYWxpemUgdGhlIGltcG9ydCBwYXRoIHRvIHRoZSBfYTExeS5zY3NzIGJvdGggZm9yIHRoZVxuICAgICAgLy8gc291cmNlIGFuZCB3aGVuIHRoaXMgZmlsZSBpcyBkaXN0cmlidXRlZC4gU2VlICMxMDkwOC5cbiAgICAgIEBtZWRpYSBzY3JlZW4gYW5kICgtbXMtaGlnaC1jb250cmFzdDogYWN0aXZlKSB7XG4gICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAuY2RrLW92ZXJsYXktZGFyay1iYWNrZHJvcCB7XG4gICAgYmFja2dyb3VuZDogJGNkay1vdmVybGF5LWRhcmstYmFja2Ryb3AtYmFja2dyb3VuZDtcbiAgfVxuXG4gIC5jZGstb3ZlcmxheS10cmFuc3BhcmVudC1iYWNrZHJvcCB7XG4gICAgLy8gTm90ZTogYXMgb2YgRmlyZWZveCA1NywgaGF2aW5nIHRoZSBiYWNrZHJvcCBiZSBgYmFja2dyb3VuZDogbm9uZWAgd2lsbCBwcmV2ZW50IGl0IGZyb21cbiAgICAvLyBjYXB0dXJpbmcgdGhlIHVzZXIncyBtb3VzZSBzY3JvbGwgZXZlbnRzLiBTaW5jZSB3ZSBhbHNvIGNhbid0IHVzZSBzb21ldGhpbmcgbGlrZVxuICAgIC8vIGByZ2JhKDAsIDAsIDAsIDApYCwgd2Ugd29yayBhcm91bmQgdGhlIGluY29uc2lzdGVuY3kgYnkgbm90IHNldHRpbmcgdGhlIGJhY2tncm91bmQgYXRcbiAgICAvLyBhbGwgYW5kIHVzaW5nIGBvcGFjaXR5YCB0byBtYWtlIHRoZSBlbGVtZW50IHRyYW5zcGFyZW50LlxuICAgICYsICYuY2RrLW92ZXJsYXktYmFja2Ryb3Atc2hvd2luZyB7XG4gICAgICBvcGFjaXR5OiAwO1xuICAgIH1cbiAgfVxuXG4gIC8vIE92ZXJsYXkgcGFyZW50IGVsZW1lbnQgdXNlZCB3aXRoIHRoZSBjb25uZWN0ZWQgcG9zaXRpb24gc3RyYXRlZ3kuIFVzZWQgdG8gY29uc3RyYWluIHRoZVxuICAvLyBvdmVybGF5IGVsZW1lbnQncyBzaXplIHRvIGZpdCB3aXRoaW4gdGhlIHZpZXdwb3J0LlxuICAuY2RrLW92ZXJsYXktY29ubmVjdGVkLXBvc2l0aW9uLWJvdW5kaW5nLWJveCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHotaW5kZXg6ICRjZGstei1pbmRleC1vdmVybGF5O1xuXG4gICAgLy8gV2UgdXNlIGBkaXNwbGF5OiBmbGV4YCBvbiB0aGlzIGVsZW1lbnQgZXhjbHVzaXZlbHkgZm9yIGNlbnRlcmluZyBjb25uZWN0ZWQgb3ZlcmxheXMuXG4gICAgLy8gV2hlbiAqbm90KiBjZW50ZXJpbmcsIGEgdG9wL2xlZnQvYm90dG9tL3JpZ2h0IHdpbGwgYmUgc2V0IHdoaWNoIG92ZXJyaWRlcyB0aGUgbm9ybWFsXG4gICAgLy8gZmxleCBsYXlvdXQuXG4gICAgZGlzcGxheTogZmxleDtcblxuICAgIC8vIFdlIHVzZSB0aGUgYGNvbHVtbmAgZGlyZWN0aW9uIGhlcmUgdG8gYXZvaWQgc29tZSBmbGV4Ym94IGlzc3VlcyBpbiBFZGdlXG4gICAgLy8gd2hlbiB1c2luZyB0aGUgXCJncm93IGFmdGVyIG9wZW5cIiBvcHRpb25zLlxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgICAvLyBBZGQgc29tZSBkaW1lbnNpb25zIHNvIHRoZSBlbGVtZW50IGhhcyBhbiBgaW5uZXJUZXh0YCB3aGljaCBzb21lIHBlb3BsZSBkZXBlbmQgb24gaW4gdGVzdHMuXG4gICAgbWluLXdpZHRoOiAxcHg7XG4gICAgbWluLWhlaWdodDogMXB4O1xuICB9XG5cbiAgLy8gVXNlZCB3aGVuIGRpc2FibGluZyBnbG9iYWwgc2Nyb2xsaW5nLlxuICAuY2RrLWdsb2JhbC1zY3JvbGxibG9jayB7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuXG4gICAgLy8gTmVjZXNzYXJ5IGZvciB0aGUgY29udGVudCBub3QgdG8gbG9zZSBpdHMgd2lkdGguIE5vdGUgdGhhdCB3ZSdyZSB1c2luZyAxMDAlLCBpbnN0ZWFkIG9mXG4gICAgLy8gMTAwdncsIGJlY2F1c2UgMTAwdncgaW5jbHVkZXMgdGhlIHdpZHRoIHBsdXMgdGhlIHNjcm9sbGJhciwgd2hlcmVhcyAxMDAlIGlzIHRoZSB3aWR0aFxuICAgIC8vIHRoYXQgdGhlIGVsZW1lbnQgaGFkIGJlZm9yZSB3ZSBtYWRlIGl0IGBmaXhlZGAuXG4gICAgd2lkdGg6IDEwMCU7XG5cbiAgICAvLyBOb3RlOiB0aGlzIHdpbGwgYWx3YXlzIGFkZCBhIHNjcm9sbGJhciB0byB3aGF0ZXZlciBlbGVtZW50IGl0IGlzIG9uLCB3aGljaCBjYW5cbiAgICAvLyBwb3RlbnRpYWxseSByZXN1bHQgaW4gZG91YmxlIHNjcm9sbGJhcnMuIEl0IHNob3VsZG4ndCBiZSBhbiBpc3N1ZSwgYmVjYXVzZSB3ZSB3b24ndFxuICAgIC8vIGJsb2NrIHNjcm9sbGluZyBvbiBhIHBhZ2UgdGhhdCBkb2Vzbid0IGhhdmUgYSBzY3JvbGxiYXIgaW4gdGhlIGZpcnN0IHBsYWNlLlxuICAgIG92ZXJmbG93LXk6IHNjcm9sbDtcbiAgfVxufVxuXG5AbWl4aW4gY2RrLWExMXkge1xuICAuY2RrLXZpc3VhbGx5LWhpZGRlbiB7XG4gICAgYm9yZGVyOiAwO1xuICAgIGNsaXA6IHJlY3QoMCAwIDAgMCk7XG4gICAgaGVpZ2h0OiAxcHg7XG4gICAgbWFyZ2luOiAtMXB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgcGFkZGluZzogMDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgd2lkdGg6IDFweDtcblxuICAgIC8vIEF2b2lkIGJyb3dzZXJzIHJlbmRlcmluZyB0aGUgZm9jdXMgcmluZyBpbiBzb21lIGNhc2VzLlxuICAgIG91dGxpbmU6IDA7XG5cbiAgICAvLyBBdm9pZCBzb21lIGNhc2VzIHdoZXJlIHRoZSBicm93c2VyIHdpbGwgc3RpbGwgcmVuZGVyIHRoZSBuYXRpdmUgY29udHJvbHMgKHNlZSAjOTA0OSkuXG4gICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICAgIC1tb3otYXBwZWFyYW5jZTogbm9uZTtcbiAgfVxufVxuXG4vLyBBcHBsaWVzIHN0eWxlcyBmb3IgdXNlcnMgaW4gaGlnaCBjb250cmFzdCBtb2RlLiBOb3RlIHRoYXQgdGhpcyBvbmx5IGFwcGxpZXNcbi8vIHRvIE1pY3Jvc29mdCBicm93c2Vycy4gQ2hyb21lIGNhbiBiZSBpbmNsdWRlZCBieSBjaGVja2luZyBmb3IgdGhlIGBodG1sW2hjXWBcbi8vIGF0dHJpYnV0ZSwgaG93ZXZlciBDaHJvbWUgaGFuZGxlcyBoaWdoIGNvbnRyYXN0IGRpZmZlcmVudGx5LlxuLy9cbi8vIEBwYXJhbSB0YXJnZXQgV2hpY2gga2luZCBvZiBoaWdoIGNvbnRyYXN0IHNldHRpbmcgdG8gdGFyZ2V0LiBEZWZhdWx0cyB0byBgYWN0aXZlYCwgY2FuIGJlXG4vLyAgICBgd2hpdGUtb24tYmxhY2tgIG9yIGBibGFjay1vbi13aGl0ZWAuXG5AbWl4aW4gY2RrLWhpZ2gtY29udHJhc3QoJHRhcmdldDogYWN0aXZlKSB7XG4gIEBtZWRpYSAoLW1zLWhpZ2gtY29udHJhc3Q6ICR0YXJnZXQpIHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG4vLyBDb3JlIHN0eWxlcyB0aGF0IGVuYWJsZSBtb25pdG9yaW5nIGF1dG9maWxsIHN0YXRlIG9mIHRleHQgZmllbGRzLlxuQG1peGluIGNkay10ZXh0LWZpZWxkIHtcbiAgLy8gS2V5ZnJhbWVzIHRoYXQgYXBwbHkgbm8gc3R5bGVzLCBidXQgYWxsb3cgdXMgdG8gbW9uaXRvciB3aGVuIGFuIHRleHQgZmllbGQgYmVjb21lcyBhdXRvZmlsbGVkXG4gIC8vIGJ5IHdhdGNoaW5nIGZvciB0aGUgYW5pbWF0aW9uIGV2ZW50cyB0aGF0IGFyZSBmaXJlZCB3aGVuIHRoZXkgc3RhcnQuIE5vdGU6IHRoZSAvKiEqLyBjb21tZW50IGlzXG4gIC8vIG5lZWRlZCB0byBwcmV2ZW50IExpYlNhc3MgZnJvbSBzdHJpcHBpbmcgdGhlIGtleWZyYW1lcyBvdXQuXG4gIC8vIEJhc2VkIG9uOiBodHRwczovL21lZGl1bS5jb20vQGJydW5uL2RldGVjdGluZy1hdXRvZmlsbGVkLWZpZWxkcy1pbi1qYXZhc2NyaXB0LWFlZDU5OGQyNWRhN1xuICBAa2V5ZnJhbWVzIGNkay10ZXh0LWZpZWxkLWF1dG9maWxsLXN0YXJ0IHsvKiEqL31cbiAgQGtleWZyYW1lcyBjZGstdGV4dC1maWVsZC1hdXRvZmlsbC1lbmQgey8qISovfVxuXG4gIC5jZGstdGV4dC1maWVsZC1hdXRvZmlsbC1tb25pdG9yZWQ6LXdlYmtpdC1hdXRvZmlsbCB7XG4gICAgYW5pbWF0aW9uLW5hbWU6IGNkay10ZXh0LWZpZWxkLWF1dG9maWxsLXN0YXJ0O1xuICB9XG5cbiAgLmNkay10ZXh0LWZpZWxkLWF1dG9maWxsLW1vbml0b3JlZDpub3QoOi13ZWJraXQtYXV0b2ZpbGwpIHtcbiAgICBhbmltYXRpb24tbmFtZTogY2RrLXRleHQtZmllbGQtYXV0b2ZpbGwtZW5kO1xuICB9XG5cbiAgLy8gUmVtb3ZlIHRoZSByZXNpemUgaGFuZGxlIG9uIGF1dG9zaXppbmcgdGV4dGFyZWFzLCBiZWNhdXNlIHdoYXRldmVyIGhlaWdodFxuICAvLyB0aGUgdXNlciByZXNpemVkIHRvIHdpbGwgYmUgb3ZlcndyaXR0ZW4gb25jZSB0aGV5IHN0YXJ0IHR5cGluZyBhZ2Fpbi5cbiAgdGV4dGFyZWEuY2RrLXRleHRhcmVhLWF1dG9zaXplIHtcbiAgICByZXNpemU6IG5vbmU7XG4gIH1cblxuICAvLyBUaGlzIGNsYXNzIGlzIHRlbXBvcmFyaWx5IGFwcGxpZWQgdG8gdGhlIHRleHRhcmVhIHdoZW4gaXQgaXMgYmVpbmcgbWVhc3VyZWQuIEl0IGlzIGltbWVkaWF0ZWx5XG4gIC8vIHJlbW92ZWQgd2hlbiBtZWFzdXJpbmcgaXMgY29tcGxldGUuIFdlIHVzZSBgIWltcG9ydGFudGAgcnVsZXMgaGVyZSB0byBtYWtlIHN1cmUgdXNlci1zcGVjaWZpZWRcbiAgLy8gcnVsZXMgZG8gbm90IGludGVyZmVyZSB3aXRoIHRoZSBtZWFzdXJlbWVudC5cbiAgdGV4dGFyZWEuY2RrLXRleHRhcmVhLWF1dG9zaXplLW1lYXN1cmluZyB7XG4gICAgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbiAhaW1wb3J0YW50O1xuICAgIC8vIEhhdmluZyAycHggdG9wIGFuZCBib3R0b20gcGFkZGluZyBzZWVtcyB0byBmaXggYSBidWcgd2hlcmUgQ2hyb21lIGdldHMgYW4gaW5jb3JyZWN0XG4gICAgLy8gbWVhc3VyZW1lbnQuIFdlIGp1c3QgaGF2ZSB0byBhY2NvdW50IGZvciBpdCBsYXRlciBhbmQgc3VidHJhY3QgaXQgb2ZmIHRoZSBmaW5hbCByZXN1bHQuXG4gICAgcGFkZGluZzogMnB4IDAgIWltcG9ydGFudDtcbiAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveCAhaW1wb3J0YW50O1xuICB9XG59XG5cbi8vIFVzZWQgdG8gZ2VuZXJhdGUgVUlEcyBmb3Iga2V5ZnJhbWVzIHVzZWQgdG8gY2hhbmdlIHRoZSB0ZXh0IGZpZWxkIGF1dG9maWxsIHN0eWxlcy5cbiRjZGstdGV4dC1maWVsZC1hdXRvZmlsbC1jb2xvci1mcmFtZS1jb3VudDogMDtcblxuLy8gTWl4aW4gdXNlZCB0byBhcHBseSBjdXN0b20gYmFja2dyb3VuZCBhbmQgZm9yZWdyb3VuZCBjb2xvcnMgdG8gYW4gYXV0b2ZpbGxlZCB0ZXh0IGZpZWxkLlxuLy8gQmFzZWQgb246IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI3ODE1NDkvXG4vLyByZW1vdmluZy1pbnB1dC1iYWNrZ3JvdW5kLWNvbG91ci1mb3ItY2hyb21lLWF1dG9jb21wbGV0ZSNhbnN3ZXItMzc0MzIyNjBcbkBtaXhpbiBjZGstdGV4dC1maWVsZC1hdXRvZmlsbC1jb2xvcigkYmFja2dyb3VuZCwgJGZvcmVncm91bmQ6JycpIHtcbiAgQGtleWZyYW1lcyBjZGstdGV4dC1maWVsZC1hdXRvZmlsbC1jb2xvci0jeyRjZGstdGV4dC1maWVsZC1hdXRvZmlsbC1jb2xvci1mcmFtZS1jb3VudH0ge1xuICAgIHRvIHtcbiAgICAgIGJhY2tncm91bmQ6ICRiYWNrZ3JvdW5kO1xuICAgICAgQGlmICRmb3JlZ3JvdW5kICE9ICcnIHsgY29sb3I6ICRmb3JlZ3JvdW5kOyB9XG4gICAgfVxuICB9XG5cbiAgJjotd2Via2l0LWF1dG9maWxsIHtcbiAgICBhbmltYXRpb24tbmFtZTogY2RrLXRleHQtZmllbGQtYXV0b2ZpbGwtY29sb3ItI3skY2RrLXRleHQtZmllbGQtYXV0b2ZpbGwtY29sb3ItZnJhbWUtY291bnR9O1xuICAgIGFuaW1hdGlvbi1maWxsLW1vZGU6IGJvdGg7XG4gIH1cblxuICAmLmNkay10ZXh0LWZpZWxkLWF1dG9maWxsLW1vbml0b3JlZDotd2Via2l0LWF1dG9maWxsIHtcbiAgICBhbmltYXRpb24tbmFtZTogY2RrLXRleHQtZmllbGQtYXV0b2ZpbGwtc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIGNkay10ZXh0LWZpZWxkLWF1dG9maWxsLWNvbG9yLSN7JGNkay10ZXh0LWZpZWxkLWF1dG9maWxsLWNvbG9yLWZyYW1lLWNvdW50fTtcbiAgfVxuXG4gICRjZGstdGV4dC1maWVsZC1hdXRvZmlsbC1jb2xvci1mcmFtZS1jb3VudDpcbiAgICAgICRjZGstdGV4dC1maWVsZC1hdXRvZmlsbC1jb2xvci1mcmFtZS1jb3VudCArIDEgIWdsb2JhbDtcbn1cblxuXG4vLyBDb3JlIHN0eWxlcyB0aGF0IGNhbiBiZSB1c2VkIHRvIGFwcGx5IG1hdGVyaWFsIGRlc2lnbiB0cmVhdG1lbnRzIHRvIGFueSBlbGVtZW50LlxuLy8gTWVkaWEgcXVlcmllc1xuLy8gVE9ETyhqb3NlcGhwZXJyb3R0KTogQ2hhbmdlICRtYXQteHNtYWxsIGFuZCAkbWF0LXNtYWxsIHVzYWdlcyB0byByZWx5IG9uIEJyZWFrcG9pbnRPYnNlcnZlcixcbiRtYXQteHNtYWxsOiAnbWF4LXdpZHRoOiA1OTlweCc7XG4kbWF0LXNtYWxsOiAnbWF4LXdpZHRoOiA5NTlweCc7XG5cbi8vIFRPRE86IFJldmlzaXQgYWxsIHotaW5kaWNlcyBiZWZvcmUgYmV0YVxuLy8gei1pbmRleCBtYXN0ZXIgbGlzdFxuXG4kei1pbmRleC1mYWI6IDIwICFkZWZhdWx0O1xuJHotaW5kZXgtZHJhd2VyOiAxMDAgIWRlZmF1bHQ7XG5cbi8vIEdsb2JhbCBjb25zdGFudHNcbiRwaTogMy4xNDE1OTI2NTtcblxuLy8gUGFkZGluZyBiZXR3ZWVuIGlucHV0IHRvZ2dsZXMgYW5kIHRoZWlyIGxhYmVsc1xuJG1hdC10b2dnbGUtcGFkZGluZzogOHB4ICFkZWZhdWx0O1xuLy8gV2lkdGggYW5kIGhlaWdodCBvZiBpbnB1dCB0b2dnbGVzXG4kbWF0LXRvZ2dsZS1zaXplOiAyMHB4ICFkZWZhdWx0O1xuXG4vLyBFYXNpbmcgQ3VydmVzXG4vLyBUT0RPKGplbGJvdXJuKTogYWxsIG9mIHRoZXNlIG5lZWQgdG8gYmUgcmV2aXNpdGVkXG5cbi8vIFRoZSBkZWZhdWx0IGFuaW1hdGlvbiBjdXJ2ZXMgdXNlZCBieSBtYXRlcmlhbCBkZXNpZ24uXG4kbWF0LWxpbmVhci1vdXQtc2xvdy1pbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllcigwLCAwLCAwLjIsIDAuMSkgIWRlZmF1bHQ7XG4kbWF0LWZhc3Qtb3V0LXNsb3ctaW4tdGltaW5nLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpICFkZWZhdWx0O1xuJG1hdC1mYXN0LW91dC1saW5lYXItaW4tdGltaW5nLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoMC40LCAwLCAxLCAxKSAhZGVmYXVsdDtcblxuJGVhc2UtaW4tb3V0LWN1cnZlLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoMC4zNSwgMCwgMC4yNSwgMSkgIWRlZmF1bHQ7XG5cbiRzd2lmdC1lYXNlLW91dC1kdXJhdGlvbjogNDAwbXMgIWRlZmF1bHQ7XG4kc3dpZnQtZWFzZS1vdXQtdGltaW5nLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoMC4yNSwgMC44LCAwLjI1LCAxKSAhZGVmYXVsdDtcbiRzd2lmdC1lYXNlLW91dDogYWxsICRzd2lmdC1lYXNlLW91dC1kdXJhdGlvbiAkc3dpZnQtZWFzZS1vdXQtdGltaW5nLWZ1bmN0aW9uICFkZWZhdWx0O1xuXG4kc3dpZnQtZWFzZS1pbi1kdXJhdGlvbjogMzAwbXMgIWRlZmF1bHQ7XG4kc3dpZnQtZWFzZS1pbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllcigwLjU1LCAwLCAwLjU1LCAwLjIpICFkZWZhdWx0O1xuJHN3aWZ0LWVhc2UtaW46IGFsbCAkc3dpZnQtZWFzZS1pbi1kdXJhdGlvbiAkc3dpZnQtZWFzZS1pbi10aW1pbmctZnVuY3Rpb24gIWRlZmF1bHQ7XG5cbiRzd2lmdC1lYXNlLWluLW91dC1kdXJhdGlvbjogNTAwbXMgIWRlZmF1bHQ7XG4kc3dpZnQtZWFzZS1pbi1vdXQtdGltaW5nLWZ1bmN0aW9uOiAkZWFzZS1pbi1vdXQtY3VydmUtZnVuY3Rpb24gIWRlZmF1bHQ7XG4kc3dpZnQtZWFzZS1pbi1vdXQ6IGFsbCAkc3dpZnQtZWFzZS1pbi1vdXQtZHVyYXRpb24gJHN3aWZ0LWVhc2UtaW4tb3V0LXRpbWluZy1mdW5jdGlvbiAhZGVmYXVsdDtcblxuJHN3aWZ0LWxpbmVhci1kdXJhdGlvbjogODBtcyAhZGVmYXVsdDtcbiRzd2lmdC1saW5lYXItdGltaW5nLWZ1bmN0aW9uOiBsaW5lYXIgIWRlZmF1bHQ7XG4kc3dpZnQtbGluZWFyOiBhbGwgJHN3aWZ0LWxpbmVhci1kdXJhdGlvbiAkc3dpZnQtbGluZWFyLXRpbWluZy1mdW5jdGlvbiAhZGVmYXVsdDtcblxuXG5cbi8vIEEgY29sbGVjdGlvbiBvZiBtaXhpbnMgYW5kIENTUyBjbGFzc2VzIHRoYXQgY2FuIGJlIHVzZWQgdG8gYXBwbHkgZWxldmF0aW9uIHRvIGEgbWF0ZXJpYWxcbi8vIGVsZW1lbnQuXG4vLyBTZWU6IGh0dHBzOi8vbWF0ZXJpYWwuaW8vZGVzaWduL2Vudmlyb25tZW50L2VsZXZhdGlvbi5odG1sXG4vLyBFeGFtcGxlczpcbi8vXG4vL1xuLy8gLm1hdC1mb28ge1xuLy8gICBAaW5jbHVkZSAkbWF0LWVsZXZhdGlvbigyKTtcbi8vXG4vLyAgICY6YWN0aXZlIHtcbi8vICAgICBAaW5jbHVkZSAkbWF0LWVsZXZhdGlvbig4KTtcbi8vICAgfVxuLy8gfVxuLy9cbi8vIDxkaXYgaWQ9XCJleHRlcm5hbC1jYXJkXCIgY2xhc3M9XCJtYXQtZWxldmF0aW9uLXoyXCI+PHA+U29tZSBjb250ZW50PC9wPjwvZGl2PlxuLy9cbi8vIEZvciBhbiBleHBsYW5hdGlvbiBvZiB0aGUgZGVzaWduIGJlaGluZCBob3cgZWxldmF0aW9uIGlzIGltcGxlbWVudGVkLCBzZWUgdGhlIGRlc2lnbiBkb2MgYXRcbi8vIGh0dHBzOi8vZ29vLmdsL0txMGs5Wi5cblxuLy8gQ29sb3JzIGZvciB1bWJyYSwgcGVudW1icmEsIGFuZCBhbWJpZW50IHNoYWRvd3MuIEFzIGRlc2NyaWJlZCBpbiB0aGUgZGVzaWduIGRvYywgZWFjaCBlbGV2YXRpb25cbi8vIGxldmVsIGlzIGNyZWF0ZWQgdXNpbmcgYSBzZXQgb2YgMyBzaGFkb3cgdmFsdWVzLCBvbmUgZm9yIHVtYnJhICh0aGUgc2hhZG93IHJlcHJlc2VudGluZyB0aGVcbi8vIHNwYWNlIGNvbXBsZXRlbHkgb2JzY3VyZWQgYnkgYW4gb2JqZWN0IHJlbGF0aXZlIHRvIGl0cyBsaWdodCBzb3VyY2UpLCBvbmUgZm9yIHBlbnVtYnJhICh0aGVcbi8vIHNwYWNlIHBhcnRpYWxseSBvYnNjdXJlZCBieSBhbiBvYmplY3QpLCBhbmQgb25lIGZvciBhbWJpZW50ICh0aGUgc3BhY2Ugd2hpY2ggY29udGFpbnMgdGhlIG9iamVjdFxuLy8gaXRzZWxmKS4gRm9yIGEgZnVydGhlciBleHBsYW5hdGlvbiBvZiB0aGVzZSB0ZXJtcyBhbmQgdGhlaXIgbWVhbmluZ3MsIHNlZVxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVW1icmEsX3BlbnVtYnJhX2FuZF9hbnR1bWJyYS5cblxuLy8gTWFwcyBmb3IgdGhlIGRpZmZlcmVudCBzaGFkb3cgc2V0cyBhbmQgdGhlaXIgdmFsdWVzIHdpdGhpbiBlYWNoIHotc3BhY2UuIFRoZXNlIHZhbHVlcyB3ZXJlXG4vLyBjcmVhdGVkIGJ5IHRha2luZyBhIGZldyByZWZlcmVuY2Ugc2hhZG93IHNldHMgY3JlYXRlZCBieSBHb29nbGUncyBEZXNpZ25lcnMgYW5kIGludGVycG9sYXRpbmdcbi8vIGFsbCBvZiB0aGUgdmFsdWVzIGJldHdlZW4gdGhlbS5cblxuQGZ1bmN0aW9uIF9nZXQtdW1icmEtbWFwKCRjb2xvciwgJG9wYWNpdHkpIHtcbiAgJHNoYWRvdy1jb2xvcjogaWYodHlwZS1vZigkY29sb3IpID09IGNvbG9yLCByZ2JhKCRjb2xvciwgJG9wYWNpdHkgKiAwLjIpLCAkY29sb3IpO1xuXG4gIEByZXR1cm4gKFxuICAgIDA6ICcwcHggMHB4IDBweCAwcHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMTogJzBweCAycHggMXB4IC0xcHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMjogJzBweCAzcHggMXB4IC0ycHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMzogJzBweCAzcHggM3B4IC0ycHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgNDogJzBweCAycHggNHB4IC0xcHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgNTogJzBweCAzcHggNXB4IC0xcHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgNjogJzBweCAzcHggNXB4IC0xcHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgNzogJzBweCA0cHggNXB4IC0ycHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgODogJzBweCA1cHggNXB4IC0zcHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgOTogJzBweCA1cHggNnB4IC0zcHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMTA6ICcwcHggNnB4IDZweCAtM3B4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDExOiAnMHB4IDZweCA3cHggLTRweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAxMjogJzBweCA3cHggOHB4IC00cHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMTM6ICcwcHggN3B4IDhweCAtNHB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDE0OiAnMHB4IDdweCA5cHggLTRweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAxNTogJzBweCA4cHggOXB4IC01cHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMTY6ICcwcHggOHB4IDEwcHggLTVweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAxNzogJzBweCA4cHggMTFweCAtNXB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDE4OiAnMHB4IDlweCAxMXB4IC01cHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMTk6ICcwcHggOXB4IDEycHggLTZweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAyMDogJzBweCAxMHB4IDEzcHggLTZweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAyMTogJzBweCAxMHB4IDEzcHggLTZweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAyMjogJzBweCAxMHB4IDE0cHggLTZweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAyMzogJzBweCAxMXB4IDE0cHggLTdweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAyNDogJzBweCAxMXB4IDE1cHggLTdweCAjeyRzaGFkb3ctY29sb3J9J1xuICApO1xufVxuXG5AZnVuY3Rpb24gX2dldC1wZW51bWJyYS1tYXAoJGNvbG9yLCAkb3BhY2l0eSkge1xuICAkc2hhZG93LWNvbG9yOiBpZih0eXBlLW9mKCRjb2xvcikgPT0gY29sb3IsIHJnYmEoJGNvbG9yLCAkb3BhY2l0eSAqIDAuMTQpLCAkY29sb3IpO1xuXG4gIEByZXR1cm4gKFxuICAgIDA6ICcwcHggMHB4IDBweCAwcHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMTogJzBweCAxcHggMXB4IDBweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAyOiAnMHB4IDJweCAycHggMHB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDM6ICcwcHggM3B4IDRweCAwcHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgNDogJzBweCA0cHggNXB4IDBweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICA1OiAnMHB4IDVweCA4cHggMHB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDY6ICcwcHggNnB4IDEwcHggMHB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDc6ICcwcHggN3B4IDEwcHggMXB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDg6ICcwcHggOHB4IDEwcHggMXB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDk6ICcwcHggOXB4IDEycHggMXB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDEwOiAnMHB4IDEwcHggMTRweCAxcHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMTE6ICcwcHggMTFweCAxNXB4IDFweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAxMjogJzBweCAxMnB4IDE3cHggMnB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDEzOiAnMHB4IDEzcHggMTlweCAycHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMTQ6ICcwcHggMTRweCAyMXB4IDJweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAxNTogJzBweCAxNXB4IDIycHggMnB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDE2OiAnMHB4IDE2cHggMjRweCAycHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMTc6ICcwcHggMTdweCAyNnB4IDJweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAxODogJzBweCAxOHB4IDI4cHggMnB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDE5OiAnMHB4IDE5cHggMjlweCAycHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMjA6ICcwcHggMjBweCAzMXB4IDNweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAyMTogJzBweCAyMXB4IDMzcHggM3B4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDIyOiAnMHB4IDIycHggMzVweCAzcHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMjM6ICcwcHggMjNweCAzNnB4IDNweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAyNDogJzBweCAyNHB4IDM4cHggM3B4ICN7JHNoYWRvdy1jb2xvcn0nXG4gICk7XG59XG5cbkBmdW5jdGlvbiBfZ2V0LWFtYmllbnQtbWFwKCRjb2xvciwgJG9wYWNpdHkpIHtcbiAgJHNoYWRvdy1jb2xvcjogaWYodHlwZS1vZigkY29sb3IpID09IGNvbG9yLCByZ2JhKCRjb2xvciwgJG9wYWNpdHkgKiAwLjEyKSwgJGNvbG9yKTtcblxuICBAcmV0dXJuIChcbiAgICAwOiAnMHB4IDBweCAwcHggMHB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDE6ICcwcHggMXB4IDNweCAwcHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMjogJzBweCAxcHggNXB4IDBweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAzOiAnMHB4IDFweCA4cHggMHB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDQ6ICcwcHggMXB4IDEwcHggMHB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDU6ICcwcHggMXB4IDE0cHggMHB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDY6ICcwcHggMXB4IDE4cHggMHB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDc6ICcwcHggMnB4IDE2cHggMXB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDg6ICcwcHggM3B4IDE0cHggMnB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDk6ICcwcHggM3B4IDE2cHggMnB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDEwOiAnMHB4IDRweCAxOHB4IDNweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAxMTogJzBweCA0cHggMjBweCAzcHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMTI6ICcwcHggNXB4IDIycHggNHB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDEzOiAnMHB4IDVweCAyNHB4IDRweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAxNDogJzBweCA1cHggMjZweCA0cHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMTU6ICcwcHggNnB4IDI4cHggNXB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDE2OiAnMHB4IDZweCAzMHB4IDVweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAxNzogJzBweCA2cHggMzJweCA1cHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMTg6ICcwcHggN3B4IDM0cHggNnB4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDE5OiAnMHB4IDdweCAzNnB4IDZweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAyMDogJzBweCA4cHggMzhweCA3cHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMjE6ICcwcHggOHB4IDQwcHggN3B4ICN7JHNoYWRvdy1jb2xvcn0nLFxuICAgIDIyOiAnMHB4IDhweCA0MnB4IDdweCAjeyRzaGFkb3ctY29sb3J9JyxcbiAgICAyMzogJzBweCA5cHggNDRweCA4cHggI3skc2hhZG93LWNvbG9yfScsXG4gICAgMjQ6ICcwcHggOXB4IDQ2cHggOHB4ICN7JHNoYWRvdy1jb2xvcn0nXG4gICk7XG59XG5cbi8vIFRoZSBkZWZhdWx0IGR1cmF0aW9uIHZhbHVlIGZvciBlbGV2YXRpb24gdHJhbnNpdGlvbnMuXG4kbWF0LWVsZXZhdGlvbi10cmFuc2l0aW9uLWR1cmF0aW9uOiAyODBtcyAhZGVmYXVsdDtcblxuLy8gVGhlIGRlZmF1bHQgZWFzaW5nIHZhbHVlIGZvciBlbGV2YXRpb24gdHJhbnNpdGlvbnMuXG4kbWF0LWVsZXZhdGlvbi10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogJG1hdC1mYXN0LW91dC1zbG93LWluLXRpbWluZy1mdW5jdGlvbjtcblxuLy8gVGhlIGRlZmF1bHQgY29sb3IgZm9yIGVsZXZhdGlvbiBzaGFkb3dzLlxuJG1hdC1lbGV2YXRpb24tY29sb3I6IGJsYWNrICFkZWZhdWx0O1xuXG4vLyBUaGUgZGVmYXVsdCBvcGFjaXR5IHNjYWxpbmcgdmFsdWUgZm9yIGVsZXZhdGlvbiBzaGFkb3dzLlxuJG1hdC1lbGV2YXRpb24tb3BhY2l0eTogMSAhZGVmYXVsdDtcblxuLy8gUHJlZml4IGZvciBlbGV2YXRpb24tcmVsYXRlZCBzZWxlY3RvcnMuXG4kX21hdC1lbGV2YXRpb24tcHJlZml4OiAnbWF0LWVsZXZhdGlvbi16JztcblxuLy8gQXBwbGllcyB0aGUgY29ycmVjdCBjc3MgcnVsZXMgdG8gYW4gZWxlbWVudCB0byBnaXZlIGl0IHRoZSBlbGV2YXRpb24gc3BlY2lmaWVkIGJ5ICR6VmFsdWUuXG4vLyBUaGUgJHpWYWx1ZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMjQuXG5AbWl4aW4gbWF0LWVsZXZhdGlvbigkelZhbHVlLCAkY29sb3I6ICRtYXQtZWxldmF0aW9uLWNvbG9yLCAkb3BhY2l0eTogJG1hdC1lbGV2YXRpb24tb3BhY2l0eSkge1xuICBAaWYgdHlwZS1vZigkelZhbHVlKSAhPSBudW1iZXIgb3Igbm90IHVuaXRsZXNzKCR6VmFsdWUpIHtcbiAgICBAZXJyb3IgJyR6VmFsdWUgbXVzdCBiZSBhIHVuaXRsZXNzIG51bWJlcic7XG4gIH1cbiAgQGlmICR6VmFsdWUgPCAwIG9yICR6VmFsdWUgPiAyNCB7XG4gICAgQGVycm9yICckelZhbHVlIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAyNCc7XG4gIH1cblxuICBib3gtc2hhZG93OiAje21hcC1nZXQoX2dldC11bWJyYS1tYXAoJGNvbG9yLCAkb3BhY2l0eSksICR6VmFsdWUpfSxcbiAgICAgICAgICAgICAgI3ttYXAtZ2V0KF9nZXQtcGVudW1icmEtbWFwKCRjb2xvciwgJG9wYWNpdHkpLCAkelZhbHVlKX0sXG4gICAgICAgICAgICAgICN7bWFwLWdldChfZ2V0LWFtYmllbnQtbWFwKCRjb2xvciwgJG9wYWNpdHkpLCAkelZhbHVlKX07XG59XG5cbkBtaXhpbiBfbWF0LXRoZW1lLWVsZXZhdGlvbigkelZhbHVlLCAkdGhlbWUsICRvcGFjaXR5OiAkbWF0LWVsZXZhdGlvbi1vcGFjaXR5KSB7XG4gICRmb3JlZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgZm9yZWdyb3VuZCk7XG4gICRlbGV2YXRpb24tY29sb3I6IG1hcC1nZXQoJGZvcmVncm91bmQsIGVsZXZhdGlvbik7XG4gICRlbGV2YXRpb24tY29sb3Itb3ItZGVmYXVsdDogaWYoJGVsZXZhdGlvbi1jb2xvciA9PSBudWxsLCAkbWF0LWVsZXZhdGlvbi1jb2xvciwgJGVsZXZhdGlvbi1jb2xvcik7XG5cbiAgQGluY2x1ZGUgbWF0LWVsZXZhdGlvbigkelZhbHVlLCAkZWxldmF0aW9uLWNvbG9yLW9yLWRlZmF1bHQsICRvcGFjaXR5KTtcbn1cblxuLy8gQXBwbGllcyB0aGUgZWxldmF0aW9uIHRvIGFuIGVsZW1lbnQgaW4gYSBtYW5uZXIgdGhhdCBhbGxvd3Ncbi8vIGNvbnN1bWVycyB0byBvdmVycmlkZSBpdCB2aWEgdGhlIE1hdGVyaWFsIGVsZXZhdGlvbiBjbGFzc2VzLlxuQG1peGluIG1hdC1vdmVycmlkYWJsZS1lbGV2YXRpb24oXG4gICAgJHpWYWx1ZSxcbiAgICAkY29sb3I6ICRtYXQtZWxldmF0aW9uLWNvbG9yLFxuICAgICRvcGFjaXR5OiAkbWF0LWVsZXZhdGlvbi1vcGFjaXR5KSB7XG4gICY6bm90KFtjbGFzcyo9JyN7JF9tYXQtZWxldmF0aW9uLXByZWZpeH0nXSkge1xuICAgIEBpbmNsdWRlIG1hdC1lbGV2YXRpb24oJHpWYWx1ZSwgJGNvbG9yLCAkb3BhY2l0eSk7XG4gIH1cbn1cblxuQG1peGluIF9tYXQtdGhlbWUtb3ZlcnJpZGFibGUtZWxldmF0aW9uKCR6VmFsdWUsICR0aGVtZSwgJG9wYWNpdHk6ICRtYXQtZWxldmF0aW9uLW9wYWNpdHkpIHtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcbiAgJGVsZXZhdGlvbi1jb2xvcjogbWFwLWdldCgkZm9yZWdyb3VuZCwgZWxldmF0aW9uKTtcbiAgJGVsZXZhdGlvbi1jb2xvci1vci1kZWZhdWx0OiBpZigkZWxldmF0aW9uLWNvbG9yID09IG51bGwsICRtYXQtZWxldmF0aW9uLWNvbG9yLCAkZWxldmF0aW9uLWNvbG9yKTtcblxuICBAaW5jbHVkZSBtYXQtb3ZlcnJpZGFibGUtZWxldmF0aW9uKCR6VmFsdWUsICRlbGV2YXRpb24tY29sb3Itb3ItZGVmYXVsdCwgJG9wYWNpdHkpO1xufVxuXG4vLyBSZXR1cm5zIGEgc3RyaW5nIHRoYXQgY2FuIGJlIHVzZWQgYXMgdGhlIHZhbHVlIGZvciBhIHRyYW5zaXRpb24gcHJvcGVydHkgZm9yIGVsZXZhdGlvbi5cbi8vIENhbGxpbmcgdGhpcyBmdW5jdGlvbiBkaXJlY3RseSBpcyB1c2VmdWwgaW4gc2l0dWF0aW9ucyB3aGVyZSBhIGNvbXBvbmVudCBuZWVkcyB0byB0cmFuc2l0aW9uXG4vLyBtb3JlIHRoYW4gb25lIHByb3BlcnR5LlxuLy9cbi8vIC5mb28ge1xuLy8gICB0cmFuc2l0aW9uOiBtYXQtZWxldmF0aW9uLXRyYW5zaXRpb24tcHJvcGVydHktdmFsdWUoKSwgb3BhY2l0eSAxMDBtcyBlYXNlO1xuLy8gfVxuQGZ1bmN0aW9uIG1hdC1lbGV2YXRpb24tdHJhbnNpdGlvbi1wcm9wZXJ0eS12YWx1ZShcbiAgICAkZHVyYXRpb246ICRtYXQtZWxldmF0aW9uLXRyYW5zaXRpb24tZHVyYXRpb24sXG4gICAgJGVhc2luZzogJG1hdC1lbGV2YXRpb24tdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24pIHtcbiAgQHJldHVybiBib3gtc2hhZG93ICN7JGR1cmF0aW9ufSAjeyRlYXNpbmd9O1xufVxuXG4vLyBBcHBsaWVzIHRoZSBjb3JyZWN0IGNzcyBydWxlcyBuZWVkZWQgdG8gaGF2ZSBhbiBlbGVtZW50IHRyYW5zaXRpb24gYmV0d2VlbiBlbGV2YXRpb25zLlxuLy8gVGhpcyBtaXhpbiBzaG91bGQgYmUgYXBwbGllZCB0byBlbGVtZW50cyB3aG9zZSBlbGV2YXRpb24gdmFsdWVzIHdpbGwgY2hhbmdlIGRlcGVuZGluZyBvbiB0aGVpclxuLy8gY29udGV4dCAoZS5nLiB3aGVuIGFjdGl2ZSBvciBkaXNhYmxlZCkuXG4vL1xuLy8gTk9URSh0cmF2aXNrYXVmbWFuKTogQm90aCB0aGlzIG1peGluIGFuZCB0aGUgYWJvdmUgZnVuY3Rpb24gdXNlIGRlZmF1bHQgcGFyYW1ldGVycyBzbyB0aGV5IGNhblxuLy8gYmUgdXNlZCBpbiB0aGUgc2FtZSB3YXkgYnkgY2xpZW50cy5cbkBtaXhpbiBtYXQtZWxldmF0aW9uLXRyYW5zaXRpb24oXG4gICAgJGR1cmF0aW9uOiAkbWF0LWVsZXZhdGlvbi10cmFuc2l0aW9uLWR1cmF0aW9uLFxuICAgICRlYXNpbmc6ICRtYXQtZWxldmF0aW9uLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uKSB7XG4gIHRyYW5zaXRpb246IG1hdC1lbGV2YXRpb24tdHJhbnNpdGlvbi1wcm9wZXJ0eS12YWx1ZSgkZHVyYXRpb24sICRlYXNpbmcpO1xufVxuXG4vLyBDb2xvciBwYWxldHRlcyBmcm9tIHRoZSBNYXRlcmlhbCBEZXNpZ24gc3BlYy5cbi8vIFNlZSBodHRwczovL21hdGVyaWFsLmlvL2Rlc2lnbi9jb2xvci9cbi8vXG4vLyBDb250cmFzdCBjb2xvcnMgYXJlIGhhcmQtY29kZWQgYmVjYXVzZSBpdCBpcyB0b28gZGlmZmljdWx0IChwcm9iYWJseSBpbXBvc3NpYmxlKSB0b1xuLy8gY2FsY3VsYXRlIHRoZW0uIFRoZXNlIGNvbnRyYXN0IGNvbG9ycyBhcmUgcHVsbGVkIGZyb20gdGhlIHB1YmxpYyBNYXRlcmlhbCBEZXNpZ24gc3BlYyBzd2F0Y2hlcy5cbi8vIFdoaWxlIHRoZSBjb250cmFzdCBjb2xvcnMgaW4gdGhlIHNwZWMgYXJlIG5vdCBwcmVzY3JpcHRpdmUsIHdlIHVzZSB0aGVtIGZvciBjb252ZW5pZW5jZS5cblxuXG4vLyBAZGVwcmVjYXRlZCByZW5hbWVkIHRvICRkYXJrLXByaW1hcnktdGV4dC5cbi8vIEBicmVha2luZy1jaGFuZ2UgOC4wLjBcbiRibGFjay04Ny1vcGFjaXR5OiByZ2JhKGJsYWNrLCAwLjg3KTtcbi8vIEBkZXByZWNhdGVkIHJlbmFtZWQgdG8gJGxpZ2h0LXByaW1hcnktdGV4dC5cbi8vIEBicmVha2luZy1jaGFuZ2UgOC4wLjBcbiR3aGl0ZS04Ny1vcGFjaXR5OiByZ2JhKHdoaXRlLCAwLjg3KTtcbi8vIEBkZXByZWNhdGVkIHVzZSAkZGFyay1bc2Vjb25kYXJ5LXRleHQsZGlzYWJsZWQtdGV4dCxkaXZpZGVycyxmb2N1c2VkXSBpbnN0ZWFkLlxuLy8gQGJyZWFraW5nLWNoYW5nZSA4LjAuMFxuJGJsYWNrLTEyLW9wYWNpdHk6IHJnYmEoYmxhY2ssIDAuMTIpO1xuLy8gQGRlcHJlY2F0ZWQgdXNlICRsaWdodC1bc2Vjb25kYXJ5LXRleHQsZGlzYWJsZWQtdGV4dCxkaXZpZGVycyxmb2N1c2VkXSBpbnN0ZWFkLlxuLy8gQGJyZWFraW5nLWNoYW5nZSA4LjAuMFxuJHdoaXRlLTEyLW9wYWNpdHk6IHJnYmEod2hpdGUsIDAuMTIpO1xuLy8gQGRlcHJlY2F0ZWQgdXNlICRkYXJrLVtzZWNvbmRhcnktdGV4dCxkaXNhYmxlZC10ZXh0LGRpdmlkZXJzLGZvY3VzZWRdIGluc3RlYWQuXG4vLyBAYnJlYWtpbmctY2hhbmdlIDguMC4wXG4kYmxhY2stNi1vcGFjaXR5OiByZ2JhKGJsYWNrLCAwLjA2KTtcbi8vIEBkZXByZWNhdGVkIHVzZSAkbGlnaHQtW3NlY29uZGFyeS10ZXh0LGRpc2FibGVkLXRleHQsZGl2aWRlcnMsZm9jdXNlZF0gaW5zdGVhZC5cbi8vIEBicmVha2luZy1jaGFuZ2UgOC4wLjBcbiR3aGl0ZS02LW9wYWNpdHk6IHJnYmEod2hpdGUsIDAuMDYpO1xuXG4kZGFyay1wcmltYXJ5LXRleHQ6IHJnYmEoYmxhY2ssIDAuODcpO1xuJGRhcmstc2Vjb25kYXJ5LXRleHQ6IHJnYmEoYmxhY2ssIDAuNTQpO1xuJGRhcmstZGlzYWJsZWQtdGV4dDogcmdiYShibGFjaywgMC4zOCk7XG4kZGFyay1kaXZpZGVyczogcmdiYShibGFjaywgMC4xMik7XG4kZGFyay1mb2N1c2VkOiByZ2JhKGJsYWNrLCAwLjEyKTtcbiRsaWdodC1wcmltYXJ5LXRleHQ6IHdoaXRlO1xuJGxpZ2h0LXNlY29uZGFyeS10ZXh0OiByZ2JhKHdoaXRlLCAwLjcpO1xuJGxpZ2h0LWRpc2FibGVkLXRleHQ6IHJnYmEod2hpdGUsIDAuNSk7XG4kbGlnaHQtZGl2aWRlcnM6IHJnYmEod2hpdGUsIDAuMTIpO1xuJGxpZ2h0LWZvY3VzZWQ6IHJnYmEod2hpdGUsIDAuMTIpO1xuXG4kbWF0LXJlZDogKFxuICA1MDogI2ZmZWJlZSxcbiAgMTAwOiAjZmZjZGQyLFxuICAyMDA6ICNlZjlhOWEsXG4gIDMwMDogI2U1NzM3MyxcbiAgNDAwOiAjZWY1MzUwLFxuICA1MDA6ICNmNDQzMzYsXG4gIDYwMDogI2U1MzkzNSxcbiAgNzAwOiAjZDMyZjJmLFxuICA4MDA6ICNjNjI4MjgsXG4gIDkwMDogI2I3MWMxYyxcbiAgQTEwMDogI2ZmOGE4MCxcbiAgQTIwMDogI2ZmNTI1MixcbiAgQTQwMDogI2ZmMTc0NCxcbiAgQTcwMDogI2Q1MDAwMCxcbiAgY29udHJhc3Q6IChcbiAgICA1MDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDEwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDIwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDMwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDQwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDUwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA2MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgNzAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDgwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA5MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTEwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEEyMDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTQwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICBBNzAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICApXG4pO1xuXG4kbWF0LXBpbms6IChcbiAgNTA6ICNmY2U0ZWMsXG4gIDEwMDogI2Y4YmJkMCxcbiAgMjAwOiAjZjQ4ZmIxLFxuICAzMDA6ICNmMDYyOTIsXG4gIDQwMDogI2VjNDA3YSxcbiAgNTAwOiAjZTkxZTYzLFxuICA2MDA6ICNkODFiNjAsXG4gIDcwMDogI2MyMTg1YixcbiAgODAwOiAjYWQxNDU3LFxuICA5MDA6ICM4ODBlNGYsXG4gIEExMDA6ICNmZjgwYWIsXG4gIEEyMDA6ICNmZjQwODEsXG4gIEE0MDA6ICNmNTAwNTcsXG4gIEE3MDA6ICNjNTExNjIsXG4gIGNvbnRyYXN0OiAoXG4gICAgNTA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAxMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAyMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAzMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA0MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA1MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgNjAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDcwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA4MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgOTAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIEExMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICBBMjAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIEE0MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTcwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgKVxuKTtcblxuJG1hdC1wdXJwbGU6IChcbiAgNTA6ICNmM2U1ZjUsXG4gIDEwMDogI2UxYmVlNyxcbiAgMjAwOiAjY2U5M2Q4LFxuICAzMDA6ICNiYTY4YzgsXG4gIDQwMDogI2FiNDdiYyxcbiAgNTAwOiAjOWMyN2IwLFxuICA2MDA6ICM4ZTI0YWEsXG4gIDcwMDogIzdiMWZhMixcbiAgODAwOiAjNmExYjlhLFxuICA5MDA6ICM0YTE0OGMsXG4gIEExMDA6ICNlYTgwZmMsXG4gIEEyMDA6ICNlMDQwZmIsXG4gIEE0MDA6ICNkNTAwZjksXG4gIEE3MDA6ICNhYTAwZmYsXG4gIGNvbnRyYXN0OiAoXG4gICAgNTA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAxMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAyMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAzMDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgNDAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDUwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA2MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgNzAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDgwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA5MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTEwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEEyMDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTQwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICBBNzAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICApXG4pO1xuXG4kbWF0LWRlZXAtcHVycGxlOiAoXG4gIDUwOiAjZWRlN2Y2LFxuICAxMDA6ICNkMWM0ZTksXG4gIDIwMDogI2IzOWRkYixcbiAgMzAwOiAjOTU3NWNkLFxuICA0MDA6ICM3ZTU3YzIsXG4gIDUwMDogIzY3M2FiNyxcbiAgNjAwOiAjNWUzNWIxLFxuICA3MDA6ICM1MTJkYTgsXG4gIDgwMDogIzQ1MjdhMCxcbiAgOTAwOiAjMzExYjkyLFxuICBBMTAwOiAjYjM4OGZmLFxuICBBMjAwOiAjN2M0ZGZmLFxuICBBNDAwOiAjNjUxZmZmLFxuICBBNzAwOiAjNjIwMGVhLFxuICBjb250cmFzdDogKFxuICAgIDUwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMTAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMjAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMzAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDQwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA1MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgNjAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDcwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA4MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgOTAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIEExMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICBBMjAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIEE0MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTcwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgKVxuKTtcblxuJG1hdC1pbmRpZ286IChcbiAgNTA6ICNlOGVhZjYsXG4gIDEwMDogI2M1Y2FlOSxcbiAgMjAwOiAjOWZhOGRhLFxuICAzMDA6ICM3OTg2Y2IsXG4gIDQwMDogIzVjNmJjMCxcbiAgNTAwOiAjM2Y1MWI1LFxuICA2MDA6ICMzOTQ5YWIsXG4gIDcwMDogIzMwM2Y5ZixcbiAgODAwOiAjMjgzNTkzLFxuICA5MDA6ICMxYTIzN2UsXG4gIEExMDA6ICM4YzllZmYsXG4gIEEyMDA6ICM1MzZkZmUsXG4gIEE0MDA6ICMzZDVhZmUsXG4gIEE3MDA6ICMzMDRmZmUsXG4gIGNvbnRyYXN0OiAoXG4gICAgNTA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAxMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAyMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAzMDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgNDAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDUwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA2MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgNzAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDgwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA5MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTEwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEEyMDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTQwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICBBNzAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICApXG4pO1xuXG4kbWF0LWJsdWU6IChcbiAgNTA6ICNlM2YyZmQsXG4gIDEwMDogI2JiZGVmYixcbiAgMjAwOiAjOTBjYWY5LFxuICAzMDA6ICM2NGI1ZjYsXG4gIDQwMDogIzQyYTVmNSxcbiAgNTAwOiAjMjE5NmYzLFxuICA2MDA6ICMxZTg4ZTUsXG4gIDcwMDogIzE5NzZkMixcbiAgODAwOiAjMTU2NWMwLFxuICA5MDA6ICMwZDQ3YTEsXG4gIEExMDA6ICM4MmIxZmYsXG4gIEEyMDA6ICM0NDhhZmYsXG4gIEE0MDA6ICMyOTc5ZmYsXG4gIEE3MDA6ICMyOTYyZmYsXG4gIGNvbnRyYXN0OiAoXG4gICAgNTA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAxMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAyMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAzMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA0MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA1MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgNjAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDcwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA4MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgOTAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIEExMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICBBMjAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIEE0MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTcwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgKVxuKTtcblxuJG1hdC1saWdodC1ibHVlOiAoXG4gIDUwOiAjZTFmNWZlLFxuICAxMDA6ICNiM2U1ZmMsXG4gIDIwMDogIzgxZDRmYSxcbiAgMzAwOiAjNGZjM2Y3LFxuICA0MDA6ICMyOWI2ZjYsXG4gIDUwMDogIzAzYTlmNCxcbiAgNjAwOiAjMDM5YmU1LFxuICA3MDA6ICMwMjg4ZDEsXG4gIDgwMDogIzAyNzdiZCxcbiAgOTAwOiAjMDE1NzliLFxuICBBMTAwOiAjODBkOGZmLFxuICBBMjAwOiAjNDBjNGZmLFxuICBBNDAwOiAjMDBiMGZmLFxuICBBNzAwOiAjMDA5MWVhLFxuICBjb250cmFzdDogKFxuICAgIDUwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMTAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMjAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMzAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgNDAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgNTAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDYwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA3MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgODAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDkwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICBBMTAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgQTIwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEE0MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICBBNzAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICApXG4pO1xuXG4kbWF0LWN5YW46IChcbiAgNTA6ICNlMGY3ZmEsXG4gIDEwMDogI2IyZWJmMixcbiAgMjAwOiAjODBkZWVhLFxuICAzMDA6ICM0ZGQwZTEsXG4gIDQwMDogIzI2YzZkYSxcbiAgNTAwOiAjMDBiY2Q0LFxuICA2MDA6ICMwMGFjYzEsXG4gIDcwMDogIzAwOTdhNyxcbiAgODAwOiAjMDA4MzhmLFxuICA5MDA6ICMwMDYwNjQsXG4gIEExMDA6ICM4NGZmZmYsXG4gIEEyMDA6ICMxOGZmZmYsXG4gIEE0MDA6ICMwMGU1ZmYsXG4gIEE3MDA6ICMwMGI4ZDQsXG4gIGNvbnRyYXN0OiAoXG4gICAgNTA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAxMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAyMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAzMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA0MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA1MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgNjAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDcwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA4MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgOTAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIEExMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICBBMjAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgQTQwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEE3MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgKVxuKTtcblxuJG1hdC10ZWFsOiAoXG4gIDUwOiAjZTBmMmYxLFxuICAxMDA6ICNiMmRmZGIsXG4gIDIwMDogIzgwY2JjNCxcbiAgMzAwOiAjNGRiNmFjLFxuICA0MDA6ICMyNmE2OWEsXG4gIDUwMDogIzAwOTY4OCxcbiAgNjAwOiAjMDA4OTdiLFxuICA3MDA6ICMwMDc5NmIsXG4gIDgwMDogIzAwNjk1YyxcbiAgOTAwOiAjMDA0ZDQwLFxuICBBMTAwOiAjYTdmZmViLFxuICBBMjAwOiAjNjRmZmRhLFxuICBBNDAwOiAjMWRlOWI2LFxuICBBNzAwOiAjMDBiZmE1LFxuICBjb250cmFzdDogKFxuICAgIDUwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMTAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMjAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMzAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgNDAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgNTAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDYwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA3MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgODAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDkwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICBBMTAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgQTIwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEE0MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICBBNzAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gIClcbik7XG5cbiRtYXQtZ3JlZW46IChcbiAgNTA6ICNlOGY1ZTksXG4gIDEwMDogI2M4ZTZjOSxcbiAgMjAwOiAjYTVkNmE3LFxuICAzMDA6ICM4MWM3ODQsXG4gIDQwMDogIzY2YmI2YSxcbiAgNTAwOiAjNGNhZjUwLFxuICA2MDA6ICM0M2EwNDcsXG4gIDcwMDogIzM4OGUzYyxcbiAgODAwOiAjMmU3ZDMyLFxuICA5MDA6ICMxYjVlMjAsXG4gIEExMDA6ICNiOWY2Y2EsXG4gIEEyMDA6ICM2OWYwYWUsXG4gIEE0MDA6ICMwMGU2NzYsXG4gIEE3MDA6ICMwMGM4NTMsXG4gIGNvbnRyYXN0OiAoXG4gICAgNTA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAxMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAyMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAzMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA0MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA1MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA2MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgNzAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDgwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA5MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTEwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEEyMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICBBNDAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgQTcwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICApXG4pO1xuXG4kbWF0LWxpZ2h0LWdyZWVuOiAoXG4gIDUwOiAjZjFmOGU5LFxuICAxMDA6ICNkY2VkYzgsXG4gIDIwMDogI2M1ZTFhNSxcbiAgMzAwOiAjYWVkNTgxLFxuICA0MDA6ICM5Y2NjNjUsXG4gIDUwMDogIzhiYzM0YSxcbiAgNjAwOiAjN2NiMzQyLFxuICA3MDA6ICM2ODlmMzgsXG4gIDgwMDogIzU1OGIyZixcbiAgOTAwOiAjMzM2OTFlLFxuICBBMTAwOiAjY2NmZjkwLFxuICBBMjAwOiAjYjJmZjU5LFxuICBBNDAwOiAjNzZmZjAzLFxuICBBNzAwOiAjNjRkZDE3LFxuICBjb250cmFzdDogKFxuICAgIDUwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMTAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMjAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMzAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgNDAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgNTAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgNjAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgNzAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDgwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA5MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTEwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEEyMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICBBNDAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgQTcwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICApXG4pO1xuXG4kbWF0LWxpbWU6IChcbiAgNTA6ICNmOWZiZTcsXG4gIDEwMDogI2YwZjRjMyxcbiAgMjAwOiAjZTZlZTljLFxuICAzMDA6ICNkY2U3NzUsXG4gIDQwMDogI2Q0ZTE1NyxcbiAgNTAwOiAjY2RkYzM5LFxuICA2MDA6ICNjMGNhMzMsXG4gIDcwMDogI2FmYjQyYixcbiAgODAwOiAjOWU5ZDI0LFxuICA5MDA6ICM4Mjc3MTcsXG4gIEExMDA6ICNmNGZmODEsXG4gIEEyMDA6ICNlZWZmNDEsXG4gIEE0MDA6ICNjNmZmMDAsXG4gIEE3MDA6ICNhZWVhMDAsXG4gIGNvbnRyYXN0OiAoXG4gICAgNTA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAxMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAyMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAzMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA0MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA1MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA2MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA3MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA4MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA5MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTEwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEEyMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICBBNDAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgQTcwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICApXG4pO1xuXG4kbWF0LXllbGxvdzogKFxuICA1MDogI2ZmZmRlNyxcbiAgMTAwOiAjZmZmOWM0LFxuICAyMDA6ICNmZmY1OWQsXG4gIDMwMDogI2ZmZjE3NixcbiAgNDAwOiAjZmZlZTU4LFxuICA1MDA6ICNmZmViM2IsXG4gIDYwMDogI2ZkZDgzNSxcbiAgNzAwOiAjZmJjMDJkLFxuICA4MDA6ICNmOWE4MjUsXG4gIDkwMDogI2Y1N2YxNyxcbiAgQTEwMDogI2ZmZmY4ZCxcbiAgQTIwMDogI2ZmZmYwMCxcbiAgQTQwMDogI2ZmZWEwMCxcbiAgQTcwMDogI2ZmZDYwMCxcbiAgY29udHJhc3Q6IChcbiAgICA1MDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDEwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDIwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDMwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDQwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDUwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDYwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDcwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDgwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDkwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEExMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICBBMjAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgQTQwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEE3MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgKVxuKTtcblxuJG1hdC1hbWJlcjogKFxuICA1MDogI2ZmZjhlMSxcbiAgMTAwOiAjZmZlY2IzLFxuICAyMDA6ICNmZmUwODIsXG4gIDMwMDogI2ZmZDU0ZixcbiAgNDAwOiAjZmZjYTI4LFxuICA1MDA6ICNmZmMxMDcsXG4gIDYwMDogI2ZmYjMwMCxcbiAgNzAwOiAjZmZhMDAwLFxuICA4MDA6ICNmZjhmMDAsXG4gIDkwMDogI2ZmNmYwMCxcbiAgQTEwMDogI2ZmZTU3ZixcbiAgQTIwMDogI2ZmZDc0MCxcbiAgQTQwMDogI2ZmYzQwMCxcbiAgQTcwMDogI2ZmYWIwMCxcbiAgY29udHJhc3Q6IChcbiAgICA1MDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDEwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDIwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDMwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDQwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDUwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDYwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDcwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDgwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDkwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEExMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICBBMjAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgQTQwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEE3MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgKVxuKTtcblxuJG1hdC1vcmFuZ2U6IChcbiAgNTA6ICNmZmYzZTAsXG4gIDEwMDogI2ZmZTBiMixcbiAgMjAwOiAjZmZjYzgwLFxuICAzMDA6ICNmZmI3NGQsXG4gIDQwMDogI2ZmYTcyNixcbiAgNTAwOiAjZmY5ODAwLFxuICA2MDA6ICNmYjhjMDAsXG4gIDcwMDogI2Y1N2MwMCxcbiAgODAwOiAjZWY2YzAwLFxuICA5MDA6ICNlNjUxMDAsXG4gIEExMDA6ICNmZmQxODAsXG4gIEEyMDA6ICNmZmFiNDAsXG4gIEE0MDA6ICNmZjkxMDAsXG4gIEE3MDA6ICNmZjZkMDAsXG4gIGNvbnRyYXN0OiAoXG4gICAgNTA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAxMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAyMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAzMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA0MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA1MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA2MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA3MDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA4MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgOTAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIEExMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICBBMjAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgQTQwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEE3MDA6IGJsYWNrLFxuICApXG4pO1xuXG4kbWF0LWRlZXAtb3JhbmdlOiAoXG4gIDUwOiAjZmJlOWU3LFxuICAxMDA6ICNmZmNjYmMsXG4gIDIwMDogI2ZmYWI5MSxcbiAgMzAwOiAjZmY4YTY1LFxuICA0MDA6ICNmZjcwNDMsXG4gIDUwMDogI2ZmNTcyMixcbiAgNjAwOiAjZjQ1MTFlLFxuICA3MDA6ICNlNjRhMTksXG4gIDgwMDogI2Q4NDMxNSxcbiAgOTAwOiAjYmYzNjBjLFxuICBBMTAwOiAjZmY5ZTgwLFxuICBBMjAwOiAjZmY2ZTQwLFxuICBBNDAwOiAjZmYzZDAwLFxuICBBNzAwOiAjZGQyYzAwLFxuICBjb250cmFzdDogKFxuICAgIDUwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMTAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMjAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMzAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgNDAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgNTAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDYwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA3MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgODAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDkwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICBBMTAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgQTIwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEE0MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTcwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgKVxuKTtcblxuJG1hdC1icm93bjogKFxuICA1MDogI2VmZWJlOSxcbiAgMTAwOiAjZDdjY2M4LFxuICAyMDA6ICNiY2FhYTQsXG4gIDMwMDogI2ExODg3ZixcbiAgNDAwOiAjOGQ2ZTYzLFxuICA1MDA6ICM3OTU1NDgsXG4gIDYwMDogIzZkNGM0MSxcbiAgNzAwOiAjNWQ0MDM3LFxuICA4MDA6ICM0ZTM0MmUsXG4gIDkwMDogIzNlMjcyMyxcbiAgQTEwMDogI2Q3Y2NjOCxcbiAgQTIwMDogI2JjYWFhNCxcbiAgQTQwMDogIzhkNmU2MyxcbiAgQTcwMDogIzVkNDAzNyxcbiAgY29udHJhc3Q6IChcbiAgICA1MDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDEwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDIwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIDMwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA0MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgNTAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDYwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA3MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgODAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDkwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICBBMTAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgQTIwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEE0MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTcwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgKVxuKTtcblxuJG1hdC1ncmV5OiAoXG4gIDUwOiAjZmFmYWZhLFxuICAxMDA6ICNmNWY1ZjUsXG4gIDIwMDogI2VlZWVlZSxcbiAgMzAwOiAjZTBlMGUwLFxuICA0MDA6ICNiZGJkYmQsXG4gIDUwMDogIzllOWU5ZSxcbiAgNjAwOiAjNzU3NTc1LFxuICA3MDA6ICM2MTYxNjEsXG4gIDgwMDogIzQyNDI0MixcbiAgOTAwOiAjMjEyMTIxLFxuICBBMTAwOiAjZmZmZmZmLFxuICBBMjAwOiAjZWVlZWVlLFxuICBBNDAwOiAjYmRiZGJkLFxuICBBNzAwOiAjNjE2MTYxLFxuICBjb250cmFzdDogKFxuICAgIDUwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMTAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMjAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgMzAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgNDAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgNTAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgNjAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDcwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA4MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgOTAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIEExMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICBBMjAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgQTQwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEE3MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gIClcbik7XG5cbi8vIEFsaWFzIGZvciBhbHRlcm5hdGUgc3BlbGxpbmcuXG4kbWF0LWdyYXk6ICRtYXQtZ3JleTtcblxuJG1hdC1ibHVlLWdyZXk6IChcbiAgNTA6ICNlY2VmZjEsXG4gIDEwMDogI2NmZDhkYyxcbiAgMjAwOiAjYjBiZWM1LFxuICAzMDA6ICM5MGE0YWUsXG4gIDQwMDogIzc4OTA5YyxcbiAgNTAwOiAjNjA3ZDhiLFxuICA2MDA6ICM1NDZlN2EsXG4gIDcwMDogIzQ1NWE2NCxcbiAgODAwOiAjMzc0NzRmLFxuICA5MDA6ICMyNjMyMzgsXG4gIEExMDA6ICNjZmQ4ZGMsXG4gIEEyMDA6ICNiMGJlYzUsXG4gIEE0MDA6ICM3ODkwOWMsXG4gIEE3MDA6ICM0NTVhNjQsXG4gIGNvbnRyYXN0OiAoXG4gICAgNTA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAxMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAyMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICAzMDA6ICRkYXJrLXByaW1hcnktdGV4dCxcbiAgICA0MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgNTAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDYwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICA3MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgODAwOiAkbGlnaHQtcHJpbWFyeS10ZXh0LFxuICAgIDkwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgICBBMTAwOiAkZGFyay1wcmltYXJ5LXRleHQsXG4gICAgQTIwMDogJGRhcmstcHJpbWFyeS10ZXh0LFxuICAgIEE0MDA6ICRsaWdodC1wcmltYXJ5LXRleHQsXG4gICAgQTcwMDogJGxpZ2h0LXByaW1hcnktdGV4dCxcbiAgKVxuKTtcblxuLy8gQWxpYXMgZm9yIGFsdGVybmF0ZSBzcGVsbGluZy5cbiRtYXQtYmx1ZS1ncmF5OiAkbWF0LWJsdWUtZ3JleTtcblxuXG4vLyBCYWNrZ3JvdW5kIHBhbGV0dGUgZm9yIGxpZ2h0IHRoZW1lcy5cbiRtYXQtbGlnaHQtdGhlbWUtYmFja2dyb3VuZDogKFxuICBzdGF0dXMtYmFyOiBtYXBfZ2V0KCRtYXQtZ3JleSwgMzAwKSxcbiAgYXBwLWJhcjogICAgbWFwX2dldCgkbWF0LWdyZXksIDEwMCksXG4gIGJhY2tncm91bmQ6IG1hcF9nZXQoJG1hdC1ncmV5LCA1MCksXG4gIGhvdmVyOiAgICAgIHJnYmEoYmxhY2ssIDAuMDQpLCAvLyBUT0RPKGthcmEpOiBjaGVjayBzdHlsZSB3aXRoIE1hdGVyaWFsIERlc2lnbiBVWFxuICBjYXJkOiAgICAgICB3aGl0ZSxcbiAgZGlhbG9nOiAgICAgd2hpdGUsXG4gIGRpc2FibGVkLWJ1dHRvbjogcmdiYShibGFjaywgMC4xMiksXG4gIHJhaXNlZC1idXR0b246IHdoaXRlLFxuICBmb2N1c2VkLWJ1dHRvbjogJGRhcmstZm9jdXNlZCxcbiAgc2VsZWN0ZWQtYnV0dG9uOiBtYXBfZ2V0KCRtYXQtZ3JleSwgMzAwKSxcbiAgc2VsZWN0ZWQtZGlzYWJsZWQtYnV0dG9uOiBtYXBfZ2V0KCRtYXQtZ3JleSwgNDAwKSxcbiAgZGlzYWJsZWQtYnV0dG9uLXRvZ2dsZTogbWFwX2dldCgkbWF0LWdyZXksIDIwMCksXG4gIHVuc2VsZWN0ZWQtY2hpcDogbWFwX2dldCgkbWF0LWdyZXksIDMwMCksXG4gIGRpc2FibGVkLWxpc3Qtb3B0aW9uOiBtYXBfZ2V0KCRtYXQtZ3JleSwgMjAwKSxcbik7XG5cbi8vIEJhY2tncm91bmQgcGFsZXR0ZSBmb3IgZGFyayB0aGVtZXMuXG4kbWF0LWRhcmstdGhlbWUtYmFja2dyb3VuZDogKFxuICBzdGF0dXMtYmFyOiBibGFjayxcbiAgYXBwLWJhcjogICAgbWFwX2dldCgkbWF0LWdyZXksIDkwMCksXG4gIGJhY2tncm91bmQ6ICMzMDMwMzAsXG4gIGhvdmVyOiAgICAgIHJnYmEod2hpdGUsIDAuMDQpLCAvLyBUT0RPKGthcmEpOiBjaGVjayBzdHlsZSB3aXRoIE1hdGVyaWFsIERlc2lnbiBVWFxuICBjYXJkOiAgICAgICBtYXBfZ2V0KCRtYXQtZ3JleSwgODAwKSxcbiAgZGlhbG9nOiAgICAgbWFwX2dldCgkbWF0LWdyZXksIDgwMCksXG4gIGRpc2FibGVkLWJ1dHRvbjogcmdiYSh3aGl0ZSwgMC4xMiksXG4gIHJhaXNlZC1idXR0b246IG1hcC1nZXQoJG1hdC1ncmV5LCA4MDApLFxuICBmb2N1c2VkLWJ1dHRvbjogJGxpZ2h0LWZvY3VzZWQsXG4gIHNlbGVjdGVkLWJ1dHRvbjogbWFwX2dldCgkbWF0LWdyZXksIDkwMCksXG4gIHNlbGVjdGVkLWRpc2FibGVkLWJ1dHRvbjogbWFwX2dldCgkbWF0LWdyZXksIDgwMCksXG4gIGRpc2FibGVkLWJ1dHRvbi10b2dnbGU6IGJsYWNrLFxuICB1bnNlbGVjdGVkLWNoaXA6IG1hcF9nZXQoJG1hdC1ncmV5LCA3MDApLFxuICBkaXNhYmxlZC1saXN0LW9wdGlvbjogYmxhY2ssXG4pO1xuXG4vLyBGb3JlZ3JvdW5kIHBhbGV0dGUgZm9yIGxpZ2h0IHRoZW1lcy5cbiRtYXQtbGlnaHQtdGhlbWUtZm9yZWdyb3VuZDogKFxuICBiYXNlOiAgICAgICAgICAgICAgYmxhY2ssXG4gIGRpdmlkZXI6ICAgICAgICAgICAkZGFyay1kaXZpZGVycyxcbiAgZGl2aWRlcnM6ICAgICAgICAgICRkYXJrLWRpdmlkZXJzLFxuICBkaXNhYmxlZDogICAgICAgICAgJGRhcmstZGlzYWJsZWQtdGV4dCxcbiAgZGlzYWJsZWQtYnV0dG9uOiAgIHJnYmEoYmxhY2ssIDAuMjYpLFxuICBkaXNhYmxlZC10ZXh0OiAgICAgJGRhcmstZGlzYWJsZWQtdGV4dCxcbiAgZWxldmF0aW9uOiAgICAgICAgIGJsYWNrLFxuICBoaW50LXRleHQ6ICAgICAgICAgJGRhcmstZGlzYWJsZWQtdGV4dCxcbiAgc2Vjb25kYXJ5LXRleHQ6ICAgICRkYXJrLXNlY29uZGFyeS10ZXh0LFxuICBpY29uOiAgICAgICAgICAgICAgcmdiYShibGFjaywgMC41NCksXG4gIGljb25zOiAgICAgICAgICAgICByZ2JhKGJsYWNrLCAwLjU0KSxcbiAgdGV4dDogICAgICAgICAgICAgIHJnYmEoYmxhY2ssIDAuODcpLFxuICBzbGlkZXItbWluOiAgICAgICAgcmdiYShibGFjaywgMC44NyksXG4gIHNsaWRlci1vZmY6ICAgICAgICByZ2JhKGJsYWNrLCAwLjI2KSxcbiAgc2xpZGVyLW9mZi1hY3RpdmU6IHJnYmEoYmxhY2ssIDAuMzgpLFxuKTtcblxuLy8gRm9yZWdyb3VuZCBwYWxldHRlIGZvciBkYXJrIHRoZW1lcy5cbiRtYXQtZGFyay10aGVtZS1mb3JlZ3JvdW5kOiAoXG4gIGJhc2U6ICAgICAgICAgICAgICB3aGl0ZSxcbiAgZGl2aWRlcjogICAgICAgICAgICRsaWdodC1kaXZpZGVycyxcbiAgZGl2aWRlcnM6ICAgICAgICAgICRsaWdodC1kaXZpZGVycyxcbiAgZGlzYWJsZWQ6ICAgICAgICAgICRsaWdodC1kaXNhYmxlZC10ZXh0LFxuICBkaXNhYmxlZC1idXR0b246ICAgcmdiYSh3aGl0ZSwgMC4zKSxcbiAgZGlzYWJsZWQtdGV4dDogICAgICRsaWdodC1kaXNhYmxlZC10ZXh0LFxuICBlbGV2YXRpb246ICAgICAgICAgYmxhY2ssXG4gIGhpbnQtdGV4dDogICAgICAgICAkbGlnaHQtZGlzYWJsZWQtdGV4dCxcbiAgc2Vjb25kYXJ5LXRleHQ6ICAgICRsaWdodC1zZWNvbmRhcnktdGV4dCxcbiAgaWNvbjogICAgICAgICAgICAgIHdoaXRlLFxuICBpY29uczogICAgICAgICAgICAgd2hpdGUsXG4gIHRleHQ6ICAgICAgICAgICAgICB3aGl0ZSxcbiAgc2xpZGVyLW1pbjogICAgICAgIHdoaXRlLFxuICBzbGlkZXItb2ZmOiAgICAgICAgcmdiYSh3aGl0ZSwgMC4zKSxcbiAgc2xpZGVyLW9mZi1hY3RpdmU6IHJnYmEod2hpdGUsIDAuMyksXG4pO1xuXG5cblxuLy8gRm9yIGEgZ2l2ZW4gaHVlIGluIGEgcGFsZXR0ZSwgcmV0dXJuIHRoZSBjb250cmFzdCBjb2xvciBmcm9tIHRoZSBtYXAgb2YgY29udHJhc3QgcGFsZXR0ZXMuXG4vLyBAcGFyYW0gJGNvbG9yLW1hcFxuLy8gQHBhcmFtICRodWVcbkBmdW5jdGlvbiBtYXQtY29udHJhc3QoJHBhbGV0dGUsICRodWUpIHtcbiAgQHJldHVybiBtYXAtZ2V0KG1hcC1nZXQoJHBhbGV0dGUsIGNvbnRyYXN0KSwgJGh1ZSk7XG59XG5cblxuLy8gQ3JlYXRlcyBhIG1hcCBvZiBodWVzIHRvIGNvbG9ycyBmb3IgYSB0aGVtZS4gVGhpcyBpcyB1c2VkIHRvIGRlZmluZSBhIHRoZW1lIHBhbGV0dGUgaW4gdGVybXNcbi8vIG9mIHRoZSBNYXRlcmlhbCBEZXNpZ24gaHVlcy5cbi8vIEBwYXJhbSAkY29sb3ItbWFwXG4vLyBAcGFyYW0gJHByaW1hcnlcbi8vIEBwYXJhbSAkbGlnaHRlclxuQGZ1bmN0aW9uIG1hdC1wYWxldHRlKCRiYXNlLXBhbGV0dGUsICRkZWZhdWx0OiA1MDAsICRsaWdodGVyOiAxMDAsICRkYXJrZXI6IDcwMCkge1xuICAkcmVzdWx0OiBtYXBfbWVyZ2UoJGJhc2UtcGFsZXR0ZSwgKFxuICAgIGRlZmF1bHQ6IG1hcC1nZXQoJGJhc2UtcGFsZXR0ZSwgJGRlZmF1bHQpLFxuICAgIGxpZ2h0ZXI6IG1hcC1nZXQoJGJhc2UtcGFsZXR0ZSwgJGxpZ2h0ZXIpLFxuICAgIGRhcmtlcjogbWFwLWdldCgkYmFzZS1wYWxldHRlLCAkZGFya2VyKSxcblxuICAgIGRlZmF1bHQtY29udHJhc3Q6IG1hdC1jb250cmFzdCgkYmFzZS1wYWxldHRlLCAkZGVmYXVsdCksXG4gICAgbGlnaHRlci1jb250cmFzdDogbWF0LWNvbnRyYXN0KCRiYXNlLXBhbGV0dGUsICRsaWdodGVyKSxcbiAgICBkYXJrZXItY29udHJhc3Q6IG1hdC1jb250cmFzdCgkYmFzZS1wYWxldHRlLCAkZGFya2VyKVxuICApKTtcblxuICAvLyBGb3IgZWFjaCBodWUgaW4gdGhlIHBhbGV0dGUsIGFkZCBhIFwiLWNvbnRyYXN0XCIgY29sb3IgdG8gdGhlIG1hcC5cbiAgQGVhY2ggJGh1ZSwgJGNvbG9yIGluICRiYXNlLXBhbGV0dGUge1xuICAgICRyZXN1bHQ6IG1hcF9tZXJnZSgkcmVzdWx0LCAoXG4gICAgICAnI3skaHVlfS1jb250cmFzdCc6IG1hdC1jb250cmFzdCgkYmFzZS1wYWxldHRlLCAkaHVlKVxuICAgICkpO1xuICB9XG5cbiAgQHJldHVybiAkcmVzdWx0O1xufVxuXG5cbi8vIEdldHMgYSBjb2xvciBmcm9tIGEgdGhlbWUgcGFsZXR0ZSAodGhlIG91dHB1dCBvZiBtYXQtcGFsZXR0ZSkuXG4vLyBUaGUgaHVlIGNhbiBiZSBvbmUgb2YgdGhlIHN0YW5kYXJkIHZhbHVlcyAoNTAwLCBBNDAwLCBldGMuKSwgb25lIG9mIHRoZSB0aHJlZSBwcmVjb25maWd1cmVkXG4vLyBodWVzIChkZWZhdWx0LCBsaWdodGVyLCBkYXJrZXIpLCBvciBhbnkgb2YgdGhlIGFmb3JlbWVudGlvbmVkIHByZWZpeGVkIHdpdGggXCItY29udHJhc3RcIi5cbi8vXG4vLyBAcGFyYW0gJGNvbG9yLW1hcCBUaGUgdGhlbWUgcGFsZXR0ZSAob3V0cHV0IG9mIG1hdC1wYWxldHRlKS5cbi8vIEBwYXJhbSAkaHVlIFRoZSBodWUgZnJvbSB0aGUgcGFsZXR0ZSB0byB1c2UuIElmIHRoaXMgaXMgYSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEsIGl0IHdpbGxcbi8vICAgICBiZSB0cmVhdGVkIGFzIG9wYWNpdHkuXG4vLyBAcGFyYW0gJG9wYWNpdHkgVGhlIGFscGhhIGNoYW5uZWwgdmFsdWUgZm9yIHRoZSBjb2xvci5cbkBmdW5jdGlvbiBtYXQtY29sb3IoJHBhbGV0dGUsICRodWU6IGRlZmF1bHQsICRvcGFjaXR5OiBudWxsKSB7XG4gIC8vIElmIGh1ZUtleSBpcyBhIG51bWJlciBiZXR3ZWVuIHplcm8gYW5kIG9uZSwgdGhlbiBpdCBhY3R1YWxseSBjb250YWlucyBhblxuICAvLyBvcGFjaXR5IHZhbHVlLCBzbyByZWNhbGwgdGhpcyBmdW5jdGlvbiB3aXRoIHRoZSBkZWZhdWx0IGh1ZSBhbmQgdGhhdCBnaXZlbiBvcGFjaXR5LlxuICBAaWYgdHlwZS1vZigkaHVlKSA9PSBudW1iZXIgYW5kICRodWUgPj0gMCBhbmQgJGh1ZSA8PSAxIHtcbiAgICBAcmV0dXJuIG1hdC1jb2xvcigkcGFsZXR0ZSwgZGVmYXVsdCwgJGh1ZSk7XG4gIH1cblxuICAkY29sb3I6IG1hcC1nZXQoJHBhbGV0dGUsICRodWUpO1xuXG4gIEBpZiAodHlwZS1vZigkY29sb3IpICE9IGNvbG9yKSB7XG4gICAgLy8gSWYgdGhlICRjb2xvciByZXNvbHZlZCB0byBzb21ldGhpbmcgZGlmZmVyZW50IGZyb20gYSBjb2xvciAoZS5nLiBhIENTUyB2YXJpYWJsZSksXG4gICAgLy8gd2UgY2FuJ3QgYXBwbHkgdGhlIG9wYWNpdHkgYW55d2F5IHNvIHdlIHJldHVybiB0aGUgdmFsdWUgYXMgaXMsIG90aGVyd2lzZSBTYXNzIGNhblxuICAgIC8vIHRocm93IGFuIGVycm9yIG9yIG91dHB1dCBzb21ldGhpbmcgaW52YWxpZC5cbiAgICBAcmV0dXJuICRjb2xvcjtcbiAgfVxuXG4gIEByZXR1cm4gcmdiYSgkY29sb3IsIGlmKCRvcGFjaXR5ID09IG51bGwsIG9wYWNpdHkoJGNvbG9yKSwgJG9wYWNpdHkpKTtcbn1cblxuXG4vLyBDcmVhdGVzIGEgY29udGFpbmVyIG9iamVjdCBmb3IgYSBsaWdodCB0aGVtZSB0byBiZSBnaXZlbiB0byBpbmRpdmlkdWFsIGNvbXBvbmVudCB0aGVtZSBtaXhpbnMuXG5AZnVuY3Rpb24gbWF0LWxpZ2h0LXRoZW1lKCRwcmltYXJ5LCAkYWNjZW50LCAkd2FybjogbWF0LXBhbGV0dGUoJG1hdC1yZWQpKSB7XG4gIEByZXR1cm4gKFxuICAgIHByaW1hcnk6ICRwcmltYXJ5LFxuICAgIGFjY2VudDogJGFjY2VudCxcbiAgICB3YXJuOiAkd2FybixcbiAgICBpcy1kYXJrOiBmYWxzZSxcbiAgICBmb3JlZ3JvdW5kOiAkbWF0LWxpZ2h0LXRoZW1lLWZvcmVncm91bmQsXG4gICAgYmFja2dyb3VuZDogJG1hdC1saWdodC10aGVtZS1iYWNrZ3JvdW5kLFxuICApO1xufVxuXG5cbi8vIENyZWF0ZXMgYSBjb250YWluZXIgb2JqZWN0IGZvciBhIGRhcmsgdGhlbWUgdG8gYmUgZ2l2ZW4gdG8gaW5kaXZpZHVhbCBjb21wb25lbnQgdGhlbWUgbWl4aW5zLlxuQGZ1bmN0aW9uIG1hdC1kYXJrLXRoZW1lKCRwcmltYXJ5LCAkYWNjZW50LCAkd2FybjogbWF0LXBhbGV0dGUoJG1hdC1yZWQpKSB7XG4gIEByZXR1cm4gKFxuICAgIHByaW1hcnk6ICRwcmltYXJ5LFxuICAgIGFjY2VudDogJGFjY2VudCxcbiAgICB3YXJuOiAkd2FybixcbiAgICBpcy1kYXJrOiB0cnVlLFxuICAgIGZvcmVncm91bmQ6ICRtYXQtZGFyay10aGVtZS1mb3JlZ3JvdW5kLFxuICAgIGJhY2tncm91bmQ6ICRtYXQtZGFyay10aGVtZS1iYWNrZ3JvdW5kLFxuICApO1xufVxuXG5cblxuJG1hdC1yaXBwbGUtY29sb3Itb3BhY2l0eTogMC4xO1xuXG5AbWl4aW4gbWF0LXJpcHBsZSgpIHtcblxuICAvLyBUaGUgaG9zdCBlbGVtZW50IG9mIGFuIG1hdC1yaXBwbGUgZGlyZWN0aXZlIHNob3VsZCBhbHdheXMgaGF2ZSBhIHBvc2l0aW9uIG9mIFwiYWJzb2x1dGVcIiBvclxuICAvLyBcInJlbGF0aXZlXCIgc28gdGhhdCB0aGUgcmlwcGxlcyBpbnNpZGUgYXJlIGNvcnJlY3RseSBwb3NpdGlvbmVkIHJlbGF0aXZlbHkgdG8gdGhlIGNvbnRhaW5lci5cbiAgLm1hdC1yaXBwbGUge1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG5cbiAgICAvLyBCeSBkZWZhdWx0LCBldmVyeSByaXBwbGUgY29udGFpbmVyIHNob3VsZCBoYXZlIHBvc2l0aW9uOiByZWxhdGl2ZSBpbiBmYXZvciBvZiBjcmVhdGluZyBhblxuICAgIC8vIGVhc3kgQVBJIGZvciBkZXZlbG9wZXJzIHVzaW5nIHRoZSBNYXRSaXBwbGUgZGlyZWN0aXZlLlxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgfVxuXG4gIC5tYXQtcmlwcGxlLm1hdC1yaXBwbGUtdW5ib3VuZGVkIHtcbiAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgfVxuXG4gIC5tYXQtcmlwcGxlLWVsZW1lbnQge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG5cbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5LCB0cmFuc2Zvcm0gMG1zIGN1YmljLWJlemllcigwLCAwLCAwLjIsIDEpO1xuICAgIHRyYW5zZm9ybTogc2NhbGUoMCk7XG5cbiAgICAvLyBJbiBoaWdoIGNvbnRyYXN0IG1vZGUgdGhlIHJpcHBsZSBpcyBvcGFxdWUsIGNhdXNpbmcgaXQgdG8gb2JzdHJ1Y3QgdGhlIGNvbnRlbnQuXG4gICAgQGluY2x1ZGUgY2RrLWhpZ2gtY29udHJhc3Qge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gIH1cbn1cblxuLyogVGhlbWUgZm9yIHRoZSByaXBwbGUgZWxlbWVudHMuKi9cbkBtaXhpbiBtYXQtcmlwcGxlLXRoZW1lKCR0aGVtZSkge1xuICAkZm9yZWdyb3VuZDogbWFwX2dldCgkdGhlbWUsIGZvcmVncm91bmQpO1xuICAkZm9yZWdyb3VuZC1iYXNlOiBtYXBfZ2V0KCRmb3JlZ3JvdW5kLCBiYXNlKTtcblxuICAubWF0LXJpcHBsZS1lbGVtZW50IHtcbiAgICAvLyBJZiB0aGUgcmlwcGxlIGNvbG9yIGlzIHJlc29sdmVzIHRvIGEgY29sb3IgKnR5cGUqLCB3ZSBjYW4gdXNlIGl0IGRpcmVjdGx5LCBvdGhlcndpc2VcbiAgICAvLyAoZS5nLiBpdCByZXNvbHZlcyB0byBhIENTUyB2YXJpYWJsZSkgd2UgZmFsbCBiYWNrIHRvIHVzaW5nIHRoZSBjb2xvciBhbmQgc2V0dGluZyBhbiBvcGFjaXR5LlxuICAgIEBpZiAodHlwZS1vZigkZm9yZWdyb3VuZC1iYXNlKSA9PSBjb2xvcikge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgkZm9yZWdyb3VuZC1iYXNlLCAkbWF0LXJpcHBsZS1jb2xvci1vcGFjaXR5KTtcbiAgICB9XG4gICAgQGVsc2Uge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJGZvcmVncm91bmQtYmFzZTtcbiAgICAgIG9wYWNpdHk6ICRtYXQtcmlwcGxlLWNvbG9yLW9wYWNpdHk7XG4gICAgfVxuICB9XG59XG5cblxuXG4vLyBVdGlsaXR5IGZvciBmZXRjaGluZyBhIG5lc3RlZCB2YWx1ZSBmcm9tIGEgdHlwb2dyYXBoeSBjb25maWcuXG5AZnVuY3Rpb24gX21hdC1nZXQtdHlwZS12YWx1ZSgkY29uZmlnLCAkbGV2ZWwsICRuYW1lKSB7XG4gIEByZXR1cm4gbWFwLWdldChtYXAtZ2V0KCRjb25maWcsICRsZXZlbCksICRuYW1lKTtcbn1cblxuLy8gR2V0cyB0aGUgZm9udCBzaXplIGZvciBhIGxldmVsIGluc2lkZSBhIHR5cG9ncmFwaHkgY29uZmlnLlxuQGZ1bmN0aW9uIG1hdC1mb250LXNpemUoJGNvbmZpZywgJGxldmVsKSB7XG4gIEByZXR1cm4gX21hdC1nZXQtdHlwZS12YWx1ZSgkY29uZmlnLCAkbGV2ZWwsIGZvbnQtc2l6ZSk7XG59XG5cbi8vIEdldHMgdGhlIGxpbmUgaGVpZ2h0IGZvciBhIGxldmVsIGluc2lkZSBhIHR5cG9ncmFwaHkgY29uZmlnLlxuQGZ1bmN0aW9uIG1hdC1saW5lLWhlaWdodCgkY29uZmlnLCAkbGV2ZWwpIHtcbiAgQHJldHVybiBfbWF0LWdldC10eXBlLXZhbHVlKCRjb25maWcsICRsZXZlbCwgbGluZS1oZWlnaHQpO1xufVxuXG4vLyBHZXRzIHRoZSBmb250IHdlaWdodCBmb3IgYSBsZXZlbCBpbnNpZGUgYSB0eXBvZ3JhcGh5IGNvbmZpZy5cbkBmdW5jdGlvbiBtYXQtZm9udC13ZWlnaHQoJGNvbmZpZywgJGxldmVsKSB7XG4gIEByZXR1cm4gX21hdC1nZXQtdHlwZS12YWx1ZSgkY29uZmlnLCAkbGV2ZWwsIGZvbnQtd2VpZ2h0KTtcbn1cblxuLy8gR2V0cyB0aGUgbGV0dGVyIHNwYWNpbmcgZm9yIGEgbGV2ZWwgaW5zaWRlIGEgdHlwb2dyYXBoeSBjb25maWcuXG5AZnVuY3Rpb24gbWF0LWxldHRlci1zcGFjaW5nKCRjb25maWcsICRsZXZlbCkge1xuICBAcmV0dXJuIF9tYXQtZ2V0LXR5cGUtdmFsdWUoJGNvbmZpZywgJGxldmVsLCBsZXR0ZXItc3BhY2luZyk7XG59XG5cbi8vIEdldHMgdGhlIGZvbnQtZmFtaWx5IGZyb20gYSB0eXBvZ3JhcGh5IGNvbmZpZyBhbmQgcmVtb3ZlcyB0aGUgcXVvdGVzIGFyb3VuZCBpdC5cbkBmdW5jdGlvbiBtYXQtZm9udC1mYW1pbHkoJGNvbmZpZywgJGxldmVsOiBudWxsKSB7XG4gICRmb250LWZhbWlseTogbWFwLWdldCgkY29uZmlnLCBmb250LWZhbWlseSk7XG5cbiAgQGlmICRsZXZlbCAhPSBudWxsIHtcbiAgICAkZm9udC1mYW1pbHk6IF9tYXQtZ2V0LXR5cGUtdmFsdWUoJGNvbmZpZywgJGxldmVsLCBmb250LWZhbWlseSk7XG4gIH1cblxuICAvLyBHdWFyZCBhZ2FpbnN0IHVucXVvdGluZyBub24tc3RyaW5nIHZhbHVlcywgYmVjYXVzZSBpdCdzIGRlcHJlY2F0ZWQuXG4gIEByZXR1cm4gaWYodHlwZS1vZigkZm9udC1mYW1pbHkpID09IHN0cmluZywgdW5xdW90ZSgkZm9udC1mYW1pbHkpLCAkZm9udC1mYW1pbHkpO1xufVxuXG4vLyBPdXRwdXRzIHRoZSBzaG9ydGhhbmQgYGZvbnRgIENTUyBwcm9wZXJ0eSwgYmFzZWQgb24gYSBzZXQgb2YgdHlwb2dyYXBoeSB2YWx1ZXMuIEZhbGxzIGJhY2sgdG9cbi8vIHRoZSBpbmRpdmlkdWFsIHByb3BlcnRpZXMgaWYgYSB2YWx1ZSB0aGF0IGlzbid0IGFsbG93ZWQgaW4gdGhlIHNob3J0aGFuZCBpcyBwYXNzZWQgaW4uXG5AbWl4aW4gbWF0LXR5cG9ncmFwaHktZm9udC1zaG9ydGhhbmQoJGZvbnQtc2l6ZSwgJGZvbnQtd2VpZ2h0LCAkbGluZS1oZWlnaHQsICRmb250LWZhbWlseSkge1xuICAvLyBJZiBhbnkgb2YgdGhlIHZhbHVlcyBhcmUgc2V0IHRvIGBpbmhlcml0YCwgd2UgY2FuJ3QgdXNlIHRoZSBzaG9ydGhhbmRcbiAgLy8gc28gd2UgZmFsbCBiYWNrIHRvIHBhc3NpbmcgaW4gdGhlIGluZGl2aWR1YWwgcHJvcGVydGllcy5cbiAgQGlmICgkZm9udC1zaXplID09IGluaGVyaXQgb3JcbiAgICAgICAkZm9udC13ZWlnaHQgPT0gaW5oZXJpdCBvclxuICAgICAgICRsaW5lLWhlaWdodCA9PSBpbmhlcml0IG9yXG4gICAgICAgJGZvbnQtZmFtaWx5ID09IGluaGVyaXQgb3JcbiAgICAgICAkZm9udC1zaXplID09IG51bGwgb3JcbiAgICAgICAkZm9udC13ZWlnaHQgPT0gbnVsbCBvclxuICAgICAgICRsaW5lLWhlaWdodCA9PSBudWxsIG9yXG4gICAgICAgJGZvbnQtZmFtaWx5ID09IG51bGwpIHtcblxuICAgIGZvbnQtc2l6ZTogJGZvbnQtc2l6ZTtcbiAgICBmb250LXdlaWdodDogJGZvbnQtd2VpZ2h0O1xuICAgIGxpbmUtaGVpZ2h0OiAkbGluZS1oZWlnaHQ7XG4gICAgZm9udC1mYW1pbHk6ICRmb250LWZhbWlseTtcbiAgfVxuICBAZWxzZSB7XG4gICAgLy8gT3RoZXJ3aXNlIHVzZSB0aGUgc2hvcnRoYW5kIGBmb250YCwgYmVjYXVzZSBpdCdzIHRoZSBsZWFzdCBhbW91bnQgb2YgYnl0ZXMuIE5vdGVcbiAgICAvLyB0aGF0IHdlIG5lZWQgdG8gdXNlIGludGVycG9sYXRpb24gZm9yIGBmb250LXNpemUvbGluZS1oZWlnaHRgIGluIG9yZGVyIHRvIHByZXZlbnRcbiAgICAvLyBTYXNzIGZyb20gZGl2aWRpbmcgdGhlIHR3byB2YWx1ZXMuXG4gICAgZm9udDogJGZvbnQtd2VpZ2h0ICN7JGZvbnQtc2l6ZX0vI3skbGluZS1oZWlnaHR9ICRmb250LWZhbWlseTtcbiAgfVxufVxuXG4vLyBDb252ZXJ0cyBhIHR5cG9ncmFwaHkgbGV2ZWwgaW50byBDU1Mgc3R5bGVzLlxuQG1peGluIG1hdC10eXBvZ3JhcGh5LWxldmVsLXRvLXN0eWxlcygkY29uZmlnLCAkbGV2ZWwpIHtcbiAgJGZvbnQtc2l6ZTogbWF0LWZvbnQtc2l6ZSgkY29uZmlnLCAkbGV2ZWwpO1xuICAkZm9udC13ZWlnaHQ6IG1hdC1mb250LXdlaWdodCgkY29uZmlnLCAkbGV2ZWwpO1xuICAkbGluZS1oZWlnaHQ6IG1hdC1saW5lLWhlaWdodCgkY29uZmlnLCAkbGV2ZWwpO1xuICAkZm9udC1mYW1pbHk6IG1hdC1mb250LWZhbWlseSgkY29uZmlnLCAkbGV2ZWwpO1xuXG4gIEBpbmNsdWRlIG1hdC10eXBvZ3JhcGh5LWZvbnQtc2hvcnRoYW5kKCRmb250LXNpemUsICRmb250LXdlaWdodCwgJGxpbmUtaGVpZ2h0LCAkZm9udC1mYW1pbHkpO1xuICBsZXR0ZXItc3BhY2luZzogbWF0LWxldHRlci1zcGFjaW5nKCRjb25maWcsICRsZXZlbCk7XG59XG5cblxuQG1peGluIG1hdC1vcHRpb24tdGhlbWUoJHRoZW1lKSB7XG4gICRmb3JlZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgZm9yZWdyb3VuZCk7XG4gICRiYWNrZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgYmFja2dyb3VuZCk7XG4gICRwcmltYXJ5OiBtYXAtZ2V0KCR0aGVtZSwgcHJpbWFyeSk7XG4gICRhY2NlbnQ6IG1hcC1nZXQoJHRoZW1lLCBhY2NlbnQpO1xuICAkd2FybjogbWFwLWdldCgkdGhlbWUsIHdhcm4pO1xuXG4gIC5tYXQtb3B0aW9uIHtcbiAgICBjb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCB0ZXh0KTtcblxuICAgICY6aG92ZXI6bm90KC5tYXQtb3B0aW9uLWRpc2FibGVkKSxcbiAgICAmOmZvY3VzOm5vdCgubWF0LW9wdGlvbi1kaXNhYmxlZCkge1xuICAgICAgYmFja2dyb3VuZDogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLCBob3Zlcik7XG4gICAgfVxuXG4gICAgLy8gSW4gbXVsdGlwbGUgbW9kZSB0aGVyZSBpcyBhIGNoZWNrYm94IHRvIHNob3cgdGhhdCB0aGUgb3B0aW9uIGlzIHNlbGVjdGVkLlxuICAgICYubWF0LXNlbGVjdGVkOm5vdCgubWF0LW9wdGlvbi1tdWx0aXBsZSk6bm90KC5tYXQtb3B0aW9uLWRpc2FibGVkKSB7XG4gICAgICBiYWNrZ3JvdW5kOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIGhvdmVyKTtcbiAgICB9XG5cbiAgICAmLm1hdC1hY3RpdmUge1xuICAgICAgYmFja2dyb3VuZDogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLCBob3Zlcik7XG4gICAgICBjb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCB0ZXh0KTtcbiAgICB9XG5cbiAgICAmLm1hdC1vcHRpb24tZGlzYWJsZWQge1xuICAgICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgaGludC10ZXh0KTtcbiAgICB9XG4gIH1cblxuICAubWF0LXByaW1hcnkgLm1hdC1vcHRpb24ubWF0LXNlbGVjdGVkOm5vdCgubWF0LW9wdGlvbi1kaXNhYmxlZCkge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJHByaW1hcnkpO1xuICB9XG5cbiAgLm1hdC1hY2NlbnQgLm1hdC1vcHRpb24ubWF0LXNlbGVjdGVkOm5vdCgubWF0LW9wdGlvbi1kaXNhYmxlZCkge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGFjY2VudCk7XG4gIH1cblxuICAubWF0LXdhcm4gLm1hdC1vcHRpb24ubWF0LXNlbGVjdGVkOm5vdCgubWF0LW9wdGlvbi1kaXNhYmxlZCkge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJHdhcm4pO1xuICB9XG59XG5cbkBtaXhpbiBtYXQtb3B0aW9uLXR5cG9ncmFwaHkoJGNvbmZpZykge1xuICAubWF0LW9wdGlvbiB7XG4gICAgZm9udDoge1xuICAgICAgZmFtaWx5OiBtYXQtZm9udC1mYW1pbHkoJGNvbmZpZyk7XG4gICAgICBzaXplOiBtYXQtZm9udC1zaXplKCRjb25maWcsIHN1YmhlYWRpbmctMik7XG4gICAgfVxuICB9XG59XG5cblxuXG5cblxuQG1peGluIG1hdC1vcHRncm91cC10aGVtZSgkdGhlbWUpIHtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcblxuICAubWF0LW9wdGdyb3VwLWxhYmVsIHtcbiAgICBjb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBzZWNvbmRhcnktdGV4dCk7XG4gIH1cblxuICAubWF0LW9wdGdyb3VwLWRpc2FibGVkIC5tYXQtb3B0Z3JvdXAtbGFiZWwge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGhpbnQtdGV4dCk7XG4gIH1cbn1cblxuQG1peGluIG1hdC1vcHRncm91cC10eXBvZ3JhcGh5KCRjb25maWcpIHtcbiAgLm1hdC1vcHRncm91cC1sYWJlbCB7XG4gICAgQGluY2x1ZGUgbWF0LXR5cG9ncmFwaHktbGV2ZWwtdG8tc3R5bGVzKCRjb25maWcsIGJvZHktMik7XG4gIH1cbn1cblxuXG5cbkBtaXhpbiBtYXQtcHNldWRvLWNoZWNrYm94LXRoZW1lKCR0aGVtZSkge1xuICAkaXMtZGFyay10aGVtZTogbWFwLWdldCgkdGhlbWUsIGlzLWRhcmspO1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcblxuICAvLyBOT1RFKHRyYXZpc2thdWZtYW4pOiBXaGlsZSB0aGUgc3BlYyBjYWxscyBmb3IgdHJhbnNsdWNlbnQgYmxhY2tzL3doaXRlcyBmb3IgZGlzYWJsZWQgY29sb3JzLFxuICAvLyB0aGlzIGRvZXMgbm90IHdvcmsgd2VsbCB3aXRoIGVsZW1lbnRzIGxheWVyZWQgb24gdG9wIG9mIG9uZSBhbm90aGVyLiBUbyBnZXQgYXJvdW5kIHRoaXMgd2VcbiAgLy8gYmxlbmQgdGhlIGNvbG9ycyB0b2dldGhlciBiYXNlZCBvbiB0aGUgYmFzZSBjb2xvciBhbmQgdGhlIHRoZW1lIGJhY2tncm91bmQuXG4gICR3aGl0ZS0zMHBjdC1vcGFjaXR5LW9uLWRhcms6ICM2ODY4Njg7XG4gICRibGFjay0yNnBjdC1vcGFjaXR5LW9uLWxpZ2h0OiAjYjBiMGIwO1xuICAkZGlzYWJsZWQtY29sb3I6IGlmKCRpcy1kYXJrLXRoZW1lLCAkd2hpdGUtMzBwY3Qtb3BhY2l0eS1vbi1kYXJrLCAkYmxhY2stMjZwY3Qtb3BhY2l0eS1vbi1saWdodCk7XG4gICRjb2xvcmVkLWJveC1zZWxlY3RvcjogJy5tYXQtcHNldWRvLWNoZWNrYm94LWNoZWNrZWQsIC5tYXQtcHNldWRvLWNoZWNrYm94LWluZGV0ZXJtaW5hdGUnO1xuXG4gIC5tYXQtcHNldWRvLWNoZWNrYm94IHtcbiAgICBjb2xvcjogbWF0LWNvbG9yKG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKSwgc2Vjb25kYXJ5LXRleHQpO1xuXG4gICAgJjo6YWZ0ZXIge1xuICAgICAgY29sb3I6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgYmFja2dyb3VuZCk7XG4gICAgfVxuICB9XG5cbiAgLm1hdC1wc2V1ZG8tY2hlY2tib3gtZGlzYWJsZWQge1xuICAgIGNvbG9yOiAkZGlzYWJsZWQtY29sb3I7XG4gIH1cblxuICAvLyBEZWZhdWx0IHRvIHRoZSBhY2NlbnQgY29sb3IuIE5vdGUgdGhhdCB0aGUgcHNldWRvIGNoZWNrYm94ZXMgYXJlIG1lYW50IHRvIGluaGVyaXQgdGhlXG4gIC8vIHRoZW1lIGZyb20gdGhlaXIgcGFyZW50LCByYXRoZXIgdGhhbiBpbXBsZW1lbnRpbmcgdGhlaXIgb3duIHRoZW1pbmcsIHdoaWNoIGlzIHdoeSB3ZVxuICAvLyBkb24ndCBhdHRhY2ggdG8gdGhlIGBtYXQtKmAgY2xhc3Nlcy5cbiAgLm1hdC1wc2V1ZG8tY2hlY2tib3gtY2hlY2tlZCxcbiAgLm1hdC1wc2V1ZG8tY2hlY2tib3gtaW5kZXRlcm1pbmF0ZSxcbiAgLm1hdC1hY2NlbnQgLm1hdC1wc2V1ZG8tY2hlY2tib3gtY2hlY2tlZCxcbiAgLm1hdC1hY2NlbnQgLm1hdC1wc2V1ZG8tY2hlY2tib3gtaW5kZXRlcm1pbmF0ZSB7XG4gICAgYmFja2dyb3VuZDogbWF0LWNvbG9yKG1hcC1nZXQoJHRoZW1lLCBhY2NlbnQpKTtcbiAgfVxuXG4gIC5tYXQtcHJpbWFyeSAubWF0LXBzZXVkby1jaGVja2JveC1jaGVja2VkLFxuICAubWF0LXByaW1hcnkgLm1hdC1wc2V1ZG8tY2hlY2tib3gtaW5kZXRlcm1pbmF0ZSB7XG4gICAgYmFja2dyb3VuZDogbWF0LWNvbG9yKG1hcC1nZXQoJHRoZW1lLCBwcmltYXJ5KSk7XG4gIH1cblxuICAubWF0LXdhcm4gLm1hdC1wc2V1ZG8tY2hlY2tib3gtY2hlY2tlZCxcbiAgLm1hdC13YXJuIC5tYXQtcHNldWRvLWNoZWNrYm94LWluZGV0ZXJtaW5hdGUge1xuICAgIGJhY2tncm91bmQ6IG1hdC1jb2xvcihtYXAtZ2V0KCR0aGVtZSwgd2FybikpO1xuICB9XG5cbiAgLm1hdC1wc2V1ZG8tY2hlY2tib3gtY2hlY2tlZCxcbiAgLm1hdC1wc2V1ZG8tY2hlY2tib3gtaW5kZXRlcm1pbmF0ZSB7XG4gICAgJi5tYXQtcHNldWRvLWNoZWNrYm94LWRpc2FibGVkIHtcbiAgICAgIGJhY2tncm91bmQ6ICRkaXNhYmxlZC1jb2xvcjtcbiAgICB9XG4gIH1cbn1cblxuXG5cbi8vIFJlcHJlc2VudHMgYSB0eXBvZ3JhcGh5IGxldmVsIGZyb20gdGhlIE1hdGVyaWFsIGRlc2lnbiBzcGVjLlxuQGZ1bmN0aW9uIG1hdC10eXBvZ3JhcGh5LWxldmVsKFxuICAkZm9udC1zaXplLFxuICAkbGluZS1oZWlnaHQ6ICRmb250LXNpemUsXG4gICRmb250LXdlaWdodDogNDAwLFxuICAkZm9udC1mYW1pbHk6IG51bGwsXG4gICRsZXR0ZXItc3BhY2luZzogbnVsbCkge1xuXG4gIEByZXR1cm4gKFxuICAgIGZvbnQtc2l6ZTogJGZvbnQtc2l6ZSxcbiAgICBsaW5lLWhlaWdodDogJGxpbmUtaGVpZ2h0LFxuICAgIGZvbnQtd2VpZ2h0OiAkZm9udC13ZWlnaHQsXG4gICAgZm9udC1mYW1pbHk6ICRmb250LWZhbWlseSxcbiAgICBsZXR0ZXItc3BhY2luZzogJGxldHRlci1zcGFjaW5nXG4gICk7XG59XG5cbi8vIFJlcHJlc2VudHMgYSBjb2xsZWN0aW9uIG9mIHR5cG9ncmFwaHkgbGV2ZWxzLlxuLy8gRGVmYXVsdHMgY29tZSBmcm9tIGh0dHBzOi8vbWF0ZXJpYWwuaW8vZ3VpZGVsaW5lcy9zdHlsZS90eXBvZ3JhcGh5Lmh0bWxcbkBmdW5jdGlvbiBtYXQtdHlwb2dyYXBoeS1jb25maWcoXG4gICRmb250LWZhbWlseTogICAnUm9ib3RvLCBcIkhlbHZldGljYSBOZXVlXCIsIHNhbnMtc2VyaWYnLFxuICAkZGlzcGxheS00OiAgICAgbWF0LXR5cG9ncmFwaHktbGV2ZWwoMTEycHgsIDExMnB4LCAzMDApLFxuICAkZGlzcGxheS0zOiAgICAgbWF0LXR5cG9ncmFwaHktbGV2ZWwoNTZweCwgNTZweCwgNDAwKSxcbiAgJGRpc3BsYXktMjogICAgIG1hdC10eXBvZ3JhcGh5LWxldmVsKDQ1cHgsIDQ4cHgsIDQwMCksXG4gICRkaXNwbGF5LTE6ICAgICBtYXQtdHlwb2dyYXBoeS1sZXZlbCgzNHB4LCA0MHB4LCA0MDApLFxuICAkaGVhZGxpbmU6ICAgICAgbWF0LXR5cG9ncmFwaHktbGV2ZWwoMjRweCwgMzJweCwgNDAwKSxcbiAgJHRpdGxlOiAgICAgICAgIG1hdC10eXBvZ3JhcGh5LWxldmVsKDIwcHgsIDMycHgsIDUwMCksXG4gICRzdWJoZWFkaW5nLTI6ICBtYXQtdHlwb2dyYXBoeS1sZXZlbCgxNnB4LCAyOHB4LCA0MDApLFxuICAkc3ViaGVhZGluZy0xOiAgbWF0LXR5cG9ncmFwaHktbGV2ZWwoMTVweCwgMjRweCwgNDAwKSxcbiAgJGJvZHktMjogICAgICAgIG1hdC10eXBvZ3JhcGh5LWxldmVsKDE0cHgsIDI0cHgsIDUwMCksXG4gICRib2R5LTE6ICAgICAgICBtYXQtdHlwb2dyYXBoeS1sZXZlbCgxNHB4LCAyMHB4LCA0MDApLFxuICAkY2FwdGlvbjogICAgICAgbWF0LXR5cG9ncmFwaHktbGV2ZWwoMTJweCwgMjBweCwgNDAwKSxcbiAgJGJ1dHRvbjogICAgICAgIG1hdC10eXBvZ3JhcGh5LWxldmVsKDE0cHgsIDE0cHgsIDUwMCksXG4gIC8vIExpbmUtaGVpZ2h0IG11c3QgYmUgdW5pdC1sZXNzIGZyYWN0aW9uIG9mIHRoZSBmb250LXNpemUuXG4gICRpbnB1dDogICAgICAgICBtYXQtdHlwb2dyYXBoeS1sZXZlbChpbmhlcml0LCAxLjEyNSwgNDAwKVxuKSB7XG5cbiAgLy8gRGVjbGFyZSBhbiBpbml0aWFsIG1hcCB3aXRoIGFsbCBvZiB0aGUgbGV2ZWxzLlxuICAkY29uZmlnOiAoXG4gICAgZGlzcGxheS00OiAgICAgICRkaXNwbGF5LTQsXG4gICAgZGlzcGxheS0zOiAgICAgICRkaXNwbGF5LTMsXG4gICAgZGlzcGxheS0yOiAgICAgICRkaXNwbGF5LTIsXG4gICAgZGlzcGxheS0xOiAgICAgICRkaXNwbGF5LTEsXG4gICAgaGVhZGxpbmU6ICAgICAgICRoZWFkbGluZSxcbiAgICB0aXRsZTogICAgICAgICAgJHRpdGxlLFxuICAgIHN1YmhlYWRpbmctMjogICAkc3ViaGVhZGluZy0yLFxuICAgIHN1YmhlYWRpbmctMTogICAkc3ViaGVhZGluZy0xLFxuICAgIGJvZHktMjogICAgICAgICAkYm9keS0yLFxuICAgIGJvZHktMTogICAgICAgICAkYm9keS0xLFxuICAgIGNhcHRpb246ICAgICAgICAkY2FwdGlvbixcbiAgICBidXR0b246ICAgICAgICAgJGJ1dHRvbixcbiAgICBpbnB1dDogICAgICAgICAgJGlucHV0LFxuICApO1xuXG4gIC8vIExvb3AgdGhyb3VnaCB0aGUgbGV2ZWxzIGFuZCBzZXQgdGhlIGBmb250LWZhbWlseWAgb2YgdGhlIG9uZXMgdGhhdCBkb24ndCBoYXZlIG9uZSB0byB0aGUgYmFzZS5cbiAgLy8gTm90ZSB0aGF0IFNhc3MgY2FuJ3QgbW9kaWZ5IG1hcHMgaW4gcGxhY2UsIHdoaWNoIG1lYW5zIHRoYXQgd2UgbmVlZCB0byBtZXJnZSBhbmQgcmUtYXNzaWduLlxuICBAZWFjaCAka2V5LCAkbGV2ZWwgaW4gJGNvbmZpZyB7XG4gICAgQGlmIG1hcC1nZXQoJGxldmVsLCBmb250LWZhbWlseSkgPT0gbnVsbCB7XG4gICAgICAkbmV3LWxldmVsOiBtYXAtbWVyZ2UoJGxldmVsLCAoZm9udC1mYW1pbHk6ICRmb250LWZhbWlseSkpO1xuICAgICAgJGNvbmZpZzogbWFwLW1lcmdlKCRjb25maWcsICgka2V5OiAkbmV3LWxldmVsKSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkIHRoZSBiYXNlIGZvbnQgZmFtaWx5IHRvIHRoZSBjb25maWcuXG4gIEByZXR1cm4gbWFwLW1lcmdlKCRjb25maWcsIChmb250LWZhbWlseTogJGZvbnQtZmFtaWx5KSk7XG59XG5cbi8vIEFkZHMgdGhlIGJhc2UgdHlwb2dyYXBoeSBzdHlsZXMsIGJhc2VkIG9uIGEgY29uZmlnLlxuQG1peGluIG1hdC1iYXNlLXR5cG9ncmFwaHkoJGNvbmZpZywgJHNlbGVjdG9yOiAnLm1hdC10eXBvZ3JhcGh5Jykge1xuICAubWF0LWgxLCAubWF0LWhlYWRsaW5lLCAjeyRzZWxlY3Rvcn0gaDEge1xuICAgIEBpbmNsdWRlIG1hdC10eXBvZ3JhcGh5LWxldmVsLXRvLXN0eWxlcygkY29uZmlnLCBoZWFkbGluZSk7XG4gICAgbWFyZ2luOiAwIDAgMTZweDtcbiAgfVxuXG4gIC5tYXQtaDIsIC5tYXQtdGl0bGUsICN7JHNlbGVjdG9yfSBoMiB7XG4gICAgQGluY2x1ZGUgbWF0LXR5cG9ncmFwaHktbGV2ZWwtdG8tc3R5bGVzKCRjb25maWcsIHRpdGxlKTtcbiAgICBtYXJnaW46IDAgMCAxNnB4O1xuICB9XG5cbiAgLm1hdC1oMywgLm1hdC1zdWJoZWFkaW5nLTIsICN7JHNlbGVjdG9yfSBoMyB7XG4gICAgQGluY2x1ZGUgbWF0LXR5cG9ncmFwaHktbGV2ZWwtdG8tc3R5bGVzKCRjb25maWcsIHN1YmhlYWRpbmctMik7XG4gICAgbWFyZ2luOiAwIDAgMTZweDtcbiAgfVxuXG4gIC5tYXQtaDQsIC5tYXQtc3ViaGVhZGluZy0xLCAjeyRzZWxlY3Rvcn0gaDQge1xuICAgIEBpbmNsdWRlIG1hdC10eXBvZ3JhcGh5LWxldmVsLXRvLXN0eWxlcygkY29uZmlnLCBzdWJoZWFkaW5nLTEpO1xuICAgIG1hcmdpbjogMCAwIDE2cHg7XG4gIH1cblxuICAvLyBOb3RlOiB0aGUgc3BlYyBkb2Vzbid0IGhhdmUgYW55dGhpbmcgdGhhdCB3b3VsZCBjb3JyZXNwb25kIHRvIGg1IGFuZCBoNiwgYnV0IHdlIGFkZCB0aGVzZSBmb3JcbiAgLy8gY29uc2lzdGVuY3kuIFRoZSBmb250IHNpemVzIGNvbWUgZnJvbSB0aGUgQ2hyb21lIHVzZXIgYWdlbnQgc3R5bGVzIHdoaWNoIGhhdmUgaDUgYXQgMC44M2VtXG4gIC8vIGFuZCBoNiBhdCAwLjY3ZW0uXG4gIC5tYXQtaDUsICN7JHNlbGVjdG9yfSBoNSB7XG4gICAgQGluY2x1ZGUgbWF0LXR5cG9ncmFwaHktZm9udC1zaG9ydGhhbmQoXG4gICAgICBtYXQtZm9udC1zaXplKCRjb25maWcsIGJvZHktMSkgKiAwLjgzLFxuICAgICAgbWF0LWZvbnQtd2VpZ2h0KCRjb25maWcsIGJvZHktMSksXG4gICAgICBtYXQtbGluZS1oZWlnaHQoJGNvbmZpZywgYm9keS0xKSxcbiAgICAgIG1hdC1mb250LWZhbWlseSgkY29uZmlnLCBib2R5LTEpXG4gICAgKTtcblxuICAgIG1hcmdpbjogMCAwIDEycHg7XG4gIH1cblxuICAubWF0LWg2LCAjeyRzZWxlY3Rvcn0gaDYge1xuICAgIEBpbmNsdWRlIG1hdC10eXBvZ3JhcGh5LWZvbnQtc2hvcnRoYW5kKFxuICAgICAgbWF0LWZvbnQtc2l6ZSgkY29uZmlnLCBib2R5LTEpICogMC42NyxcbiAgICAgIG1hdC1mb250LXdlaWdodCgkY29uZmlnLCBib2R5LTEpLFxuICAgICAgbWF0LWxpbmUtaGVpZ2h0KCRjb25maWcsIGJvZHktMSksXG4gICAgICBtYXQtZm9udC1mYW1pbHkoJGNvbmZpZywgYm9keS0xKVxuICAgICk7XG5cbiAgICBtYXJnaW46IDAgMCAxMnB4O1xuICB9XG5cbiAgLm1hdC1ib2R5LXN0cm9uZywgLm1hdC1ib2R5LTIge1xuICAgIEBpbmNsdWRlIG1hdC10eXBvZ3JhcGh5LWxldmVsLXRvLXN0eWxlcygkY29uZmlnLCBib2R5LTIpO1xuICB9XG5cbiAgLm1hdC1ib2R5LCAubWF0LWJvZHktMSwgI3skc2VsZWN0b3J9IHtcbiAgICBAaW5jbHVkZSBtYXQtdHlwb2dyYXBoeS1sZXZlbC10by1zdHlsZXMoJGNvbmZpZywgYm9keS0xKTtcblxuICAgIHAge1xuICAgICAgbWFyZ2luOiAwIDAgMTJweDtcbiAgICB9XG4gIH1cblxuICAubWF0LXNtYWxsLCAubWF0LWNhcHRpb24ge1xuICAgIEBpbmNsdWRlIG1hdC10eXBvZ3JhcGh5LWxldmVsLXRvLXN0eWxlcygkY29uZmlnLCBjYXB0aW9uKTtcbiAgfVxuXG4gIC8vIE5vdGU6IFRoZSBzcGVjIGRvZXNuJ3QgbWVudGlvbiBsZXR0ZXIgc3BhY2luZy4gVGhlIHZhbHVlIGNvbWVzIGZyb21cbiAgLy8gZXllYmFsbGluZyBpdCB1bnRpbCBpdCBsb29rZWQgZXhhY3RseSBsaWtlIHRoZSBzcGVjIGV4YW1wbGVzLlxuICAubWF0LWRpc3BsYXktNCwgI3skc2VsZWN0b3J9IC5tYXQtZGlzcGxheS00IHtcbiAgICBAaW5jbHVkZSBtYXQtdHlwb2dyYXBoeS1sZXZlbC10by1zdHlsZXMoJGNvbmZpZywgZGlzcGxheS00KTtcbiAgICBtYXJnaW46IDAgMCA1NnB4O1xuICAgIGxldHRlci1zcGFjaW5nOiAtMC4wNWVtO1xuICB9XG5cbiAgLm1hdC1kaXNwbGF5LTMsICN7JHNlbGVjdG9yfSAubWF0LWRpc3BsYXktMyB7XG4gICAgQGluY2x1ZGUgbWF0LXR5cG9ncmFwaHktbGV2ZWwtdG8tc3R5bGVzKCRjb25maWcsIGRpc3BsYXktMyk7XG4gICAgbWFyZ2luOiAwIDAgNjRweDtcbiAgICBsZXR0ZXItc3BhY2luZzogLTAuMDJlbTtcbiAgfVxuXG4gIC5tYXQtZGlzcGxheS0yLCAjeyRzZWxlY3Rvcn0gLm1hdC1kaXNwbGF5LTIge1xuICAgIEBpbmNsdWRlIG1hdC10eXBvZ3JhcGh5LWxldmVsLXRvLXN0eWxlcygkY29uZmlnLCBkaXNwbGF5LTIpO1xuICAgIG1hcmdpbjogMCAwIDY0cHg7XG4gICAgbGV0dGVyLXNwYWNpbmc6IC0wLjAwNWVtO1xuICB9XG5cbiAgLm1hdC1kaXNwbGF5LTEsICN7JHNlbGVjdG9yfSAubWF0LWRpc3BsYXktMSB7XG4gICAgQGluY2x1ZGUgbWF0LXR5cG9ncmFwaHktbGV2ZWwtdG8tc3R5bGVzKCRjb25maWcsIGRpc3BsYXktMSk7XG4gICAgbWFyZ2luOiAwIDAgNjRweDtcbiAgfVxufVxuXG5cblxuXG5AbWl4aW4gbWF0LWF1dG9jb21wbGV0ZS10aGVtZSgkdGhlbWUpIHtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcblxuICAubWF0LWF1dG9jb21wbGV0ZS1wYW5lbCB7XG4gICAgQGluY2x1ZGUgX21hdC10aGVtZS1vdmVycmlkYWJsZS1lbGV2YXRpb24oNCwgJHRoZW1lKTtcbiAgICBiYWNrZ3JvdW5kOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIGNhcmQpO1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHRleHQpO1xuXG4gICAgLy8gU2VsZWN0ZWQgb3B0aW9ucyBpbiBhdXRvY29tcGxldGVzIHNob3VsZCBub3QgYmUgZ3JheSwgYnV0IHdlXG4gICAgLy8gb25seSB3YW50IHRvIG92ZXJyaWRlIHRoZSBiYWNrZ3JvdW5kIGZvciBzZWxlY3RlZCBvcHRpb25zIGlmXG4gICAgLy8gdGhleSBhcmUgKm5vdCogaW4gaG92ZXIgb3IgZm9jdXMgc3RhdGUuIFRoaXMgY2hhbmdlIGhhcyB0byBiZVxuICAgIC8vIG1hZGUgaGVyZSBiZWNhdXNlIGJhc2Ugb3B0aW9uIHN0eWxlcyBhcmUgc2hhcmVkIGJldHdlZW4gdGhlXG4gICAgLy8gYXV0b2NvbXBsZXRlIGFuZCB0aGUgc2VsZWN0LlxuICAgIC5tYXQtb3B0aW9uLm1hdC1zZWxlY3RlZDpub3QoLm1hdC1hY3RpdmUpOm5vdCg6aG92ZXIpIHtcbiAgICAgIGJhY2tncm91bmQ6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgY2FyZCk7XG5cbiAgICAgICY6bm90KC5tYXQtb3B0aW9uLWRpc2FibGVkKSB7XG4gICAgICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59XG5cbkBtaXhpbiBtYXQtYXV0b2NvbXBsZXRlLXR5cG9ncmFwaHkoJGNvbmZpZykgeyB9XG5cbi8vIFRoaXMgY29udGFpbnMgYWxsIG9mIHRoZSBzdHlsZXMgZm9yIHRoZSBiYWRnZVxuLy8gcmF0aGVyIHRoYW4ganVzdCB0aGUgY29sb3IvdGhlbWUgYmVjYXVzZSBvZlxuLy8gbm8gc3R5bGUgc2hlZXQgc3VwcG9ydCBmb3IgZGlyZWN0aXZlcy5cblxuXG5cblxuXG4kbWF0LWJhZGdlLWZvbnQtc2l6ZTogMTJweDtcbiRtYXQtYmFkZ2UtZm9udC13ZWlnaHQ6IDYwMDtcbiRtYXQtYmFkZ2UtZGVmYXVsdC1zaXplOiAyMnB4ICFkZWZhdWx0O1xuJG1hdC1iYWRnZS1zbWFsbC1zaXplOiAkbWF0LWJhZGdlLWRlZmF1bHQtc2l6ZSAtIDY7XG4kbWF0LWJhZGdlLWxhcmdlLXNpemU6ICRtYXQtYmFkZ2UtZGVmYXVsdC1zaXplICsgNjtcblxuLy8gTWl4aW4gZm9yIGJ1aWxkaW5nIG9mZnNldCBnaXZlbiBkaWZmZXJlbnQgc2l6ZXNcbkBtaXhpbiBfbWF0LWJhZGdlLXNpemUoJHNpemUpIHtcbiAgLm1hdC1iYWRnZS1jb250ZW50IHtcbiAgICB3aWR0aDogJHNpemU7XG4gICAgaGVpZ2h0OiAkc2l6ZTtcbiAgICBsaW5lLWhlaWdodDogJHNpemU7XG4gIH1cblxuICAmLm1hdC1iYWRnZS1hYm92ZSB7XG4gICAgLm1hdC1iYWRnZS1jb250ZW50IHtcbiAgICAgIHRvcDogLSRzaXplIC8gMjtcbiAgICB9XG4gIH1cblxuICAmLm1hdC1iYWRnZS1iZWxvdyB7XG4gICAgLm1hdC1iYWRnZS1jb250ZW50IHtcbiAgICAgIGJvdHRvbTogLSRzaXplIC8gMjtcbiAgICB9XG4gIH1cblxuICAmLm1hdC1iYWRnZS1iZWZvcmUge1xuICAgIC5tYXQtYmFkZ2UtY29udGVudCB7XG4gICAgICBsZWZ0OiAtJHNpemU7XG4gICAgfVxuICB9XG5cbiAgW2Rpcj0ncnRsJ10gJi5tYXQtYmFkZ2UtYmVmb3JlIHtcbiAgICAubWF0LWJhZGdlLWNvbnRlbnQge1xuICAgICAgbGVmdDogYXV0bztcbiAgICAgIHJpZ2h0OiAtJHNpemU7XG4gICAgfVxuICB9XG5cbiAgJi5tYXQtYmFkZ2UtYWZ0ZXIge1xuICAgIC5tYXQtYmFkZ2UtY29udGVudCB7XG4gICAgICByaWdodDogLSRzaXplO1xuICAgIH1cbiAgfVxuXG4gIFtkaXI9J3J0bCddICYubWF0LWJhZGdlLWFmdGVyIHtcbiAgICAubWF0LWJhZGdlLWNvbnRlbnQge1xuICAgICAgcmlnaHQ6IGF1dG87XG4gICAgICBsZWZ0OiAtJHNpemU7XG4gICAgfVxuICB9XG5cbiAgJi5tYXQtYmFkZ2Utb3ZlcmxhcCB7XG4gICAgJi5tYXQtYmFkZ2UtYmVmb3JlIHtcbiAgICAgIC5tYXQtYmFkZ2UtY29udGVudCB7XG4gICAgICAgIGxlZnQ6IC0kc2l6ZSAvIDI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgW2Rpcj0ncnRsJ10gJi5tYXQtYmFkZ2UtYmVmb3JlIHtcbiAgICAgIC5tYXQtYmFkZ2UtY29udGVudCB7XG4gICAgICAgIGxlZnQ6IGF1dG87XG4gICAgICAgIHJpZ2h0OiAtJHNpemUgLyAyO1xuICAgICAgfVxuICAgIH1cblxuICAgICYubWF0LWJhZGdlLWFmdGVyIHtcbiAgICAgIC5tYXQtYmFkZ2UtY29udGVudCB7XG4gICAgICAgIHJpZ2h0OiAtJHNpemUgLyAyO1xuICAgICAgfVxuICAgIH1cblxuICAgIFtkaXI9J3J0bCddICYubWF0LWJhZGdlLWFmdGVyIHtcbiAgICAgIC5tYXQtYmFkZ2UtY29udGVudCB7XG4gICAgICAgIHJpZ2h0OiBhdXRvO1xuICAgICAgICBsZWZ0OiAtJHNpemUgLyAyO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gbWF0LWJhZGdlLXRoZW1lKCR0aGVtZSkge1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcbiAgJHByaW1hcnk6IG1hcC1nZXQoJHRoZW1lLCBwcmltYXJ5KTtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcblxuICAubWF0LWJhZGdlLWNvbnRlbnQge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJHByaW1hcnksIGRlZmF1bHQtY29udHJhc3QpO1xuICAgIGJhY2tncm91bmQ6IG1hdC1jb2xvcigkcHJpbWFyeSk7XG5cbiAgICBAaW5jbHVkZSBjZGstaGlnaC1jb250cmFzdCB7XG4gICAgICBvdXRsaW5lOiBzb2xpZCAxcHg7XG4gICAgICBib3JkZXItcmFkaXVzOiAwO1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtYmFkZ2UtYWNjZW50IHtcbiAgICAubWF0LWJhZGdlLWNvbnRlbnQge1xuICAgICAgYmFja2dyb3VuZDogbWF0LWNvbG9yKCRhY2NlbnQpO1xuICAgICAgY29sb3I6IG1hdC1jb2xvcigkYWNjZW50LCBkZWZhdWx0LWNvbnRyYXN0KTtcbiAgICB9XG4gIH1cblxuICAubWF0LWJhZGdlLXdhcm4ge1xuICAgIC5tYXQtYmFkZ2UtY29udGVudCB7XG4gICAgICBjb2xvcjogbWF0LWNvbG9yKCR3YXJuLCBkZWZhdWx0LWNvbnRyYXN0KTtcbiAgICAgIGJhY2tncm91bmQ6IG1hdC1jb2xvcigkd2Fybik7XG4gICAgfVxuICB9XG5cbiAgLm1hdC1iYWRnZSB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG5cbiAgLm1hdC1iYWRnZS1oaWRkZW4ge1xuICAgIC5tYXQtYmFkZ2UtY29udGVudCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtYmFkZ2UtZGlzYWJsZWQge1xuICAgIC5tYXQtYmFkZ2UtY29udGVudCB7XG4gICAgICAkYXBwLWJhY2tncm91bmQ6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgJ2JhY2tncm91bmQnKTtcbiAgICAgICRiYWRnZS1jb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBkaXNhYmxlZC1idXR0b24pO1xuXG4gICAgICAvLyBUaGUgZGlzYWJsZWQgY29sb3IgdXN1YWxseSBoYXMgc29tZSBraW5kIG9mIG9wYWNpdHksIGJ1dCBiZWNhdXNlIHRoZSBiYWRnZSBpcyBvdmVybGF5ZWRcbiAgICAgIC8vIG9uIHRvcCBvZiBzb21ldGhpbmcgZWxzZSwgaXQgd29uJ3QgbG9vayBnb29kIGlmIGl0J3Mgb3BhcXVlLiBJZiBpdCBpcyBhIGNvbG9yICp0eXBlKixcbiAgICAgIC8vIHdlIGNvbnZlcnQgaXQgaW50byBhIHNvbGlkIGNvbG9yIGJ5IHRha2luZyB0aGUgb3BhY2l0eSBmcm9tIHRoZSByZ2JhIHZhbHVlIGFuZCB1c2luZ1xuICAgICAgLy8gdGhlIHZhbHVlIHRvIGRldGVybWluZSB0aGUgcGVyY2VudGFnZSBvZiB0aGUgYmFja2dyb3VuZCB0byBwdXQgaW50byBmb3JlZ3JvdW5kIHdoZW5cbiAgICAgIC8vIG1peGluZyB0aGUgY29sb3JzIHRvZ2V0aGVyLlxuICAgICAgQGlmICh0eXBlLW9mKCRiYWRnZS1jb2xvcikgPT0gY29sb3IgYW5kIHR5cGUtb2YoJGFwcC1iYWNrZ3JvdW5kKSA9PSBjb2xvcikge1xuICAgICAgICAkYmFkZ2Utb3BhY2l0eTogb3BhY2l0eSgkYmFkZ2UtY29sb3IpO1xuICAgICAgICBiYWNrZ3JvdW5kOiBtaXgoJGFwcC1iYWNrZ3JvdW5kLCByZ2JhKCRiYWRnZS1jb2xvciwgMSksICgxIC0gJGJhZGdlLW9wYWNpdHkpICogMTAwJSk7XG4gICAgICB9XG4gICAgICBAZWxzZSB7XG4gICAgICAgIGJhY2tncm91bmQ6ICRiYWRnZS1jb2xvcjtcbiAgICAgIH1cblxuICAgICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgZGlzYWJsZWQtdGV4dCk7XG4gICAgfVxuICB9XG5cbiAgLm1hdC1iYWRnZS1jb250ZW50IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDIwMG1zIGVhc2UtaW4tb3V0O1xuICAgIHRyYW5zZm9ybTogc2NhbGUoMC42KTtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIH1cblxuICAvLyBUaGUgYWN0aXZlIGNsYXNzIGlzIGFkZGVkIGFmdGVyIHRoZSBlbGVtZW50IGlzIGFkZGVkXG4gIC8vIHNvIGl0IGNhbiBhbmltYXRlIHNjYWxlIHRvIGRlZmF1bHRcbiAgLm1hdC1iYWRnZS1jb250ZW50Lm1hdC1iYWRnZS1hY3RpdmUge1xuICAgIC8vIFNjYWxlIHRvIGBub25lYCBpbnN0ZWFkIG9mIGAxYCB0byBhdm9pZCBibHVycnkgdGV4dCBpbiBzb21lIGJyb3dzZXJzLlxuICAgIHRyYW5zZm9ybTogbm9uZTtcbiAgfVxuXG4gIC5tYXQtYmFkZ2Utc21hbGwge1xuICAgIEBpbmNsdWRlIF9tYXQtYmFkZ2Utc2l6ZSgkbWF0LWJhZGdlLXNtYWxsLXNpemUpO1xuICB9XG4gIC5tYXQtYmFkZ2UtbWVkaXVtIHtcbiAgICBAaW5jbHVkZSBfbWF0LWJhZGdlLXNpemUoJG1hdC1iYWRnZS1kZWZhdWx0LXNpemUpO1xuICB9XG4gIC5tYXQtYmFkZ2UtbGFyZ2Uge1xuICAgIEBpbmNsdWRlIF9tYXQtYmFkZ2Utc2l6ZSgkbWF0LWJhZGdlLWxhcmdlLXNpemUpO1xuICB9XG59XG5cbkBtaXhpbiBtYXQtYmFkZ2UtdHlwb2dyYXBoeSgkY29uZmlnKSB7XG4gIC5tYXQtYmFkZ2UtY29udGVudCB7XG4gICAgZm9udC13ZWlnaHQ6ICRtYXQtYmFkZ2UtZm9udC13ZWlnaHQ7XG4gICAgZm9udC1zaXplOiAkbWF0LWJhZGdlLWZvbnQtc2l6ZTtcbiAgICBmb250LWZhbWlseTogbWF0LWZvbnQtZmFtaWx5KCRjb25maWcpO1xuICB9XG5cbiAgLm1hdC1iYWRnZS1zbWFsbCAubWF0LWJhZGdlLWNvbnRlbnQge1xuICAgIGZvbnQtc2l6ZTogJG1hdC1iYWRnZS1mb250LXNpemUgLyAyO1xuICB9XG5cbiAgLm1hdC1iYWRnZS1sYXJnZSAubWF0LWJhZGdlLWNvbnRlbnQge1xuICAgIGZvbnQtc2l6ZTogJG1hdC1iYWRnZS1mb250LXNpemUgKiAyO1xuICB9XG59XG5cblxuXG5cblxuQG1peGluIG1hdC1ib3R0b20tc2hlZXQtdGhlbWUoJHRoZW1lKSB7XG4gICRiYWNrZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgYmFja2dyb3VuZCk7XG4gICRmb3JlZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgZm9yZWdyb3VuZCk7XG5cbiAgLm1hdC1ib3R0b20tc2hlZXQtY29udGFpbmVyIHtcbiAgICBAaW5jbHVkZSBfbWF0LXRoZW1lLWVsZXZhdGlvbigxNiwgJHRoZW1lKTtcbiAgICBiYWNrZ3JvdW5kOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIGRpYWxvZyk7XG4gICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgdGV4dCk7XG4gIH1cbn1cblxuQG1peGluIG1hdC1ib3R0b20tc2hlZXQtdHlwb2dyYXBoeSgkY29uZmlnKSB7XG4gIC5tYXQtYm90dG9tLXNoZWV0LWNvbnRhaW5lciB7XG4gICAgQGluY2x1ZGUgbWF0LXR5cG9ncmFwaHktbGV2ZWwtdG8tc3R5bGVzKCRjb25maWcsIGJvZHktMSk7XG4gIH1cbn1cblxuXG5cblxuXG4kX21hdC1idXR0b24tcmlwcGxlLW9wYWNpdHk6IDAuMTtcblxuLy8gQXBwbGllcyBhIGZvY3VzIHN0eWxlIHRvIGFuIG1hdC1idXR0b24gZWxlbWVudCBmb3IgZWFjaCBvZiB0aGUgc3VwcG9ydGVkIHBhbGV0dGVzLlxuQG1peGluIF9tYXQtYnV0dG9uLWZvY3VzLW92ZXJsYXktY29sb3IoJHRoZW1lKSB7XG4gICRwcmltYXJ5OiBtYXAtZ2V0KCR0aGVtZSwgcHJpbWFyeSk7XG4gICRhY2NlbnQ6IG1hcC1nZXQoJHRoZW1lLCBhY2NlbnQpO1xuICAkd2FybjogbWFwLWdldCgkdGhlbWUsIHdhcm4pO1xuXG4gICYubWF0LXByaW1hcnkgLm1hdC1idXR0b24tZm9jdXMtb3ZlcmxheSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRwcmltYXJ5KTtcbiAgfVxuXG4gICYubWF0LWFjY2VudCAubWF0LWJ1dHRvbi1mb2N1cy1vdmVybGF5IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBtYXQtY29sb3IoJGFjY2VudCk7XG4gIH1cblxuICAmLm1hdC13YXJuIC5tYXQtYnV0dG9uLWZvY3VzLW92ZXJsYXkge1xuICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkd2Fybik7XG4gIH1cblxuICAmW2Rpc2FibGVkXSAubWF0LWJ1dHRvbi1mb2N1cy1vdmVybGF5IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgfVxufVxuXG5AbWl4aW4gX21hdC1idXR0b24tcmlwcGxlLWNvbG9yKCR0aGVtZSwgJGh1ZSwgJG9wYWNpdHk6ICRfbWF0LWJ1dHRvbi1yaXBwbGUtb3BhY2l0eSkge1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcblxuICAmLm1hdC1wcmltYXJ5IC5tYXQtcmlwcGxlLWVsZW1lbnQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkcHJpbWFyeSwgJGh1ZSwgJG9wYWNpdHkpO1xuICB9XG5cbiAgJi5tYXQtYWNjZW50IC5tYXQtcmlwcGxlLWVsZW1lbnQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkYWNjZW50LCAkaHVlLCAkb3BhY2l0eSk7XG4gIH1cblxuICAmLm1hdC13YXJuIC5tYXQtcmlwcGxlLWVsZW1lbnQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkd2FybiwgJGh1ZSwgJG9wYWNpdHkpO1xuICB9XG59XG5cbi8vIEFwcGxpZXMgYSBwcm9wZXJ0eSB0byBhbiBtYXQtYnV0dG9uIGVsZW1lbnQgZm9yIGVhY2ggb2YgdGhlIHN1cHBvcnRlZCBwYWxldHRlcy5cbkBtaXhpbiBfbWF0LWJ1dHRvbi10aGVtZS1wcm9wZXJ0eSgkdGhlbWUsICRwcm9wZXJ0eSwgJGh1ZSkge1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcblxuICAmLm1hdC1wcmltYXJ5IHtcbiAgICAjeyRwcm9wZXJ0eX06IG1hdC1jb2xvcigkcHJpbWFyeSwgJGh1ZSk7XG4gIH1cbiAgJi5tYXQtYWNjZW50IHtcbiAgICAjeyRwcm9wZXJ0eX06IG1hdC1jb2xvcigkYWNjZW50LCAkaHVlKTtcbiAgfVxuICAmLm1hdC13YXJuIHtcbiAgICAjeyRwcm9wZXJ0eX06IG1hdC1jb2xvcigkd2FybiwgJGh1ZSk7XG4gIH1cblxuICAmLm1hdC1wcmltYXJ5LCAmLm1hdC1hY2NlbnQsICYubWF0LXdhcm4sICZbZGlzYWJsZWRdIHtcbiAgICAmW2Rpc2FibGVkXSB7XG4gICAgICAkcGFsZXR0ZTogaWYoJHByb3BlcnR5ID09ICdjb2xvcicsICRmb3JlZ3JvdW5kLCAkYmFja2dyb3VuZCk7XG4gICAgICAjeyRwcm9wZXJ0eX06IG1hdC1jb2xvcigkcGFsZXR0ZSwgZGlzYWJsZWQtYnV0dG9uKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG1hdC1idXR0b24tdGhlbWUoJHRoZW1lKSB7XG4gICRwcmltYXJ5OiBtYXAtZ2V0KCR0aGVtZSwgcHJpbWFyeSk7XG4gICRhY2NlbnQ6IG1hcC1nZXQoJHRoZW1lLCBhY2NlbnQpO1xuICAkd2FybjogbWFwLWdldCgkdGhlbWUsIHdhcm4pO1xuICAkYmFja2dyb3VuZDogbWFwLWdldCgkdGhlbWUsIGJhY2tncm91bmQpO1xuICAkZm9yZWdyb3VuZDogbWFwLWdldCgkdGhlbWUsIGZvcmVncm91bmQpO1xuXG4gIC5tYXQtYnV0dG9uLCAubWF0LWljb24tYnV0dG9uLCAubWF0LXN0cm9rZWQtYnV0dG9uIHtcbiAgICAvLyBCdXR0b25zIHdpdGhvdXQgYSBiYWNrZ3JvdW5kIGNvbG9yIHNob3VsZCBpbmhlcml0IHRoZSBmb250IGNvbG9yLiBUaGlzIGlzIG5lY2Vzc2FyeSB0b1xuICAgIC8vIGVuc3VyZSB0aGF0IHRoZSBidXR0b24gaXMgcmVhZGFibGUgb24gY3VzdG9tIGJhY2tncm91bmQgY29sb3JzLiBJdCdzIHdyb25nIHRvIGFsd2F5cyBhc3N1bWVcbiAgICAvLyB0aGF0IHRob3NlIGJ1dHRvbnMgYXJlIGFsd2F5cyBwbGFjZWQgaW5zaWRlIG9mIGNvbnRhaW5lcnMgd2l0aCB0aGUgZGVmYXVsdCBiYWNrZ3JvdW5kXG4gICAgLy8gY29sb3Igb2YgdGhlIHRoZW1lIChlLmcuIHRoZW1lZCB0b29sYmFycykuXG4gICAgY29sb3I6IGluaGVyaXQ7XG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG5cbiAgICBAaW5jbHVkZSBfbWF0LWJ1dHRvbi10aGVtZS1wcm9wZXJ0eSgkdGhlbWUsICdjb2xvcicsIGRlZmF1bHQpO1xuICAgIEBpbmNsdWRlIF9tYXQtYnV0dG9uLWZvY3VzLW92ZXJsYXktY29sb3IoJHRoZW1lKTtcblxuICAgIC8vIFNldHVwIHRoZSByaXBwbGUgY29sb3IgdG8gYmUgYmFzZWQgb24gdGhlIHRleHQgY29sb3IuIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSByaXBwbGVzXG4gICAgLy8gYXJlIG1hdGNoaW5nIHdpdGggdGhlIGN1cnJlbnQgdGhlbWUgcGFsZXR0ZSBhbmQgYXJlIGluIGNvbnRyYXN0IHRvIHRoZSBiYWNrZ3JvdW5kIGNvbG9yXG4gICAgLy8gKGUuZyBpbiB0aGVtZWQgdG9vbGJhcnMpLlxuICAgIC5tYXQtcmlwcGxlLWVsZW1lbnQge1xuICAgICAgb3BhY2l0eTogJF9tYXQtYnV0dG9uLXJpcHBsZS1vcGFjaXR5O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogY3VycmVudENvbG9yO1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtYnV0dG9uLWZvY3VzLW92ZXJsYXkge1xuICAgIGJhY2tncm91bmQ6IG1hcF9nZXQoJGZvcmVncm91bmQsIGJhc2UpO1xuICB9XG5cbiAgLy8gTm90ZTogdGhpcyBuZWVkcyBhIGJpdCBleHRyYSBzcGVjaWZpY2l0eSwgYmVjYXVzZSB3ZSdyZSBub3QgZ3VhcmFudGVlZCB0aGUgaW5jbHVzaW9uXG4gIC8vIG9yZGVyIG9mIHRoZSB0aGVtZSBzdHlsZXMgYW5kIHRoZSBidXR0b24gcmVzZXQgbWF5IGVuZCB1cCByZXNldHRpbmcgdGhpcyBhcyB3ZWxsLlxuICAubWF0LXN0cm9rZWQtYnV0dG9uOm5vdChbZGlzYWJsZWRdKSB7XG4gICAgYm9yZGVyLWNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpdmlkZXIpO1xuICB9XG5cbiAgLm1hdC1mbGF0LWJ1dHRvbiwgLm1hdC1yYWlzZWQtYnV0dG9uLCAubWF0LWZhYiwgLm1hdC1taW5pLWZhYiB7XG4gICAgLy8gRGVmYXVsdCBmb250IGFuZCBiYWNrZ3JvdW5kIGNvbG9yIHdoZW4gbm90IHVzaW5nIGFueSBjb2xvciBwYWxldHRlLlxuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHRleHQpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgcmFpc2VkLWJ1dHRvbik7XG5cbiAgICBAaW5jbHVkZSBfbWF0LWJ1dHRvbi10aGVtZS1wcm9wZXJ0eSgkdGhlbWUsICdjb2xvcicsIGRlZmF1bHQtY29udHJhc3QpO1xuICAgIEBpbmNsdWRlIF9tYXQtYnV0dG9uLXRoZW1lLXByb3BlcnR5KCR0aGVtZSwgJ2JhY2tncm91bmQtY29sb3InLCBkZWZhdWx0KTtcbiAgICBAaW5jbHVkZSBfbWF0LWJ1dHRvbi1yaXBwbGUtY29sb3IoJHRoZW1lLCBkZWZhdWx0LWNvbnRyYXN0KTtcbiAgfVxuXG4gIC5tYXQtc3Ryb2tlZC1idXR0b24sIC5tYXQtZmxhdC1idXR0b24ge1xuICAgIEBpbmNsdWRlIF9tYXQtdGhlbWUtb3ZlcnJpZGFibGUtZWxldmF0aW9uKDAsICR0aGVtZSk7XG4gIH1cblxuICAubWF0LXJhaXNlZC1idXR0b24ge1xuICAgIEBpbmNsdWRlIF9tYXQtdGhlbWUtb3ZlcnJpZGFibGUtZWxldmF0aW9uKDIsICR0aGVtZSk7XG5cbiAgICAmOm5vdChbZGlzYWJsZWRdKTphY3RpdmUge1xuICAgICAgQGluY2x1ZGUgX21hdC10aGVtZS1vdmVycmlkYWJsZS1lbGV2YXRpb24oOCwgJHRoZW1lKTtcbiAgICB9XG5cbiAgICAmW2Rpc2FibGVkXSB7XG4gICAgICBAaW5jbHVkZSBfbWF0LXRoZW1lLW92ZXJyaWRhYmxlLWVsZXZhdGlvbigwLCAkdGhlbWUpO1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtZmFiLCAubWF0LW1pbmktZmFiIHtcbiAgICBAaW5jbHVkZSBfbWF0LXRoZW1lLW92ZXJyaWRhYmxlLWVsZXZhdGlvbig2LCAkdGhlbWUpO1xuXG4gICAgJjpub3QoW2Rpc2FibGVkXSk6YWN0aXZlIHtcbiAgICAgIEBpbmNsdWRlIF9tYXQtdGhlbWUtb3ZlcnJpZGFibGUtZWxldmF0aW9uKDEyLCAkdGhlbWUpO1xuICAgIH1cblxuICAgICZbZGlzYWJsZWRdIHtcbiAgICAgIEBpbmNsdWRlIF9tYXQtdGhlbWUtb3ZlcnJpZGFibGUtZWxldmF0aW9uKDAsICR0aGVtZSk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBtYXQtYnV0dG9uLXR5cG9ncmFwaHkoJGNvbmZpZykge1xuICAubWF0LWJ1dHRvbiwgLm1hdC1yYWlzZWQtYnV0dG9uLCAubWF0LWljb24tYnV0dG9uLCAubWF0LXN0cm9rZWQtYnV0dG9uLFxuICAubWF0LWZsYXQtYnV0dG9uLCAubWF0LWZhYiwgLm1hdC1taW5pLWZhYiB7XG4gICAgZm9udDoge1xuICAgICAgZmFtaWx5OiBtYXQtZm9udC1mYW1pbHkoJGNvbmZpZywgYnV0dG9uKTtcbiAgICAgIHNpemU6IG1hdC1mb250LXNpemUoJGNvbmZpZywgYnV0dG9uKTtcbiAgICAgIHdlaWdodDogbWF0LWZvbnQtd2VpZ2h0KCRjb25maWcsIGJ1dHRvbik7XG4gICAgfVxuICB9XG59XG5cblxuXG5cblxuXG5AbWl4aW4gbWF0LWJ1dHRvbi10b2dnbGUtdGhlbWUoJHRoZW1lKSB7XG4gICRmb3JlZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgZm9yZWdyb3VuZCk7XG4gICRiYWNrZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgYmFja2dyb3VuZCk7XG4gICRkaXZpZGVyLWNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpdmlkZXIpO1xuXG4gIC5tYXQtYnV0dG9uLXRvZ2dsZS1zdGFuZGFsb25lLFxuICAubWF0LWJ1dHRvbi10b2dnbGUtZ3JvdXAge1xuICAgIEBpbmNsdWRlIF9tYXQtdGhlbWUtZWxldmF0aW9uKDIsICR0aGVtZSk7XG4gIH1cblxuICAubWF0LWJ1dHRvbi10b2dnbGUtc3RhbmRhbG9uZS5tYXQtYnV0dG9uLXRvZ2dsZS1hcHBlYXJhbmNlLXN0YW5kYXJkLFxuICAubWF0LWJ1dHRvbi10b2dnbGUtZ3JvdXAtYXBwZWFyYW5jZS1zdGFuZGFyZCB7XG4gICAgYm94LXNoYWRvdzogbm9uZTtcbiAgfVxuXG4gIC5tYXQtYnV0dG9uLXRvZ2dsZSB7XG4gICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgaGludC10ZXh0KTtcblxuICAgIC5tYXQtYnV0dG9uLXRvZ2dsZS1mb2N1cy1vdmVybGF5IHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgZm9jdXNlZC1idXR0b24pO1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtYnV0dG9uLXRvZ2dsZS1hcHBlYXJhbmNlLXN0YW5kYXJkIHtcbiAgICBjb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCB0ZXh0KTtcbiAgICBiYWNrZ3JvdW5kOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIGNhcmQpO1xuXG4gICAgLm1hdC1idXR0b24tdG9nZ2xlLWZvY3VzLW92ZXJsYXkge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLCBmb2N1c2VkLWJ1dHRvbiwgMSk7XG4gICAgfVxuICB9XG5cbiAgLm1hdC1idXR0b24tdG9nZ2xlLWdyb3VwLWFwcGVhcmFuY2Utc3RhbmRhcmQgLm1hdC1idXR0b24tdG9nZ2xlICsgLm1hdC1idXR0b24tdG9nZ2xlIHtcbiAgICBib3JkZXItbGVmdDogc29saWQgMXB4ICRkaXZpZGVyLWNvbG9yO1xuICB9XG5cbiAgW2Rpcj0ncnRsJ10gLm1hdC1idXR0b24tdG9nZ2xlLWdyb3VwLWFwcGVhcmFuY2Utc3RhbmRhcmQgLm1hdC1idXR0b24tdG9nZ2xlICsgLm1hdC1idXR0b24tdG9nZ2xlIHtcbiAgICBib3JkZXItbGVmdDogbm9uZTtcbiAgICBib3JkZXItcmlnaHQ6IHNvbGlkIDFweCAkZGl2aWRlci1jb2xvcjtcbiAgfVxuXG4gIC5tYXQtYnV0dG9uLXRvZ2dsZS1ncm91cC1hcHBlYXJhbmNlLXN0YW5kYXJkLm1hdC1idXR0b24tdG9nZ2xlLXZlcnRpY2FsIHtcbiAgICAubWF0LWJ1dHRvbi10b2dnbGUgKyAubWF0LWJ1dHRvbi10b2dnbGUge1xuICAgICAgYm9yZGVyLWxlZnQ6IG5vbmU7XG4gICAgICBib3JkZXItcmlnaHQ6IG5vbmU7XG4gICAgICBib3JkZXItdG9wOiBzb2xpZCAxcHggJGRpdmlkZXItY29sb3I7XG4gICAgfVxuICB9XG5cbiAgLm1hdC1idXR0b24tdG9nZ2xlLWNoZWNrZWQge1xuICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgc2VsZWN0ZWQtYnV0dG9uKTtcbiAgICBjb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBzZWNvbmRhcnktdGV4dCk7XG5cbiAgICAmLm1hdC1idXR0b24tdG9nZ2xlLWFwcGVhcmFuY2Utc3RhbmRhcmQge1xuICAgICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgdGV4dCk7XG4gICAgfVxuICB9XG5cbiAgLm1hdC1idXR0b24tdG9nZ2xlLWRpc2FibGVkIHtcbiAgICBjb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBkaXNhYmxlZC1idXR0b24pO1xuICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgZGlzYWJsZWQtYnV0dG9uLXRvZ2dsZSk7XG5cbiAgICAmLm1hdC1idXR0b24tdG9nZ2xlLWFwcGVhcmFuY2Utc3RhbmRhcmQge1xuICAgICAgYmFja2dyb3VuZDogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLCBjYXJkKTtcbiAgICB9XG5cbiAgICAmLm1hdC1idXR0b24tdG9nZ2xlLWNoZWNrZWQge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLCBzZWxlY3RlZC1kaXNhYmxlZC1idXR0b24pO1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtYnV0dG9uLXRvZ2dsZS1zdGFuZGFsb25lLm1hdC1idXR0b24tdG9nZ2xlLWFwcGVhcmFuY2Utc3RhbmRhcmQsXG4gIC5tYXQtYnV0dG9uLXRvZ2dsZS1ncm91cC1hcHBlYXJhbmNlLXN0YW5kYXJkIHtcbiAgICBib3JkZXI6IHNvbGlkIDFweCAkZGl2aWRlci1jb2xvcjtcbiAgfVxufVxuXG5AbWl4aW4gbWF0LWJ1dHRvbi10b2dnbGUtdHlwb2dyYXBoeSgkY29uZmlnKSB7XG4gIC5tYXQtYnV0dG9uLXRvZ2dsZSB7XG4gICAgZm9udC1mYW1pbHk6IG1hdC1mb250LWZhbWlseSgkY29uZmlnKTtcbiAgfVxufVxuXG5cblxuXG5cblxuXG5AbWl4aW4gbWF0LWNhcmQtdGhlbWUoJHRoZW1lKSB7XG4gICRiYWNrZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgYmFja2dyb3VuZCk7XG4gICRmb3JlZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgZm9yZWdyb3VuZCk7XG5cbiAgLm1hdC1jYXJkIHtcbiAgICBAaW5jbHVkZSBfbWF0LXRoZW1lLW92ZXJyaWRhYmxlLWVsZXZhdGlvbigxLCAkdGhlbWUpO1xuICAgIGJhY2tncm91bmQ6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgY2FyZCk7XG4gICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgdGV4dCk7XG5cbiAgICAvLyBOZWVkcyBleHRyYSBzcGVjaWZpY2l0eSB0byBiZSBhYmxlIHRvIG92ZXJyaWRlIHRoZSBlbGV2YXRpb24gc2VsZWN0b3JzLlxuICAgICYubWF0LWNhcmQtZmxhdCB7XG4gICAgICBAaW5jbHVkZSBfbWF0LXRoZW1lLW92ZXJyaWRhYmxlLWVsZXZhdGlvbigwLCAkdGhlbWUpO1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtY2FyZC1zdWJ0aXRsZSB7XG4gICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgc2Vjb25kYXJ5LXRleHQpO1xuICB9XG59XG5cbkBtaXhpbiBtYXQtY2FyZC10eXBvZ3JhcGh5KCRjb25maWcpIHtcbiAgLm1hdC1jYXJkIHtcbiAgICBmb250LWZhbWlseTogbWF0LWZvbnQtZmFtaWx5KCRjb25maWcpO1xuICB9XG5cbiAgLm1hdC1jYXJkLXRpdGxlIHtcbiAgICBmb250OiB7XG4gICAgICBzaXplOiBtYXQtZm9udC1zaXplKCRjb25maWcsIGhlYWRsaW5lKTtcbiAgICAgIHdlaWdodDogbWF0LWZvbnQtd2VpZ2h0KCRjb25maWcsIHRpdGxlKTtcbiAgICB9XG4gIH1cblxuICAubWF0LWNhcmQtaGVhZGVyIC5tYXQtY2FyZC10aXRsZSB7XG4gICAgZm9udC1zaXplOiBtYXQtZm9udC1zaXplKCRjb25maWcsIHRpdGxlKTtcbiAgfVxuXG4gIC5tYXQtY2FyZC1zdWJ0aXRsZSxcbiAgLm1hdC1jYXJkLWNvbnRlbnQge1xuICAgIGZvbnQtc2l6ZTogbWF0LWZvbnQtc2l6ZSgkY29uZmlnLCBib2R5LTEpO1xuICB9XG59XG5cblxuXG5cblxuXG5AbWl4aW4gbWF0LWNoZWNrYm94LXRoZW1lKCR0aGVtZSkge1xuICAkaXMtZGFyay10aGVtZTogbWFwLWdldCgkdGhlbWUsIGlzLWRhcmspO1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcblxuXG4gIC8vIFRoZSBjb2xvciBvZiB0aGUgY2hlY2tib3gncyBjaGVja21hcmsgLyBtaXhlZG1hcmsuXG4gICRjaGVja2JveC1tYXJrLWNvbG9yOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIGJhY2tncm91bmQpO1xuXG4gIC8vIE5PVEUodHJhdmlza2F1Zm1hbik6IFdoaWxlIHRoZSBzcGVjIGNhbGxzIGZvciB0cmFuc2x1Y2VudCBibGFja3Mvd2hpdGVzIGZvciBkaXNhYmxlZCBjb2xvcnMsXG4gIC8vIHRoaXMgZG9lcyBub3Qgd29yayB3ZWxsIHdpdGggZWxlbWVudHMgbGF5ZXJlZCBvbiB0b3Agb2Ygb25lIGFub3RoZXIuIFRvIGdldCBhcm91bmQgdGhpcyB3ZVxuICAvLyBibGVuZCB0aGUgY29sb3JzIHRvZ2V0aGVyIGJhc2VkIG9uIHRoZSBiYXNlIGNvbG9yIGFuZCB0aGUgdGhlbWUgYmFja2dyb3VuZC5cbiAgJHdoaXRlLTMwcGN0LW9wYWNpdHktb24tZGFyazogIzY4Njg2ODtcbiAgJGJsYWNrLTI2cGN0LW9wYWNpdHktb24tbGlnaHQ6ICNiMGIwYjA7XG4gICRkaXNhYmxlZC1jb2xvcjogaWYoJGlzLWRhcmstdGhlbWUsICR3aGl0ZS0zMHBjdC1vcGFjaXR5LW9uLWRhcmssICRibGFjay0yNnBjdC1vcGFjaXR5LW9uLWxpZ2h0KTtcblxuICAubWF0LWNoZWNrYm94LWZyYW1lIHtcbiAgICBib3JkZXItY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgc2Vjb25kYXJ5LXRleHQpO1xuICB9XG5cbiAgLm1hdC1jaGVja2JveC1jaGVja21hcmsge1xuICAgIGZpbGw6ICRjaGVja2JveC1tYXJrLWNvbG9yO1xuICB9XG5cbiAgLm1hdC1jaGVja2JveC1jaGVja21hcmstcGF0aCB7XG4gICAgLy8gIWltcG9ydGFudCBpcyBuZWVkZWQgaGVyZSBiZWNhdXNlIGEgc3Ryb2tlIG11c3QgYmUgc2V0IGFzIGFuXG4gICAgLy8gYXR0cmlidXRlIG9uIHRoZSBTVkcgaW4gb3JkZXIgZm9yIGxpbmUgYW5pbWF0aW9uIHRvIHdvcmsgcHJvcGVybHkuXG4gICAgc3Ryb2tlOiAkY2hlY2tib3gtbWFyay1jb2xvciAhaW1wb3J0YW50O1xuXG4gICAgQGluY2x1ZGUgY2RrLWhpZ2gtY29udHJhc3QoYmxhY2stb24td2hpdGUpIHtcbiAgICAgIC8vIEhhdmluZyB0aGUgb25lIGFib3ZlIGJlICFpbXBvcnRhbnQgZW5kcyB1cCBvdmVycmlkaW5nIHRoZSBicm93c2VyJ3MgYXV0b21hdGljXG4gICAgICAvLyBjb2xvciBpbnZlcnNpb24gc28gd2UgbmVlZCB0byByZS1pbnZlcnQgaXQgb3Vyc2VsdmVzIGZvciBibGFjay1vbi13aGl0ZS5cbiAgICAgIHN0cm9rZTogIzAwMCAhaW1wb3J0YW50O1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtY2hlY2tib3gtbWl4ZWRtYXJrIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkY2hlY2tib3gtbWFyay1jb2xvcjtcbiAgfVxuXG4gIC5tYXQtY2hlY2tib3gtaW5kZXRlcm1pbmF0ZSwgLm1hdC1jaGVja2JveC1jaGVja2VkIHtcbiAgICAmLm1hdC1wcmltYXJ5IC5tYXQtY2hlY2tib3gtYmFja2dyb3VuZCB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBtYXQtY29sb3IoJHByaW1hcnkpO1xuICAgIH1cblxuICAgICYubWF0LWFjY2VudCAubWF0LWNoZWNrYm94LWJhY2tncm91bmQge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRhY2NlbnQpO1xuICAgIH1cblxuICAgICYubWF0LXdhcm4gLm1hdC1jaGVja2JveC1iYWNrZ3JvdW5kIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkd2Fybik7XG4gICAgfVxuICB9XG5cbiAgLm1hdC1jaGVja2JveC1kaXNhYmxlZCB7XG4gICAgJi5tYXQtY2hlY2tib3gtY2hlY2tlZCxcbiAgICAmLm1hdC1jaGVja2JveC1pbmRldGVybWluYXRlIHtcbiAgICAgIC5tYXQtY2hlY2tib3gtYmFja2dyb3VuZCB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICRkaXNhYmxlZC1jb2xvcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmOm5vdCgubWF0LWNoZWNrYm94LWNoZWNrZWQpIHtcbiAgICAgIC5tYXQtY2hlY2tib3gtZnJhbWUge1xuICAgICAgICBib3JkZXItY29sb3I6ICRkaXNhYmxlZC1jb2xvcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAubWF0LWNoZWNrYm94LWxhYmVsIHtcbiAgICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHNlY29uZGFyeS10ZXh0KTtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBjZGstaGlnaC1jb250cmFzdCB7XG4gICAgICBvcGFjaXR5OiAwLjU7XG4gICAgfVxuICB9XG5cbiAgLy8gVGhpcyBvbmUgaXMgbW92ZWQgZG93biBoZXJlIHNvIGl0IGNhbiB0YXJnZXQgYm90aFxuICAvLyB0aGUgdGhlbWUgY29sb3JzIGFuZCB0aGUgZGlzYWJsZWQgc3RhdGUuXG4gIEBpbmNsdWRlIGNkay1oaWdoLWNvbnRyYXN0IHtcbiAgICAubWF0LWNoZWNrYm94LWJhY2tncm91bmQge1xuICAgICAgLy8gTmVlZHMgdG8gYmUgcmVtb3ZlZCBiZWNhdXNlIGl0IGhpZGVzIHRoZSBjaGVja2JveCBvdXRsaW5lLlxuICAgICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICB9XG4gIH1cblxuICAubWF0LWNoZWNrYm94Om5vdCgubWF0LWNoZWNrYm94LWRpc2FibGVkKSB7XG4gICAgJi5tYXQtcHJpbWFyeSAubWF0LWNoZWNrYm94LXJpcHBsZSAubWF0LXJpcHBsZS1lbGVtZW50IHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkcHJpbWFyeSk7XG4gICAgfVxuXG4gICAgJi5tYXQtYWNjZW50IC5tYXQtY2hlY2tib3gtcmlwcGxlIC5tYXQtcmlwcGxlLWVsZW1lbnQge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRhY2NlbnQpO1xuICAgIH1cblxuICAgICYubWF0LXdhcm4gLm1hdC1jaGVja2JveC1yaXBwbGUgLm1hdC1yaXBwbGUtZWxlbWVudCB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBtYXQtY29sb3IoJHdhcm4pO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gbWF0LWNoZWNrYm94LXR5cG9ncmFwaHkoJGNvbmZpZykge1xuICAubWF0LWNoZWNrYm94IHtcbiAgICBmb250LWZhbWlseTogbWF0LWZvbnQtZmFtaWx5KCRjb25maWcpO1xuICB9XG5cbiAgLy8gVE9ETyhrYXJhKTogUmVtb3ZlIHRoaXMgc3R5bGUgd2hlbiBmaXhpbmcgdmVydGljYWwgYmFzZWxpbmVcbiAgLm1hdC1jaGVja2JveC1sYXlvdXQgLm1hdC1jaGVja2JveC1sYWJlbCB7XG4gICAgbGluZS1oZWlnaHQ6IG1hdC1saW5lLWhlaWdodCgkY29uZmlnLCBib2R5LTIpO1xuICB9XG59XG5cblxuXG5cblxuXG4kbWF0LWNoaXAtcmVtb3ZlLWZvbnQtc2l6ZTogMThweDtcblxuQG1peGluIG1hdC1jaGlwcy1jb2xvcigkZm9yZWdyb3VuZCwgJGJhY2tncm91bmQpIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogJGJhY2tncm91bmQ7XG4gIGNvbG9yOiAkZm9yZWdyb3VuZDtcblxuICAubWF0LWNoaXAtcmVtb3ZlIHtcbiAgICBjb2xvcjogJGZvcmVncm91bmQ7XG4gICAgb3BhY2l0eTogMC40O1xuICB9XG59XG5cbkBtaXhpbiBtYXQtY2hpcHMtdGhlbWUtY29sb3IoJHBhbGV0dGUpIHtcbiAgQGluY2x1ZGUgbWF0LWNoaXBzLWNvbG9yKG1hdC1jb2xvcigkcGFsZXR0ZSwgZGVmYXVsdC1jb250cmFzdCksIG1hdC1jb2xvcigkcGFsZXR0ZSkpO1xuXG4gIC5tYXQtcmlwcGxlLWVsZW1lbnQge1xuICAgIGJhY2tncm91bmQ6IG1hdC1jb2xvcigkcGFsZXR0ZSwgZGVmYXVsdC1jb250cmFzdCwgMC4xKTtcbiAgfVxufVxuXG5AbWl4aW4gbWF0LWNoaXBzLXRoZW1lKCR0aGVtZSkge1xuICAkaXMtZGFyay10aGVtZTogbWFwLWdldCgkdGhlbWUsIGlzLWRhcmspO1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcblxuICAkdW5zZWxlY3RlZC1iYWNrZ3JvdW5kOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIHVuc2VsZWN0ZWQtY2hpcCk7XG4gICR1bnNlbGVjdGVkLWZvcmVncm91bmQ6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgdGV4dCk7XG5cbiAgLm1hdC1jaGlwLm1hdC1zdGFuZGFyZC1jaGlwIHtcbiAgICBAaW5jbHVkZSBtYXQtY2hpcHMtY29sb3IoJHVuc2VsZWN0ZWQtZm9yZWdyb3VuZCwgJHVuc2VsZWN0ZWQtYmFja2dyb3VuZCk7XG5cbiAgICAmOm5vdCgubWF0LWNoaXAtZGlzYWJsZWQpIHtcbiAgICAgICY6YWN0aXZlIHtcbiAgICAgICAgQGluY2x1ZGUgX21hdC10aGVtZS1lbGV2YXRpb24oMywgJHRoZW1lKTtcbiAgICAgIH1cblxuICAgICAgLm1hdC1jaGlwLXJlbW92ZTpob3ZlciB7XG4gICAgICAgIG9wYWNpdHk6IDAuNTQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJi5tYXQtY2hpcC1kaXNhYmxlZCB7XG4gICAgICBvcGFjaXR5OiAwLjQ7XG4gICAgfVxuXG4gICAgJjo6YWZ0ZXIge1xuICAgICAgYmFja2dyb3VuZDogbWFwX2dldCgkZm9yZWdyb3VuZCwgYmFzZSk7XG4gICAgfVxuICB9XG5cbiAgLm1hdC1jaGlwLm1hdC1zdGFuZGFyZC1jaGlwLm1hdC1jaGlwLXNlbGVjdGVkIHtcbiAgICAmLm1hdC1wcmltYXJ5IHtcbiAgICAgIEBpbmNsdWRlIG1hdC1jaGlwcy10aGVtZS1jb2xvcigkcHJpbWFyeSk7XG4gICAgfVxuXG4gICAgJi5tYXQtd2FybiB7XG4gICAgICBAaW5jbHVkZSBtYXQtY2hpcHMtdGhlbWUtY29sb3IoJHdhcm4pO1xuICAgIH1cblxuICAgICYubWF0LWFjY2VudCB7XG4gICAgICBAaW5jbHVkZSBtYXQtY2hpcHMtdGhlbWUtY29sb3IoJGFjY2VudCk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBtYXQtY2hpcHMtdHlwb2dyYXBoeSgkY29uZmlnKSB7XG4gIC5tYXQtY2hpcCB7XG4gICAgZm9udC1zaXplOiBtYXQtZm9udC1zaXplKCRjb25maWcsIGJvZHktMik7XG4gICAgZm9udC13ZWlnaHQ6IG1hdC1mb250LXdlaWdodCgkY29uZmlnLCBib2R5LTIpO1xuXG4gICAgLm1hdC1jaGlwLXRyYWlsaW5nLWljb24ubWF0LWljb24sXG4gICAgLm1hdC1jaGlwLXJlbW92ZS5tYXQtaWNvbiB7XG4gICAgICBmb250LXNpemU6ICRtYXQtY2hpcC1yZW1vdmUtZm9udC1zaXplO1xuICAgIH1cbiAgfVxufVxuXG5cblxuXG5cbkBtaXhpbiBtYXQtdGFibGUtdGhlbWUoJHRoZW1lKSB7XG4gICRiYWNrZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgYmFja2dyb3VuZCk7XG4gICRmb3JlZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgZm9yZWdyb3VuZCk7XG5cbiAgLm1hdC10YWJsZSB7XG4gICAgYmFja2dyb3VuZDogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLCAnY2FyZCcpO1xuICB9XG5cbiAgLm1hdC10YWJsZSB0aGVhZCwgLm1hdC10YWJsZSB0Ym9keSwgLm1hdC10YWJsZSB0Zm9vdCxcbiAgbWF0LWhlYWRlci1yb3csIG1hdC1yb3csIG1hdC1mb290ZXItcm93LFxuICBbbWF0LWhlYWRlci1yb3ddLCBbbWF0LXJvd10sIFttYXQtZm9vdGVyLXJvd10sXG4gIC5tYXQtdGFibGUtc3RpY2t5IHtcbiAgICBiYWNrZ3JvdW5kOiBpbmhlcml0O1xuICB9XG5cbiAgbWF0LXJvdywgbWF0LWhlYWRlci1yb3csIG1hdC1mb290ZXItcm93LFxuICB0aC5tYXQtaGVhZGVyLWNlbGwsIHRkLm1hdC1jZWxsLCB0ZC5tYXQtZm9vdGVyLWNlbGwge1xuICAgIGJvcmRlci1ib3R0b20tY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgZGl2aWRlcik7XG4gIH1cblxuICAubWF0LWhlYWRlci1jZWxsIHtcbiAgICBjb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBzZWNvbmRhcnktdGV4dCk7XG4gIH1cblxuICAubWF0LWNlbGwsIC5tYXQtZm9vdGVyLWNlbGwge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHRleHQpO1xuICB9XG59XG5cbkBtaXhpbiBtYXQtdGFibGUtdHlwb2dyYXBoeSgkY29uZmlnKSB7XG4gIC5tYXQtdGFibGUge1xuICAgIGZvbnQtZmFtaWx5OiBtYXQtZm9udC1mYW1pbHkoJGNvbmZpZyk7XG4gIH1cblxuICAubWF0LWhlYWRlci1jZWxsIHtcbiAgICBmb250LXNpemU6IG1hdC1mb250LXNpemUoJGNvbmZpZywgY2FwdGlvbik7XG4gICAgZm9udC13ZWlnaHQ6IG1hdC1mb250LXdlaWdodCgkY29uZmlnLCBib2R5LTIpO1xuICB9XG5cbiAgLm1hdC1jZWxsLCAubWF0LWZvb3Rlci1jZWxsIHtcbiAgICBmb250LXNpemU6IG1hdC1mb250LXNpemUoJGNvbmZpZywgYm9keS0xKTtcbiAgfVxufVxuXG5cblxuXG5cblxuXG4kbWF0LWRhdGVwaWNrZXItc2VsZWN0ZWQtdG9kYXktYm94LXNoYWRvdy13aWR0aDogMXB4O1xuJG1hdC1kYXRlcGlja2VyLXNlbGVjdGVkLWZhZGUtYW1vdW50OiAwLjY7XG4kbWF0LWRhdGVwaWNrZXItdG9kYXktZmFkZS1hbW91bnQ6IDAuMjtcbiRtYXQtY2FsZW5kYXItYm9keS1mb250LXNpemU6IDEzcHggIWRlZmF1bHQ7XG4kbWF0LWNhbGVuZGFyLXdlZWtkYXktdGFibGUtZm9udC1zaXplOiAxMXB4ICFkZWZhdWx0O1xuXG5AbWl4aW4gX21hdC1kYXRlcGlja2VyLWNvbG9yKCRwYWxldHRlKSB7XG4gIC5tYXQtY2FsZW5kYXItYm9keS1zZWxlY3RlZCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRwYWxldHRlKTtcbiAgICBjb2xvcjogbWF0LWNvbG9yKCRwYWxldHRlLCBkZWZhdWx0LWNvbnRyYXN0KTtcbiAgfVxuXG4gIC5tYXQtY2FsZW5kYXItYm9keS1kaXNhYmxlZCA+IC5tYXQtY2FsZW5kYXItYm9keS1zZWxlY3RlZCB7XG4gICAgJGJhY2tncm91bmQ6IG1hdC1jb2xvcigkcGFsZXR0ZSk7XG5cbiAgICBAaWYgKHR5cGUtb2YoJGJhY2tncm91bmQpID09IGNvbG9yKSB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBmYWRlLW91dCgkYmFja2dyb3VuZCwgJG1hdC1kYXRlcGlja2VyLXNlbGVjdGVkLWZhZGUtYW1vdW50KTtcbiAgICB9XG4gICAgQGVsc2Uge1xuICAgICAgLy8gSWYgd2UgY291bGRuJ3QgcmVzb2x2ZSB0byBiYWNrZ3JvdW5kIHRvIGEgY29sb3IgKGUuZy4gaXQncyBhIENTUyB2YXJpYWJsZSksXG4gICAgICAvLyBmYWxsIGJhY2sgdG8gZmFkaW5nIHRoZSBjb250ZW50IG91dCB2aWEgYG9wYWNpdHlgLlxuICAgICAgb3BhY2l0eTogJG1hdC1kYXRlcGlja2VyLXRvZGF5LWZhZGUtYW1vdW50O1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtY2FsZW5kYXItYm9keS10b2RheS5tYXQtY2FsZW5kYXItYm9keS1zZWxlY3RlZCB7XG4gICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgJG1hdC1kYXRlcGlja2VyLXNlbGVjdGVkLXRvZGF5LWJveC1zaGFkb3ctd2lkdGhcbiAgICAgICAgICAgICAgICBtYXQtY29sb3IoJHBhbGV0dGUsIGRlZmF1bHQtY29udHJhc3QpO1xuICB9XG59XG5cbkBtaXhpbiBtYXQtZGF0ZXBpY2tlci10aGVtZSgkdGhlbWUpIHtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcblxuICAubWF0LWNhbGVuZGFyLWFycm93IHtcbiAgICBib3JkZXItdG9wLWNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGljb24pO1xuICB9XG5cbiAgLy8gVGhlIHByZXYvbmV4dCBidXR0b25zIG5lZWQgYSBiaXQgbW9yZSBzcGVjaWZpY2l0eSB0b1xuICAvLyBhdm9pZCBiZWluZyBvdmVyd3JpdHRlbiBieSB0aGUgLm1hdC1pY29uLWJ1dHRvbi5cbiAgLm1hdC1kYXRlcGlja2VyLXRvZ2dsZSxcbiAgLm1hdC1kYXRlcGlja2VyLWNvbnRlbnQgLm1hdC1jYWxlbmRhci1uZXh0LWJ1dHRvbixcbiAgLm1hdC1kYXRlcGlja2VyLWNvbnRlbnQgLm1hdC1jYWxlbmRhci1wcmV2aW91cy1idXR0b24ge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGljb24pO1xuICB9XG5cbiAgLm1hdC1jYWxlbmRhci10YWJsZS1oZWFkZXIge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGhpbnQtdGV4dCk7XG4gIH1cblxuICAubWF0LWNhbGVuZGFyLXRhYmxlLWhlYWRlci1kaXZpZGVyOjphZnRlciB7XG4gICAgYmFja2dyb3VuZDogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBkaXZpZGVyKTtcbiAgfVxuXG4gIC5tYXQtY2FsZW5kYXItYm9keS1sYWJlbCB7XG4gICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgc2Vjb25kYXJ5LXRleHQpO1xuICB9XG5cbiAgLm1hdC1jYWxlbmRhci1ib2R5LWNlbGwtY29udGVudCB7XG4gICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgdGV4dCk7XG4gICAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgfVxuXG4gIC5tYXQtY2FsZW5kYXItYm9keS1kaXNhYmxlZCA+IC5tYXQtY2FsZW5kYXItYm9keS1jZWxsLWNvbnRlbnQ6bm90KC5tYXQtY2FsZW5kYXItYm9keS1zZWxlY3RlZCkge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpc2FibGVkLXRleHQpO1xuICB9XG5cbiAgLm1hdC1jYWxlbmRhci1ib2R5LWNlbGw6bm90KC5tYXQtY2FsZW5kYXItYm9keS1kaXNhYmxlZCk6aG92ZXIsXG4gIC5jZGsta2V5Ym9hcmQtZm9jdXNlZCAubWF0LWNhbGVuZGFyLWJvZHktYWN0aXZlLFxuICAuY2RrLXByb2dyYW0tZm9jdXNlZCAubWF0LWNhbGVuZGFyLWJvZHktYWN0aXZlIHtcbiAgICAmID4gLm1hdC1jYWxlbmRhci1ib2R5LWNlbGwtY29udGVudDpub3QoLm1hdC1jYWxlbmRhci1ib2R5LXNlbGVjdGVkKSB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIGhvdmVyKTtcbiAgICB9XG4gIH1cblxuICAubWF0LWNhbGVuZGFyLWJvZHktdG9kYXk6bm90KC5tYXQtY2FsZW5kYXItYm9keS1zZWxlY3RlZCkge1xuICAgIC8vIE5vdGU6IHRob3VnaCBpdCdzIG5vdCB0ZXh0LCB0aGUgYm9yZGVyIGlzIGEgaGludCBhYm91dCB0aGUgZmFjdCB0aGF0IHRoaXMgaXMgdG9kYXkncyBkYXRlLFxuICAgIC8vIHNvIHdlIHVzZSB0aGUgaGludCBjb2xvci5cbiAgICBib3JkZXItY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgaGludC10ZXh0KTtcbiAgfVxuXG4gIC5tYXQtY2FsZW5kYXItYm9keS1kaXNhYmxlZCA+IC5tYXQtY2FsZW5kYXItYm9keS10b2RheTpub3QoLm1hdC1jYWxlbmRhci1ib2R5LXNlbGVjdGVkKSB7XG4gICAgJGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGhpbnQtdGV4dCk7XG5cbiAgICBAaWYgKHR5cGUtb2YoJGNvbG9yKSA9PSBjb2xvcikge1xuICAgICAgYm9yZGVyLWNvbG9yOiBmYWRlLW91dCgkY29sb3IsICRtYXQtZGF0ZXBpY2tlci10b2RheS1mYWRlLWFtb3VudCk7XG4gICAgfVxuICAgIEBlbHNlIHtcbiAgICAgIC8vIElmIHRoZSBjb2xvciBkaWRuJ3QgcmVzb2x2ZSB0byBhIGNvbG9yIHZhbHVlLCBidXQgc29tZXRoaW5nIGxpa2UgYSBDU1MgdmFyaWFibGUsIHdlIGNhbid0XG4gICAgICAvLyBmYWRlIGl0IG91dCBzbyB3ZSBmYWxsIGJhY2sgdG8gcmVkdWNpbmcgdGhlIGVsZW1lbnQgb3BhY2l0eS4gTm90ZSB0aGF0IHdlIGRvbid0IHVzZSB0aGVcbiAgICAgIC8vICRtYXQtZGF0ZXBpY2tlci10b2RheS1mYWRlLWFtb3VudCwgYmVjYXVzZSBoaW50IHRleHQgdXN1YWxseSBoYXMgc29tZSBvcGFjaXR5IGFwcGxpZWRcbiAgICAgIC8vIHRvIGl0IGFscmVhZHkgYW5kIHdlIGRvbid0IHdhbnQgdGhlbSB0byBzdGFjayBvbiB0b3Agb2YgZWFjaCBvdGhlci5cbiAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICB9XG4gIH1cblxuICBAaW5jbHVkZSBfbWF0LWRhdGVwaWNrZXItY29sb3IobWFwLWdldCgkdGhlbWUsIHByaW1hcnkpKTtcblxuICAubWF0LWRhdGVwaWNrZXItY29udGVudCB7XG4gICAgQGluY2x1ZGUgX21hdC10aGVtZS1lbGV2YXRpb24oNCwgJHRoZW1lKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIGNhcmQpO1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHRleHQpO1xuXG4gICAgJi5tYXQtYWNjZW50IHtcbiAgICAgIEBpbmNsdWRlIF9tYXQtZGF0ZXBpY2tlci1jb2xvcihtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KSk7XG4gICAgfVxuXG4gICAgJi5tYXQtd2FybiB7XG4gICAgICBAaW5jbHVkZSBfbWF0LWRhdGVwaWNrZXItY29sb3IobWFwLWdldCgkdGhlbWUsIHdhcm4pKTtcbiAgICB9XG4gIH1cblxuICAubWF0LWRhdGVwaWNrZXItY29udGVudC10b3VjaCB7XG4gICAgQGluY2x1ZGUgX21hdC10aGVtZS1lbGV2YXRpb24oMCwgJHRoZW1lKTtcbiAgfVxuXG4gIC5tYXQtZGF0ZXBpY2tlci10b2dnbGUtYWN0aXZlIHtcbiAgICBjb2xvcjogbWF0LWNvbG9yKG1hcC1nZXQoJHRoZW1lLCBwcmltYXJ5KSk7XG5cbiAgICAmLm1hdC1hY2NlbnQge1xuICAgICAgY29sb3I6IG1hdC1jb2xvcihtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KSk7XG4gICAgfVxuXG4gICAgJi5tYXQtd2FybiB7XG4gICAgICBjb2xvcjogbWF0LWNvbG9yKG1hcC1nZXQoJHRoZW1lLCB3YXJuKSk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBtYXQtZGF0ZXBpY2tlci10eXBvZ3JhcGh5KCRjb25maWcpIHtcbiAgLm1hdC1jYWxlbmRhciB7XG4gICAgZm9udC1mYW1pbHk6IG1hdC1mb250LWZhbWlseSgkY29uZmlnKTtcbiAgfVxuXG4gIC5tYXQtY2FsZW5kYXItYm9keSB7XG4gICAgZm9udC1zaXplOiAkbWF0LWNhbGVuZGFyLWJvZHktZm9udC1zaXplO1xuICB9XG5cbiAgLm1hdC1jYWxlbmRhci1ib2R5LWxhYmVsLFxuICAubWF0LWNhbGVuZGFyLXBlcmlvZC1idXR0b24ge1xuICAgIGZvbnQ6IHtcbiAgICAgIHNpemU6IG1hdC1mb250LXNpemUoJGNvbmZpZywgYnV0dG9uKTtcbiAgICAgIHdlaWdodDogbWF0LWZvbnQtd2VpZ2h0KCRjb25maWcsIGJ1dHRvbik7XG4gICAgfVxuICB9XG5cbiAgLm1hdC1jYWxlbmRhci10YWJsZS1oZWFkZXIgdGgge1xuICAgIGZvbnQ6IHtcbiAgICAgIHNpemU6ICRtYXQtY2FsZW5kYXItd2Vla2RheS10YWJsZS1mb250LXNpemU7XG4gICAgICB3ZWlnaHQ6IG1hdC1mb250LXdlaWdodCgkY29uZmlnLCBib2R5LTEpO1xuICAgIH1cbiAgfVxufVxuXG5cblxuXG5cblxuXG5AbWl4aW4gbWF0LWRpYWxvZy10aGVtZSgkdGhlbWUpIHtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcblxuICAubWF0LWRpYWxvZy1jb250YWluZXIge1xuICAgIEBpbmNsdWRlIF9tYXQtdGhlbWUtZWxldmF0aW9uKDI0LCAkdGhlbWUpO1xuICAgIGJhY2tncm91bmQ6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgZGlhbG9nKTtcbiAgICBjb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCB0ZXh0KTtcbiAgfVxufVxuXG5AbWl4aW4gbWF0LWRpYWxvZy10eXBvZ3JhcGh5KCRjb25maWcpIHtcbiAgLm1hdC1kaWFsb2ctdGl0bGUge1xuICAgIEBpbmNsdWRlIG1hdC10eXBvZ3JhcGh5LWxldmVsLXRvLXN0eWxlcygkY29uZmlnLCB0aXRsZSk7XG4gIH1cbn1cblxuXG5cblxuXG5cbkBtaXhpbiBtYXQtZXhwYW5zaW9uLXBhbmVsLXRoZW1lKCR0aGVtZSkge1xuICAkYmFja2dyb3VuZDogbWFwLWdldCgkdGhlbWUsIGJhY2tncm91bmQpO1xuICAkZm9yZWdyb3VuZDogbWFwLWdldCgkdGhlbWUsIGZvcmVncm91bmQpO1xuXG4gIC5tYXQtZXhwYW5zaW9uLXBhbmVsIHtcbiAgICBAaW5jbHVkZSBfbWF0LXRoZW1lLW92ZXJyaWRhYmxlLWVsZXZhdGlvbigyLCAkdGhlbWUpO1xuICAgIGJhY2tncm91bmQ6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgY2FyZCk7XG4gICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgdGV4dCk7XG4gIH1cblxuICAubWF0LWFjdGlvbi1yb3cge1xuICAgIGJvcmRlci10b3AtY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgZGl2aWRlcik7XG4gIH1cblxuICAubWF0LWV4cGFuc2lvbi1wYW5lbDpub3QoLm1hdC1leHBhbmRlZCkgLm1hdC1leHBhbnNpb24tcGFuZWwtaGVhZGVyIHtcbiAgICAmOm5vdChbYXJpYS1kaXNhYmxlZD0ndHJ1ZSddKSB7XG4gICAgICAmLmNkay1rZXlib2FyZC1mb2N1c2VkLFxuICAgICAgJi5jZGstcHJvZ3JhbS1mb2N1c2VkLFxuICAgICAgJjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgaG92ZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIERpc2FibGUgdGhlIGhvdmVyIG9uIHRvdWNoIGRldmljZXMgc2luY2UgaXQgY2FuIGFwcGVhciBsaWtlIGl0IGlzIHN0dWNrLiBXZSBjYW4ndCB1c2VcbiAgLy8gYEBtZWRpYSAoaG92ZXIpYCBhYm92ZSwgYmVjYXVzZSB0aGUgZGVza3RvcCBzdXBwb3J0IGJyb3dzZXIgc3VwcG9ydCBpc24ndCBncmVhdC5cbiAgQG1lZGlhIChob3Zlcjogbm9uZSkge1xuICAgIC5tYXQtZXhwYW5zaW9uLXBhbmVsOm5vdCgubWF0LWV4cGFuZGVkKTpub3QoW2FyaWEtZGlzYWJsZWQ9J3RydWUnXSlcbiAgICAgIC5tYXQtZXhwYW5zaW9uLXBhbmVsLWhlYWRlcjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIGNhcmQpO1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtZXhwYW5zaW9uLXBhbmVsLWhlYWRlci10aXRsZSB7XG4gICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgdGV4dCk7XG4gIH1cblxuICAubWF0LWV4cGFuc2lvbi1wYW5lbC1oZWFkZXItZGVzY3JpcHRpb24sXG4gIC5tYXQtZXhwYW5zaW9uLWluZGljYXRvcjo6YWZ0ZXIge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHNlY29uZGFyeS10ZXh0KTtcbiAgfVxuXG4gIC5tYXQtZXhwYW5zaW9uLXBhbmVsLWhlYWRlclthcmlhLWRpc2FibGVkPSd0cnVlJ10ge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpc2FibGVkLWJ1dHRvbik7XG5cbiAgICAubWF0LWV4cGFuc2lvbi1wYW5lbC1oZWFkZXItdGl0bGUsXG4gICAgLm1hdC1leHBhbnNpb24tcGFuZWwtaGVhZGVyLWRlc2NyaXB0aW9uIHtcbiAgICAgIGNvbG9yOiBpbmhlcml0O1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gbWF0LWV4cGFuc2lvbi1wYW5lbC10eXBvZ3JhcGh5KCRjb25maWcpIHtcbiAgLm1hdC1leHBhbnNpb24tcGFuZWwtaGVhZGVyIHtcbiAgICBmb250OiB7XG4gICAgICBmYW1pbHk6IG1hdC1mb250LWZhbWlseSgkY29uZmlnLCBzdWJoZWFkaW5nLTEpO1xuICAgICAgc2l6ZTogbWF0LWZvbnQtc2l6ZSgkY29uZmlnLCBzdWJoZWFkaW5nLTEpO1xuICAgICAgd2VpZ2h0OiBtYXQtZm9udC13ZWlnaHQoJGNvbmZpZywgc3ViaGVhZGluZy0xKTtcbiAgICB9XG4gIH1cblxuICAubWF0LWV4cGFuc2lvbi1wYW5lbC1jb250ZW50IHtcbiAgICBAaW5jbHVkZSBtYXQtdHlwb2dyYXBoeS1sZXZlbC10by1zdHlsZXMoJGNvbmZpZywgYm9keS0xKTtcbiAgfVxufVxuXG5cblxuXG4vLyBUaGlzIG1peGluIHdpbGwgZW5zdXJlIHRoYXQgbGluZXMgdGhhdCBvdmVyZmxvdyB0aGUgY29udGFpbmVyIHdpbGwgaGlkZSB0aGUgb3ZlcmZsb3cgYW5kXG4vLyB0cnVuY2F0ZSBuZWF0bHkgd2l0aCBhbiBlbGxpcHNpcy5cbkBtaXhpbiBtYXQtdHJ1bmNhdGUtbGluZSgpIHtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG59XG5cbi8vIE1peGluIHRvIHByb3ZpZGUgYWxsIG1hdC1saW5lIHN0eWxlcywgY2hhbmdpbmcgc2Vjb25kYXJ5IGZvbnQgc2l6ZSBiYXNlZCBvbiB3aGV0aGVyIHRoZSBsaXN0XG4vLyBpcyBpbiBkZW5zZSBtb2RlLlxuQG1peGluIG1hdC1saW5lLWJhc2UoJHNlY29uZGFyeS1mb250LXNpemUpIHtcbiAgLm1hdC1saW5lIHtcbiAgICBAaW5jbHVkZSBtYXQtdHJ1bmNhdGUtbGluZSgpO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cbiAgICAvLyBhbGwgbGluZXMgYnV0IHRoZSB0b3AgbGluZSBzaG91bGQgaGF2ZSBzbWFsbGVyIHRleHRcbiAgICAmOm50aC1jaGlsZChuKzIpIHtcbiAgICAgIGZvbnQtc2l6ZTogJHNlY29uZGFyeS1mb250LXNpemU7XG4gICAgfVxuICB9XG59XG5cbi8vIFRoaXMgbWl4aW4gbm9ybWFsaXplcyBkZWZhdWx0IGVsZW1lbnQgc3R5bGVzLCBlLmcuIGZvbnQgd2VpZ2h0IGZvciBoZWFkaW5nIHRleHQuXG5AbWl4aW4gbWF0LW5vcm1hbGl6ZS10ZXh0KCkge1xuICAmID4gKiB7XG4gICAgbWFyZ2luOiAwO1xuICAgIHBhZGRpbmc6IDA7XG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICBmb250LXNpemU6IGluaGVyaXQ7XG4gIH1cbn1cblxuLy8gVGhpcyBtaXhpbiBwcm92aWRlcyBiYXNlIHN0eWxlcyBmb3IgdGhlIHdyYXBwZXIgYXJvdW5kIG1hdC1saW5lIGVsZW1lbnRzIGluIGEgbGlzdC5cbkBtaXhpbiBtYXQtbGluZS13cmFwcGVyLWJhc2UoKSB7XG4gIEBpbmNsdWRlIG1hdC1ub3JtYWxpemUtdGV4dCgpO1xuXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHdpZHRoOiAxMDAlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gIC8vIE11c3QgcmVtb3ZlIHdyYXBwZXIgd2hlbiBsaW5lcyBhcmUgZW1wdHkgb3IgaXQgdGFrZXMgdXAgaG9yaXpvbnRhbFxuICAvLyBzcGFjZSBhbmQgcHVzaGVzIG90aGVyIGVsZW1lbnRzIHRvIHRoZSByaWdodC5cbiAgJjplbXB0eSB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxufVxuXG5cblxuLy8gSW5jbHVkZSB0aGlzIGVtcHR5IG1peGluIGZvciBjb25zaXN0ZW5jeSB3aXRoIHRoZSBvdGhlciBjb21wb25lbnRzLlxuQG1peGluIG1hdC1ncmlkLWxpc3QtdGhlbWUoJHRoZW1lKSB7IH1cblxuQG1peGluIG1hdC1ncmlkLWxpc3QtdHlwb2dyYXBoeSgkY29uZmlnKSB7XG4gIC5tYXQtZ3JpZC10aWxlLWhlYWRlcixcbiAgLm1hdC1ncmlkLXRpbGUtZm9vdGVyIHtcbiAgICBAaW5jbHVkZSBtYXQtbGluZS1iYXNlKG1hdC1mb250LXNpemUoJGNvbmZpZywgY2FwdGlvbikpO1xuICAgIGZvbnQtc2l6ZTogbWF0LWZvbnQtc2l6ZSgkY29uZmlnLCBib2R5LTEpO1xuICB9XG59XG5cblxuXG5cbi8vIEluY2x1ZGUgdGhpcyBlbXB0eSBtaXhpbiBmb3IgY29uc2lzdGVuY3kgd2l0aCB0aGUgb3RoZXIgY29tcG9uZW50cy5cbkBtaXhpbiBtYXQtaWNvbi10aGVtZSgkdGhlbWUpIHtcbiAgJHByaW1hcnk6IG1hcC1nZXQoJHRoZW1lLCBwcmltYXJ5KTtcbiAgJGFjY2VudDogbWFwLWdldCgkdGhlbWUsIGFjY2VudCk7XG4gICR3YXJuOiBtYXAtZ2V0KCR0aGVtZSwgd2Fybik7XG4gICRiYWNrZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgYmFja2dyb3VuZCk7XG4gICRmb3JlZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgZm9yZWdyb3VuZCk7XG5cbiAgLm1hdC1pY29uIHtcbiAgICAmLm1hdC1wcmltYXJ5IHtcbiAgICAgIGNvbG9yOiBtYXQtY29sb3IoJHByaW1hcnkpO1xuICAgIH1cblxuICAgICYubWF0LWFjY2VudCB7XG4gICAgICBjb2xvcjogbWF0LWNvbG9yKCRhY2NlbnQpO1xuICAgIH1cblxuICAgICYubWF0LXdhcm4ge1xuICAgICAgY29sb3I6IG1hdC1jb2xvcigkd2Fybik7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBtYXQtaWNvbi10eXBvZ3JhcGh5KCRjb25maWcpIHsgfVxuXG5cblxuXG5cbi8vIFJlbmRlcnMgYSBncmFkaWVudCBmb3Igc2hvd2luZyB0aGUgZGFzaGVkIGxpbmUgd2hlbiB0aGUgaW5wdXQgaXMgZGlzYWJsZWQuXG4vLyBVbmxpa2UgdXNpbmcgYSBib3JkZXIsIGEgZ3JhZGllbnQgYWxsb3dzIHVzIHRvIGFkanVzdCB0aGUgc3BhY2luZyBvZiB0aGUgZG90dGVkIGxpbmVcbi8vIHRvIG1hdGNoIHRoZSBNYXRlcmlhbCBEZXNpZ24gc3BlYy5cbkBtaXhpbiBtYXQtY29udHJvbC1kaXNhYmxlZC11bmRlcmxpbmUoJGNvbG9yKSB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgJGNvbG9yIDAlLCAkY29sb3IgMzMlLCB0cmFuc3BhcmVudCAwJSk7XG4gIGJhY2tncm91bmQtc2l6ZTogNHB4IDEwMCU7XG4gIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteDtcbn1cblxuLy8gRmlndXJlcyBvdXQgdGhlIGNvbG9yIG9mIHRoZSBwbGFjZWhvbGRlciBmb3IgYSBmb3JtIGNvbnRyb2wuXG4vLyBVc2VkIHByaW1hcmlseSB0byBwcmV2ZW50IHRoZSB2YXJpb3VzIGZvcm0gY29udHJvbHMgZnJvbVxuLy8gYmVjb21pbmcgb3V0IG9mIHN5bmMgc2luY2UgdGhlc2UgY29sb3JzIGFyZW4ndCBpbiBhIHBhbGV0dGUuXG5AZnVuY3Rpb24gX21hdC1jb250cm9sLXBsYWNlaG9sZGVyLWNvbG9yKCR0aGVtZSkge1xuICAkZm9yZWdyb3VuZDogbWFwLWdldCgkdGhlbWUsIGZvcmVncm91bmQpO1xuICAkaXMtZGFyay10aGVtZTogbWFwLWdldCgkdGhlbWUsIGlzLWRhcmspO1xuICBAcmV0dXJuIG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgc2Vjb25kYXJ5LXRleHQsIGlmKCRpcy1kYXJrLXRoZW1lLCAwLjUsIDAuNDIpKTtcbn1cblxuXG4vKiBzdHlsZWxpbnQtZGlzYWJsZSBtYXRlcmlhbC9uby1wcmVmaXhlcyAqL1xuQG1peGluIHVzZXItc2VsZWN0KCR2YWx1ZSkge1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiAkdmFsdWU7XG4gIC1tb3otdXNlci1zZWxlY3Q6ICR2YWx1ZTtcbiAgLW1zLXVzZXItc2VsZWN0OiAkdmFsdWU7XG4gIHVzZXItc2VsZWN0OiAkdmFsdWU7XG59XG5cbkBtaXhpbiBpbnB1dC1wbGFjZWhvbGRlciB7XG4gICY6OnBsYWNlaG9sZGVyIHtcbiAgICBAY29udGVudDtcbiAgfVxuXG4gICY6Oi1tb3otcGxhY2Vob2xkZXIge1xuICAgIEBjb250ZW50O1xuICB9XG5cbiAgJjo6LXdlYmtpdC1pbnB1dC1wbGFjZWhvbGRlciB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cblxuICAmOi1tcy1pbnB1dC1wbGFjZWhvbGRlciB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuQG1peGluIGN1cnNvci1ncmFiIHtcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWI7XG4gIGN1cnNvcjogZ3JhYjtcbn1cblxuQG1peGluIGN1cnNvci1ncmFiYmluZyB7XG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiYmluZztcbiAgY3Vyc29yOiBncmFiYmluZztcbn1cblxuQG1peGluIGJhY2tmYWNlLXZpc2liaWxpdHkoJHZhbHVlKSB7XG4gIC13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTogJHZhbHVlO1xuICBiYWNrZmFjZS12aXNpYmlsaXR5OiAkdmFsdWU7XG59XG4vKiBzdHlsZWxpbnQtZW5hYmxlICovXG5cblxuXG5AbWl4aW4gbWF0LWlucHV0LXRoZW1lKCR0aGVtZSkge1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcblxuICAubWF0LWZvcm0tZmllbGQtdHlwZS1tYXQtbmF0aXZlLXNlbGVjdCAubWF0LWZvcm0tZmllbGQtaW5maXg6OmFmdGVyIHtcbiAgICBjb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBzZWNvbmRhcnktdGV4dCk7XG4gIH1cblxuICAubWF0LWlucHV0LWVsZW1lbnQ6ZGlzYWJsZWQsXG4gIC5tYXQtZm9ybS1maWVsZC10eXBlLW1hdC1uYXRpdmUtc2VsZWN0Lm1hdC1mb3JtLWZpZWxkLWRpc2FibGVkIC5tYXQtZm9ybS1maWVsZC1pbmZpeDo6YWZ0ZXIge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpc2FibGVkLXRleHQpO1xuICB9XG5cbiAgLm1hdC1pbnB1dC1lbGVtZW50IHtcbiAgICBjYXJldC1jb2xvcjogbWF0LWNvbG9yKCRwcmltYXJ5KTtcblxuICAgIEBpbmNsdWRlIGlucHV0LXBsYWNlaG9sZGVyIHtcbiAgICAgIGNvbG9yOiBfbWF0LWNvbnRyb2wtcGxhY2Vob2xkZXItY29sb3IoJHRoZW1lKTtcbiAgICB9XG5cbiAgICAvLyBPbiBkYXJrIHRoZW1lcyB3ZSBzZXQgdGhlIG5hdGl2ZSBgc2VsZWN0YCBjb2xvciB0byBzb21lIHNoYWRlIG9mIHdoaXRlLFxuICAgIC8vIGhvd2V2ZXIgdGhlIGNvbG9yIHByb3BhZ2F0ZXMgdG8gYWxsIG9mIHRoZSBgb3B0aW9uYCBlbGVtZW50cywgd2hpY2ggYXJlXG4gICAgLy8gYWx3YXlzIG9uIGEgd2hpdGUgYmFja2dyb3VuZCBpbnNpZGUgdGhlIGRyb3Bkb3duLCBjYXVzaW5nIHRoZW0gdG8gYmxlbmQgaW4uXG4gICAgLy8gU2luY2Ugd2UgY2FuJ3QgY2hhbmdlIGJhY2tncm91bmQgb2YgdGhlIGRyb3Bkb3duLCB3ZSBuZWVkIHRvIGV4cGxpY2l0bHlcbiAgICAvLyByZXNldCB0aGUgY29sb3Igb2YgdGhlIG9wdGlvbnMgdG8gc29tZXRoaW5nIGRhcmsuXG4gICAgQGlmIChtYXAtZ2V0KCR0aGVtZSwgaXMtZGFyaykpIHtcbiAgICAgIG9wdGlvbiB7XG4gICAgICAgIGNvbG9yOiAkZGFyay1wcmltYXJ5LXRleHQ7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbjpkaXNhYmxlZCB7XG4gICAgICAgIGNvbG9yOiAkZGFyay1kaXNhYmxlZC10ZXh0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5tYXQtYWNjZW50IC5tYXQtaW5wdXQtZWxlbWVudCB7XG4gICAgY2FyZXQtY29sb3I6IG1hdC1jb2xvcigkYWNjZW50KTtcbiAgfVxuXG4gIC5tYXQtd2FybiAubWF0LWlucHV0LWVsZW1lbnQsXG4gIC5tYXQtZm9ybS1maWVsZC1pbnZhbGlkIC5tYXQtaW5wdXQtZWxlbWVudCB7XG4gICAgY2FyZXQtY29sb3I6IG1hdC1jb2xvcigkd2Fybik7XG4gIH1cblxuICAubWF0LWZvcm0tZmllbGQtdHlwZS1tYXQtbmF0aXZlLXNlbGVjdC5tYXQtZm9ybS1maWVsZC1pbnZhbGlkIC5tYXQtZm9ybS1maWVsZC1pbmZpeDo6YWZ0ZXIge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJHdhcm4pO1xuICB9XG59XG5cbkBtaXhpbiBtYXQtaW5wdXQtdHlwb2dyYXBoeSgkY29uZmlnKSB7XG4gIC8vIFRoZSB1bml0LWxlc3MgbGluZS1oZWlnaHQgZnJvbSB0aGUgZm9udCBjb25maWcuXG4gICRsaW5lLWhlaWdodDogbWF0LWxpbmUtaGVpZ2h0KCRjb25maWcsIGlucHV0KTtcblxuICAvLyBUaGUgYW1vdW50IG9mIHNwYWNlIGJldHdlZW4gdGhlIHRvcCBvZiB0aGUgbGluZSBhbmQgdGhlIHRvcCBvZiB0aGUgYWN0dWFsIHRleHRcbiAgLy8gKGFzIGEgZnJhY3Rpb24gb2YgdGhlIGZvbnQtc2l6ZSkuXG4gICRsaW5lLXNwYWNpbmc6ICgkbGluZS1oZWlnaHQgLSAxKSAvIDI7XG5cbiAgLy8gPGlucHV0PiBlbGVtZW50cyBzZWVtIHRvIGhhdmUgdGhlaXIgaGVpZ2h0IHNldCBzbGlnaHRseSB0b28gbGFyZ2Ugb24gU2FmYXJpIGNhdXNpbmcgdGhlIHRleHQgdG9cbiAgLy8gYmUgbWlzYWxpZ25lZCB3LnIudC4gdGhlIHBsYWNlaG9sZGVyLiBBZGRpbmcgdGhpcyBtYXJnaW4gY29ycmVjdHMgaXQuXG4gIGlucHV0Lm1hdC1pbnB1dC1lbGVtZW50IHtcbiAgICBtYXJnaW4tdG9wOiAtJGxpbmUtc3BhY2luZyAqIDFlbTtcbiAgfVxufVxuXG5cblxuXG5cblxuXG5AbWl4aW4gbWF0LWxpc3QtdGhlbWUoJHRoZW1lKSB7XG4gICRiYWNrZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgYmFja2dyb3VuZCk7XG4gICRmb3JlZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgZm9yZWdyb3VuZCk7XG5cbiAgLm1hdC1saXN0LWJhc2Uge1xuICAgIC5tYXQtbGlzdC1pdGVtIHtcbiAgICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHRleHQpO1xuICAgIH1cblxuICAgIC5tYXQtbGlzdC1vcHRpb24ge1xuICAgICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgdGV4dCk7XG4gICAgfVxuXG4gICAgLm1hdC1zdWJoZWFkZXIge1xuICAgICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgc2Vjb25kYXJ5LXRleHQpO1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtbGlzdC1pdGVtLWRpc2FibGVkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIGRpc2FibGVkLWxpc3Qtb3B0aW9uKTtcbiAgfVxuXG4gIC5tYXQtbGlzdC1vcHRpb24sXG4gIC5tYXQtbmF2LWxpc3QgLm1hdC1saXN0LWl0ZW0sXG4gIC5tYXQtYWN0aW9uLWxpc3QgLm1hdC1saXN0LWl0ZW0ge1xuICAgICY6aG92ZXIsICY6Zm9jdXMge1xuICAgICAgYmFja2dyb3VuZDogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLCAnaG92ZXInKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG1hdC1saXN0LXR5cG9ncmFwaHkoJGNvbmZpZykge1xuICAkZm9udC1mYW1pbHk6IG1hdC1mb250LWZhbWlseSgkY29uZmlnKTtcblxuICAubWF0LWxpc3QtaXRlbSB7XG4gICAgZm9udC1mYW1pbHk6ICRmb250LWZhbWlseTtcbiAgfVxuXG4gIC5tYXQtbGlzdC1vcHRpb24ge1xuICAgIGZvbnQtZmFtaWx5OiAkZm9udC1mYW1pbHk7XG4gIH1cblxuICAvLyBEZWZhdWx0IGxpc3RcbiAgLm1hdC1saXN0LWJhc2Uge1xuICAgIC5tYXQtbGlzdC1pdGVtIHtcbiAgICAgIGZvbnQtc2l6ZTogbWF0LWZvbnQtc2l6ZSgkY29uZmlnLCBzdWJoZWFkaW5nLTIpO1xuICAgICAgQGluY2x1ZGUgbWF0LWxpbmUtYmFzZShtYXQtZm9udC1zaXplKCRjb25maWcsIGJvZHktMSkpO1xuICAgIH1cblxuICAgIC5tYXQtbGlzdC1vcHRpb24ge1xuICAgICAgZm9udC1zaXplOiBtYXQtZm9udC1zaXplKCRjb25maWcsIHN1YmhlYWRpbmctMik7XG4gICAgICBAaW5jbHVkZSBtYXQtbGluZS1iYXNlKG1hdC1mb250LXNpemUoJGNvbmZpZywgYm9keS0xKSk7XG4gICAgfVxuXG4gICAgLm1hdC1zdWJoZWFkZXIge1xuICAgICAgZm9udC1mYW1pbHk6IG1hdC1mb250LWZhbWlseSgkY29uZmlnLCBib2R5LTIpO1xuICAgICAgZm9udC1zaXplOiBtYXQtZm9udC1zaXplKCRjb25maWcsIGJvZHktMik7XG4gICAgICBmb250LXdlaWdodDogbWF0LWZvbnQtd2VpZ2h0KCRjb25maWcsIGJvZHktMik7XG4gICAgfVxuICB9XG5cbiAgLy8gRGVuc2UgbGlzdFxuICAubWF0LWxpc3QtYmFzZVtkZW5zZV0ge1xuICAgIC5tYXQtbGlzdC1pdGVtIHtcbiAgICAgIGZvbnQtc2l6ZTogbWF0LWZvbnQtc2l6ZSgkY29uZmlnLCBjYXB0aW9uKTtcbiAgICAgIEBpbmNsdWRlIG1hdC1saW5lLWJhc2UobWF0LWZvbnQtc2l6ZSgkY29uZmlnLCBjYXB0aW9uKSk7XG4gICAgfVxuXG4gICAgLm1hdC1saXN0LW9wdGlvbiB7XG4gICAgICBmb250LXNpemU6IG1hdC1mb250LXNpemUoJGNvbmZpZywgY2FwdGlvbik7XG4gICAgICBAaW5jbHVkZSBtYXQtbGluZS1iYXNlKG1hdC1mb250LXNpemUoJGNvbmZpZywgY2FwdGlvbikpO1xuICAgIH1cblxuICAgIC5tYXQtc3ViaGVhZGVyIHtcbiAgICAgIGZvbnQtZmFtaWx5OiAkZm9udC1mYW1pbHk7XG4gICAgICBmb250LXNpemU6IG1hdC1mb250LXNpemUoJGNvbmZpZywgY2FwdGlvbik7XG4gICAgICBmb250LXdlaWdodDogbWF0LWZvbnQtd2VpZ2h0KCRjb25maWcsIGJvZHktMik7XG4gICAgfVxuICB9XG59XG5cblxuXG5cblxuXG5cbkBtaXhpbiBtYXQtbWVudS10aGVtZSgkdGhlbWUpIHtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcblxuICAubWF0LW1lbnUtcGFuZWwge1xuICAgIEBpbmNsdWRlIF9tYXQtdGhlbWUtb3ZlcnJpZGFibGUtZWxldmF0aW9uKDQsICR0aGVtZSk7XG4gICAgYmFja2dyb3VuZDogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLCAnY2FyZCcpO1xuICB9XG5cbiAgLm1hdC1tZW51LWl0ZW0ge1xuICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsICd0ZXh0Jyk7XG5cbiAgICAmW2Rpc2FibGVkXSB7XG4gICAgICAmLCAmOjphZnRlciB7XG4gICAgICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsICdkaXNhYmxlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5tYXQtbWVudS1pdGVtIC5tYXQtaWNvbi1uby1jb2xvcixcbiAgLm1hdC1tZW51LWl0ZW0tc3VibWVudS10cmlnZ2VyOjphZnRlciB7XG4gICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgJ2ljb24nKTtcbiAgfVxuXG4gIC5tYXQtbWVudS1pdGVtOmhvdmVyLFxuICAubWF0LW1lbnUtaXRlbS5jZGstcHJvZ3JhbS1mb2N1c2VkLFxuICAubWF0LW1lbnUtaXRlbS5jZGsta2V5Ym9hcmQtZm9jdXNlZCxcbiAgLm1hdC1tZW51LWl0ZW0taGlnaGxpZ2h0ZWQge1xuICAgICY6bm90KFtkaXNhYmxlZF0pIHtcbiAgICAgIGJhY2tncm91bmQ6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgJ2hvdmVyJyk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBtYXQtbWVudS10eXBvZ3JhcGh5KCRjb25maWcpIHtcbiAgLm1hdC1tZW51LWl0ZW0ge1xuICAgIGZvbnQ6IHtcbiAgICAgIGZhbWlseTogbWF0LWZvbnQtZmFtaWx5KCRjb25maWcsIGJvZHktMSk7XG4gICAgICBzaXplOiBtYXQtZm9udC1zaXplKCRjb25maWcsIGJvZHktMSk7XG4gICAgICB3ZWlnaHQ6IG1hdC1mb250LXdlaWdodCgkY29uZmlnLCBib2R5LTEpO1xuICAgIH1cbiAgfVxufVxuXG5cblxuXG5cblxuQG1peGluIG1hdC1wYWdpbmF0b3ItdGhlbWUoJHRoZW1lKSB7XG4gICRmb3JlZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgZm9yZWdyb3VuZCk7XG4gICRiYWNrZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgYmFja2dyb3VuZCk7XG5cbiAgLm1hdC1wYWdpbmF0b3Ige1xuICAgIGJhY2tncm91bmQ6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgJ2NhcmQnKTtcbiAgfVxuXG4gIC5tYXQtcGFnaW5hdG9yLFxuICAubWF0LXBhZ2luYXRvci1wYWdlLXNpemUgLm1hdC1zZWxlY3QtdHJpZ2dlciB7XG4gICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgc2Vjb25kYXJ5LXRleHQpO1xuICB9XG5cbiAgLm1hdC1wYWdpbmF0b3ItZGVjcmVtZW50LFxuICAubWF0LXBhZ2luYXRvci1pbmNyZW1lbnQge1xuICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCBtYXQtY29sb3IoJGZvcmVncm91bmQsICdpY29uJyk7XG4gICAgYm9yZGVyLXJpZ2h0OiAycHggc29saWQgbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCAnaWNvbicpO1xuICB9XG5cbiAgLm1hdC1wYWdpbmF0b3ItZmlyc3QsXG4gIC5tYXQtcGFnaW5hdG9yLWxhc3Qge1xuICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCBtYXQtY29sb3IoJGZvcmVncm91bmQsICdpY29uJyk7XG4gIH1cblxuICAubWF0LWljb24tYnV0dG9uW2Rpc2FibGVkXSB7XG4gICAgLm1hdC1wYWdpbmF0b3ItZGVjcmVtZW50LFxuICAgIC5tYXQtcGFnaW5hdG9yLWluY3JlbWVudCxcbiAgICAubWF0LXBhZ2luYXRvci1maXJzdCxcbiAgICAubWF0LXBhZ2luYXRvci1sYXN0IHtcbiAgICAgIGJvcmRlci1jb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCAnZGlzYWJsZWQnKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG1hdC1wYWdpbmF0b3ItdHlwb2dyYXBoeSgkY29uZmlnKSB7XG4gIC5tYXQtcGFnaW5hdG9yLFxuICAubWF0LXBhZ2luYXRvci1wYWdlLXNpemUgLm1hdC1zZWxlY3QtdHJpZ2dlciB7XG4gICAgZm9udDoge1xuICAgICAgZmFtaWx5OiBtYXQtZm9udC1mYW1pbHkoJGNvbmZpZywgY2FwdGlvbik7XG4gICAgICBzaXplOiBtYXQtZm9udC1zaXplKCRjb25maWcsIGNhcHRpb24pO1xuICAgIH1cbiAgfVxufVxuXG5cblxuXG5cbkBtaXhpbiBtYXQtcHJvZ3Jlc3MtYmFyLXRoZW1lKCR0aGVtZSkge1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcblxuICAubWF0LXByb2dyZXNzLWJhci1iYWNrZ3JvdW5kIHtcbiAgICBmaWxsOiBtYXQtY29sb3IoJHByaW1hcnksIGxpZ2h0ZXIpO1xuICB9XG5cbiAgLm1hdC1wcm9ncmVzcy1iYXItYnVmZmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBtYXQtY29sb3IoJHByaW1hcnksIGxpZ2h0ZXIpO1xuICB9XG5cbiAgLm1hdC1wcm9ncmVzcy1iYXItZmlsbDo6YWZ0ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkcHJpbWFyeSk7XG4gIH1cblxuICAubWF0LXByb2dyZXNzLWJhci5tYXQtYWNjZW50IHtcbiAgICAubWF0LXByb2dyZXNzLWJhci1iYWNrZ3JvdW5kIHtcbiAgICAgIGZpbGw6IG1hdC1jb2xvcigkYWNjZW50LCBsaWdodGVyKTtcbiAgICB9XG5cbiAgICAubWF0LXByb2dyZXNzLWJhci1idWZmZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRhY2NlbnQsIGxpZ2h0ZXIpO1xuICAgIH1cblxuICAgIC5tYXQtcHJvZ3Jlc3MtYmFyLWZpbGw6OmFmdGVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkYWNjZW50KTtcbiAgICB9XG4gIH1cblxuICAubWF0LXByb2dyZXNzLWJhci5tYXQtd2FybiB7XG4gICAgLm1hdC1wcm9ncmVzcy1iYXItYmFja2dyb3VuZCB7XG4gICAgICBmaWxsOiBtYXQtY29sb3IoJHdhcm4sIGxpZ2h0ZXIpO1xuICAgIH1cblxuICAgIC5tYXQtcHJvZ3Jlc3MtYmFyLWJ1ZmZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBtYXQtY29sb3IoJHdhcm4sIGxpZ2h0ZXIpO1xuICAgIH1cblxuICAgIC5tYXQtcHJvZ3Jlc3MtYmFyLWZpbGw6OmFmdGVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkd2Fybik7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBtYXQtcHJvZ3Jlc3MtYmFyLXR5cG9ncmFwaHkoJGNvbmZpZykgeyB9XG5cblxuXG5cblxuXG5AbWl4aW4gbWF0LXByb2dyZXNzLXNwaW5uZXItdGhlbWUoJHRoZW1lKSB7XG4gICRwcmltYXJ5OiBtYXAtZ2V0KCR0aGVtZSwgcHJpbWFyeSk7XG4gICRhY2NlbnQ6IG1hcC1nZXQoJHRoZW1lLCBhY2NlbnQpO1xuICAkd2FybjogbWFwLWdldCgkdGhlbWUsIHdhcm4pO1xuXG4gIC5tYXQtcHJvZ3Jlc3Mtc3Bpbm5lciwgLm1hdC1zcGlubmVyIHtcbiAgICBjaXJjbGUge1xuICAgICAgc3Ryb2tlOiBtYXQtY29sb3IoJHByaW1hcnkpO1xuICAgIH1cblxuICAgICYubWF0LWFjY2VudCBjaXJjbGUge1xuICAgICAgc3Ryb2tlOiBtYXQtY29sb3IoJGFjY2VudCk7XG4gICAgfVxuXG4gICAgJi5tYXQtd2FybiBjaXJjbGUge1xuICAgICAgc3Ryb2tlOiBtYXQtY29sb3IoJHdhcm4pO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gbWF0LXByb2dyZXNzLXNwaW5uZXItdHlwb2dyYXBoeSgkY29uZmlnKSB7IH1cblxuXG5cblxuXG5AbWl4aW4gX21hdC1yYWRpby1jb2xvcigkcGFsZXR0ZSkge1xuICAmLm1hdC1yYWRpby1jaGVja2VkIC5tYXQtcmFkaW8tb3V0ZXItY2lyY2xlIHtcbiAgICBib3JkZXItY29sb3I6IG1hdC1jb2xvcigkcGFsZXR0ZSk7XG4gIH1cblxuICAubWF0LXJhZGlvLWlubmVyLWNpcmNsZSxcbiAgLm1hdC1yYWRpby1yaXBwbGUgLm1hdC1yaXBwbGUtZWxlbWVudDpub3QoLm1hdC1yYWRpby1wZXJzaXN0ZW50LXJpcHBsZSksXG4gICYubWF0LXJhZGlvLWNoZWNrZWQgLm1hdC1yYWRpby1wZXJzaXN0ZW50LXJpcHBsZSxcbiAgJjphY3RpdmUgLm1hdC1yYWRpby1wZXJzaXN0ZW50LXJpcHBsZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRwYWxldHRlKTtcbiAgfVxufVxuXG5AbWl4aW4gbWF0LXJhZGlvLXRoZW1lKCR0aGVtZSkge1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcblxuICAubWF0LXJhZGlvLW91dGVyLWNpcmNsZSB7XG4gICAgYm9yZGVyLWNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHNlY29uZGFyeS10ZXh0KTtcbiAgfVxuXG4gIC5tYXQtcmFkaW8tYnV0dG9uIHtcbiAgICAmLm1hdC1wcmltYXJ5IHtcbiAgICAgIEBpbmNsdWRlIF9tYXQtcmFkaW8tY29sb3IoJHByaW1hcnkpO1xuICAgIH1cblxuICAgICYubWF0LWFjY2VudCB7XG4gICAgICBAaW5jbHVkZSBfbWF0LXJhZGlvLWNvbG9yKCRhY2NlbnQpO1xuICAgIH1cblxuICAgICYubWF0LXdhcm4ge1xuICAgICAgQGluY2x1ZGUgX21hdC1yYWRpby1jb2xvcigkd2Fybik7XG4gICAgfVxuXG4gICAgLy8gVGhpcyBuZWVkcyBleHRyYSBzcGVjaWZpY2l0eSwgYmVjYXVzZSB0aGUgY2xhc3NlcyBhYm92ZSBhcmUgY29tYmluZWRcbiAgICAvLyAoZS5nLiBgLm1hdC1yYWRpby1idXR0b24ubWF0LWFjY2VudGApIHdoaWNoIGluY3JlYXNlcyB0aGVpciBzcGVjaWZpY2l0eSBhIGxvdC5cbiAgICAvLyBUT0RPOiBjb25zaWRlciBtYWtpbmcgdGhlIHNlbGVjdG9ycyBpbnRvIGRlc2NlbmRhbnRzIChgLm1hdC1wcmltYXJ5IC5tYXQtcmFkaW8tYnV0dG9uYCkuXG4gICAgJi5tYXQtcmFkaW8tZGlzYWJsZWQge1xuICAgICAgJi5tYXQtcmFkaW8tY2hlY2tlZCAubWF0LXJhZGlvLW91dGVyLWNpcmNsZSxcbiAgICAgIC5tYXQtcmFkaW8tb3V0ZXItY2lyY2xlIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpc2FibGVkKTtcbiAgICAgIH1cblxuICAgICAgLm1hdC1yYWRpby1yaXBwbGUgLm1hdC1yaXBwbGUtZWxlbWVudCxcbiAgICAgIC5tYXQtcmFkaW8taW5uZXItY2lyY2xlIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBkaXNhYmxlZCk7XG4gICAgICB9XG5cbiAgICAgIC5tYXQtcmFkaW8tbGFiZWwtY29udGVudCB7XG4gICAgICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpc2FibGVkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTd2l0Y2ggdGhpcyB0byBhIHNvbGlkIGNvbG9yIHNpbmNlIHdlJ3JlIHVzaW5nIGBvcGFjaXR5YFxuICAgIC8vIHRvIGNvbnRyb2wgaG93IG9wYXF1ZSB0aGUgcmlwcGxlIHNob3VsZCBiZS5cbiAgICAubWF0LXJpcHBsZS1lbGVtZW50IHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IG1hcF9nZXQoJGZvcmVncm91bmQsIGJhc2UpO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gbWF0LXJhZGlvLXR5cG9ncmFwaHkoJGNvbmZpZykge1xuICAubWF0LXJhZGlvLWJ1dHRvbiB7XG4gICAgZm9udC1mYW1pbHk6IG1hdC1mb250LWZhbWlseSgkY29uZmlnKTtcbiAgfVxufVxuXG5cblxuXG5cblxuXG5cbkBtaXhpbiBtYXQtc2VsZWN0LXRoZW1lKCR0aGVtZSkge1xuICAkZm9yZWdyb3VuZDogbWFwLWdldCgkdGhlbWUsIGZvcmVncm91bmQpO1xuICAkYmFja2dyb3VuZDogbWFwLWdldCgkdGhlbWUsIGJhY2tncm91bmQpO1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcblxuICAubWF0LXNlbGVjdC12YWx1ZSB7XG4gICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgdGV4dCk7XG4gIH1cblxuICAubWF0LXNlbGVjdC1wbGFjZWhvbGRlciB7XG4gICAgY29sb3I6IF9tYXQtY29udHJvbC1wbGFjZWhvbGRlci1jb2xvcigkdGhlbWUpO1xuICB9XG5cbiAgLm1hdC1zZWxlY3QtZGlzYWJsZWQgLm1hdC1zZWxlY3QtdmFsdWUge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpc2FibGVkLXRleHQpO1xuICB9XG5cbiAgLm1hdC1zZWxlY3QtYXJyb3cge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHNlY29uZGFyeS10ZXh0KTtcbiAgfVxuXG4gIC5tYXQtc2VsZWN0LXBhbmVsIHtcbiAgICBiYWNrZ3JvdW5kOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIGNhcmQpO1xuICAgIEBpbmNsdWRlIF9tYXQtdGhlbWUtb3ZlcnJpZGFibGUtZWxldmF0aW9uKDQsICR0aGVtZSk7XG5cbiAgICAubWF0LW9wdGlvbi5tYXQtc2VsZWN0ZWQ6bm90KC5tYXQtb3B0aW9uLW11bHRpcGxlKSB7XG4gICAgICBiYWNrZ3JvdW5kOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIGhvdmVyLCAwLjEyKTtcbiAgICB9XG4gIH1cblxuICAubWF0LWZvcm0tZmllbGQge1xuICAgICYubWF0LWZvY3VzZWQge1xuICAgICAgJi5tYXQtcHJpbWFyeSAubWF0LXNlbGVjdC1hcnJvdyB7XG4gICAgICAgIGNvbG9yOiBtYXQtY29sb3IoJHByaW1hcnkpO1xuICAgICAgfVxuXG4gICAgICAmLm1hdC1hY2NlbnQgLm1hdC1zZWxlY3QtYXJyb3cge1xuICAgICAgICBjb2xvcjogbWF0LWNvbG9yKCRhY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAmLm1hdC13YXJuIC5tYXQtc2VsZWN0LWFycm93IHtcbiAgICAgICAgY29sb3I6IG1hdC1jb2xvcigkd2Fybik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLm1hdC1zZWxlY3QubWF0LXNlbGVjdC1pbnZhbGlkIC5tYXQtc2VsZWN0LWFycm93IHtcbiAgICAgIGNvbG9yOiBtYXQtY29sb3IoJHdhcm4pO1xuICAgIH1cblxuICAgIC5tYXQtc2VsZWN0Lm1hdC1zZWxlY3QtZGlzYWJsZWQgLm1hdC1zZWxlY3QtYXJyb3cge1xuICAgICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgZGlzYWJsZWQtdGV4dCk7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBtYXQtc2VsZWN0LXR5cG9ncmFwaHkoJGNvbmZpZykge1xuICAvLyBUaGUgdW5pdC1sZXNzIGxpbmUtaGVpZ2h0IGZyb20gdGhlIGZvbnQgY29uZmlnLlxuICAkbGluZS1oZWlnaHQ6IG1hdC1saW5lLWhlaWdodCgkY29uZmlnLCBpbnB1dCk7XG5cbiAgLm1hdC1zZWxlY3Qge1xuICAgIGZvbnQtZmFtaWx5OiBtYXQtZm9udC1mYW1pbHkoJGNvbmZpZyk7XG4gIH1cblxuICAubWF0LXNlbGVjdC10cmlnZ2VyIHtcbiAgICBoZWlnaHQ6ICRsaW5lLWhlaWdodCAqIDFlbTtcbiAgfVxufVxuXG5cblxuXG5cblxuQG1peGluIG1hdC1zaWRlbmF2LXRoZW1lKCR0aGVtZSkge1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcblxuICAkZHJhd2VyLWJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgZGlhbG9nKTtcbiAgJGRyYXdlci1jb250YWluZXItYmFja2dyb3VuZC1jb2xvcjogIG1hdC1jb2xvcigkYmFja2dyb3VuZCwgYmFja2dyb3VuZCk7XG4gICRkcmF3ZXItcHVzaC1iYWNrZ3JvdW5kLWNvbG9yOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIGRpYWxvZyk7XG4gICRkcmF3ZXItc2lkZS1ib3JkZXI6IHNvbGlkIDFweCBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpdmlkZXIpO1xuXG4gIC5tYXQtZHJhd2VyLWNvbnRhaW5lciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJGRyYXdlci1jb250YWluZXItYmFja2dyb3VuZC1jb2xvcjtcbiAgICBjb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCB0ZXh0KTtcbiAgfVxuXG4gIC5tYXQtZHJhd2VyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkZHJhd2VyLWJhY2tncm91bmQtY29sb3I7XG4gICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgdGV4dCk7XG5cbiAgICAmLm1hdC1kcmF3ZXItcHVzaCB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkZHJhd2VyLXB1c2gtYmFja2dyb3VuZC1jb2xvcjtcbiAgICB9XG5cbiAgICAmOm5vdCgubWF0LWRyYXdlci1zaWRlKSB7XG4gICAgICAvLyBUaGUgZWxldmF0aW9uIG9mIHotMTYgaXMgbm90ZWQgaW4gdGhlIGRlc2lnbiBzcGVjaWZpY2F0aW9ucy5cbiAgICAgIC8vIFNlZSBodHRwczovL21hdGVyaWFsLmlvL2Rlc2lnbi9jb21wb25lbnRzL25hdmlnYXRpb24tZHJhd2VyLmh0bWxcbiAgICAgIEBpbmNsdWRlIF9tYXQtdGhlbWUtZWxldmF0aW9uKDE2LCAkdGhlbWUpO1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtZHJhd2VyLXNpZGUge1xuICAgIGJvcmRlci1yaWdodDogJGRyYXdlci1zaWRlLWJvcmRlcjtcblxuICAgICYubWF0LWRyYXdlci1lbmQge1xuICAgICAgYm9yZGVyLWxlZnQ6ICRkcmF3ZXItc2lkZS1ib3JkZXI7XG4gICAgICBib3JkZXItcmlnaHQ6IG5vbmU7XG4gICAgfVxuICB9XG5cbiAgW2Rpcj0ncnRsJ10gLm1hdC1kcmF3ZXItc2lkZSB7XG4gICAgYm9yZGVyLWxlZnQ6ICRkcmF3ZXItc2lkZS1ib3JkZXI7XG4gICAgYm9yZGVyLXJpZ2h0OiBub25lO1xuXG4gICAgJi5tYXQtZHJhd2VyLWVuZCB7XG4gICAgICBib3JkZXItbGVmdDogbm9uZTtcbiAgICAgIGJvcmRlci1yaWdodDogJGRyYXdlci1zaWRlLWJvcmRlcjtcbiAgICB9XG4gIH1cblxuICAubWF0LWRyYXdlci1iYWNrZHJvcC5tYXQtZHJhd2VyLXNob3duIHtcbiAgICAkb3BhY2l0eTogMC42O1xuICAgICRiYWNrZHJvcC1jb2xvcjogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLCBjYXJkLCAkb3BhY2l0eSk7XG5cbiAgICBAaWYgKHR5cGUtb2YoJGJhY2tkcm9wLWNvbG9yKSA9PSBjb2xvcikge1xuICAgICAgLy8gV2UgdXNlIGludmVydCgpIGhlcmUgdG8gaGF2ZSB0aGUgZGFya2VuIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIGV4cGVjdGVkIHRvIGJlIHVzZWQuIElmIHRoZVxuICAgICAgLy8gYmFja2dyb3VuZCBpcyBsaWdodCwgd2UgdXNlIGEgZGFyayBiYWNrZHJvcC4gSWYgdGhlIGJhY2tncm91bmQgaXMgZGFyayxcbiAgICAgIC8vIHdlIHVzZSBhIGxpZ2h0IGJhY2tkcm9wLlxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogaW52ZXJ0KCRiYWNrZHJvcC1jb2xvcik7XG4gICAgfVxuICAgIEBlbHNlIHtcbiAgICAgIC8vIElmIHdlIGNvdWxkbid0IHJlc29sdmUgdGhlIGJhY2tkcm9wIGNvbG9yIHRvIGEgY29sb3IgdmFsdWUsIGZhbGwgYmFjayB0byB1c2luZ1xuICAgICAgLy8gYG9wYWNpdHlgIHRvIG1ha2UgaXQgb3BhcXVlIHNpbmNlIGl0cyBlbmQgdmFsdWUgY291bGQgYmUgYSBzb2xpZCBjb2xvci5cbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICRiYWNrZHJvcC1jb2xvcjtcbiAgICAgIG9wYWNpdHk6ICRvcGFjaXR5O1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gbWF0LXNpZGVuYXYtdHlwb2dyYXBoeSgkY29uZmlnKSB7IH1cblxuXG5cblxuXG5cbkBtaXhpbiBfbWF0LXNsaWRlLXRvZ2dsZS1jaGVja2VkKCRwYWxldHRlLCAkdGh1bWItY2hlY2tlZC1odWUpIHtcbiAgJi5tYXQtY2hlY2tlZCB7XG4gICAgLm1hdC1zbGlkZS10b2dnbGUtdGh1bWIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRwYWxldHRlLCAkdGh1bWItY2hlY2tlZC1odWUpO1xuICAgIH1cblxuICAgIC5tYXQtc2xpZGUtdG9nZ2xlLWJhciB7XG4gICAgICAvLyBPcGFjaXR5IGlzIGRldGVybWluZWQgZnJvbSB0aGUgc3BlY3MgZm9yIHRoZSBzZWxlY3Rpb24gY29udHJvbHMuXG4gICAgICAvLyBTZWU6IGh0dHBzOi8vbWF0ZXJpYWwuaW8vZGVzaWduL2NvbXBvbmVudHMvc2VsZWN0aW9uLWNvbnRyb2xzLmh0bWwjc3BlY3NcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkcGFsZXR0ZSwgJHRodW1iLWNoZWNrZWQtaHVlLCAwLjU0KTtcbiAgICB9XG5cbiAgICAubWF0LXJpcHBsZS1lbGVtZW50IHtcbiAgICAgIC8vIFNldCBubyBvcGFjaXR5IGZvciB0aGUgcmlwcGxlcyBiZWNhdXNlIHRoZSByaXBwbGUgb3BhY2l0eSB3aWxsIGJlIGFkanVzdGVkIGR5bmFtaWNhbGx5XG4gICAgICAvLyBiYXNlZCBvbiB0aGUgdHlwZSBvZiBpbnRlcmFjdGlvbiB3aXRoIHRoZSBzbGlkZS10b2dnbGUgKGUuZy4gZm9yIGhvdmVyLCBmb2N1cylcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkcGFsZXR0ZSwgJHRodW1iLWNoZWNrZWQtaHVlKTtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIG1hdC1zbGlkZS10b2dnbGUtdGhlbWUoJHRoZW1lKSB7XG4gICRpcy1kYXJrOiBtYXBfZ2V0KCR0aGVtZSwgaXMtZGFyayk7XG4gICRwcmltYXJ5OiBtYXAtZ2V0KCR0aGVtZSwgcHJpbWFyeSk7XG4gICRhY2NlbnQ6IG1hcC1nZXQoJHRoZW1lLCBhY2NlbnQpO1xuICAkd2FybjogbWFwLWdldCgkdGhlbWUsIHdhcm4pO1xuICAkYmFja2dyb3VuZDogbWFwLWdldCgkdGhlbWUsIGJhY2tncm91bmQpO1xuICAkZm9yZWdyb3VuZDogbWFwLWdldCgkdGhlbWUsIGZvcmVncm91bmQpO1xuXG4gIC8vIENvbG9yIGh1ZXMgYXJlIGJhc2VkIG9uIHRoZSBzcGVjcyB3aGljaCBicmllZmx5IHNob3cgdGhlIGh1ZXMgdGhhdCBhcmUgYXBwbGllZCB0byBhIHN3aXRjaC5cbiAgLy8gVGhlIDIwMTggc3BlY3Mgbm8gbG9uZ2VyIGRlc2NyaWJlIGhvdyBkYXJrIHN3aXRjaGVzIHNob3VsZCBsb29rIGxpa2UuIER1ZSB0byB0aGUgbGFjayBvZlxuICAvLyBpbmZvcm1hdGlvbiBmb3IgZGFyayB0aGVtZWQgc3dpdGNoZXMsIHdlIHBhcnRpYWxseSBrZWVwIHRoZSBvbGQgYmVoYXZpb3IgdGhhdCBpcyBiYXNlZCBvblxuICAvLyB0aGUgcHJldmlvdXMgc3BlY2lmaWNhdGlvbnMuIEZvciB0aGUgY2hlY2tlZCBjb2xvciB3ZSBhbHdheXMgdXNlIHRoZSBgZGVmYXVsdGAgaHVlIGJlY2F1c2VcbiAgLy8gdGhhdCBmb2xsb3dzIE1EQyBhbmQgYWxzbyBtYWtlcyBpdCBlYXNpZXIgZm9yIHBlb3BsZSB0byBjcmVhdGUgYSBjdXN0b20gdGhlbWUgd2l0aG91dCBuZWVkaW5nXG4gIC8vIHRvIHNwZWNpZnkgZWFjaCBodWUgaW5kaXZpZHVhbGx5LlxuICAkdGh1bWItdW5jaGVja2VkLWh1ZTogaWYoJGlzLWRhcmssIDQwMCwgNTApO1xuICAkdGh1bWItY2hlY2tlZC1odWU6IGRlZmF1bHQ7XG5cbiAgJGJhci11bmNoZWNrZWQtY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgZGlzYWJsZWQpO1xuICAkcmlwcGxlLXVuY2hlY2tlZC1jb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBiYXNlKTtcblxuICAubWF0LXNsaWRlLXRvZ2dsZSB7XG4gICAgQGluY2x1ZGUgX21hdC1zbGlkZS10b2dnbGUtY2hlY2tlZCgkYWNjZW50LCAkdGh1bWItY2hlY2tlZC1odWUpO1xuXG4gICAgJi5tYXQtcHJpbWFyeSB7XG4gICAgICBAaW5jbHVkZSBfbWF0LXNsaWRlLXRvZ2dsZS1jaGVja2VkKCRwcmltYXJ5LCAkdGh1bWItY2hlY2tlZC1odWUpO1xuICAgIH1cblxuICAgICYubWF0LXdhcm4ge1xuICAgICAgQGluY2x1ZGUgX21hdC1zbGlkZS10b2dnbGUtY2hlY2tlZCgkd2FybiwgJHRodW1iLWNoZWNrZWQtaHVlKTtcbiAgICB9XG5cbiAgICAmOm5vdCgubWF0LWNoZWNrZWQpIC5tYXQtcmlwcGxlLWVsZW1lbnQge1xuICAgICAgLy8gU2V0IG5vIG9wYWNpdHkgZm9yIHRoZSByaXBwbGVzIGJlY2F1c2UgdGhlIHJpcHBsZSBvcGFjaXR5IHdpbGwgYmUgYWRqdXN0ZWQgZHluYW1pY2FsbHlcbiAgICAgIC8vIGJhc2VkIG9uIHRoZSB0eXBlIG9mIGludGVyYWN0aW9uIHdpdGggdGhlIHNsaWRlLXRvZ2dsZSAoZS5nLiBmb3IgaG92ZXIsIGZvY3VzKVxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHJpcHBsZS11bmNoZWNrZWQtY29sb3I7XG4gICAgfVxuICB9XG5cbiAgLm1hdC1zbGlkZS10b2dnbGUtdGh1bWIge1xuICAgIEBpbmNsdWRlIF9tYXQtdGhlbWUtZWxldmF0aW9uKDEsICR0aGVtZSk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRtYXQtZ3JleSwgJHRodW1iLXVuY2hlY2tlZC1odWUpO1xuICB9XG5cbiAgLm1hdC1zbGlkZS10b2dnbGUtYmFyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkYmFyLXVuY2hlY2tlZC1jb2xvcjtcbiAgfVxufVxuXG5AbWl4aW4gbWF0LXNsaWRlLXRvZ2dsZS10eXBvZ3JhcGh5KCRjb25maWcpIHtcbiAgLm1hdC1zbGlkZS10b2dnbGUtY29udGVudCB7XG4gICAgZm9udC1mYW1pbHk6IG1hdC1mb250LWZhbWlseSgkY29uZmlnKTtcbiAgfVxufVxuXG5cblxuXG5cbkBtaXhpbiBfbWF0LXNsaWRlci1pbm5lci1jb250ZW50LXRoZW1lKCRwYWxldHRlKSB7XG4gIC5tYXQtc2xpZGVyLXRyYWNrLWZpbGwsXG4gIC5tYXQtc2xpZGVyLXRodW1iLFxuICAubWF0LXNsaWRlci10aHVtYi1sYWJlbCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRwYWxldHRlKTtcbiAgfVxuXG4gIC5tYXQtc2xpZGVyLXRodW1iLWxhYmVsLXRleHQge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJHBhbGV0dGUsIGRlZmF1bHQtY29udHJhc3QpO1xuICB9XG59XG5cbkBtaXhpbiBtYXQtc2xpZGVyLXRoZW1lKCR0aGVtZSkge1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcblxuICAkbWF0LXNsaWRlci1vZmYtY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgc2xpZGVyLW9mZik7XG4gICRtYXQtc2xpZGVyLW9mZi1mb2N1c2VkLWNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHNsaWRlci1vZmYtYWN0aXZlKTtcbiAgJG1hdC1zbGlkZXItZGlzYWJsZWQtY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgc2xpZGVyLW9mZik7XG4gICRtYXQtc2xpZGVyLWxhYmVsZWQtbWluLXZhbHVlLXRodW1iLWNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHNsaWRlci1taW4pO1xuICAkbWF0LXNsaWRlci1sYWJlbGVkLW1pbi12YWx1ZS10aHVtYi1sYWJlbC1jb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBzbGlkZXItb2ZmKTtcbiAgJG1hdC1zbGlkZXItZm9jdXMtcmluZy1jb2xvcjogbWF0LWNvbG9yKCRhY2NlbnQsIGRlZmF1bHQsIDAuMik7XG4gICRtYXQtc2xpZGVyLWZvY3VzLXJpbmctbWluLXZhbHVlLWNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGJhc2UsIDAuMTIpO1xuICAkbWF0LXNsaWRlci10aWNrLWNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGJhc2UsIDAuNyk7XG4gICRtYXQtc2xpZGVyLXRpY2stc2l6ZTogMnB4O1xuXG4gIC5tYXQtc2xpZGVyLXRyYWNrLWJhY2tncm91bmQge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICRtYXQtc2xpZGVyLW9mZi1jb2xvcjtcbiAgfVxuXG4gIC5tYXQtcHJpbWFyeSB7XG4gICAgQGluY2x1ZGUgX21hdC1zbGlkZXItaW5uZXItY29udGVudC10aGVtZSgkcHJpbWFyeSk7XG4gIH1cblxuICAubWF0LWFjY2VudCB7XG4gICAgQGluY2x1ZGUgX21hdC1zbGlkZXItaW5uZXItY29udGVudC10aGVtZSgkYWNjZW50KTtcbiAgfVxuXG4gIC5tYXQtd2FybiB7XG4gICAgQGluY2x1ZGUgX21hdC1zbGlkZXItaW5uZXItY29udGVudC10aGVtZSgkd2Fybik7XG4gIH1cblxuICAubWF0LXNsaWRlci1mb2N1cy1yaW5nIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkbWF0LXNsaWRlci1mb2N1cy1yaW5nLWNvbG9yO1xuICB9XG5cbiAgLm1hdC1zbGlkZXI6aG92ZXIsXG4gIC5jZGstZm9jdXNlZCB7XG4gICAgLm1hdC1zbGlkZXItdHJhY2stYmFja2dyb3VuZCB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkbWF0LXNsaWRlci1vZmYtZm9jdXNlZC1jb2xvcjtcbiAgICB9XG4gIH1cblxuICAubWF0LXNsaWRlci1kaXNhYmxlZCB7XG4gICAgLm1hdC1zbGlkZXItdHJhY2stYmFja2dyb3VuZCxcbiAgICAubWF0LXNsaWRlci10cmFjay1maWxsLFxuICAgIC5tYXQtc2xpZGVyLXRodW1iIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICRtYXQtc2xpZGVyLWRpc2FibGVkLWNvbG9yO1xuICAgIH1cblxuICAgICY6aG92ZXIge1xuICAgICAgLm1hdC1zbGlkZXItdHJhY2stYmFja2dyb3VuZCB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICRtYXQtc2xpZGVyLWRpc2FibGVkLWNvbG9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5tYXQtc2xpZGVyLW1pbi12YWx1ZSB7XG4gICAgLm1hdC1zbGlkZXItZm9jdXMtcmluZyB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkbWF0LXNsaWRlci1mb2N1cy1yaW5nLW1pbi12YWx1ZS1jb2xvcjtcbiAgICB9XG5cbiAgICAmLm1hdC1zbGlkZXItdGh1bWItbGFiZWwtc2hvd2luZyB7XG4gICAgICAubWF0LXNsaWRlci10aHVtYixcbiAgICAgIC5tYXQtc2xpZGVyLXRodW1iLWxhYmVsIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJG1hdC1zbGlkZXItbGFiZWxlZC1taW4tdmFsdWUtdGh1bWItY29sb3I7XG4gICAgICB9XG5cbiAgICAgICYuY2RrLWZvY3VzZWQge1xuICAgICAgICAubWF0LXNsaWRlci10aHVtYixcbiAgICAgICAgLm1hdC1zbGlkZXItdGh1bWItbGFiZWwge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICRtYXQtc2xpZGVyLWxhYmVsZWQtbWluLXZhbHVlLXRodW1iLWxhYmVsLWNvbG9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJjpub3QoLm1hdC1zbGlkZXItdGh1bWItbGFiZWwtc2hvd2luZykge1xuICAgICAgLm1hdC1zbGlkZXItdGh1bWIge1xuICAgICAgICBib3JkZXItY29sb3I6ICRtYXQtc2xpZGVyLW9mZi1jb2xvcjtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICB9XG5cbiAgICAgICY6aG92ZXIsXG4gICAgICAmLmNkay1mb2N1c2VkIHtcbiAgICAgICAgLm1hdC1zbGlkZXItdGh1bWIge1xuICAgICAgICAgIGJvcmRlci1jb2xvcjogJG1hdC1zbGlkZXItb2ZmLWZvY3VzZWQtY29sb3I7XG4gICAgICAgIH1cblxuICAgICAgICAmLm1hdC1zbGlkZXItZGlzYWJsZWQgLm1hdC1zbGlkZXItdGh1bWIge1xuICAgICAgICAgIGJvcmRlci1jb2xvcjogJG1hdC1zbGlkZXItZGlzYWJsZWQtY29sb3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAubWF0LXNsaWRlci1oYXMtdGlja3MgLm1hdC1zbGlkZXItd3JhcHBlcjo6YWZ0ZXIge1xuICAgIGJvcmRlci1jb2xvcjogJG1hdC1zbGlkZXItdGljay1jb2xvcjtcbiAgfVxuXG4gIC5tYXQtc2xpZGVyLWhvcml6b250YWwgLm1hdC1zbGlkZXItdGlja3Mge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IHJlcGVhdGluZy1saW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICRtYXQtc2xpZGVyLXRpY2stY29sb3IsXG4gICAgICAgICRtYXQtc2xpZGVyLXRpY2stY29sb3IgJG1hdC1zbGlkZXItdGljay1zaXplLCB0cmFuc3BhcmVudCAwLCB0cmFuc3BhcmVudCk7XG4gICAgLy8gRmlyZWZveCBkb2Vzbid0IGRyYXcgdGhlIGdyYWRpZW50IGNvcnJlY3RseSB3aXRoICd0byByaWdodCdcbiAgICAvLyAoc2VlIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTEzMTQzMTkpLlxuICAgIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otcmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudCgwLjAwMDFkZWcsICRtYXQtc2xpZGVyLXRpY2stY29sb3IsXG4gICAgICAgICRtYXQtc2xpZGVyLXRpY2stY29sb3IgJG1hdC1zbGlkZXItdGljay1zaXplLCB0cmFuc3BhcmVudCAwLCB0cmFuc3BhcmVudCk7XG4gIH1cblxuICAubWF0LXNsaWRlci12ZXJ0aWNhbCAubWF0LXNsaWRlci10aWNrcyB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogcmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICRtYXQtc2xpZGVyLXRpY2stY29sb3IsXG4gICAgICAgICRtYXQtc2xpZGVyLXRpY2stY29sb3IgJG1hdC1zbGlkZXItdGljay1zaXplLCB0cmFuc3BhcmVudCAwLCB0cmFuc3BhcmVudCk7XG4gIH1cbn1cblxuQG1peGluIG1hdC1zbGlkZXItdHlwb2dyYXBoeSgkY29uZmlnKSB7XG4gIC5tYXQtc2xpZGVyLXRodW1iLWxhYmVsLXRleHQge1xuICAgIGZvbnQ6IHtcbiAgICAgIGZhbWlseTogbWF0LWZvbnQtZmFtaWx5KCRjb25maWcpO1xuICAgICAgc2l6ZTogbWF0LWZvbnQtc2l6ZSgkY29uZmlnLCBjYXB0aW9uKTtcbiAgICAgIHdlaWdodDogbWF0LWZvbnQtd2VpZ2h0KCRjb25maWcsIGJvZHktMik7XG4gICAgfVxuICB9XG59XG5cblxuXG5cblxuQG1peGluIG1hdC1zdGVwcGVyLXRoZW1lKCR0aGVtZSkge1xuICAkZm9yZWdyb3VuZDogbWFwLWdldCgkdGhlbWUsIGZvcmVncm91bmQpO1xuICAkYmFja2dyb3VuZDogbWFwLWdldCgkdGhlbWUsIGJhY2tncm91bmQpO1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkd2FybjogbWFwLWdldCgkdGhlbWUsIHdhcm4pO1xuXG4gIC5tYXQtc3RlcC1oZWFkZXIge1xuICAgICYuY2RrLWtleWJvYXJkLWZvY3VzZWQsXG4gICAgJi5jZGstcHJvZ3JhbS1mb2N1c2VkLFxuICAgICY6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLCBob3Zlcik7XG4gICAgfVxuXG4gICAgLy8gT24gdG91Y2ggZGV2aWNlcyB0aGUgOmhvdmVyIHN0YXRlIHdpbGwgbGluZ2VyIG9uIHRoZSBlbGVtZW50IGFmdGVyIGEgdGFwLlxuICAgIC8vIFJlc2V0IGl0IHZpYSBgQG1lZGlhYCBhZnRlciB0aGUgZGVjbGFyYXRpb24sIGJlY2F1c2UgdGhlIG1lZGlhIHF1ZXJ5IGlzbid0XG4gICAgLy8gc3VwcG9ydGVkIGJ5IGFsbCBicm93c2VycyB5ZXQuXG4gICAgQG1lZGlhIChob3Zlcjogbm9uZSkge1xuICAgICAgJjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLm1hdC1zdGVwLWxhYmVsLFxuICAgIC5tYXQtc3RlcC1vcHRpb25hbCB7XG4gICAgICAvLyBUT0RPKGpvc2VwaHBlcnJvdHQpOiBVcGRhdGUgdG8gdXNpbmcgYSBjb3JyZWN0ZWQgZGlzYWJsZWQtdGV4dCBjb250cmFzdFxuICAgICAgLy8gaW5zdGVhZCBvZiBzZWNvbmRhcnktdGV4dC5cbiAgICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHNlY29uZGFyeS10ZXh0KTtcbiAgICB9XG5cbiAgICAubWF0LXN0ZXAtaWNvbiB7XG4gICAgICAvLyBUT0RPKGpvc2VwaHBlcnJvdHQpOiBVcGRhdGUgdG8gdXNpbmcgYSBjb3JyZWN0ZWQgZGlzYWJsZWQtdGV4dCBjb250cmFzdFxuICAgICAgLy8gaW5zdGVhZCBvZiBzZWNvbmRhcnktdGV4dC5cbiAgICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgc2Vjb25kYXJ5LXRleHQpO1xuICAgICAgY29sb3I6IG1hdC1jb2xvcigkcHJpbWFyeSwgZGVmYXVsdC1jb250cmFzdCk7XG4gICAgfVxuXG4gICAgLm1hdC1zdGVwLWljb24tc2VsZWN0ZWQsXG4gICAgLm1hdC1zdGVwLWljb24tc3RhdGUtZG9uZSxcbiAgICAubWF0LXN0ZXAtaWNvbi1zdGF0ZS1lZGl0IHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkcHJpbWFyeSk7XG4gICAgICBjb2xvcjogbWF0LWNvbG9yKCRwcmltYXJ5LCBkZWZhdWx0LWNvbnRyYXN0KTtcbiAgICB9XG5cbiAgICAubWF0LXN0ZXAtaWNvbi1zdGF0ZS1lcnJvciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgIGNvbG9yOiBtYXQtY29sb3IoJHdhcm4pO1xuICAgIH1cblxuICAgIC5tYXQtc3RlcC1sYWJlbC5tYXQtc3RlcC1sYWJlbC1hY3RpdmUge1xuICAgICAgY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgdGV4dCk7XG4gICAgfVxuXG4gICAgLm1hdC1zdGVwLWxhYmVsLm1hdC1zdGVwLWxhYmVsLWVycm9yIHtcbiAgICAgIGNvbG9yOiBtYXQtY29sb3IoJHdhcm4pO1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtc3RlcHBlci1ob3Jpem9udGFsLCAubWF0LXN0ZXBwZXItdmVydGljYWwge1xuICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgY2FyZCk7XG4gIH1cblxuICAubWF0LXN0ZXBwZXItdmVydGljYWwtbGluZTo6YmVmb3JlIHtcbiAgICBib3JkZXItbGVmdC1jb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBkaXZpZGVyKTtcbiAgfVxuXG4gIC5tYXQtaG9yaXpvbnRhbC1zdGVwcGVyLWhlYWRlcjo6YmVmb3JlLFxuICAubWF0LWhvcml6b250YWwtc3RlcHBlci1oZWFkZXI6OmFmdGVyLFxuICAubWF0LXN0ZXBwZXItaG9yaXpvbnRhbC1saW5lIHtcbiAgICBib3JkZXItdG9wLWNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpdmlkZXIpO1xuICB9XG59XG5cbkBtaXhpbiBtYXQtc3RlcHBlci10eXBvZ3JhcGh5KCRjb25maWcpIHtcbiAgLm1hdC1zdGVwcGVyLXZlcnRpY2FsLCAubWF0LXN0ZXBwZXItaG9yaXpvbnRhbCB7XG4gICAgZm9udC1mYW1pbHk6IG1hdC1mb250LWZhbWlseSgkY29uZmlnKTtcbiAgfVxuXG4gIC5tYXQtc3RlcC1sYWJlbCB7XG4gICAgZm9udDoge1xuICAgICAgc2l6ZTogbWF0LWZvbnQtc2l6ZSgkY29uZmlnLCBib2R5LTEpO1xuICAgICAgd2VpZ2h0OiBtYXQtZm9udC13ZWlnaHQoJGNvbmZpZywgYm9keS0xKTtcbiAgICB9O1xuICB9XG5cbiAgLm1hdC1zdGVwLXN1Yi1sYWJlbC1lcnJvciB7XG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgfVxuXG4gIC5tYXQtc3RlcC1sYWJlbC1lcnJvciB7XG4gICAgZm9udC1zaXplOiBtYXQtZm9udC1zaXplKCRjb25maWcsIGJvZHktMik7XG4gIH1cblxuICAubWF0LXN0ZXAtbGFiZWwtc2VsZWN0ZWQge1xuICAgIGZvbnQ6IHtcbiAgICAgIHNpemU6IG1hdC1mb250LXNpemUoJGNvbmZpZywgYm9keS0yKTtcbiAgICAgIHdlaWdodDogbWF0LWZvbnQtd2VpZ2h0KCRjb25maWcsIGJvZHktMik7XG4gICAgfTtcbiAgfVxufVxuXG5AbWl4aW4gbWF0LXNvcnQtdGhlbWUoJHRoZW1lKSB7XG4gICRiYWNrZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgYmFja2dyb3VuZCk7XG4gICRmb3JlZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgZm9yZWdyb3VuZCk7XG5cbiAgLm1hdC1zb3J0LWhlYWRlci1hcnJvdyB7XG4gICAgJHRhYmxlLWJhY2tncm91bmQ6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgJ2NhcmQnKTtcbiAgICAkdGV4dC1jb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBzZWNvbmRhcnktdGV4dCk7XG5cbiAgICAvLyBCZWNhdXNlIHRoZSBhcnJvdyBpcyBtYWRlIHVwIG9mIG11bHRpcGxlIGVsZW1lbnRzIHRoYXQgYXJlIHN0YWNrZWQgb24gdG9wIG9mIGVhY2ggb3RoZXIsXG4gICAgLy8gd2UgY2FuJ3QgdXNlIHRoZSBzZW1pLXRyYXNwYXJlbnQgY29sb3IgZnJvbSB0aGUgdGhlbWUgZGlyZWN0bHkuIElmIHRoZSB2YWx1ZSBpcyBhIGNvbG9yXG4gICAgLy8gKnR5cGUqLCB3ZSBjb252ZXJ0IGl0IGludG8gYSBzb2xpZCBjb2xvciBieSB0YWtpbmcgdGhlIG9wYWNpdHkgZnJvbSB0aGUgcmdiYSB2YWx1ZSBhbmRcbiAgICAvLyB1c2luZyB0aGUgdmFsdWUgdG8gZGV0ZXJtaW5lIHRoZSBwZXJjZW50YWdlIG9mIHRoZSBiYWNrZ3JvdW5kIHRvIHB1dCBpbnRvIGZvcmVncm91bmRcbiAgICAvLyB3aGVuIG1peGluZyB0aGUgY29sb3JzIHRvZ2V0aGVyLiBPdGhlcndpc2UsIGlmIGl0IHJlc29sdmVzIHRvIHNvbWV0aGluZyBkaWZmZXJlbnRcbiAgICAvLyAoZS5nLiBpdCByZXNvbHZlcyB0byBhIENTUyB2YXJpYWJsZSksIHdlIHVzZSB0aGUgY29sb3IgZGlyZWN0bHkuXG4gICAgQGlmICh0eXBlLW9mKCR0YWJsZS1iYWNrZ3JvdW5kKSA9PSBjb2xvciBhbmQgdHlwZS1vZigkdGV4dC1jb2xvcikgPT0gY29sb3IpIHtcbiAgICAgICR0ZXh0LW9wYWNpdHk6IG9wYWNpdHkoJHRleHQtY29sb3IpO1xuICAgICAgY29sb3I6IG1peCgkdGFibGUtYmFja2dyb3VuZCwgcmdiYSgkdGV4dC1jb2xvciwgMSksICgxIC0gJHRleHQtb3BhY2l0eSkgKiAxMDAlKTtcbiAgICB9XG4gICAgQGVsc2Uge1xuICAgICAgY29sb3I6ICR0ZXh0LWNvbG9yO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gbWF0LXNvcnQtdHlwb2dyYXBoeSgkY29uZmlnKSB7IH1cblxuXG5cblxuXG5AbWl4aW4gbWF0LXRhYnMtdGhlbWUoJHRoZW1lKSB7XG4gICRwcmltYXJ5OiBtYXAtZ2V0KCR0aGVtZSwgcHJpbWFyeSk7XG4gICRhY2NlbnQ6IG1hcC1nZXQoJHRoZW1lLCBhY2NlbnQpO1xuICAkd2FybjogbWFwLWdldCgkdGhlbWUsIHdhcm4pO1xuICAkYmFja2dyb3VuZDogbWFwLWdldCgkdGhlbWUsIGJhY2tncm91bmQpO1xuICAkZm9yZWdyb3VuZDogbWFwLWdldCgkdGhlbWUsIGZvcmVncm91bmQpO1xuICAkaGVhZGVyLWJvcmRlcjogMXB4IHNvbGlkIG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgZGl2aWRlcik7XG5cbiAgLm1hdC10YWItbmF2LWJhcixcbiAgLm1hdC10YWItaGVhZGVyIHtcbiAgICBib3JkZXItYm90dG9tOiAkaGVhZGVyLWJvcmRlcjtcbiAgfVxuXG4gIC5tYXQtdGFiLWdyb3VwLWludmVydGVkLWhlYWRlciB7XG4gICAgLm1hdC10YWItbmF2LWJhcixcbiAgICAubWF0LXRhYi1oZWFkZXIge1xuICAgICAgYm9yZGVyLXRvcDogJGhlYWRlci1ib3JkZXI7XG4gICAgICBib3JkZXItYm90dG9tOiBub25lO1xuICAgIH1cbiAgfVxuXG4gIC5tYXQtdGFiLWxhYmVsLCAubWF0LXRhYi1saW5rIHtcbiAgICBjb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCB0ZXh0KTtcblxuICAgICYubWF0LXRhYi1kaXNhYmxlZCB7XG4gICAgICBjb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBkaXNhYmxlZC10ZXh0KTtcbiAgICB9XG4gIH1cblxuICAubWF0LXRhYi1oZWFkZXItcGFnaW5hdGlvbi1jaGV2cm9uIHtcbiAgICBib3JkZXItY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgdGV4dCk7XG4gIH1cblxuICAubWF0LXRhYi1oZWFkZXItcGFnaW5hdGlvbi1kaXNhYmxlZCAubWF0LXRhYi1oZWFkZXItcGFnaW5hdGlvbi1jaGV2cm9uIHtcbiAgICBib3JkZXItY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgZGlzYWJsZWQtdGV4dCk7XG4gIH1cblxuICAvLyBSZW1vdmUgaGVhZGVyIGJvcmRlciB3aGVuIHRoZXJlIGlzIGEgYmFja2dyb3VuZCBjb2xvclxuICAubWF0LXRhYi1ncm91cFtjbGFzcyo9J21hdC1iYWNrZ3JvdW5kLSddIC5tYXQtdGFiLWhlYWRlcixcbiAgLm1hdC10YWItbmF2LWJhcltjbGFzcyo9J21hdC1iYWNrZ3JvdW5kLSddIHtcbiAgICBib3JkZXItYm90dG9tOiBub25lO1xuICAgIGJvcmRlci10b3A6IG5vbmU7XG4gIH1cblxuICAubWF0LXRhYi1ncm91cCwgLm1hdC10YWItbmF2LWJhciB7XG4gICAgJHRoZW1lLWNvbG9yczogKFxuICAgICAgcHJpbWFyeTogJHByaW1hcnksXG4gICAgICBhY2NlbnQ6ICRhY2NlbnQsXG4gICAgICB3YXJuOiAkd2FyblxuICAgICk7XG5cbiAgICBAZWFjaCAkbmFtZSwgJGNvbG9yIGluICR0aGVtZS1jb2xvcnMge1xuICAgICAgLy8gU2V0IHRoZSBmb3JlZ3JvdW5kIGNvbG9yIG9mIHRoZSB0YWJzXG4gICAgICAmLm1hdC0jeyRuYW1lfSB7XG4gICAgICAgIEBpbmNsdWRlIF9tYXQtdGFiLWxhYmVsLWZvY3VzKCRjb2xvcik7XG4gICAgICAgIEBpbmNsdWRlIF9tYXQtaW5rLWJhcigkY29sb3IpO1xuXG4gICAgICAgIC8vIE92ZXJyaWRlIGluayBiYXIgd2hlbiBiYWNrZ3JvdW5kIGNvbG9yIGlzIHRoZSBzYW1lXG4gICAgICAgICYubWF0LWJhY2tncm91bmQtI3skbmFtZX0ge1xuICAgICAgICAgIEBpbmNsdWRlIF9tYXQtaW5rLWJhcigkY29sb3IsIGRlZmF1bHQtY29udHJhc3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgQGVhY2ggJG5hbWUsICRjb2xvciBpbiAkdGhlbWUtY29sb3JzIHtcbiAgICAgIC8vIFNldCBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSB0YWJzIGFuZCBvdmVycmlkZSBmb2N1cyBjb2xvclxuICAgICAgJi5tYXQtYmFja2dyb3VuZC0jeyRuYW1lfSB7XG4gICAgICAgIEBpbmNsdWRlIF9tYXQtdGFiLWxhYmVsLWZvY3VzKCRjb2xvcik7XG4gICAgICAgIEBpbmNsdWRlIF9tYXQtdGFicy1iYWNrZ3JvdW5kKCRjb2xvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBfbWF0LWluay1iYXIoJGNvbG9yLCAkaHVlOiBkZWZhdWx0KSB7XG4gIC5tYXQtaW5rLWJhciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRjb2xvciwgJGh1ZSk7XG4gIH1cbn1cblxuQG1peGluIF9tYXQtdGFiLWxhYmVsLWZvY3VzKCR0YWItZm9jdXMtY29sb3IpIHtcbiAgLm1hdC10YWItbGFiZWwsXG4gIC5tYXQtdGFiLWxpbmsge1xuICAgICYuY2RrLWtleWJvYXJkLWZvY3VzZWQsXG4gICAgJi5jZGstcHJvZ3JhbS1mb2N1c2VkIHtcbiAgICAgICY6bm90KC5tYXQtdGFiLWRpc2FibGVkKSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IG1hdC1jb2xvcigkdGFiLWZvY3VzLWNvbG9yLCBsaWdodGVyLCAwLjMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gX21hdC10YWJzLWJhY2tncm91bmQoJGJhY2tncm91bmQtY29sb3IpIHtcbiAgLy8gU2V0IGJhY2tncm91bmQgY29sb3IgZm9yIHRoZSB0YWIgZ3JvdXBcbiAgLm1hdC10YWItaGVhZGVyLCAubWF0LXRhYi1saW5rcyB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLWNvbG9yKTtcbiAgfVxuXG4gIC8vIFNldCBsYWJlbHMgdG8gY29udHJhc3QgYWdhaW5zdCBiYWNrZ3JvdW5kXG4gIC5tYXQtdGFiLWxhYmVsLCAubWF0LXRhYi1saW5rIHtcbiAgICBjb2xvcjogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLWNvbG9yLCBkZWZhdWx0LWNvbnRyYXN0KTtcblxuICAgICYubWF0LXRhYi1kaXNhYmxlZCB7XG4gICAgICBjb2xvcjogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLWNvbG9yLCBkZWZhdWx0LWNvbnRyYXN0LCAwLjQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNldCBwYWdpbmF0aW9uIGNoZXZyb25zIHRvIGNvbnRyYXN0IGJhY2tncm91bmRcbiAgLm1hdC10YWItaGVhZGVyLXBhZ2luYXRpb24tY2hldnJvbiB7XG4gICAgYm9yZGVyLWNvbG9yOiBtYXQtY29sb3IoJGJhY2tncm91bmQtY29sb3IsIGRlZmF1bHQtY29udHJhc3QpO1xuICB9XG5cbiAgLm1hdC10YWItaGVhZGVyLXBhZ2luYXRpb24tZGlzYWJsZWQgLm1hdC10YWItaGVhZGVyLXBhZ2luYXRpb24tY2hldnJvbiB7XG4gICAgYm9yZGVyLWNvbG9yOiBtYXQtY29sb3IoJGJhY2tncm91bmQtY29sb3IsIGRlZmF1bHQtY29udHJhc3QsIDAuNCk7XG4gIH1cblxuICAvLyBTZXQgcmlwcGxlcyBjb2xvciB0byBiZSB0aGUgY29udHJhc3QgY29sb3Igb2YgdGhlIG5ldyBiYWNrZ3JvdW5kLiBPdGhlcndpc2UgdGhlIHJpcHBsZVxuICAvLyBjb2xvciB3aWxsIGJlIGJhc2VkIG9uIHRoZSBhcHAgYmFja2dyb3VuZCBjb2xvci5cbiAgLm1hdC1yaXBwbGUtZWxlbWVudCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLWNvbG9yLCBkZWZhdWx0LWNvbnRyYXN0LCAwLjEyKTtcbiAgfVxufVxuXG5AbWl4aW4gbWF0LXRhYnMtdHlwb2dyYXBoeSgkY29uZmlnKSB7XG4gIC5tYXQtdGFiLWdyb3VwIHtcbiAgICBmb250LWZhbWlseTogbWF0LWZvbnQtZmFtaWx5KCRjb25maWcpO1xuICB9XG5cbiAgLm1hdC10YWItbGFiZWwsIC5tYXQtdGFiLWxpbmsge1xuICAgIGZvbnQ6IHtcbiAgICAgIGZhbWlseTogbWF0LWZvbnQtZmFtaWx5KCRjb25maWcsIGJ1dHRvbik7XG4gICAgICBzaXplOiBtYXQtZm9udC1zaXplKCRjb25maWcsIGJ1dHRvbik7XG4gICAgICB3ZWlnaHQ6IG1hdC1mb250LXdlaWdodCgkY29uZmlnLCBidXR0b24pO1xuICAgIH1cbiAgfVxufVxuXG5cblxuXG5cblxuQG1peGluIF9tYXQtdG9vbGJhci1jb2xvcigkcGFsZXR0ZSkge1xuICBiYWNrZ3JvdW5kOiBtYXQtY29sb3IoJHBhbGV0dGUpO1xuICBjb2xvcjogbWF0LWNvbG9yKCRwYWxldHRlLCBkZWZhdWx0LWNvbnRyYXN0KTtcbn1cblxuQG1peGluIF9tYXQtdG9vbGJhci1mb3JtLWZpZWxkLW92ZXJyaWRlcyB7XG4gIC5tYXQtZm9ybS1maWVsZC11bmRlcmxpbmUsXG4gIC5tYXQtZm9ybS1maWVsZC1yaXBwbGUsXG4gIC5tYXQtZm9jdXNlZCAubWF0LWZvcm0tZmllbGQtcmlwcGxlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBjdXJyZW50Q29sb3I7XG4gIH1cblxuICAubWF0LWZvcm0tZmllbGQtbGFiZWwsXG4gIC5tYXQtZm9jdXNlZCAubWF0LWZvcm0tZmllbGQtbGFiZWwsXG4gIC5tYXQtc2VsZWN0LXZhbHVlLFxuICAubWF0LXNlbGVjdC1hcnJvdyxcbiAgLm1hdC1mb3JtLWZpZWxkLm1hdC1mb2N1c2VkIC5tYXQtc2VsZWN0LWFycm93IHtcbiAgICBjb2xvcjogaW5oZXJpdDtcbiAgfVxuXG4gIC5tYXQtaW5wdXQtZWxlbWVudCB7XG4gICAgY2FyZXQtY29sb3I6IGN1cnJlbnRDb2xvcjtcbiAgfVxufVxuXG5AbWl4aW4gbWF0LXRvb2xiYXItdGhlbWUoJHRoZW1lKSB7XG4gICRwcmltYXJ5OiBtYXAtZ2V0KCR0aGVtZSwgcHJpbWFyeSk7XG4gICRhY2NlbnQ6IG1hcC1nZXQoJHRoZW1lLCBhY2NlbnQpO1xuICAkd2FybjogbWFwLWdldCgkdGhlbWUsIHdhcm4pO1xuICAkYmFja2dyb3VuZDogbWFwLWdldCgkdGhlbWUsIGJhY2tncm91bmQpO1xuICAkZm9yZWdyb3VuZDogbWFwLWdldCgkdGhlbWUsIGZvcmVncm91bmQpO1xuXG4gIC5tYXQtdG9vbGJhciB7XG4gICAgYmFja2dyb3VuZDogbWF0LWNvbG9yKCRiYWNrZ3JvdW5kLCBhcHAtYmFyKTtcbiAgICBjb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCB0ZXh0KTtcblxuICAgICYubWF0LXByaW1hcnkge1xuICAgICAgQGluY2x1ZGUgX21hdC10b29sYmFyLWNvbG9yKCRwcmltYXJ5KTtcbiAgICB9XG5cbiAgICAmLm1hdC1hY2NlbnQge1xuICAgICAgQGluY2x1ZGUgX21hdC10b29sYmFyLWNvbG9yKCRhY2NlbnQpO1xuICAgIH1cblxuICAgICYubWF0LXdhcm4ge1xuICAgICAgQGluY2x1ZGUgX21hdC10b29sYmFyLWNvbG9yKCR3YXJuKTtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBfbWF0LXRvb2xiYXItZm9ybS1maWVsZC1vdmVycmlkZXM7XG4gIH1cbn1cblxuQG1peGluIG1hdC10b29sYmFyLXR5cG9ncmFwaHkoJGNvbmZpZykge1xuICAubWF0LXRvb2xiYXIsXG4gIC5tYXQtdG9vbGJhciBoMSxcbiAgLm1hdC10b29sYmFyIGgyLFxuICAubWF0LXRvb2xiYXIgaDMsXG4gIC5tYXQtdG9vbGJhciBoNCxcbiAgLm1hdC10b29sYmFyIGg1LFxuICAubWF0LXRvb2xiYXIgaDYge1xuICAgIEBpbmNsdWRlIG1hdC10eXBvZ3JhcGh5LWxldmVsLXRvLXN0eWxlcygkY29uZmlnLCB0aXRsZSk7XG4gICAgbWFyZ2luOiAwO1xuICB9XG59XG5cblxuXG5cblxuJG1hdC10b29sdGlwLXRhcmdldC1oZWlnaHQ6IDIycHg7XG4kbWF0LXRvb2x0aXAtZm9udC1zaXplOiAxMHB4O1xuJG1hdC10b29sdGlwLXZlcnRpY2FsLXBhZGRpbmc6ICgkbWF0LXRvb2x0aXAtdGFyZ2V0LWhlaWdodCAtICRtYXQtdG9vbHRpcC1mb250LXNpemUpIC8gMjtcblxuJG1hdC10b29sdGlwLWhhbmRzZXQtdGFyZ2V0LWhlaWdodDogMzBweDtcbiRtYXQtdG9vbHRpcC1oYW5kc2V0LWZvbnQtc2l6ZTogMTRweDtcbiRtYXQtdG9vbHRpcC1oYW5kc2V0LXZlcnRpY2FsLXBhZGRpbmc6XG4gICAgKCRtYXQtdG9vbHRpcC1oYW5kc2V0LXRhcmdldC1oZWlnaHQgLSAkbWF0LXRvb2x0aXAtaGFuZHNldC1mb250LXNpemUpIC8gMjtcblxuQG1peGluIG1hdC10b29sdGlwLXRoZW1lKCR0aGVtZSkge1xuICAubWF0LXRvb2x0aXAge1xuICAgIGJhY2tncm91bmQ6IG1hdC1jb2xvcigkbWF0LWdyZXksIDcwMCwgMC45KTtcbiAgfVxufVxuXG5AbWl4aW4gbWF0LXRvb2x0aXAtdHlwb2dyYXBoeSgkY29uZmlnKSB7XG4gIC5tYXQtdG9vbHRpcCB7XG4gICAgZm9udC1mYW1pbHk6IG1hdC1mb250LWZhbWlseSgkY29uZmlnKTtcbiAgICBmb250LXNpemU6ICRtYXQtdG9vbHRpcC1mb250LXNpemU7XG4gICAgcGFkZGluZy10b3A6ICRtYXQtdG9vbHRpcC12ZXJ0aWNhbC1wYWRkaW5nO1xuICAgIHBhZGRpbmctYm90dG9tOiAkbWF0LXRvb2x0aXAtdmVydGljYWwtcGFkZGluZztcbiAgfVxuXG4gIC5tYXQtdG9vbHRpcC1oYW5kc2V0IHtcbiAgICBmb250LXNpemU6ICRtYXQtdG9vbHRpcC1oYW5kc2V0LWZvbnQtc2l6ZTtcbiAgICBwYWRkaW5nLXRvcDogJG1hdC10b29sdGlwLWhhbmRzZXQtdmVydGljYWwtcGFkZGluZztcbiAgICBwYWRkaW5nLWJvdHRvbTogJG1hdC10b29sdGlwLWhhbmRzZXQtdmVydGljYWwtcGFkZGluZztcbiAgfVxufVxuXG5cblxuXG5cbkBtaXhpbiBtYXQtc25hY2stYmFyLXRoZW1lKCR0aGVtZSkge1xuICAkaXMtZGFyay10aGVtZTogbWFwLWdldCgkdGhlbWUsIGlzLWRhcmspO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcblxuICAubWF0LXNuYWNrLWJhci1jb250YWluZXIge1xuICAgIC8vIFVzZSB0aGUgcHJpbWFyeSB0ZXh0IG9uIHRoZSBkYXJrIHRoZW1lLCBldmVuIHRob3VnaCB0aGUgbGlnaHRlciBvbmUgdXNlc1xuICAgIC8vIGEgc2Vjb25kYXJ5LCBiZWNhdXNlIHRoZSBjb250cmFzdCBvbiB0aGUgbGlnaHQgcHJpbWFyeSB0ZXh0IGlzIHBvb3IuXG4gICAgY29sb3I6IGlmKCRpcy1kYXJrLXRoZW1lLCAkZGFyay1wcmltYXJ5LXRleHQsICRsaWdodC1zZWNvbmRhcnktdGV4dCk7XG4gICAgYmFja2dyb3VuZDogaWYoJGlzLWRhcmstdGhlbWUsIG1hcC1nZXQoJG1hdC1ncmV5LCA1MCksICMzMjMyMzIpO1xuXG4gICAgQGluY2x1ZGUgX21hdC10aGVtZS1lbGV2YXRpb24oNiwgJHRoZW1lKTtcbiAgfVxuXG4gIC5tYXQtc2ltcGxlLXNuYWNrYmFyLWFjdGlvbiB7XG4gICAgY29sb3I6IGlmKCRpcy1kYXJrLXRoZW1lLCBpbmhlcml0LCBtYXQtY29sb3IoJGFjY2VudCkpO1xuICB9XG59XG5cbkBtaXhpbiBtYXQtc25hY2stYmFyLXR5cG9ncmFwaHkoJGNvbmZpZykge1xuICAubWF0LXNpbXBsZS1zbmFja2JhciB7XG4gICAgZm9udDoge1xuICAgICAgZmFtaWx5OiBtYXQtZm9udC1mYW1pbHkoJGNvbmZpZywgYm9keS0xKTtcbiAgICAgIHNpemU6IG1hdC1mb250LXNpemUoJGNvbmZpZywgYm9keS0xKTtcbiAgICB9XG4gIH1cblxuICAubWF0LXNpbXBsZS1zbmFja2Jhci1hY3Rpb24ge1xuICAgIGxpbmUtaGVpZ2h0OiAxO1xuICAgIGZvbnQ6IHtcbiAgICAgIGZhbWlseTogaW5oZXJpdDtcbiAgICAgIHNpemU6IGluaGVyaXQ7XG4gICAgICB3ZWlnaHQ6IG1hdC1mb250LXdlaWdodCgkY29uZmlnLCBidXR0b24pO1xuICAgIH1cbiAgfVxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbi8vIFRoZW1lIHN0eWxlcyB0aGF0IG9ubHkgYXBwbHkgdG8gdGhlIGZpbGwgYXBwZWFyYW5jZSBvZiB0aGUgZm9ybS1maWVsZC5cblxuQG1peGluIG1hdC1mb3JtLWZpZWxkLWZpbGwtdGhlbWUoJHRoZW1lKSB7XG4gICRmb3JlZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgZm9yZWdyb3VuZCk7XG4gICRpcy1kYXJrLXRoZW1lOiBtYXAtZ2V0KCR0aGVtZSwgaXMtZGFyayk7XG5cbiAgJGZpbGwtYmFja2dyb3VuZDogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBiYXNlLCBpZigkaXMtZGFyay10aGVtZSwgMC4xLCAwLjA0KSk7XG4gICRmaWxsLWRpc2FibGVkLWJhY2tncm91bmQ6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgYmFzZSwgaWYoJGlzLWRhcmstdGhlbWUsIDAuMDUsIDAuMDIpKTtcbiAgJHVuZGVybGluZS1jb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBkaXZpZGVyLCBpZigkaXMtZGFyay10aGVtZSwgMC41LCAwLjQyKSk7XG4gICRsYWJlbC1kaXNhYmxlZC1jb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBkaXNhYmxlZC10ZXh0KTtcblxuICAubWF0LWZvcm0tZmllbGQtYXBwZWFyYW5jZS1maWxsIHtcbiAgICAubWF0LWZvcm0tZmllbGQtZmxleCB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkZmlsbC1iYWNrZ3JvdW5kO1xuICAgIH1cblxuICAgICYubWF0LWZvcm0tZmllbGQtZGlzYWJsZWQgLm1hdC1mb3JtLWZpZWxkLWZsZXgge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJGZpbGwtZGlzYWJsZWQtYmFja2dyb3VuZDtcbiAgICB9XG5cbiAgICAubWF0LWZvcm0tZmllbGQtdW5kZXJsaW5lOjpiZWZvcmUge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHVuZGVybGluZS1jb2xvcjtcbiAgICB9XG5cbiAgICAmLm1hdC1mb3JtLWZpZWxkLWRpc2FibGVkIHtcbiAgICAgIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgICAgIGNvbG9yOiAkbGFiZWwtZGlzYWJsZWQtY29sb3I7XG4gICAgICB9XG5cbiAgICAgIC5tYXQtZm9ybS1maWVsZC11bmRlcmxpbmU6OmJlZm9yZSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyBVc2VkIHRvIG1ha2UgaW5zdGFuY2VzIG9mIHRoZSBfbWF0LWZvcm0tZmllbGQtbGFiZWwtZmxvYXRpbmcgbWl4aW4gbmVnbGlnaWJseSBkaWZmZXJlbnQsXG4vLyBhbmQgcHJldmVudCBHb29nbGUncyBDU1MgT3B0aW1pemVyIGZyb20gY29sbGFwc2luZyB0aGUgZGVjbGFyYXRpb25zLiBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIHNvbWVcbi8vIG9mIHRoZSBzZWxlY3RvcnMgY29udGFpbiBwc2V1ZG8tY2xhc3NlcyBub3QgcmVjb2duaXplZCBpbiBhbGwgYnJvd3NlcnMuIElmIGEgYnJvd3NlciBlbmNvdW50ZXJzXG4vLyBhbiB1bmtub3duIHBzZXVkby1jbGFzcyBpdCB3aWxsIGRpc2NhcmQgdGhlIGVudGlyZSBydWxlIHNldC5cbiRtYXQtZm9ybS1maWVsZC1maWxsLWRlZHVwZTogMDtcblxuLy8gQXBwbGllcyBhIGZsb2F0aW5nIGxhYmVsIGFib3ZlIHRoZSBmb3JtIGZpZWxkIGNvbnRyb2wgaXRzZWxmLlxuQG1peGluIF9tYXQtZm9ybS1maWVsZC1maWxsLWxhYmVsLWZsb2F0aW5nKCRmb250LXNjYWxlLCAkaW5maXgtcGFkZGluZywgJGluZml4LW1hcmdpbi10b3ApIHtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0kaW5maXgtbWFyZ2luLXRvcCAtICRpbmZpeC1wYWRkaW5nICsgJG1hdC1mb3JtLWZpZWxkLWZpbGwtZGVkdXBlKVxuICAgICAgICAgICAgIHNjYWxlKCRmb250LXNjYWxlKTtcbiAgd2lkdGg6IDEwMCUgLyAkZm9udC1zY2FsZSArICRtYXQtZm9ybS1maWVsZC1maWxsLWRlZHVwZTtcblxuICAkbWF0LWZvcm0tZmllbGQtZmlsbC1kZWR1cGU6ICRtYXQtZm9ybS1maWVsZC1maWxsLWRlZHVwZSArIDAuMDAwMDEgIWdsb2JhbDtcbn1cblxuQG1peGluIG1hdC1mb3JtLWZpZWxkLWZpbGwtdHlwb2dyYXBoeSgkY29uZmlnKSB7XG4gIC8vIFRoZSB1bml0LWxlc3MgbGluZS1oZWlnaHQgZnJvbSB0aGUgZm9udCBjb25maWcuXG4gICRsaW5lLWhlaWdodDogbWF0LWxpbmUtaGVpZ2h0KCRjb25maWcsIGlucHV0KTtcbiAgLy8gVGhlIGFtb3VudCB0byBzY2FsZSB0aGUgZm9udCBmb3IgdGhlIGZsb2F0aW5nIGxhYmVsIGFuZCBzdWJzY3JpcHQuXG4gICRzdWJzY3JpcHQtZm9udC1zY2FsZTogMC43NTtcbiAgLy8gVGhlIHBhZGRpbmcgb24gdG9wIG9mIHRoZSBpbmZpeC5cbiAgJGluZml4LXBhZGRpbmctdG9wOiAwLjI1ZW07XG4gIC8vIFRoZSBwYWRkaW5nIGJlbG93IHRoZSBpbmZpeC5cbiAgJGluZml4LXBhZGRpbmctYm90dG9tOiAwLjc1ZW07XG4gIC8vIFRoZSBtYXJnaW4gYXBwbGllZCB0byB0aGUgZm9ybS1maWVsZC1pbmZpeCB0byByZXNlcnZlIHNwYWNlIGZvciB0aGUgZmxvYXRpbmcgbGFiZWwuXG4gICRpbmZpeC1tYXJnaW4tdG9wOiAxZW0gKiAkbGluZS1oZWlnaHQgKiAkc3Vic2NyaXB0LWZvbnQtc2NhbGU7XG4gIC8vIFRoZSBhbW91bnQgd2Ugb2Zmc2V0IHRoZSBsYWJlbCBmcm9tIHRoZSBpbnB1dCB0ZXh0IGluIHRoZSBmaWxsIGFwcGVhcmFuY2UuXG4gICRmaWxsLWFwcGVhcmFuY2UtbGFiZWwtb2Zmc2V0OiAtMC41ZW07XG5cbiAgLm1hdC1mb3JtLWZpZWxkLWFwcGVhcmFuY2UtZmlsbCB7XG4gICAgLm1hdC1mb3JtLWZpZWxkLWluZml4IHtcbiAgICAgIHBhZGRpbmc6ICRpbmZpeC1wYWRkaW5nLXRvcCAwICRpbmZpeC1wYWRkaW5nLWJvdHRvbSAwO1xuICAgIH1cblxuICAgIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgICB0b3A6ICRpbmZpeC1tYXJnaW4tdG9wICsgJGluZml4LXBhZGRpbmctdG9wO1xuICAgICAgbWFyZ2luLXRvcDogJGZpbGwtYXBwZWFyYW5jZS1sYWJlbC1vZmZzZXQ7XG4gICAgfVxuXG4gICAgJi5tYXQtZm9ybS1maWVsZC1jYW4tZmxvYXQge1xuICAgICAgJi5tYXQtZm9ybS1maWVsZC1zaG91bGQtZmxvYXQgLm1hdC1mb3JtLWZpZWxkLWxhYmVsLFxuICAgICAgLm1hdC1pbnB1dC1zZXJ2ZXI6Zm9jdXMgKyAubWF0LWZvcm0tZmllbGQtbGFiZWwtd3JhcHBlciAubWF0LWZvcm0tZmllbGQtbGFiZWwge1xuICAgICAgICBAaW5jbHVkZSBfbWF0LWZvcm0tZmllbGQtZmlsbC1sYWJlbC1mbG9hdGluZyhcbiAgICAgICAgICAgICAgICAkc3Vic2NyaXB0LWZvbnQtc2NhbGUsICRpbmZpeC1wYWRkaW5nLXRvcCArICRmaWxsLWFwcGVhcmFuY2UtbGFiZWwtb2Zmc2V0LFxuICAgICAgICAgICAgICAgICRpbmZpeC1tYXJnaW4tdG9wKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2VydmVyLXNpZGUgcmVuZGVyZWQgbWF0SW5wdXQgd2l0aCBhIGxhYmVsIGF0dHJpYnV0ZSBidXQgbGFiZWwgbm90IHNob3duXG4gICAgICAvLyAodXNlZCBhcyBhIHB1cmUgQ1NTIHN0YW5kLWluIGZvciBtYXQtZm9ybS1maWVsZC1zaG91bGQtZmxvYXQpLlxuICAgICAgLm1hdC1pbnB1dC1zZXJ2ZXJbbGFiZWxdOm5vdCg6bGFiZWwtc2hvd24pICsgLm1hdC1mb3JtLWZpZWxkLWxhYmVsLXdyYXBwZXJcbiAgICAgIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgICAgIEBpbmNsdWRlIF9tYXQtZm9ybS1maWVsZC1maWxsLWxhYmVsLWZsb2F0aW5nKFxuICAgICAgICAgICAgICAgICRzdWJzY3JpcHQtZm9udC1zY2FsZSwgJGluZml4LXBhZGRpbmctdG9wICsgJGZpbGwtYXBwZWFyYW5jZS1sYWJlbC1vZmZzZXQsXG4gICAgICAgICAgICAgICAgJGluZml4LW1hcmdpbi10b3ApO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5cblxuXG5cblxuXG4vLyBUaGVtZSBzdHlsZXMgdGhhdCBvbmx5IGFwcGx5IHRvIHRoZSBsZWdhY3kgYXBwZWFyYW5jZSBvZiB0aGUgZm9ybS1maWVsZC5cblxuQG1peGluIG1hdC1mb3JtLWZpZWxkLWxlZ2FjeS10aGVtZSgkdGhlbWUpIHtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcbiAgJGlzLWRhcmstdGhlbWU6IG1hcC1nZXQoJHRoZW1lLCBpcy1kYXJrKTtcblxuICAkbGFiZWwtY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgc2Vjb25kYXJ5LXRleHQpO1xuICAkdW5kZXJsaW5lLWNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpdmlkZXIsIGlmKCRpcy1kYXJrLXRoZW1lLCAwLjcsIDAuNDIpKTtcblxuICAubWF0LWZvcm0tZmllbGQtYXBwZWFyYW5jZS1sZWdhY3kge1xuICAgIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgICBjb2xvcjogJGxhYmVsLWNvbG9yO1xuICAgIH1cblxuICAgIC5tYXQtaGludCB7XG4gICAgICBjb2xvcjogJGxhYmVsLWNvbG9yO1xuICAgIH1cblxuICAgIC5tYXQtZm9ybS1maWVsZC11bmRlcmxpbmUge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHVuZGVybGluZS1jb2xvcjtcbiAgICB9XG5cbiAgICAmLm1hdC1mb3JtLWZpZWxkLWRpc2FibGVkIC5tYXQtZm9ybS1maWVsZC11bmRlcmxpbmUge1xuICAgICAgQGluY2x1ZGUgbWF0LWNvbnRyb2wtZGlzYWJsZWQtdW5kZXJsaW5lKCR1bmRlcmxpbmUtY29sb3IpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBVc2VkIHRvIG1ha2UgaW5zdGFuY2VzIG9mIHRoZSBfbWF0LWZvcm0tZmllbGQtbGFiZWwtZmxvYXRpbmcgbWl4aW4gbmVnbGlnaWJseSBkaWZmZXJlbnQsXG4vLyBhbmQgcHJldmVudCBHb29nbGUncyBDU1MgT3B0aW1pemVyIGZyb20gY29sbGFwc2luZyB0aGUgZGVjbGFyYXRpb25zLiBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIHNvbWVcbi8vIG9mIHRoZSBzZWxlY3RvcnMgY29udGFpbiBwc2V1ZG8tY2xhc3NlcyBub3QgcmVjb2duaXplZCBpbiBhbGwgYnJvd3NlcnMuIElmIGEgYnJvd3NlciBlbmNvdW50ZXJzXG4vLyBhbiB1bmtub3duIHBzZXVkby1jbGFzcyBpdCB3aWxsIGRpc2NhcmQgdGhlIGVudGlyZSBydWxlIHNldC5cbiRtYXQtZm9ybS1maWVsZC1sZWdhY3ktZGVkdXBlOiAwO1xuXG4vLyBBcHBsaWVzIGEgZmxvYXRpbmcgbGFiZWwgYWJvdmUgdGhlIGZvcm0gZmllbGQgY29udHJvbCBpdHNlbGYuXG5AbWl4aW4gX21hdC1mb3JtLWZpZWxkLWxlZ2FjeS1sYWJlbC1mbG9hdGluZygkZm9udC1zY2FsZSwgJGluZml4LXBhZGRpbmcsICRpbmZpeC1tYXJnaW4tdG9wKSB7XG4gIC8vIFdlIHVzZSBwZXJzcGVjdGl2ZSB0byBmaXggdGhlIHRleHQgYmx1cnJpbmVzcyBhcyBkZXNjcmliZWQgaGVyZTpcbiAgLy8gaHR0cDovL3d3dy51c2VyYWdlbnRtYW4uY29tL2Jsb2cvMjAxNC8wNS8wNC9maXhpbmctdHlwb2dyYXBoeS1pbnNpZGUtb2YtMi1kLWNzcy10cmFuc2Zvcm1zL1xuICAvLyBUaGlzIHJlc3VsdHMgaW4gYSBzbWFsbCBqaXR0ZXIgYWZ0ZXIgdGhlIGxhYmVsIGZsb2F0cyBvbiBGaXJlZm94LCB3aGljaCB0aGVcbiAgLy8gdHJhbnNsYXRlWiBmaXhlcy5cbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0kaW5maXgtbWFyZ2luLXRvcCAtICRpbmZpeC1wYWRkaW5nKSBzY2FsZSgkZm9udC1zY2FsZSkgcGVyc3BlY3RpdmUoMTAwcHgpXG4gIHRyYW5zbGF0ZVooMC4wMDFweCArICRtYXQtZm9ybS1maWVsZC1sZWdhY3ktZGVkdXBlKTtcbiAgLy8gVGhlIHRyaWNrcyBhYm92ZSB1c2VkIHRvIHNtb290aCBvdXQgdGhlIGFuaW1hdGlvbiBvbiBjaHJvbWUgYW5kIGZpcmVmb3ggYWN0dWFsbHkgbWFrZSB0aGluZ3NcbiAgLy8gd29yc2Ugb24gSUUsIHNvIHdlIGRvbid0IGluY2x1ZGUgdGhlbSBpbiB0aGUgSUUgdmVyc2lvbi5cbiAgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlWSgtJGluZml4LW1hcmdpbi10b3AgLSAkaW5maXgtcGFkZGluZyArICRtYXQtZm9ybS1maWVsZC1sZWdhY3ktZGVkdXBlKVxuICAgICAgICAgICAgICAgICAgc2NhbGUoJGZvbnQtc2NhbGUpO1xuXG4gIHdpZHRoOiAxMDAlIC8gJGZvbnQtc2NhbGUgKyAkbWF0LWZvcm0tZmllbGQtbGVnYWN5LWRlZHVwZTtcblxuICAkbWF0LWZvcm0tZmllbGQtbGVnYWN5LWRlZHVwZTogJG1hdC1mb3JtLWZpZWxkLWxlZ2FjeS1kZWR1cGUgKyAwLjAwMDAxICFnbG9iYWw7XG59XG5cbi8vIFNhbWUgYXMgbWl4aW4gYWJvdmUsIGJ1dCBvbWl0cyB0aGUgdHJhbnNsYXRlWiBmb3IgcHJpbnRpbmcgcHVycG9zZXMuXG5AbWl4aW4gX21hdC1mb3JtLWZpZWxkLWxlZ2FjeS1sYWJlbC1mbG9hdGluZy1wcmludCgkZm9udC1zY2FsZSwgJGluZml4LXBhZGRpbmcsICRpbmZpeC1tYXJnaW4tdG9wKSB7XG4gIC8vIFRoaXMgcmVzdWx0cyBpbiBhIHNtYWxsIGppdHRlciBhZnRlciB0aGUgbGFiZWwgZmxvYXRzIG9uIEZpcmVmb3gsIHdoaWNoIHRoZVxuICAvLyB0cmFuc2xhdGVaIGZpeGVzLlxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLSRpbmZpeC1tYXJnaW4tdG9wIC0gJGluZml4LXBhZGRpbmcgKyAkbWF0LWZvcm0tZmllbGQtbGVnYWN5LWRlZHVwZSlcbiAgICAgICAgICAgICAgICAgIHNjYWxlKCRmb250LXNjYWxlKTtcbiAgLy8gVGhlIHRyaWNrcyBhYm92ZSB1c2VkIHRvIHNtb290aCBvdXQgdGhlIGFuaW1hdGlvbiBvbiBjaHJvbWUgYW5kIGZpcmVmb3ggYWN0dWFsbHkgbWFrZSB0aGluZ3NcbiAgLy8gd29yc2Ugb24gSUUsIHNvIHdlIGRvbid0IGluY2x1ZGUgdGhlbSBpbiB0aGUgSUUgdmVyc2lvbi5cbiAgJG1hdC1mb3JtLWZpZWxkLWxlZ2FjeS1kZWR1cGU6ICRtYXQtZm9ybS1maWVsZC1sZWdhY3ktZGVkdXBlICsgMC4wMDAwMSAhZ2xvYmFsO1xufVxuXG5AbWl4aW4gbWF0LWZvcm0tZmllbGQtbGVnYWN5LXR5cG9ncmFwaHkoJGNvbmZpZykge1xuICAvLyBUaGUgdW5pdC1sZXNzIGxpbmUtaGVpZ2h0IGZyb20gdGhlIGZvbnQgY29uZmlnLlxuICAkbGluZS1oZWlnaHQ6IG1hdC1saW5lLWhlaWdodCgkY29uZmlnLCBpbnB1dCk7XG4gIC8vIFRoZSBhbW91bnQgdG8gc2NhbGUgdGhlIGZvbnQgZm9yIHRoZSBmbG9hdGluZyBsYWJlbCBhbmQgc3Vic2NyaXB0LlxuICAkc3Vic2NyaXB0LWZvbnQtc2NhbGU6IDAuNzU7XG4gIC8vIFRoZSBhbW91bnQgb2Ygc3BhY2UgYmV0d2VlbiB0aGUgdG9wIG9mIHRoZSBsaW5lIGFuZCB0aGUgdG9wIG9mIHRoZSBhY3R1YWwgdGV4dFxuICAvLyAoYXMgYSBmcmFjdGlvbiBvZiB0aGUgZm9udC1zaXplKS5cbiAgJGxpbmUtc3BhY2luZzogKCRsaW5lLWhlaWdodCAtIDEpIC8gMjtcbiAgLy8gVGhlIHBhZGRpbmcgb24gdGhlIGluZml4LiBNb2NrcyBzaG93IGhhbGYgb2YgdGhlIHRleHQgc2l6ZSwgYnV0IHNlZW0gdG8gbWVhc3VyZSBmcm9tIHRoZSBlZGdlXG4gIC8vIG9mIHRoZSB0ZXh0IGl0c2VsZiwgbm90IHRoZSBlZGdlIG9mIHRoZSBsaW5lOyB0aGVyZWZvcmUgd2Ugc3VidHJhY3Qgb2ZmIHRoZSBsaW5lIHNwYWNpbmcuXG4gICRpbmZpeC1wYWRkaW5nOiAwLjVlbSAtICRsaW5lLXNwYWNpbmc7XG4gIC8vIFRoZSBtYXJnaW4gYXBwbGllZCB0byB0aGUgZm9ybS1maWVsZC1pbmZpeCB0byByZXNlcnZlIHNwYWNlIGZvciB0aGUgZmxvYXRpbmcgbGFiZWwuXG4gICRpbmZpeC1tYXJnaW4tdG9wOiAxZW0gKiAkbGluZS1oZWlnaHQgKiAkc3Vic2NyaXB0LWZvbnQtc2NhbGU7XG4gIC8vIFRoZSBzcGFjZSBiZXR3ZWVuIHRoZSBib3R0b20gb2YgdGhlIC5tYXQtZm9ybS1maWVsZC1mbGV4IGFyZWEgYW5kIHRoZSBzdWJzY3JpcHQgd3JhcHBlci5cbiAgLy8gTW9ja3Mgc2hvdyBoYWxmIG9mIHRoZSB0ZXh0IHNpemUsIGJ1dCB0aGlzIG1hcmdpbiBpcyBhcHBsaWVkIHRvIGFuIGVsZW1lbnQgd2l0aCB0aGUgc3Vic2NyaXB0XG4gIC8vIHRleHQgZm9udCBzaXplLCBzbyB3ZSBuZWVkIHRvIGRpdmlkZSBieSB0aGUgc2NhbGUgZmFjdG9yIHRvIG1ha2UgaXQgaGFsZiBvZiB0aGUgb3JpZ2luYWwgdGV4dFxuICAvLyBzaXplLiBXZSBhZ2FpbiBuZWVkIHRvIHN1YnRyYWN0IG9mZiB0aGUgbGluZSBzcGFjaW5nIHNpbmNlIHRoZSBtb2NrcyBtZWFzdXJlIHRvIHRoZSBlZGdlIG9mIHRoZVxuICAvLyB0ZXh0LCBub3QgdGhlICBlZGdlIG9mIHRoZSBsaW5lLlxuICAkc3Vic2NyaXB0LW1hcmdpbi10b3A6IDAuNWVtIC8gJHN1YnNjcmlwdC1mb250LXNjYWxlIC0gKCRsaW5lLXNwYWNpbmcgKiAyKTtcbiAgLy8gVGhlIHBhZGRpbmcgYXBwbGllZCB0byB0aGUgZm9ybS1maWVsZC13cmFwcGVyIHRvIHJlc2VydmUgc3BhY2UgZm9yIHRoZSBzdWJzY3JpcHQsIHNpbmNlIGl0J3NcbiAgLy8gYWJzb2x1dGVseSBwb3NpdGlvbmVkLiBUaGlzIGlzIGEgY29tYmluYXRpb24gb2YgdGhlIHN1YnNjcmlwdCdzIG1hcmdpbiBhbmQgbGluZS1oZWlnaHQsIGJ1dCB3ZVxuICAvLyBuZWVkIHRvIG11bHRpcGx5IGJ5IHRoZSBzdWJzY3JpcHQgZm9udCBzY2FsZSBmYWN0b3Igc2luY2UgdGhlIHdyYXBwZXIgaGFzIGEgbGFyZ2VyIGZvbnQgc2l6ZS5cbiAgJHdyYXBwZXItcGFkZGluZy1ib3R0b206ICgkc3Vic2NyaXB0LW1hcmdpbi10b3AgKyAkbGluZS1oZWlnaHQpICogJHN1YnNjcmlwdC1mb250LXNjYWxlO1xuXG4gIC5tYXQtZm9ybS1maWVsZC1hcHBlYXJhbmNlLWxlZ2FjeSB7XG4gICAgLm1hdC1mb3JtLWZpZWxkLXdyYXBwZXIge1xuICAgICAgcGFkZGluZy1ib3R0b206ICR3cmFwcGVyLXBhZGRpbmctYm90dG9tO1xuICAgIH1cblxuICAgIC5tYXQtZm9ybS1maWVsZC1pbmZpeCB7XG4gICAgICBwYWRkaW5nOiAkaW5maXgtcGFkZGluZyAwO1xuICAgIH1cblxuICAgICYubWF0LWZvcm0tZmllbGQtY2FuLWZsb2F0IHtcbiAgICAgICYubWF0LWZvcm0tZmllbGQtc2hvdWxkLWZsb2F0IC5tYXQtZm9ybS1maWVsZC1sYWJlbCxcbiAgICAgIC5tYXQtaW5wdXQtc2VydmVyOmZvY3VzICsgLm1hdC1mb3JtLWZpZWxkLWxhYmVsLXdyYXBwZXIgLm1hdC1mb3JtLWZpZWxkLWxhYmVsIHtcbiAgICAgICAgQGluY2x1ZGUgX21hdC1mb3JtLWZpZWxkLWxlZ2FjeS1sYWJlbC1mbG9hdGluZyhcbiAgICAgICAgICAgICAgICAkc3Vic2NyaXB0LWZvbnQtc2NhbGUsICRpbmZpeC1wYWRkaW5nLCAkaW5maXgtbWFyZ2luLXRvcCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEBicmVha2luZy1jaGFuZ2UgOC4wLjAgd2lsbCByZWx5IG9uIEF1dG9maWxsTW9uaXRvciBpbnN0ZWFkLlxuICAgICAgLm1hdC1mb3JtLWZpZWxkLWF1dG9maWxsLWNvbnRyb2w6LXdlYmtpdC1hdXRvZmlsbCArIC5tYXQtZm9ybS1maWVsZC1sYWJlbC13cmFwcGVyXG4gICAgICAubWF0LWZvcm0tZmllbGQtbGFiZWwge1xuICAgICAgICBAaW5jbHVkZSBfbWF0LWZvcm0tZmllbGQtbGVnYWN5LWxhYmVsLWZsb2F0aW5nKFxuICAgICAgICAgICAgICAgICRzdWJzY3JpcHQtZm9udC1zY2FsZSwgJGluZml4LXBhZGRpbmcsICRpbmZpeC1tYXJnaW4tdG9wKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2VydmVyLXNpZGUgcmVuZGVyZWQgbWF0SW5wdXQgd2l0aCBhIGxhYmVsIGF0dHJpYnV0ZSBidXQgbGFiZWwgbm90IHNob3duXG4gICAgICAvLyAodXNlZCBhcyBhIHB1cmUgQ1NTIHN0YW5kLWluIGZvciBtYXQtZm9ybS1maWVsZC1zaG91bGQtZmxvYXQpLlxuICAgICAgLm1hdC1pbnB1dC1zZXJ2ZXJbbGFiZWxdOm5vdCg6bGFiZWwtc2hvd24pICsgLm1hdC1mb3JtLWZpZWxkLWxhYmVsLXdyYXBwZXJcbiAgICAgIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgICAgIEBpbmNsdWRlIF9tYXQtZm9ybS1maWVsZC1sZWdhY3ktbGFiZWwtZmxvYXRpbmcoXG4gICAgICAgICAgICAgICAgJHN1YnNjcmlwdC1mb250LXNjYWxlLCAkaW5maXgtcGFkZGluZywgJGluZml4LW1hcmdpbi10b3ApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgICB0b3A6ICRpbmZpeC1tYXJnaW4tdG9wICsgJGluZml4LXBhZGRpbmc7XG4gICAgfVxuXG4gICAgLm1hdC1mb3JtLWZpZWxkLXVuZGVybGluZSB7XG4gICAgICAvLyBXZSB3YW50IHRoZSB1bmRlcmxpbmUgdG8gc3RhcnQgYXQgdGhlIGVuZCBvZiB0aGUgY29udGVudCBib3gsIG5vdCB0aGUgcGFkZGluZyBib3gsXG4gICAgICAvLyBzbyB3ZSBtb3ZlIGl0IHVwIGJ5IHRoZSBwYWRkaW5nIGFtb3VudC5cbiAgICAgIGJvdHRvbTogJHdyYXBwZXItcGFkZGluZy1ib3R0b207XG4gICAgfVxuXG4gICAgLm1hdC1mb3JtLWZpZWxkLXN1YnNjcmlwdC13cmFwcGVyIHtcbiAgICAgIG1hcmdpbi10b3A6ICRzdWJzY3JpcHQtbWFyZ2luLXRvcDtcblxuICAgICAgLy8gV2Ugd2FudCB0aGUgc3Vic2NyaXB0IHRvIHN0YXJ0IGF0IHRoZSBlbmQgb2YgdGhlIGNvbnRlbnQgYm94LCBub3QgdGhlIHBhZGRpbmcgYm94LFxuICAgICAgLy8gc28gd2UgbW92ZSBpdCB1cCBieSB0aGUgcGFkZGluZyBhbW91bnQgKGFkanVzdGVkIGZvciB0aGUgc21hbGxlciBmb250IHNpemUpO1xuICAgICAgdG9wOiBjYWxjKDEwMCUgLSAjeyR3cmFwcGVyLXBhZGRpbmctYm90dG9tIC8gJHN1YnNjcmlwdC1mb250LXNjYWxlfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gdHJhbnNsYXRlWiBjYXVzZXMgdGhlIGxhYmVsIHRvIG5vdCBhcHBlYXIgd2hpbGUgcHJpbnRpbmcsIHNvIHdlIG92ZXJyaWRlIGl0IHRvIG5vdFxuICAvLyBhcHBseSB0cmFuc2xhdGVaIHdoaWxlIHByaW50aW5nXG4gIEBtZWRpYSBwcmludCB7XG4gICAgLm1hdC1mb3JtLWZpZWxkLWFwcGVhcmFuY2UtbGVnYWN5IHtcbiAgICAgICYubWF0LWZvcm0tZmllbGQtY2FuLWZsb2F0IHtcbiAgICAgICAgJi5tYXQtZm9ybS1maWVsZC1zaG91bGQtZmxvYXQgLm1hdC1mb3JtLWZpZWxkLWxhYmVsLFxuICAgICAgICAubWF0LWlucHV0LXNlcnZlcjpmb2N1cyArIC5tYXQtZm9ybS1maWVsZC1sYWJlbC13cmFwcGVyIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgICAgICAgQGluY2x1ZGUgX21hdC1mb3JtLWZpZWxkLWxlZ2FjeS1sYWJlbC1mbG9hdGluZy1wcmludChcbiAgICAgICAgICAgICAgICAgICRzdWJzY3JpcHQtZm9udC1zY2FsZSwgJGluZml4LXBhZGRpbmcsICRpbmZpeC1tYXJnaW4tdG9wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEBicmVha2luZy1jaGFuZ2UgOC4wLjAgd2lsbCByZWx5IG9uIEF1dG9maWxsTW9uaXRvciBpbnN0ZWFkLlxuICAgICAgICAubWF0LWZvcm0tZmllbGQtYXV0b2ZpbGwtY29udHJvbDotd2Via2l0LWF1dG9maWxsICsgLm1hdC1mb3JtLWZpZWxkLWxhYmVsLXdyYXBwZXJcbiAgICAgICAgLm1hdC1mb3JtLWZpZWxkLWxhYmVsIHtcbiAgICAgICAgICBAaW5jbHVkZSBfbWF0LWZvcm0tZmllbGQtbGVnYWN5LWxhYmVsLWZsb2F0aW5nLXByaW50KFxuICAgICAgICAgICAgICAgICAgJHN1YnNjcmlwdC1mb250LXNjYWxlLCAkaW5maXgtcGFkZGluZywgJGluZml4LW1hcmdpbi10b3ApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2VydmVyLXNpZGUgcmVuZGVyZWQgbWF0SW5wdXQgd2l0aCBhIGxhYmVsIGF0dHJpYnV0ZSBidXQgbGFiZWwgbm90IHNob3duXG4gICAgICAgIC8vICh1c2VkIGFzIGEgcHVyZSBDU1Mgc3RhbmQtaW4gZm9yIG1hdC1mb3JtLWZpZWxkLXNob3VsZC1mbG9hdCkuXG4gICAgICAgIC5tYXQtaW5wdXQtc2VydmVyW2xhYmVsXTpub3QoOmxhYmVsLXNob3duKSArIC5tYXQtZm9ybS1maWVsZC1sYWJlbC13cmFwcGVyXG4gICAgICAgIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgICAgICAgQGluY2x1ZGUgX21hdC1mb3JtLWZpZWxkLWxlZ2FjeS1sYWJlbC1mbG9hdGluZy1wcmludChcbiAgICAgICAgICAgICAgICAgICRzdWJzY3JpcHQtZm9udC1zY2FsZSwgJGluZml4LXBhZGRpbmcsICRpbmZpeC1tYXJnaW4tdG9wKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5cblxuXG5cblxuXG4vLyBUaGVtZSBzdHlsZXMgdGhhdCBvbmx5IGFwcGx5IHRvIHRoZSBvdXRsaW5lIGFwcGVhcmFuY2Ugb2YgdGhlIGZvcm0tZmllbGQuXG5cbkBtaXhpbiBtYXQtZm9ybS1maWVsZC1vdXRsaW5lLXRoZW1lKCR0aGVtZSkge1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcbiAgJGlzLWRhcmstdGhlbWU6IG1hcC1nZXQoJHRoZW1lLCBpcy1kYXJrKTtcblxuICAkbGFiZWwtZGlzYWJsZWQtY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgZGlzYWJsZWQtdGV4dCk7XG4gICRvdXRsaW5lLWNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpdmlkZXIsIGlmKCRpcy1kYXJrLXRoZW1lLCAwLjMsIDAuMTIpKTtcbiAgJG91dGxpbmUtY29sb3ItaG92ZXI6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgZGl2aWRlciwgaWYoJGlzLWRhcmstdGhlbWUsIDEsIDAuODcpKTtcbiAgJG91dGxpbmUtY29sb3ItcHJpbWFyeTogbWF0LWNvbG9yKCRwcmltYXJ5KTtcbiAgJG91dGxpbmUtY29sb3ItYWNjZW50OiBtYXQtY29sb3IoJGFjY2VudCk7XG4gICRvdXRsaW5lLWNvbG9yLXdhcm46IG1hdC1jb2xvcigkd2Fybik7XG4gICRvdXRsaW5lLWNvbG9yLWRpc2FibGVkOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpdmlkZXIsIGlmKCRpcy1kYXJrLXRoZW1lLCAwLjE1LCAwLjA2KSk7XG5cbiAgLm1hdC1mb3JtLWZpZWxkLWFwcGVhcmFuY2Utb3V0bGluZSB7XG4gICAgLm1hdC1mb3JtLWZpZWxkLW91dGxpbmUge1xuICAgICAgY29sb3I6ICRvdXRsaW5lLWNvbG9yO1xuICAgIH1cblxuICAgIC5tYXQtZm9ybS1maWVsZC1vdXRsaW5lLXRoaWNrIHtcbiAgICAgIGNvbG9yOiAkb3V0bGluZS1jb2xvci1ob3ZlcjtcbiAgICB9XG5cbiAgICAmLm1hdC1mb2N1c2VkIHtcbiAgICAgIC5tYXQtZm9ybS1maWVsZC1vdXRsaW5lLXRoaWNrIHtcbiAgICAgICAgY29sb3I6ICRvdXRsaW5lLWNvbG9yLXByaW1hcnk7XG4gICAgICB9XG5cbiAgICAgICYubWF0LWFjY2VudCAubWF0LWZvcm0tZmllbGQtb3V0bGluZS10aGljayB7XG4gICAgICAgIGNvbG9yOiAkb3V0bGluZS1jb2xvci1hY2NlbnQ7XG4gICAgICB9XG5cbiAgICAgICYubWF0LXdhcm4gLm1hdC1mb3JtLWZpZWxkLW91dGxpbmUtdGhpY2sge1xuICAgICAgICBjb2xvcjogJG91dGxpbmUtY29sb3Itd2FybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDbGFzcyByZXBlYXRlZCBzbyB0aGF0IHJ1bGUgaXMgc3BlY2lmaWMgZW5vdWdoIHRvIG92ZXJyaWRlIGZvY3VzZWQgYWNjZW50IGNvbG9yIGNhc2UuXG4gICAgJi5tYXQtZm9ybS1maWVsZC1pbnZhbGlkLm1hdC1mb3JtLWZpZWxkLWludmFsaWQge1xuICAgICAgLm1hdC1mb3JtLWZpZWxkLW91dGxpbmUtdGhpY2sge1xuICAgICAgICBjb2xvcjogJG91dGxpbmUtY29sb3Itd2FybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmLm1hdC1mb3JtLWZpZWxkLWRpc2FibGVkIHtcbiAgICAgIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgICAgIGNvbG9yOiAkbGFiZWwtZGlzYWJsZWQtY29sb3I7XG4gICAgICB9XG5cbiAgICAgIC5tYXQtZm9ybS1maWVsZC1vdXRsaW5lIHtcbiAgICAgICAgY29sb3I6ICRvdXRsaW5lLWNvbG9yLWRpc2FibGVkO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyBVc2VkIHRvIG1ha2UgaW5zdGFuY2VzIG9mIHRoZSBfbWF0LWZvcm0tZmllbGQtbGFiZWwtZmxvYXRpbmcgbWl4aW4gbmVnbGlnaWJseSBkaWZmZXJlbnQsXG4vLyBhbmQgcHJldmVudCBHb29nbGUncyBDU1MgT3B0aW1pemVyIGZyb20gY29sbGFwc2luZyB0aGUgZGVjbGFyYXRpb25zLiBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIHNvbWVcbi8vIG9mIHRoZSBzZWxlY3RvcnMgY29udGFpbiBwc2V1ZG8tY2xhc3NlcyBub3QgcmVjb2duaXplZCBpbiBhbGwgYnJvd3NlcnMuIElmIGEgYnJvd3NlciBlbmNvdW50ZXJzXG4vLyBhbiB1bmtub3duIHBzZXVkby1jbGFzcyBpdCB3aWxsIGRpc2NhcmQgdGhlIGVudGlyZSBydWxlIHNldC5cbiRtYXQtZm9ybS1maWVsZC1vdXRsaW5lLWRlZHVwZTogMDtcblxuLy8gQXBwbGllcyBhIGZsb2F0aW5nIGxhYmVsIGFib3ZlIHRoZSBmb3JtIGZpZWxkIGNvbnRyb2wgaXRzZWxmLlxuQG1peGluIF9tYXQtZm9ybS1maWVsZC1vdXRsaW5lLWxhYmVsLWZsb2F0aW5nKCRmb250LXNjYWxlLCAkaW5maXgtcGFkZGluZywgJGluZml4LW1hcmdpbi10b3ApIHtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0kaW5maXgtbWFyZ2luLXRvcCAtICRpbmZpeC1wYWRkaW5nICsgJG1hdC1mb3JtLWZpZWxkLW91dGxpbmUtZGVkdXBlKVxuICBzY2FsZSgkZm9udC1zY2FsZSk7XG4gIHdpZHRoOiAxMDAlIC8gJGZvbnQtc2NhbGUgKyAkbWF0LWZvcm0tZmllbGQtb3V0bGluZS1kZWR1cGU7XG5cbiAgJG1hdC1mb3JtLWZpZWxkLW91dGxpbmUtZGVkdXBlOiAkbWF0LWZvcm0tZmllbGQtb3V0bGluZS1kZWR1cGUgKyAwLjAwMDAxICFnbG9iYWw7XG59XG5cbkBtaXhpbiBtYXQtZm9ybS1maWVsZC1vdXRsaW5lLXR5cG9ncmFwaHkoJGNvbmZpZykge1xuICAvLyBUaGUgdW5pdC1sZXNzIGxpbmUtaGVpZ2h0IGZyb20gdGhlIGZvbnQgY29uZmlnLlxuICAkbGluZS1oZWlnaHQ6IG1hdC1saW5lLWhlaWdodCgkY29uZmlnLCBpbnB1dCk7XG4gIC8vIFRoZSBhbW91bnQgdG8gc2NhbGUgdGhlIGZvbnQgZm9yIHRoZSBmbG9hdGluZyBsYWJlbCBhbmQgc3Vic2NyaXB0LlxuICAkc3Vic2NyaXB0LWZvbnQtc2NhbGU6IDAuNzU7XG4gIC8vIFRoZSBwYWRkaW5nIGFib3ZlIGFuZCBiZWxvdyB0aGUgaW5maXguXG4gICRpbmZpeC1wYWRkaW5nOiAxZW07XG4gIC8vIFRoZSBtYXJnaW4gYXBwbGllZCB0byB0aGUgZm9ybS1maWVsZC1pbmZpeCB0byByZXNlcnZlIHNwYWNlIGZvciB0aGUgZmxvYXRpbmcgbGFiZWwuXG4gICRpbmZpeC1tYXJnaW4tdG9wOiAxZW0gKiAkbGluZS1oZWlnaHQgKiAkc3Vic2NyaXB0LWZvbnQtc2NhbGU7XG4gIC8vIFRoZSBzcGFjZSBiZXR3ZWVuIHRoZSBib3R0b20gb2YgdGhlIC5tYXQtZm9ybS1maWVsZC1mbGV4IGFyZWEgYW5kIHRoZSBzdWJzY3JpcHQgd3JhcHBlci5cbiAgLy8gTW9ja3Mgc2hvdyBoYWxmIG9mIHRoZSB0ZXh0IHNpemUsIGJ1dCB0aGlzIG1hcmdpbiBpcyBhcHBsaWVkIHRvIGFuIGVsZW1lbnQgd2l0aCB0aGUgc3Vic2NyaXB0XG4gIC8vIHRleHQgZm9udCBzaXplLCBzbyB3ZSBuZWVkIHRvIGRpdmlkZSBieSB0aGUgc2NhbGUgZmFjdG9yIHRvIG1ha2UgaXQgaGFsZiBvZiB0aGUgb3JpZ2luYWwgdGV4dFxuICAvLyBzaXplLlxuICAkc3Vic2NyaXB0LW1hcmdpbi10b3A6IDAuNWVtIC8gJHN1YnNjcmlwdC1mb250LXNjYWxlO1xuICAvLyBUaGUgcGFkZGluZyBhcHBsaWVkIHRvIHRoZSBmb3JtLWZpZWxkLXdyYXBwZXIgdG8gcmVzZXJ2ZSBzcGFjZSBmb3IgdGhlIHN1YnNjcmlwdCwgc2luY2UgaXQnc1xuICAvLyBhYnNvbHV0ZWx5IHBvc2l0aW9uZWQuIFRoaXMgaXMgYSBjb21iaW5hdGlvbiBvZiB0aGUgc3Vic2NyaXB0J3MgbWFyZ2luIGFuZCBsaW5lLWhlaWdodCwgYnV0IHdlXG4gIC8vIG5lZWQgdG8gbXVsdGlwbHkgYnkgdGhlIHN1YnNjcmlwdCBmb250IHNjYWxlIGZhY3RvciBzaW5jZSB0aGUgd3JhcHBlciBoYXMgYSBsYXJnZXIgZm9udCBzaXplLlxuICAkd3JhcHBlci1wYWRkaW5nLWJvdHRvbTogKCRzdWJzY3JpcHQtbWFyZ2luLXRvcCArICRsaW5lLWhlaWdodCkgKiAkc3Vic2NyaXB0LWZvbnQtc2NhbGU7XG4gIC8vIFRoZSBhbW91bnQgd2Ugb2Zmc2V0IHRoZSBsYWJlbCBmcm9tIHRoZSBpbnB1dCB0ZXh0IGluIHRoZSBvdXRsaW5lIGFwcGVhcmFuY2UuXG4gICRvdXRsaW5lLWFwcGVhcmFuY2UtbGFiZWwtb2Zmc2V0OiAtMC4yNWVtO1xuXG4gIC5tYXQtZm9ybS1maWVsZC1hcHBlYXJhbmNlLW91dGxpbmUge1xuICAgIC5tYXQtZm9ybS1maWVsZC1pbmZpeCB7XG4gICAgICBwYWRkaW5nOiAkaW5maXgtcGFkZGluZyAwICRpbmZpeC1wYWRkaW5nIDA7XG4gICAgfVxuXG4gICAgLm1hdC1mb3JtLWZpZWxkLWxhYmVsIHtcbiAgICAgIHRvcDogJGluZml4LW1hcmdpbi10b3AgKyAkaW5maXgtcGFkZGluZztcbiAgICAgIG1hcmdpbi10b3A6ICRvdXRsaW5lLWFwcGVhcmFuY2UtbGFiZWwtb2Zmc2V0O1xuICAgIH1cblxuICAgICYubWF0LWZvcm0tZmllbGQtY2FuLWZsb2F0IHtcbiAgICAgICYubWF0LWZvcm0tZmllbGQtc2hvdWxkLWZsb2F0IC5tYXQtZm9ybS1maWVsZC1sYWJlbCxcbiAgICAgIC5tYXQtaW5wdXQtc2VydmVyOmZvY3VzICsgLm1hdC1mb3JtLWZpZWxkLWxhYmVsLXdyYXBwZXIgLm1hdC1mb3JtLWZpZWxkLWxhYmVsIHtcbiAgICAgICAgQGluY2x1ZGUgX21hdC1mb3JtLWZpZWxkLW91dGxpbmUtbGFiZWwtZmxvYXRpbmcoXG4gICAgICAgICAgICAgICAgJHN1YnNjcmlwdC1mb250LXNjYWxlLCAkaW5maXgtcGFkZGluZyArICRvdXRsaW5lLWFwcGVhcmFuY2UtbGFiZWwtb2Zmc2V0LFxuICAgICAgICAgICAgICAgICRpbmZpeC1tYXJnaW4tdG9wKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2VydmVyLXNpZGUgcmVuZGVyZWQgbWF0SW5wdXQgd2l0aCBhIGxhYmVsIGF0dHJpYnV0ZSBidXQgbGFiZWwgbm90IHNob3duXG4gICAgICAvLyAodXNlZCBhcyBhIHB1cmUgQ1NTIHN0YW5kLWluIGZvciBtYXQtZm9ybS1maWVsZC1zaG91bGQtZmxvYXQpLlxuICAgICAgLm1hdC1pbnB1dC1zZXJ2ZXJbbGFiZWxdOm5vdCg6bGFiZWwtc2hvd24pICsgLm1hdC1mb3JtLWZpZWxkLWxhYmVsLXdyYXBwZXJcbiAgICAgIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgICAgIEBpbmNsdWRlIF9tYXQtZm9ybS1maWVsZC1vdXRsaW5lLWxhYmVsLWZsb2F0aW5nKFxuICAgICAgICAgICAgICAgICRzdWJzY3JpcHQtZm9udC1zY2FsZSwgJGluZml4LXBhZGRpbmcgKyAkb3V0bGluZS1hcHBlYXJhbmNlLWxhYmVsLW9mZnNldCxcbiAgICAgICAgICAgICAgICAkaW5maXgtbWFyZ2luLXRvcCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cblxuXG5cblxuXG5cbi8vIFRoZW1lIHN0eWxlcyB0aGF0IG9ubHkgYXBwbHkgdG8gdGhlIHN0YW5kYXJkIGFwcGVhcmFuY2Ugb2YgdGhlIGZvcm0tZmllbGQuXG5cbkBtaXhpbiBtYXQtZm9ybS1maWVsZC1zdGFuZGFyZC10aGVtZSgkdGhlbWUpIHtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcbiAgJGlzLWRhcmstdGhlbWU6IG1hcC1nZXQoJHRoZW1lLCBpcy1kYXJrKTtcblxuICAkdW5kZXJsaW5lLWNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIGRpdmlkZXIsIGlmKCRpcy1kYXJrLXRoZW1lLCAwLjcsIDAuNDIpKTtcblxuICAubWF0LWZvcm0tZmllbGQtYXBwZWFyYW5jZS1zdGFuZGFyZCB7XG4gICAgLm1hdC1mb3JtLWZpZWxkLXVuZGVybGluZSB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkdW5kZXJsaW5lLWNvbG9yO1xuICAgIH1cblxuICAgICYubWF0LWZvcm0tZmllbGQtZGlzYWJsZWQgLm1hdC1mb3JtLWZpZWxkLXVuZGVybGluZSB7XG4gICAgICBAaW5jbHVkZSBtYXQtY29udHJvbC1kaXNhYmxlZC11bmRlcmxpbmUoJHVuZGVybGluZS1jb2xvcik7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBtYXQtZm9ybS1maWVsZC1zdGFuZGFyZC10eXBvZ3JhcGh5KCRjb25maWcpIHt9XG5cblxuLy8gVGhlbWUgc3R5bGVzIHRoYXQgYXBwbHkgdG8gYWxsIGFwcGVhcmFuY2VzIG9mIHRoZSBmb3JtLWZpZWxkLlxuQG1peGluIG1hdC1mb3JtLWZpZWxkLXRoZW1lKCR0aGVtZSkge1xuICAkcHJpbWFyeTogbWFwLWdldCgkdGhlbWUsIHByaW1hcnkpO1xuICAkYWNjZW50OiBtYXAtZ2V0KCR0aGVtZSwgYWNjZW50KTtcbiAgJHdhcm46IG1hcC1nZXQoJHRoZW1lLCB3YXJuKTtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcbiAgJGlzLWRhcmstdGhlbWU6IG1hcC1nZXQoJHRoZW1lLCBpcy1kYXJrKTtcblxuICAvLyBMYWJlbCBjb2xvcnMuIFJlcXVpcmVkIGlzIHVzZWQgZm9yIHRoZSBgKmAgc3RhciBzaG93biBpbiB0aGUgbGFiZWwuXG4gICRsYWJlbC1jb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBzZWNvbmRhcnktdGV4dCwgaWYoJGlzLWRhcmstdGhlbWUsIDAuNywgMC42KSk7XG4gICRmb2N1c2VkLWxhYmVsLWNvbG9yOiBtYXQtY29sb3IoJHByaW1hcnkpO1xuICAkcmVxdWlyZWQtbGFiZWwtY29sb3I6IG1hdC1jb2xvcigkYWNjZW50KTtcblxuICAvLyBVbmRlcmxpbmUgY29sb3JzLlxuICAkdW5kZXJsaW5lLWNvbG9yLWJhc2U6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgZGl2aWRlciwgaWYoJGlzLWRhcmstdGhlbWUsIDEsIDAuODcpKTtcbiAgJHVuZGVybGluZS1jb2xvci1hY2NlbnQ6IG1hdC1jb2xvcigkYWNjZW50KTtcbiAgJHVuZGVybGluZS1jb2xvci13YXJuOiBtYXQtY29sb3IoJHdhcm4pO1xuICAkdW5kZXJsaW5lLWZvY3VzZWQtY29sb3I6IG1hdC1jb2xvcigkcHJpbWFyeSk7XG5cbiAgLm1hdC1mb3JtLWZpZWxkLWxhYmVsIHtcbiAgICBjb2xvcjogJGxhYmVsLWNvbG9yO1xuICB9XG5cbiAgLm1hdC1oaW50IHtcbiAgICBjb2xvcjogJGxhYmVsLWNvbG9yO1xuICB9XG5cbiAgLm1hdC1mb3JtLWZpZWxkLm1hdC1mb2N1c2VkIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgY29sb3I6ICRmb2N1c2VkLWxhYmVsLWNvbG9yO1xuXG4gICAgJi5tYXQtYWNjZW50IHtcbiAgICAgIGNvbG9yOiAkdW5kZXJsaW5lLWNvbG9yLWFjY2VudDtcbiAgICB9XG5cbiAgICAmLm1hdC13YXJuIHtcbiAgICAgIGNvbG9yOiAkdW5kZXJsaW5lLWNvbG9yLXdhcm47XG4gICAgfVxuICB9XG5cbiAgLm1hdC1mb2N1c2VkIC5tYXQtZm9ybS1maWVsZC1yZXF1aXJlZC1tYXJrZXIge1xuICAgIGNvbG9yOiAkcmVxdWlyZWQtbGFiZWwtY29sb3I7XG4gIH1cblxuICAubWF0LWZvcm0tZmllbGQtcmlwcGxlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkdW5kZXJsaW5lLWNvbG9yLWJhc2U7XG4gIH1cblxuICAubWF0LWZvcm0tZmllbGQubWF0LWZvY3VzZWQge1xuICAgIC5tYXQtZm9ybS1maWVsZC1yaXBwbGUge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHVuZGVybGluZS1mb2N1c2VkLWNvbG9yO1xuXG4gICAgICAmLm1hdC1hY2NlbnQge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkdW5kZXJsaW5lLWNvbG9yLWFjY2VudDtcbiAgICAgIH1cblxuICAgICAgJi5tYXQtd2FybiB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR1bmRlcmxpbmUtY29sb3Itd2FybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAubWF0LWZvcm0tZmllbGQtdHlwZS1tYXQtbmF0aXZlLXNlbGVjdC5tYXQtZm9jdXNlZDpub3QoLm1hdC1mb3JtLWZpZWxkLWludmFsaWQpIHtcbiAgICAubWF0LWZvcm0tZmllbGQtaW5maXg6OmFmdGVyIHtcbiAgICAgIGNvbG9yOiAkdW5kZXJsaW5lLWZvY3VzZWQtY29sb3I7XG4gICAgfVxuXG4gICAgJi5tYXQtYWNjZW50IC5tYXQtZm9ybS1maWVsZC1pbmZpeDo6YWZ0ZXIge1xuICAgICAgY29sb3I6ICR1bmRlcmxpbmUtY29sb3ItYWNjZW50O1xuICAgIH1cblxuICAgICYubWF0LXdhcm4gLm1hdC1mb3JtLWZpZWxkLWluZml4OjphZnRlciB7XG4gICAgICBjb2xvcjogJHVuZGVybGluZS1jb2xvci13YXJuO1xuICAgIH1cbiAgfVxuXG4gIC8vIFN0eWxpbmcgZm9yIHRoZSBlcnJvciBzdGF0ZSBvZiB0aGUgZm9ybSBmaWVsZC4gTm90ZSB0aGF0IHdoaWxlIHRoZSBzYW1lIGNhbiBiZVxuICAvLyBhY2hpZXZlZCB3aXRoIHRoZSBuZy0qIGNsYXNzZXMsIHdlIHVzZSB0aGlzIGFwcHJvYWNoIGluIG9yZGVyIHRvIGVuc3VyZSB0aGF0IHRoZSBzYW1lXG4gIC8vIGxvZ2ljIGlzIHVzZWQgdG8gc3R5bGUgdGhlIGVycm9yIHN0YXRlIGFuZCB0byBzaG93IHRoZSBlcnJvciBtZXNzYWdlcy5cbiAgLm1hdC1mb3JtLWZpZWxkLm1hdC1mb3JtLWZpZWxkLWludmFsaWQge1xuICAgIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgICBjb2xvcjogJHVuZGVybGluZS1jb2xvci13YXJuO1xuXG4gICAgICAmLm1hdC1hY2NlbnQsXG4gICAgICAubWF0LWZvcm0tZmllbGQtcmVxdWlyZWQtbWFya2VyIHtcbiAgICAgICAgY29sb3I6ICR1bmRlcmxpbmUtY29sb3Itd2FybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAubWF0LWZvcm0tZmllbGQtcmlwcGxlLFxuICAgIC5tYXQtZm9ybS1maWVsZC1yaXBwbGUubWF0LWFjY2VudCB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkdW5kZXJsaW5lLWNvbG9yLXdhcm47XG4gICAgfVxuICB9XG5cbiAgLm1hdC1lcnJvciB7XG4gICAgY29sb3I6ICR1bmRlcmxpbmUtY29sb3Itd2FybjtcbiAgfVxuXG4gIEBpbmNsdWRlIG1hdC1mb3JtLWZpZWxkLWxlZ2FjeS10aGVtZSgkdGhlbWUpO1xuICBAaW5jbHVkZSBtYXQtZm9ybS1maWVsZC1zdGFuZGFyZC10aGVtZSgkdGhlbWUpO1xuICBAaW5jbHVkZSBtYXQtZm9ybS1maWVsZC1maWxsLXRoZW1lKCR0aGVtZSk7XG4gIEBpbmNsdWRlIG1hdC1mb3JtLWZpZWxkLW91dGxpbmUtdGhlbWUoJHRoZW1lKTtcbn1cblxuLy8gVXNlZCB0byBtYWtlIGluc3RhbmNlcyBvZiB0aGUgX21hdC1mb3JtLWZpZWxkLWxhYmVsLWZsb2F0aW5nIG1peGluIG5lZ2xpZ2libHkgZGlmZmVyZW50LFxuLy8gYW5kIHByZXZlbnQgR29vZ2xlJ3MgQ1NTIE9wdGltaXplciBmcm9tIGNvbGxhcHNpbmcgdGhlIGRlY2xhcmF0aW9ucy4gVGhpcyBpcyBuZWVkZWQgYmVjYXVzZSBzb21lXG4vLyBvZiB0aGUgc2VsZWN0b3JzIGNvbnRhaW4gcHNldWRvLWNsYXNzZXMgbm90IHJlY29nbml6ZWQgaW4gYWxsIGJyb3dzZXJzLiBJZiBhIGJyb3dzZXIgZW5jb3VudGVyc1xuLy8gYW4gdW5rbm93biBwc2V1ZG8tY2xhc3MgaXQgd2lsbCBkaXNjYXJkIHRoZSBlbnRpcmUgcnVsZSBzZXQuXG4kbWF0LWZvcm0tZmllbGQtZGVkdXBlOiAwO1xuXG4vLyBBcHBsaWVzIGEgZmxvYXRpbmcgbGFiZWwgYWJvdmUgdGhlIGZvcm0gZmllbGQgY29udHJvbCBpdHNlbGYuXG5AbWl4aW4gX21hdC1mb3JtLWZpZWxkLWxhYmVsLWZsb2F0aW5nKCRmb250LXNjYWxlLCAkaW5maXgtcGFkZGluZywgJGluZml4LW1hcmdpbi10b3ApIHtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0kaW5maXgtbWFyZ2luLXRvcCAtICRpbmZpeC1wYWRkaW5nICsgJG1hdC1mb3JtLWZpZWxkLWRlZHVwZSlcbiAgICAgICAgICAgICBzY2FsZSgkZm9udC1zY2FsZSk7XG4gIHdpZHRoOiAxMDAlIC8gJGZvbnQtc2NhbGUgKyAkbWF0LWZvcm0tZmllbGQtZGVkdXBlO1xuXG4gICRtYXQtZm9ybS1maWVsZC1kZWR1cGU6ICRtYXQtZm9ybS1maWVsZC1kZWR1cGUgKyAwLjAwMDAxICFnbG9iYWw7XG59XG5cbkBtaXhpbiBtYXQtZm9ybS1maWVsZC10eXBvZ3JhcGh5KCRjb25maWcpIHtcbiAgLy8gVGhlIHVuaXQtbGVzcyBsaW5lLWhlaWdodCBmcm9tIHRoZSBmb250IGNvbmZpZy5cbiAgJGxpbmUtaGVpZ2h0OiBtYXQtbGluZS1oZWlnaHQoJGNvbmZpZywgaW5wdXQpO1xuXG4gIC8vIFRoZSBhbW91bnQgdG8gc2NhbGUgdGhlIGZvbnQgZm9yIHRoZSBmbG9hdGluZyBsYWJlbCBhbmQgc3Vic2NyaXB0LlxuICAkc3Vic2NyaXB0LWZvbnQtc2NhbGU6IDAuNzU7XG4gIC8vIFRoZSBhbW91bnQgdG8gc2NhbGUgdGhlIGZvbnQgZm9yIHRoZSBwcmVmaXggYW5kIHN1ZmZpeCBpY29ucy5cbiAgJHByZWZpeC1zdWZmaXgtaWNvbi1mb250LXNjYWxlOiAxLjU7XG5cbiAgLy8gVGhlIHBhZGRpbmcgb24gdGhlIGluZml4LiBNb2NrcyBzaG93IGhhbGYgb2YgdGhlIHRleHQgc2l6ZS5cbiAgJGluZml4LXBhZGRpbmc6IDAuNWVtO1xuICAvLyBUaGUgbWFyZ2luIGFwcGxpZWQgdG8gdGhlIGZvcm0tZmllbGQtaW5maXggdG8gcmVzZXJ2ZSBzcGFjZSBmb3IgdGhlIGZsb2F0aW5nIGxhYmVsLlxuICAkaW5maXgtbWFyZ2luLXRvcDogMWVtICogJGxpbmUtaGVpZ2h0ICogJHN1YnNjcmlwdC1mb250LXNjYWxlO1xuICAvLyBGb250IHNpemUgdG8gdXNlIGZvciB0aGUgbGFiZWwgYW5kIHN1YnNjcmlwdCB0ZXh0LlxuICAkc3Vic2NyaXB0LWZvbnQtc2l6ZTogJHN1YnNjcmlwdC1mb250LXNjYWxlICogMTAwJTtcbiAgLy8gRm9udCBzaXplIHRvIHVzZSBmb3IgdGhlIGZvciB0aGUgcHJlZml4IGFuZCBzdWZmaXggaWNvbnMuXG4gICRwcmVmaXgtc3VmZml4LWljb24tZm9udC1zaXplOiAkcHJlZml4LXN1ZmZpeC1pY29uLWZvbnQtc2NhbGUgKiAxMDAlO1xuICAvLyBUaGUgc3BhY2UgYmV0d2VlbiB0aGUgYm90dG9tIG9mIHRoZSAubWF0LWZvcm0tZmllbGQtZmxleCBhcmVhIGFuZCB0aGUgc3Vic2NyaXB0IHdyYXBwZXIuXG4gIC8vIE1vY2tzIHNob3cgaGFsZiBvZiB0aGUgdGV4dCBzaXplLCBidXQgdGhpcyBtYXJnaW4gaXMgYXBwbGllZCB0byBhbiBlbGVtZW50IHdpdGggdGhlIHN1YnNjcmlwdFxuICAvLyB0ZXh0IGZvbnQgc2l6ZSwgc28gd2UgbmVlZCB0byBkaXZpZGUgYnkgdGhlIHNjYWxlIGZhY3RvciB0byBtYWtlIGl0IGhhbGYgb2YgdGhlIG9yaWdpbmFsIHRleHRcbiAgLy8gc2l6ZS5cbiAgJHN1YnNjcmlwdC1tYXJnaW4tdG9wOiAwLjVlbSAvICRzdWJzY3JpcHQtZm9udC1zY2FsZTtcbiAgLy8gVGhlIHBhZGRpbmcgYXBwbGllZCB0byB0aGUgZm9ybS1maWVsZC13cmFwcGVyIHRvIHJlc2VydmUgc3BhY2UgZm9yIHRoZSBzdWJzY3JpcHQsIHNpbmNlIGl0J3NcbiAgLy8gYWJzb2x1dGVseSBwb3NpdGlvbmVkLiBUaGlzIGlzIGEgY29tYmluYXRpb24gb2YgdGhlIHN1YnNjcmlwdCdzIG1hcmdpbiBhbmQgbGluZS1oZWlnaHQsIGJ1dCB3ZVxuICAvLyBuZWVkIHRvIG11bHRpcGx5IGJ5IHRoZSBzdWJzY3JpcHQgZm9udCBzY2FsZSBmYWN0b3Igc2luY2UgdGhlIHdyYXBwZXIgaGFzIGEgbGFyZ2VyIGZvbnQgc2l6ZS5cbiAgJHdyYXBwZXItcGFkZGluZy1ib3R0b206ICgkc3Vic2NyaXB0LW1hcmdpbi10b3AgKyAkbGluZS1oZWlnaHQpICogJHN1YnNjcmlwdC1mb250LXNjYWxlO1xuXG4gIC5tYXQtZm9ybS1maWVsZCB7XG4gICAgQGluY2x1ZGUgbWF0LXR5cG9ncmFwaHktbGV2ZWwtdG8tc3R5bGVzKCRjb25maWcsIGlucHV0KTtcbiAgfVxuXG4gIC5tYXQtZm9ybS1maWVsZC13cmFwcGVyIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogJHdyYXBwZXItcGFkZGluZy1ib3R0b207XG4gIH1cblxuICAubWF0LWZvcm0tZmllbGQtcHJlZml4LFxuICAubWF0LWZvcm0tZmllbGQtc3VmZml4IHtcbiAgICAvLyBBbGxvdyBpY29ucyBpbiBhIHByZWZpeCBvciBzdWZmaXggdG8gYWRhcHQgdG8gdGhlIGNvcnJlY3Qgc2l6ZS5cbiAgICAubWF0LWljb24ge1xuICAgICAgZm9udC1zaXplOiAkcHJlZml4LXN1ZmZpeC1pY29uLWZvbnQtc2l6ZTtcbiAgICAgIGxpbmUtaGVpZ2h0OiAkbGluZS1oZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8gQWxsb3cgaWNvbiBidXR0b25zIGluIGEgcHJlZml4IG9yIHN1ZmZpeCB0byBhZGFwdCB0byB0aGUgY29ycmVjdCBzaXplLlxuICAgIC5tYXQtaWNvbi1idXR0b24ge1xuICAgICAgaGVpZ2h0OiAkcHJlZml4LXN1ZmZpeC1pY29uLWZvbnQtc2NhbGUgKiAxZW07XG4gICAgICB3aWR0aDogJHByZWZpeC1zdWZmaXgtaWNvbi1mb250LXNjYWxlICogMWVtO1xuXG4gICAgICAubWF0LWljb24ge1xuICAgICAgICBoZWlnaHQ6ICRsaW5lLWhlaWdodCAqIDFlbTtcbiAgICAgICAgbGluZS1oZWlnaHQ6ICRsaW5lLWhlaWdodDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAubWF0LWZvcm0tZmllbGQtaW5maXgge1xuICAgIHBhZGRpbmc6ICRpbmZpeC1wYWRkaW5nIDA7XG4gICAgLy8gVGhyb3dzIG9mZiB0aGUgYmFzZWxpbmUgaWYgd2UgZG8gaXQgYXMgYSByZWFsIG1hcmdpbiwgc28gd2UgZG8gaXQgYXMgYSBib3JkZXIgaW5zdGVhZC5cbiAgICBib3JkZXItdG9wOiAkaW5maXgtbWFyZ2luLXRvcCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgfVxuXG4gIC5tYXQtZm9ybS1maWVsZC1jYW4tZmxvYXQge1xuICAgICYubWF0LWZvcm0tZmllbGQtc2hvdWxkLWZsb2F0IC5tYXQtZm9ybS1maWVsZC1sYWJlbCxcbiAgICAubWF0LWlucHV0LXNlcnZlcjpmb2N1cyArIC5tYXQtZm9ybS1maWVsZC1sYWJlbC13cmFwcGVyIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgICBAaW5jbHVkZSBfbWF0LWZvcm0tZmllbGQtbGFiZWwtZmxvYXRpbmcoXG4gICAgICAgICAgICAgICRzdWJzY3JpcHQtZm9udC1zY2FsZSwgJGluZml4LXBhZGRpbmcsICRpbmZpeC1tYXJnaW4tdG9wKTtcbiAgICB9XG5cbiAgICAvLyBTZXJ2ZXItc2lkZSByZW5kZXJlZCBtYXRJbnB1dCB3aXRoIGEgbGFiZWwgYXR0cmlidXRlIGJ1dCBsYWJlbCBub3Qgc2hvd25cbiAgICAvLyAodXNlZCBhcyBhIHB1cmUgQ1NTIHN0YW5kLWluIGZvciBtYXQtZm9ybS1maWVsZC1zaG91bGQtZmxvYXQpLlxuICAgIC5tYXQtaW5wdXQtc2VydmVyW2xhYmVsXTpub3QoOmxhYmVsLXNob3duKSArIC5tYXQtZm9ybS1maWVsZC1sYWJlbC13cmFwcGVyXG4gICAgICAgIC5tYXQtZm9ybS1maWVsZC1sYWJlbCB7XG4gICAgICBAaW5jbHVkZSBfbWF0LWZvcm0tZmllbGQtbGFiZWwtZmxvYXRpbmcoXG4gICAgICAgICAgICAgICRzdWJzY3JpcHQtZm9udC1zY2FsZSwgJGluZml4LXBhZGRpbmcsICRpbmZpeC1tYXJnaW4tdG9wKTtcbiAgICB9XG4gIH1cblxuICAubWF0LWZvcm0tZmllbGQtbGFiZWwtd3JhcHBlciB7XG4gICAgdG9wOiAtJGluZml4LW1hcmdpbi10b3A7XG4gICAgcGFkZGluZy10b3A6ICRpbmZpeC1tYXJnaW4tdG9wO1xuICB9XG5cbiAgLm1hdC1mb3JtLWZpZWxkLWxhYmVsIHtcbiAgICB0b3A6ICRpbmZpeC1tYXJnaW4tdG9wICsgJGluZml4LXBhZGRpbmc7XG4gIH1cblxuICAubWF0LWZvcm0tZmllbGQtdW5kZXJsaW5lIHtcbiAgICAvLyBXZSB3YW50IHRoZSB1bmRlcmxpbmUgdG8gc3RhcnQgYXQgdGhlIGVuZCBvZiB0aGUgY29udGVudCBib3gsIG5vdCB0aGUgcGFkZGluZyBib3gsXG4gICAgLy8gc28gd2UgbW92ZSBpdCB1cCBieSB0aGUgcGFkZGluZyBhbW91bnQuXG4gICAgYm90dG9tOiAkd3JhcHBlci1wYWRkaW5nLWJvdHRvbTtcbiAgfVxuXG4gIC5tYXQtZm9ybS1maWVsZC1zdWJzY3JpcHQtd3JhcHBlciB7XG4gICAgZm9udC1zaXplOiAkc3Vic2NyaXB0LWZvbnQtc2l6ZTtcbiAgICBtYXJnaW4tdG9wOiAkc3Vic2NyaXB0LW1hcmdpbi10b3A7XG5cbiAgICAvLyBXZSB3YW50IHRoZSBzdWJzY3JpcHQgdG8gc3RhcnQgYXQgdGhlIGVuZCBvZiB0aGUgY29udGVudCBib3gsIG5vdCB0aGUgcGFkZGluZyBib3gsXG4gICAgLy8gc28gd2UgbW92ZSBpdCB1cCBieSB0aGUgcGFkZGluZyBhbW91bnQgKGFkanVzdGVkIGZvciB0aGUgc21hbGxlciBmb250IHNpemUpO1xuICAgIHRvcDogY2FsYygxMDAlIC0gI3skd3JhcHBlci1wYWRkaW5nLWJvdHRvbSAvICRzdWJzY3JpcHQtZm9udC1zY2FsZX0pO1xuICB9XG5cbiAgQGluY2x1ZGUgbWF0LWZvcm0tZmllbGQtbGVnYWN5LXR5cG9ncmFwaHkoJGNvbmZpZyk7XG4gIEBpbmNsdWRlIG1hdC1mb3JtLWZpZWxkLXN0YW5kYXJkLXR5cG9ncmFwaHkoJGNvbmZpZyk7XG4gIEBpbmNsdWRlIG1hdC1mb3JtLWZpZWxkLWZpbGwtdHlwb2dyYXBoeSgkY29uZmlnKTtcbiAgQGluY2x1ZGUgbWF0LWZvcm0tZmllbGQtb3V0bGluZS10eXBvZ3JhcGh5KCRjb25maWcpO1xufVxuXG5cblxuXG5cbkBtaXhpbiBtYXQtdHJlZS10aGVtZSgkdGhlbWUpIHtcbiAgJGJhY2tncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBiYWNrZ3JvdW5kKTtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcblxuICAubWF0LXRyZWUge1xuICAgIGJhY2tncm91bmQ6IG1hdC1jb2xvcigkYmFja2dyb3VuZCwgJ2NhcmQnKTtcbiAgfVxuXG4gIC5tYXQtdHJlZS1ub2RlLFxuICAubWF0LW5lc3RlZC10cmVlLW5vZGUge1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHRleHQpO1xuICB9XG59XG5cbkBtaXhpbiBtYXQtdHJlZS10eXBvZ3JhcGh5KCRjb25maWcpIHtcbiAgLm1hdC10cmVlIHtcbiAgICBmb250LWZhbWlseTogbWF0LWZvbnQtZmFtaWx5KCRjb25maWcpO1xuICB9XG5cbiAgLm1hdC10cmVlLW5vZGUsXG4gIC5tYXQtbmVzdGVkLXRyZWUtbm9kZSB7XG4gICAgZm9udC13ZWlnaHQ6IG1hdC1mb250LXdlaWdodCgkY29uZmlnLCBib2R5LTEpO1xuICAgIGZvbnQtc2l6ZTogbWF0LWZvbnQtc2l6ZSgkY29uZmlnLCBib2R5LTEpO1xuICB9XG59XG5cblxuXG4vLyBJbmNsdWRlcyBhbGwgb2YgdGhlIHR5cG9ncmFwaGljIHN0eWxlcy5cbkBtaXhpbiBhbmd1bGFyLW1hdGVyaWFsLXR5cG9ncmFwaHkoJGNvbmZpZzogbnVsbCkge1xuICBAaWYgJGNvbmZpZyA9PSBudWxsIHtcbiAgICAkY29uZmlnOiBtYXQtdHlwb2dyYXBoeS1jb25maWcoKTtcbiAgfVxuXG4gIEBpbmNsdWRlIG1hdC1iYWRnZS10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtYmFzZS10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtYXV0b2NvbXBsZXRlLXR5cG9ncmFwaHkoJGNvbmZpZyk7XG4gIEBpbmNsdWRlIG1hdC1ib3R0b20tc2hlZXQtdHlwb2dyYXBoeSgkY29uZmlnKTtcbiAgQGluY2x1ZGUgbWF0LWJ1dHRvbi10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtYnV0dG9uLXRvZ2dsZS10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtY2FyZC10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtY2hlY2tib3gtdHlwb2dyYXBoeSgkY29uZmlnKTtcbiAgQGluY2x1ZGUgbWF0LWNoaXBzLXR5cG9ncmFwaHkoJGNvbmZpZyk7XG4gIEBpbmNsdWRlIG1hdC10YWJsZS10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtZGF0ZXBpY2tlci10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtZGlhbG9nLXR5cG9ncmFwaHkoJGNvbmZpZyk7XG4gIEBpbmNsdWRlIG1hdC1leHBhbnNpb24tcGFuZWwtdHlwb2dyYXBoeSgkY29uZmlnKTtcbiAgQGluY2x1ZGUgbWF0LWZvcm0tZmllbGQtdHlwb2dyYXBoeSgkY29uZmlnKTtcbiAgQGluY2x1ZGUgbWF0LWdyaWQtbGlzdC10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtaWNvbi10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtaW5wdXQtdHlwb2dyYXBoeSgkY29uZmlnKTtcbiAgQGluY2x1ZGUgbWF0LW1lbnUtdHlwb2dyYXBoeSgkY29uZmlnKTtcbiAgQGluY2x1ZGUgbWF0LXBhZ2luYXRvci10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtcHJvZ3Jlc3MtYmFyLXR5cG9ncmFwaHkoJGNvbmZpZyk7XG4gIEBpbmNsdWRlIG1hdC1wcm9ncmVzcy1zcGlubmVyLXR5cG9ncmFwaHkoJGNvbmZpZyk7XG4gIEBpbmNsdWRlIG1hdC1yYWRpby10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtc2VsZWN0LXR5cG9ncmFwaHkoJGNvbmZpZyk7XG4gIEBpbmNsdWRlIG1hdC1zaWRlbmF2LXR5cG9ncmFwaHkoJGNvbmZpZyk7XG4gIEBpbmNsdWRlIG1hdC1zbGlkZS10b2dnbGUtdHlwb2dyYXBoeSgkY29uZmlnKTtcbiAgQGluY2x1ZGUgbWF0LXNsaWRlci10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtc3RlcHBlci10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtc29ydC10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtdGFicy10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtdG9vbGJhci10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtdG9vbHRpcC10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtbGlzdC10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtb3B0aW9uLXR5cG9ncmFwaHkoJGNvbmZpZyk7XG4gIEBpbmNsdWRlIG1hdC1vcHRncm91cC10eXBvZ3JhcGh5KCRjb25maWcpO1xuICBAaW5jbHVkZSBtYXQtc25hY2stYmFyLXR5cG9ncmFwaHkoJGNvbmZpZyk7XG4gIEBpbmNsdWRlIG1hdC10cmVlLXR5cG9ncmFwaHkoJGNvbmZpZyk7XG59XG5cblxuLy8gTWl4aW4gdGhhdCByZW5kZXJzIGFsbCBvZiB0aGUgY29yZSBzdHlsZXMgdGhhdCBhcmUgbm90IHRoZW1lLWRlcGVuZGVudC5cbkBtaXhpbiBtYXQtY29yZSgkdHlwb2dyYXBoeS1jb25maWc6IG51bGwpIHtcbiAgQGluY2x1ZGUgYW5ndWxhci1tYXRlcmlhbC10eXBvZ3JhcGh5KCR0eXBvZ3JhcGh5LWNvbmZpZyk7XG4gIEBpbmNsdWRlIG1hdC1yaXBwbGUoKTtcbiAgQGluY2x1ZGUgY2RrLWExMXkoKTtcbiAgQGluY2x1ZGUgY2RrLW92ZXJsYXkoKTtcbiAgQGluY2x1ZGUgY2RrLXRleHQtZmllbGQoKTtcbn1cblxuLy8gTWl4aW4gdGhhdCByZW5kZXJzIGFsbCBvZiB0aGUgY29yZSBzdHlsZXMgdGhhdCBkZXBlbmQgb24gdGhlIHRoZW1lLlxuQG1peGluIG1hdC1jb3JlLXRoZW1lKCR0aGVtZSkge1xuICBAaW5jbHVkZSBtYXQtcmlwcGxlLXRoZW1lKCR0aGVtZSk7XG4gIEBpbmNsdWRlIG1hdC1vcHRpb24tdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LW9wdGdyb3VwLXRoZW1lKCR0aGVtZSk7XG4gIEBpbmNsdWRlIG1hdC1wc2V1ZG8tY2hlY2tib3gtdGhlbWUoJHRoZW1lKTtcblxuICAvLyBQcm92aWRlcyBleHRlcm5hbCBDU1MgY2xhc3NlcyBmb3IgZWFjaCBlbGV2YXRpb24gdmFsdWUuIEVhY2ggQ1NTIGNsYXNzIGlzIGZvcm1hdHRlZCBhc1xuICAvLyBgbWF0LWVsZXZhdGlvbi16JHpWYWx1ZWAgd2hlcmUgYCR6VmFsdWVgIGNvcnJlc3BvbmRzIHRvIHRoZSB6LXNwYWNlIHRvIHdoaWNoIHRoZSBlbGVtZW50IGlzXG4gIC8vIGVsZXZhdGVkLlxuICBAZm9yICR6VmFsdWUgZnJvbSAwIHRocm91Z2ggMjQge1xuICAgIC4jeyRfbWF0LWVsZXZhdGlvbi1wcmVmaXh9I3skelZhbHVlfSB7XG4gICAgICBAaW5jbHVkZSBfbWF0LXRoZW1lLWVsZXZhdGlvbigkelZhbHVlLCAkdGhlbWUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFdyYXBwZXIgZWxlbWVudCB0aGF0IHByb3ZpZGVzIHRoZSB0aGVtZSBiYWNrZ3JvdW5kIHdoZW4gdGhlIHVzZXIncyBjb250ZW50IGlzbid0XG4gIC8vIGluc2lkZSBvZiBhIGBtYXQtc2lkZW5hdi1jb250YWluZXJgLiBOb3RlIHRoYXQgd2UgbmVlZCB0byBleGNsdWRlIHRoZSBhbXBlcnNhbmRcbiAgLy8gc2VsZWN0b3IgaW4gY2FzZSB0aGUgbWl4aW4gaXMgaW5jbHVkZWQgYXQgdGhlIHRvcCBsZXZlbC5cbiAgLm1hdC1hcHAtYmFja2dyb3VuZCN7aWYoJiwgJywgJi5tYXQtYXBwLWJhY2tncm91bmQnLCAnJyl9IHtcbiAgICAkYmFja2dyb3VuZDogbWFwLWdldCgkdGhlbWUsIGJhY2tncm91bmQpO1xuICAgICRmb3JlZ3JvdW5kOiBtYXAtZ2V0KCR0aGVtZSwgZm9yZWdyb3VuZCk7XG5cbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBtYXQtY29sb3IoJGJhY2tncm91bmQsIGJhY2tncm91bmQpO1xuICAgIGNvbG9yOiBtYXQtY29sb3IoJGZvcmVncm91bmQsIHRleHQpO1xuICB9XG5cbiAgLy8gTWFya2VyIHRoYXQgaXMgdXNlZCB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgdXNlciBoYXMgYWRkZWQgYSB0aGVtZSB0byB0aGVpciBwYWdlLlxuICBAYXQtcm9vdCB7XG4gICAgLm1hdC10aGVtZS1sb2FkZWQtbWFya2VyIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICB9XG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbkBtaXhpbiBtYXQtZGl2aWRlci10aGVtZSgkdGhlbWUpIHtcbiAgJGZvcmVncm91bmQ6IG1hcC1nZXQoJHRoZW1lLCBmb3JlZ3JvdW5kKTtcblxuICAubWF0LWRpdmlkZXIge1xuICAgIGJvcmRlci10b3AtY29sb3I6IG1hdC1jb2xvcigkZm9yZWdyb3VuZCwgZGl2aWRlcik7XG4gIH1cblxuICAubWF0LWRpdmlkZXItdmVydGljYWwge1xuICAgIGJvcmRlci1yaWdodC1jb2xvcjogbWF0LWNvbG9yKCRmb3JlZ3JvdW5kLCBkaXZpZGVyKTtcbiAgfVxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4vLyBDcmVhdGUgYSB0aGVtZS5cbkBtaXhpbiBhbmd1bGFyLW1hdGVyaWFsLXRoZW1lKCR0aGVtZSkge1xuICBAaW5jbHVkZSBtYXQtY29yZS10aGVtZSgkdGhlbWUpO1xuICBAaW5jbHVkZSBtYXQtYXV0b2NvbXBsZXRlLXRoZW1lKCR0aGVtZSk7XG4gIEBpbmNsdWRlIG1hdC1iYWRnZS10aGVtZSgkdGhlbWUpO1xuICBAaW5jbHVkZSBtYXQtYm90dG9tLXNoZWV0LXRoZW1lKCR0aGVtZSk7XG4gIEBpbmNsdWRlIG1hdC1idXR0b24tdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LWJ1dHRvbi10b2dnbGUtdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LWNhcmQtdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LWNoZWNrYm94LXRoZW1lKCR0aGVtZSk7XG4gIEBpbmNsdWRlIG1hdC1jaGlwcy10aGVtZSgkdGhlbWUpO1xuICBAaW5jbHVkZSBtYXQtdGFibGUtdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LWRhdGVwaWNrZXItdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LWRpYWxvZy10aGVtZSgkdGhlbWUpO1xuICBAaW5jbHVkZSBtYXQtZGl2aWRlci10aGVtZSgkdGhlbWUpO1xuICBAaW5jbHVkZSBtYXQtZXhwYW5zaW9uLXBhbmVsLXRoZW1lKCR0aGVtZSk7XG4gIEBpbmNsdWRlIG1hdC1mb3JtLWZpZWxkLXRoZW1lKCR0aGVtZSk7XG4gIEBpbmNsdWRlIG1hdC1ncmlkLWxpc3QtdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LWljb24tdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LWlucHV0LXRoZW1lKCR0aGVtZSk7XG4gIEBpbmNsdWRlIG1hdC1saXN0LXRoZW1lKCR0aGVtZSk7XG4gIEBpbmNsdWRlIG1hdC1tZW51LXRoZW1lKCR0aGVtZSk7XG4gIEBpbmNsdWRlIG1hdC1wYWdpbmF0b3ItdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LXByb2dyZXNzLWJhci10aGVtZSgkdGhlbWUpO1xuICBAaW5jbHVkZSBtYXQtcHJvZ3Jlc3Mtc3Bpbm5lci10aGVtZSgkdGhlbWUpO1xuICBAaW5jbHVkZSBtYXQtcmFkaW8tdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LXNlbGVjdC10aGVtZSgkdGhlbWUpO1xuICBAaW5jbHVkZSBtYXQtc2lkZW5hdi10aGVtZSgkdGhlbWUpO1xuICBAaW5jbHVkZSBtYXQtc2xpZGUtdG9nZ2xlLXRoZW1lKCR0aGVtZSk7XG4gIEBpbmNsdWRlIG1hdC1zbGlkZXItdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LXN0ZXBwZXItdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LXNvcnQtdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LXRhYnMtdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LXRvb2xiYXItdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LXRvb2x0aXAtdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LXRyZWUtdGhlbWUoJHRoZW1lKTtcbiAgQGluY2x1ZGUgbWF0LXNuYWNrLWJhci10aGVtZSgkdGhlbWUpO1xufVxuIiwiQGltcG9ydCAnfkBhbmd1bGFyL21hdGVyaWFsL3RoZW1pbmcnO1xuOmhvc3Qge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAwO1xuICAgIHRvcDogMDtcbiAgICByaWdodDogMDtcbiAgICBib3R0b206IDA7XG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogbWF0LWNvbG9yKG1hdC1wYWxldHRlKCRtYXQtZ3JleSwgMzAwKSk7XG59XG5cbi5zcGxhc2hzY3JlZW4tbG9nbyB7XG4gICAgd2lkdGg6IDE0NHB4O1xuICAgIGhlaWdodDogMTQ0cHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbn1cblxuLnNwbGFzaHNjcmVlbi10ZXh0IHtcbiAgICBmb250LXNpemU6IDE4cHg7XG4gICAgbGluZS1oZWlnaHQ6IDIycHg7XG4gICAgcGFkZGluZy1sZWZ0OiAxNnB4O1xuICAgIHBhZGRpbmctcmlnaHQ6IDE2cHg7XG4gICAgcGFkZGluZy1ib3R0b206IDE2cHg7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuIl19 */\"","import { ChangeDetectionStrategy, Component } from '@angular/core';\n\n@Component({\n  selector: 'app-splashscreen',\n  templateUrl: './splashscreen.component.html',\n  styleUrls: ['./splashscreen.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class SplashScreenComponent {}\n","module.exports = \"<div></div>\\n\"","module.exports = \":host {\\n  position: absolute;\\n  z-index: 100; }\\n\\n:host(.splt-vertical) {\\n  position: absolute;\\n  z-index: 100;\\n  top: 0;\\n  bottom: 0;\\n  width: 4px;\\n  cursor: col-resize; }\\n\\n:host(.splt-horizontal) {\\n  position: absolute;\\n  z-index: 100;\\n  left: 0;\\n  right: 0;\\n  height: 4px;\\n  cursor: row-resize; }\\n\\n:host(.splt-edge-left) {\\n  position: absolute;\\n  z-index: 100;\\n  left: 0; }\\n\\n:host(.splt-edge-right) {\\n  position: absolute;\\n  z-index: 100;\\n  right: 0; }\\n\\n:host(.splt-edge-top) {\\n  position: absolute;\\n  z-index: 100;\\n  top: 0; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL3NwbGl0dGVyL3NwbGl0dGVyLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQ0ksbUJBQWtCO0VBQ2xCLGFBQVksRUFDZjs7QUFFRDtFQUNJLG1CQUFrQjtFQUNsQixhQUFZO0VBQ1osT0FBTTtFQUNOLFVBQVM7RUFDVCxXQVhlO0VBWWYsbUJBQWtCLEVBQ3JCOztBQUVEO0VBQ0ksbUJBQWtCO0VBQ2xCLGFBQVk7RUFDWixRQUFPO0VBQ1AsU0FBUTtFQUNSLFlBcEJlO0VBcUJmLG1CQUFrQixFQUNyQjs7QUFFRDtFQUNJLG1CQUFrQjtFQUNsQixhQUFZO0VBQ1osUUFBTyxFQUNWOztBQUVEO0VBQ0ksbUJBQWtCO0VBQ2xCLGFBQVk7RUFDWixTQUFRLEVBQ1g7O0FBRUQ7RUFDSSxtQkFBa0I7RUFDbEIsYUFBWTtFQUNaLE9BQU0sRUFDVCIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvZWRpdG9yL2NvbXBvbmVudHMvc3BsaXR0ZXIvc3BsaXR0ZXIuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIkc3BsaXR0ZXJXaWR0aDogNHB4O1xuOmhvc3Qge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiAxMDA7XG59XG5cbjpob3N0KC5zcGx0LXZlcnRpY2FsKSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHotaW5kZXg6IDEwMDtcbiAgICB0b3A6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIHdpZHRoOiAkc3BsaXR0ZXJXaWR0aDtcbiAgICBjdXJzb3I6IGNvbC1yZXNpemU7XG59XG5cbjpob3N0KC5zcGx0LWhvcml6b250YWwpIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgei1pbmRleDogMTAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgaGVpZ2h0OiAkc3BsaXR0ZXJXaWR0aDtcbiAgICBjdXJzb3I6IHJvdy1yZXNpemU7XG59XG5cbjpob3N0KC5zcGx0LWVkZ2UtbGVmdCkge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiAxMDA7XG4gICAgbGVmdDogMDtcbn1cblxuOmhvc3QoLnNwbHQtZWRnZS1yaWdodCkge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiAxMDA7XG4gICAgcmlnaHQ6IDA7XG59XG5cbjpob3N0KC5zcGx0LWVkZ2UtdG9wKSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHotaW5kZXg6IDEwMDtcbiAgICB0b3A6IDA7XG59XG4iXX0= */\"","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  Input,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { Dragger } from 'app/modules/editor/scripts/dragger';\nimport * as $ from 'jquery';\n\ntype Orientation = 'vertical' | 'horizontal';\ntype Edge = 'left' | 'right' | 'top';\n\n@Component({\n  selector: 'app-splitter',\n  templateUrl: './splitter.component.html',\n  styleUrls: ['./splitter.component.scss'],\n  // TODO: use 'OnPush' change detection\n})\nexport class SplitterComponent implements OnInit {\n  @Input()\n  edge: Edge;\n  @Input()\n  min: number;\n  @Input()\n  persistId: string;\n  @Output()\n  split = new EventEmitter<number>();\n  @HostBinding('class.splt-horizontal')\n  spltHorizontal: boolean;\n  @HostBinding('class.splt-vertical')\n  spltVertical: boolean;\n  @HostBinding('class.splt-edge-left')\n  spltEdgeLeft: boolean;\n  @HostBinding('class.splt-edge-right')\n  spltEdgeRight: boolean;\n  @HostBinding('style.backgroundColor')\n  backgroundColor = '';\n\n  private persistKey: string;\n  private orientation: Orientation;\n  private sizeGetterFn: () => number;\n  private sizeSetterFn: (size: number) => void;\n\n  private isHovering = false;\n  private isDragging = false;\n\n  constructor(private readonly elementRef: ElementRef) {}\n\n  ngOnInit() {\n    if (this.min === undefined || this.min <= 0) {\n      this.min = 100;\n    }\n    if (this.persistId) {\n      this.persistKey = `\\$\\$splitter::${this.persistId}`;\n    }\n    this.orientation = this.edge === 'left' || this.edge === 'right' ? 'vertical' : 'horizontal';\n    this.spltHorizontal = this.orientation === 'horizontal';\n    this.spltVertical = this.orientation === 'vertical';\n    this.spltEdgeLeft = this.edge === 'left';\n    this.spltEdgeRight = this.edge === 'right';\n    const getParentFn = () => $(this.elementRef.nativeElement).parent();\n    if (this.orientation === 'vertical') {\n      this.sizeGetterFn = () => getParentFn().width();\n      this.sizeSetterFn = size => {\n        getParentFn().width(size);\n        this.split.emit(size);\n      };\n    } else {\n      this.sizeGetterFn = () => getParentFn().height();\n      this.sizeSetterFn = size => {\n        getParentFn().height(size);\n        this.split.emit(size);\n      };\n    }\n    if (this.persistKey in localStorage) {\n      this.setSize(Number(localStorage[this.persistKey]));\n    }\n  }\n\n  private setSize(size: number) {\n    if (this.persistKey) {\n      localStorage[this.persistKey] = size;\n    }\n    this.sizeSetterFn(size);\n  }\n\n  @HostListener('mousedown', ['$event'])\n  onMouseDown(event: MouseEvent) {\n    const downSize = this.sizeGetterFn();\n    event.preventDefault();\n\n    this.isDragging = true;\n    this.showSplitter();\n\n    // tslint:disable-next-line: no-unused-expression\n    new Dragger({\n      downX: event.clientX,\n      downY: event.clientY,\n      direction: this.orientation === 'vertical' ? 'horizontal' : 'vertical',\n      draggingCursor: this.orientation === 'vertical' ? 'col-resize' : 'row-resize',\n      onBeginDragFn: () => {\n        this.isDragging = true;\n        this.showSplitter();\n      },\n      onDragFn: (_, p) => {\n        const sign = this.edge === 'left' || this.edge === 'top' ? -1 : 1;\n        const d = this.orientation === 'vertical' ? p.x : p.y;\n        this.setSize(Math.max(this.min, downSize + sign * d));\n      },\n      onDropFn: () => {\n        this.isDragging = false;\n        this.hideSplitter();\n      },\n    });\n  }\n\n  @HostListener('mouseenter')\n  onMouseEnter() {\n    this.isHovering = true;\n    this.showSplitter();\n  }\n\n  @HostListener('mouseleave')\n  onMouseLeave() {\n    this.isHovering = false;\n    this.hideSplitter();\n  }\n\n  private showSplitter() {\n    if (this.isDragging || this.isHovering) {\n      this.backgroundColor = 'rgba(0, 0, 0, 0.1)';\n    }\n  }\n\n  private hideSplitter() {\n    if (!this.isDragging && !this.isHovering) {\n      this.backgroundColor = 'transparent';\n    }\n  }\n}\n","module.exports = \"<ng-container *ngIf=\\\"(this.toolbarData$ | async) as toolbarData\\\">\\n  <div fxLayout=\\\"row\\\"\\n    fxLayoutAlign=\\\"center center\\\"\\n    *ngIf=\\\"(this.themeState$ | async) as state\\\"\\n    [class.dark-to-light-primary]=\\\"state.prevThemeType === 'dark' && state.currThemeType === 'light' && !state.currIsActionMode\\\"\\n\\n    [class.light-to-dark-primary]=\\\"state.prevThemeType === 'light' && state.currThemeType === 'dark' && !state.currIsActionMode\\\"\\n\\n    [class.dark-to-light-accent]=\\\"state.prevThemeType === 'dark' && state.currThemeType === 'light' && state.currIsActionMode\\\"\\n\\n    [class.light-to-dark-accent]=\\\"state.prevThemeType === 'light' && state.currThemeType === 'dark' && state.currIsActionMode\\\"\\n\\n    [class.action-mode-on-to-off-dark]=\\\"state.hasActionModeBeenEnabled && !state.currIsActionMode && state.currThemeType === 'dark'\\\"\\n\\n    [class.action-mode-off-to-on-dark]=\\\"state.currIsActionMode && state.currThemeType === 'dark'\\\"\\n    [class.action-mode-on-to-off-light]=\\\"state.hasActionModeBeenEnabled && !state.currIsActionMode && state.currThemeType === 'light'\\\"\\n\\n    [class.action-mode-off-to-on-light]=\\\"state.currIsActionMode && state.currThemeType === 'light'\\\"\\n    class=\\\"toolbar mat-elevation-z2\\\">\\n\\n    <ng-container *ngIf=\\\"{\\n      showActionMode: toolbarData.shouldShowActionMode(),\\n      numSubPaths: toolbarData.getNumSubPaths(),\\n      numSegments: toolbarData.getNumSegments(),\\n      numPoints: toolbarData.getNumPoints(),\\n      toolbarTitle: toolbarData.getToolbarTitle(),\\n      toolbarSubtitle: toolbarData.getToolbarSubtitle(),\\n      showAddPoints: toolbarData.getNumSubPaths() > 0 || toolbarData.getNumSegments() > 0 || !toolbarData.isSelectionMode(),\\n      showSplitSubPaths: toolbarData.getNumSubPaths() > 0 || toolbarData.getNumSegments() > 0 || !toolbarData.isSelectionMode(),\\n      showPairSubPaths: toolbarData.shouldShowPairSubPaths(),\\n      showReverseSubPaths: toolbarData.getNumSubPaths() === 1,\\n      showShiftSubPath: toolbarData.shouldShowShiftSubPath(),\\n      showSetFirstPosition: toolbarData.shouldShowSetFirstPosition(),\\n      showDeleteSubPaths: toolbarData.getNumSplitSubPaths() > 0,\\n      showDeleteSegments: toolbarData.getNumSegments() > 0,\\n      showDeletePoints: toolbarData.getNumSplitPoints() > 0,\\n      showSplitInHalf: toolbarData.shouldShowSplitInHalf(),\\n      showAutoFix: toolbarData.shouldShowAutoFix()\\n    } as data\\\">\\n\\n      <!-- Shape Shifter logo. -->\\n      <mat-icon *ngIf=\\\"!data.showActionMode\\\"\\n        class=\\\"toolbar-logo\\\"\\n        svgIcon=\\\"shapeshifter\\\">\\n      </mat-icon>\\n\\n      <!-- Action mode close button. -->\\n      <button mat-icon-button\\n        *ngIf=\\\"data.showActionMode\\\"\\n        class=\\\"action-mode-close-icon\\\"\\n        (click)=\\\"onCloseActionModeClick($event)\\\">\\n        <mat-icon>{{ toolbarData.isSelectionMode() ? 'arrow_back' : 'close' }}</mat-icon>\\n      </button>\\n\\n      <!-- Toolbar text. -->\\n      <div fxLayout=\\\"column\\\">\\n        <span class=\\\"toolbar-title\\\">{{ data.toolbarTitle }}</span>\\n        <span *ngIf=\\\"data.toolbarSubtitle\\\"\\n          class=\\\"toolbar-subtitle\\\">\\n          {{ data.toolbarSubtitle }}\\n        </span>\\n      </div>\\n\\n      <span fxFlex=\\\"1 1 auto\\\"></span>\\n\\n      <button mat-icon-button\\n        class=\\\"toolbar-action-button\\\"\\n        (click)=\\\"onAutoFixClick($event)\\\"\\n        matTooltip=\\\"Auto fix\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        *ngIf=\\\"data.showAutoFix\\\"\\n        matTooltipPosition=\\\"below\\\">\\n        <mat-icon svgIcon=\\\"autofix\\\"></mat-icon>\\n      </button>\\n\\n      <!-- SubPath mode. -->\\n      <button mat-icon-button\\n        class=\\\"toolbar-action-button\\\"\\n        matTooltip=\\\"Add points (A)\\\"\\n        matTooltipPosition=\\\"below\\\"\\n        *ngIf=\\\"data.showAddPoints\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        (click)=\\\"onAddPointsClick($event)\\\"\\n        [class.activated]=\\\"toolbarData.isAddPointsMode()\\\">\\n        <mat-icon>add_circle_outline</mat-icon>\\n      </button>\\n      <button mat-icon-button\\n        class=\\\"toolbar-action-button\\\"\\n        matTooltip=\\\"Split subpaths (S)\\\"\\n        matTooltipPosition=\\\"below\\\"\\n        *ngIf=\\\"data.showSplitSubPaths\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        (click)=\\\"onSplitSubPathsClick($event)\\\"\\n        [class.activated]=\\\"toolbarData.isSplitSubPathsMode()\\\">\\n        <mat-icon>content_cut</mat-icon>\\n      </button>\\n      <button mat-icon-button\\n        class=\\\"toolbar-action-button\\\"\\n        matTooltip=\\\"Pair subpaths (D)\\\"\\n        matTooltipPosition=\\\"below\\\"\\n        *ngIf=\\\"data.showPairSubPaths\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        (click)=\\\"onPairSubPathsClick($event)\\\"\\n        [class.activated]=\\\"toolbarData.isPairSubPathsMode()\\\">\\n        <mat-icon>compare_arrows</mat-icon>\\n      </button>\\n      <button mat-icon-button\\n        class=\\\"toolbar-action-button\\\"\\n        matTooltip=\\\"Reverse points (R)\\\"\\n        matTooltipPosition=\\\"below\\\"\\n        *ngIf=\\\"data.showReverseSubPaths\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        (click)=\\\"onReversePointsClick($event)\\\"\\n        [disabled]=\\\"!toolbarData.isSelectionMode()\\\">\\n        <mat-icon svgIcon=\\\"reverse\\\"></mat-icon>\\n      </button>\\n      <button mat-icon-button\\n        class=\\\"toolbar-action-button\\\"\\n        matTooltip=\\\"Shift back points (B)\\\"\\n        matTooltipPosition=\\\"below\\\"\\n        *ngIf=\\\"data.showShiftSubPath\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        (click)=\\\"onShiftBackPointsClick($event)\\\"\\n        [disabled]=\\\"!toolbarData.isSelectionMode()\\\">\\n        <mat-icon>skip_previous</mat-icon>\\n      </button>\\n      <button mat-icon-button\\n        class=\\\"toolbar-action-button\\\"\\n        matTooltip=\\\"Shift forward points (F)\\\"\\n        matTooltipPosition=\\\"below\\\"\\n        *ngIf=\\\"data.showShiftSubPath\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        (click)=\\\"onShiftForwardPointsClick($event)\\\"\\n        [disabled]=\\\"!toolbarData.isSelectionMode()\\\">\\n        <mat-icon>skip_next</mat-icon>\\n      </button>\\n      <button mat-icon-button\\n        class=\\\"toolbar-action-button\\\"\\n        matTooltipPosition=\\\"below\\\"\\n        matTooltip=\\\"Delete subpath{{data.numSubPaths === 1 ? '' : 's'}}\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        *ngIf=\\\"data.showDeleteSubPaths\\\"\\n        (click)=\\\"onDeleteSubPathsClick($event)\\\">\\n        <mat-icon>delete</mat-icon>\\n      </button>\\n\\n      <!-- Segment mode. -->\\n      <button mat-icon-button\\n        class=\\\"toolbar-action-button\\\"\\n        matTooltipPosition=\\\"below\\\"\\n        matTooltip=\\\"Delete segment{{data.numSegments === 1 ? '' : 's'}}\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        *ngIf=\\\"data.showDeleteSegments\\\"\\n        (click)=\\\"onDeleteSegmentsClick($event)\\\">\\n        <mat-icon>delete</mat-icon>\\n      </button>\\n\\n      <!-- Point mode. -->\\n      <button mat-icon-button\\n        matTooltip=\\\"Add point (A)\\\"\\n        matTooltipPosition=\\\"below\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        *ngIf=\\\"data.showSplitInHalf\\\"\\n        (mouseenter)=\\\"onSplitInHalfHoverEvent(true)\\\"\\n        (mouseleave)=\\\"onSplitInHalfHoverEvent(false)\\\"\\n        (click)=\\\"onSplitInHalfClick($event)\\\">\\n        <mat-icon>add_circle_outline</mat-icon>\\n      </button>\\n      <button mat-icon-button\\n        class=\\\"toolbar-action-button\\\"\\n        matTooltip=\\\"Set first point (F)\\\"\\n        matTooltipPosition=\\\"below\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        *ngIf=\\\"data.showSetFirstPosition\\\"\\n        (click)=\\\"onSetFirstPositionClick($event)\\\">\\n        <mat-icon>looks_one</mat-icon>\\n      </button>\\n      <button mat-icon-button\\n        class=\\\"toolbar-action-button\\\"\\n        matTooltipPosition=\\\"below\\\"\\n        matTooltip=\\\"Delete point{{data.numPoints === 1 ? '' : 's'}}\\\"\\n        matTooltipShowDelay=\\\"500\\\"\\n        *ngIf=\\\"data.showDeletePoints\\\"\\n        (click)=\\\"onDeletePointsClick($event)\\\">\\n        <mat-icon>delete</mat-icon>\\n      </button>\\n\\n      <!-- Overflow menu buttons. -->\\n      <button class=\\\"toolbar-action-button\\\"\\n        mat-icon-button\\n        (click)=\\\"$event.stopPropagation()\\\"\\n        [matMenuTriggerFor]=\\\"overflowMenu\\\">\\n        <mat-icon>more_vert</mat-icon>\\n      </button>\\n      <mat-menu #overflowMenu=\\\"matMenu\\\">\\n        <div mat-menu-item\\n          (click)=\\\"this.darkTheme = !this.darkTheme\\\">\\n          <mat-slide-toggle (click)=\\\"this.darkTheme = !this.darkTheme; $event.stopPropagation()\\\"\\n            [(ngModel)]=\\\"darkTheme\\\"></mat-slide-toggle>\\n          <span>Dark theme</span>\\n        </div>\\n        <a href=\\\"http://www.androiddesignpatterns.com/2016/11/introduction-to-icon-animation-techniques.html\\\"\\n          target=\\\"_blank\\\"\\n          class=\\\"toolbar-overflow-link-item\\\">\\n          <button mat-menu-item\\n            (click)=\\\"this.onGettingStartedClick()\\\">\\n            <mat-icon>info</mat-icon>\\n            <span>Getting started</span>\\n          </button>\\n        </a>\\n        <a href=\\\"https://github.com/alexjlockwood/ShapeShifter\\\"\\n          target=\\\"_blank\\\"\\n          class=\\\"toolbar-overflow-link-item\\\">\\n          <button mat-menu-item\\n            (click)=\\\"this.onContributeClick()\\\">\\n            <mat-icon style=\\\"line-height: 1\\\"\\n              svgIcon=\\\"contribute\\\"></mat-icon>\\n            <span>Contribute</span>\\n          </button>\\n        </a>\\n        <a href=\\\"https://github.com/alexjlockwood/ShapeShifter/issues\\\"\\n          target=\\\"_blank\\\"\\n          class=\\\"toolbar-overflow-link-item\\\">\\n          <button mat-menu-item\\n            (click)=\\\"this.onSendFeedbackClick()\\\">\\n            <mat-icon>bug_report</mat-icon>\\n            <span>Send feedback</span>\\n          </button>\\n        </a>\\n        <a href=\\\"{{ this.isBeta() ? 'https://shapeshifter.design' : 'https://beta.shapeshifter.design' }}\\\"\\n          target=\\\"_blank\\\"\\n          class=\\\"toolbar-overflow-link-item\\\">\\n          <button mat-menu-item>\\n            <mat-icon>open_in_new</mat-icon>\\n            <span>Switch to {{ this.isBeta() ? 'stable' : 'beta' }} </span>\\n          </button>\\n        </a>\\n      </mat-menu>\\n    </ng-container>\\n  </div>\\n</ng-container>\"","module.exports = \".toolbar {\\n  padding: 8px 16px;\\n  z-index: 1; }\\n  .toolbar .toolbar-logo {\\n    width: 40px;\\n    height: 40px;\\n    margin-right: 8px; }\\n  .toolbar .toolbar-title {\\n    font-size: 18px; }\\n  .toolbar .toolbar-subtitle {\\n    margin-top: 4px;\\n    font-size: 13px; }\\n  .toolbar-overflow-link-item {\\n  color: inherit;\\n  text-decoration: none;\\n  cursor: inherit; }\\n  .action-mode-close-icon {\\n  margin-right: 8px; }\\n  .toolbar-action-button {\\n  margin-left: 16px; }\\n  a button.mat-menu-item mat-icon {\\n  margin-right: 20px; }\\n  mat-slide-toggle {\\n  margin-right: 8px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL3Rvb2xiYXIvdG9vbGJhci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFpQjtFQUNqQixXQUFVLEVBYWI7RUFmRDtJQUlRLFlBQVc7SUFDWCxhQUFZO0lBQ1osa0JBQWlCLEVBQ3BCO0VBUEw7SUFTUSxnQkFBZSxFQUNsQjtFQVZMO0lBWVEsZ0JBQWU7SUFDZixnQkFBZSxFQUNsQjtFQUdMO0VBRUksZUFBYztFQUNkLHNCQUFxQjtFQUNyQixnQkFBZSxFQUNsQjtFQUVEO0VBQ0ksa0JBQWlCLEVBQ3BCO0VBRUQ7RUFDSSxrQkFBaUIsRUFDcEI7RUFFRDtFQUdZLG1CQUFrQixFQUNyQjtFQUdUO0VBQ0ksa0JBQWlCLEVBQ3BCIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9lZGl0b3IvY29tcG9uZW50cy90b29sYmFyL3Rvb2xiYXIuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudG9vbGJhciB7XG4gICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgei1pbmRleDogMTtcbiAgICAudG9vbGJhci1sb2dvIHtcbiAgICAgICAgd2lkdGg6IDQwcHg7XG4gICAgICAgIGhlaWdodDogNDBweDtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgfVxuICAgIC50b29sYmFyLXRpdGxlIHtcbiAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgIH1cbiAgICAudG9vbGJhci1zdWJ0aXRsZSB7XG4gICAgICAgIG1hcmdpbi10b3A6IDRweDtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgIH1cbn1cblxuLnRvb2xiYXItb3ZlcmZsb3ctbGluay1pdGVtIHtcbiAgICAvLyBSZW1vdmUgbGluayBkZWNvcmF0aW9ucyBmcm9tIG92ZXJmbG93IG1lbnUgaXRlbXMuXG4gICAgY29sb3I6IGluaGVyaXQ7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgIGN1cnNvcjogaW5oZXJpdDtcbn1cblxuLmFjdGlvbi1tb2RlLWNsb3NlLWljb24ge1xuICAgIG1hcmdpbi1yaWdodDogOHB4O1xufVxuXG4udG9vbGJhci1hY3Rpb24tYnV0dG9uIHtcbiAgICBtYXJnaW4tbGVmdDogMTZweDtcbn1cblxuYSB7XG4gICAgYnV0dG9uLm1hdC1tZW51LWl0ZW0ge1xuICAgICAgICBtYXQtaWNvbiB7XG4gICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7XG4gICAgICAgIH1cbiAgICB9XG59XG5tYXQtc2xpZGUtdG9nZ2xlIHtcbiAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbn1cbiJdfQ== */\"","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport {\n  ActionMode,\n  ActionSource,\n  Selection,\n  SelectionType,\n} from 'app/modules/editor/model/actionmode';\nimport { MorphableLayer } from 'app/modules/editor/model/layers';\nimport { PathAnimationBlock } from 'app/modules/editor/model/timeline';\nimport { ActionModeUtil } from 'app/modules/editor/scripts/actionmode';\nimport { ActionModeService, ThemeService } from 'app/modules/editor/services';\nimport { State, Store } from 'app/modules/editor/store';\nimport { getToolbarState } from 'app/modules/editor/store/actionmode/selectors';\nimport { ThemeType } from 'app/modules/editor/store/theme/reducer';\nimport { environment } from 'environments/environment';\nimport * as _ from 'lodash';\nimport { Observable, combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\ndeclare const ga: Function;\n\n@Component({\n  selector: 'app-toolbar',\n  templateUrl: './toolbar.component.html',\n  styleUrls: ['./toolbar.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ToolbarComponent implements OnInit {\n  toolbarData$: Observable<ToolbarData>;\n  themeState$: Observable<{\n    prevThemeType: ThemeType;\n    currThemeType: ThemeType;\n    prevIsActionMode: boolean;\n    currIsActionMode: boolean;\n  }>;\n\n  constructor(\n    private readonly actionModeService: ActionModeService,\n    readonly themeService: ThemeService,\n    private readonly store: Store<State>,\n  ) {}\n\n  ngOnInit() {\n    let hasActionModeBeenEnabled = false;\n    let prevThemeType: ThemeType;\n    let currThemeType = this.themeService.getThemeType().themeType;\n    let prevIsActionMode: boolean;\n    let currIsActionMode = this.actionModeService.getActionMode() !== ActionMode.None;\n    const toolbarState = this.store.select(getToolbarState);\n    this.toolbarData$ = toolbarState.pipe(\n      map(({ mode, fromMl, toMl, selections, unpairedSubPath, block }) => {\n        return new ToolbarData(mode, fromMl, toMl, selections, unpairedSubPath, block);\n      }),\n    );\n    this.themeState$ = combineLatest(\n      toolbarState,\n      this.themeService.asObservable().pipe(map(t => t.themeType)),\n    ).pipe(\n      map(([{ mode }, themeType]) => {\n        hasActionModeBeenEnabled = hasActionModeBeenEnabled || mode !== ActionMode.None;\n        prevThemeType = currThemeType;\n        currThemeType = themeType;\n        prevIsActionMode = currIsActionMode;\n        currIsActionMode = mode !== ActionMode.None;\n        return {\n          hasActionModeBeenEnabled,\n          prevThemeType,\n          currThemeType,\n          prevIsActionMode,\n          currIsActionMode,\n        };\n      }),\n    );\n  }\n\n  get darkTheme() {\n    return this.themeService.getThemeType().themeType === 'dark';\n  }\n\n  set darkTheme(isDark: boolean) {\n    this.themeService.setTheme(isDark ? 'dark' : 'light');\n  }\n\n  onSendFeedbackClick(event: MouseEvent) {\n    ga('send', 'event', 'Miscellaneous', 'Send feedback click');\n  }\n\n  onContributeClick(event: MouseEvent) {\n    ga('send', 'event', 'Miscellaneous', 'Contribute click');\n  }\n\n  onGettingStartedClick(event: MouseEvent) {\n    ga('send', 'event', 'Miscellaneous', 'Getting started click');\n  }\n\n  onAutoFixClick(event: MouseEvent) {\n    ga('send', 'event', 'Action mode', 'Auto fix click');\n    event.stopPropagation();\n    this.actionModeService.autoFix();\n  }\n\n  onCloseActionModeClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.actionModeService.closeActionMode();\n  }\n\n  onAddPointsClick(event: MouseEvent) {\n    ga('send', 'event', 'Action mode', 'Add points');\n    event.stopPropagation();\n    this.actionModeService.toggleSplitCommandsMode();\n  }\n\n  onSplitSubPathsClick(event: MouseEvent) {\n    ga('send', 'event', 'Action mode', 'Split sub paths');\n    event.stopPropagation();\n    this.actionModeService.toggleSplitSubPathsMode();\n  }\n\n  onPairSubPathsClick(event: MouseEvent) {\n    ga('send', 'event', 'Action mode', 'Pair sub paths');\n    event.stopPropagation();\n    this.actionModeService.togglePairSubPathsMode();\n  }\n\n  onReversePointsClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.actionModeService.reverseSelectedSubPaths();\n  }\n\n  onShiftBackPointsClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.actionModeService.shiftBackSelectedSubPaths();\n  }\n\n  onShiftForwardPointsClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.actionModeService.shiftForwardSelectedSubPaths();\n  }\n\n  onDeleteSubPathsClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.actionModeService.deleteSelectedActionModeModels();\n  }\n\n  onDeleteSegmentsClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.actionModeService.deleteSelectedActionModeModels();\n  }\n\n  onSetFirstPositionClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.actionModeService.shiftPointToFront();\n  }\n\n  onSplitInHalfHoverEvent(isHovering: boolean) {\n    if (isHovering) {\n      this.actionModeService.splitInHalfHover();\n    } else {\n      this.actionModeService.clearHover();\n    }\n  }\n\n  onSplitInHalfClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.actionModeService.splitSelectedPointInHalf();\n  }\n\n  onDeletePointsClick(event: MouseEvent) {\n    event.stopPropagation();\n    this.actionModeService.deleteSelectedActionModeModels();\n  }\n\n  isBeta() {\n    return environment.beta;\n  }\n}\n\nclass ToolbarData {\n  private readonly subPaths: ReadonlyArray<number> = [];\n  private readonly segments: ReadonlyArray<{ subIdx: number; cmdIdx: number }> = [];\n  private readonly points: ReadonlyArray<{ subIdx: number; cmdIdx: number }> = [];\n  private readonly numSplitSubPaths: number;\n  private readonly numSplitPoints: number;\n  private readonly showSetFirstPosition: boolean;\n  private readonly showShiftSubPath: boolean;\n  private readonly isFilled: boolean;\n  private readonly isStroked: boolean;\n  private readonly showSplitInHalf: boolean;\n  private readonly unpairedSubPathSource: ActionSource;\n  private readonly showPairSubPaths: boolean;\n\n  constructor(\n    readonly mode: ActionMode,\n    startMorphableLayer: MorphableLayer,\n    endMorphableLayer: MorphableLayer,\n    readonly selections: ReadonlyArray<Selection>,\n    unpair: { source: ActionSource; subIdx: number },\n    private readonly block: PathAnimationBlock | undefined,\n  ) {\n    // Precondition: assume all selections are for the same canvas type\n    if (!selections.length) {\n      return;\n    }\n    const canvasType = selections[0].source;\n    const morphableLayer =\n      canvasType === ActionSource.From ? startMorphableLayer : endMorphableLayer;\n    if (!morphableLayer) {\n      return;\n    }\n    const activePath = morphableLayer.pathData;\n    this.isFilled = morphableLayer.isFilled();\n    this.isStroked = morphableLayer.isStroked();\n    this.subPaths = selections.filter(s => s.type === SelectionType.SubPath).map(s => s.subIdx);\n    this.segments = selections\n      .filter(s => {\n        const { subIdx, cmdIdx } = s;\n        return (\n          s.type === SelectionType.Segment &&\n          morphableLayer.isFilled() &&\n          activePath.getCommand(subIdx, cmdIdx).isSplitSegment()\n        );\n      })\n      .map(s => {\n        const { subIdx, cmdIdx } = s;\n        return { subIdx, cmdIdx };\n      });\n    this.points = selections.filter(s => s.type === SelectionType.Point).map(s => {\n      const { subIdx, cmdIdx } = s;\n      return { subIdx, cmdIdx };\n    });\n\n    this.numSplitSubPaths = _.sumBy(this.subPaths, subIdx => {\n      return activePath.getSubPath(subIdx).isUnsplittable() ? 1 : 0;\n    });\n    this.numSplitPoints = _.sumBy(this.points, s => {\n      const { subIdx, cmdIdx } = s;\n      return activePath.getCommand(subIdx, cmdIdx).isSplitPoint() ? 1 : 0;\n    });\n    this.showSetFirstPosition =\n      this.points.length === 1 &&\n      this.points[0].cmdIdx &&\n      activePath.getSubPath(this.points[0].subIdx).isClosed();\n    this.showShiftSubPath =\n      this.subPaths.length > 0 && activePath.getSubPath(this.subPaths[0]).isClosed();\n    this.showSplitInHalf = this.points.length === 1 && !!this.points[0].cmdIdx;\n    if (this.mode === ActionMode.PairSubPaths) {\n      if (unpair) {\n        this.unpairedSubPathSource = unpair.source;\n      }\n    }\n    this.showPairSubPaths =\n      startMorphableLayer.pathData.getSubPaths().length === 1 &&\n      endMorphableLayer.pathData.getSubPaths().length === 1\n        ? false\n        : this.getNumSubPaths() === 1 || this.getNumSegments() > 0 || !this.isSelectionMode();\n  }\n\n  getNumSelections() {\n    return this.subPaths.length + this.segments.length + this.points.length;\n  }\n\n  getNumSubPaths() {\n    return this.subPaths.length;\n  }\n\n  getNumSegments() {\n    return this.segments.length;\n  }\n\n  getNumPoints() {\n    return this.points.length;\n  }\n\n  getToolbarTitle() {\n    if (this.mode === ActionMode.SplitCommands) {\n      return 'Add points';\n    }\n    if (this.mode === ActionMode.SplitSubPaths) {\n      return 'Split subpaths';\n    }\n    if (this.mode === ActionMode.PairSubPaths) {\n      return 'Pair subpaths';\n    }\n    const numSubPaths = this.getNumSubPaths();\n    const subStr = `${numSubPaths} subpath${numSubPaths === 1 ? '' : 's'}`;\n    const numSegments = this.getNumSegments();\n    const segStr = `${numSegments} segment${numSegments === 1 ? '' : 's'}`;\n    const numPoints = this.getNumPoints();\n    const ptStr = `${numPoints} point${numPoints === 1 ? '' : 's'}`;\n    if (numSubPaths > 0) {\n      return `${subStr} selected`;\n    } else if (numSegments > 0) {\n      return `${segStr} selected`;\n    } else if (numPoints > 0) {\n      return `${ptStr} selected`;\n    } else if (this.mode === ActionMode.Selection) {\n      return 'Edit path morphing animation';\n    }\n    return 'Shape Shifter';\n  }\n\n  getToolbarSubtitle() {\n    if (this.mode === ActionMode.SplitCommands) {\n      return 'Click along the edge of a subpath to add a point';\n    } else if (this.mode === ActionMode.SplitSubPaths) {\n      if (this.isFilled) {\n        return 'Draw a line across a subpath to split it into 2';\n      } else if (this.isStroked) {\n        return 'Click along the edge of a subpath to split it into 2';\n      }\n    } else if (this.mode === ActionMode.PairSubPaths) {\n      if (this.unpairedSubPathSource) {\n        const toSourceDir = this.unpairedSubPathSource === ActionSource.From ? 'right' : 'left';\n        return `Pair the selected subpath with a corresponding subpath on the ${toSourceDir}`;\n      }\n      return 'Select a subpath';\n    } else if (this.mode === ActionMode.Selection) {\n      const { areCompatible, errorPath, numPointsMissing } = ActionModeUtil.checkPathsCompatible(\n        this.block,\n      );\n      if (!areCompatible) {\n        const createSubtitleFn = (direction: string) => {\n          if (numPointsMissing === 1) {\n            return `Add 1 point to the highlighted subpath on the ${direction}`;\n          } else {\n            return `Add ${numPointsMissing} points to the highlighted subpath on the ${direction}`;\n          }\n        };\n        if (errorPath === ActionSource.From) {\n          return createSubtitleFn('left');\n        } else if (errorPath === ActionSource.To) {\n          return createSubtitleFn('right');\n        }\n        // This should never happen, but return empty string just to be safe.\n        return '';\n      }\n      if (!this.getNumSubPaths() && !this.getNumSegments() && !this.getNumPoints()) {\n        return 'Select something below to edit its properties';\n      }\n    }\n    return '';\n  }\n\n  shouldShowActionMode() {\n    return this.mode !== ActionMode.None;\n  }\n\n  shouldShowPairSubPaths() {\n    return this.showPairSubPaths;\n  }\n\n  getNumSplitSubPaths() {\n    return this.numSplitSubPaths || 0;\n  }\n\n  getNumSplitPoints() {\n    return this.numSplitPoints || 0;\n  }\n\n  shouldShowSetFirstPosition() {\n    return this.showSetFirstPosition || false;\n  }\n\n  shouldShowShiftSubPath() {\n    return this.showShiftSubPath || false;\n  }\n\n  shouldShowSplitInHalf() {\n    return this.showSplitInHalf || false;\n  }\n\n  isSelectionMode() {\n    return this.mode === ActionMode.None || this.mode === ActionMode.Selection;\n  }\n\n  isAddPointsMode() {\n    return this.mode === ActionMode.SplitCommands;\n  }\n\n  isSplitSubPathsMode() {\n    return this.mode === ActionMode.SplitSubPaths;\n  }\n\n  isPairSubPathsMode() {\n    return this.mode === ActionMode.PairSubPaths;\n  }\n\n  shouldShowAutoFix() {\n    return this.mode === ActionMode.Selection && !this.getNumSelections();\n  }\n}\n","module.exports = \"<div *ngIf=\\\"(this.model$ | async) as model\\\"\\n  class=\\\"tool-panel mat-elevation-z4\\\"\\n  fxLayout=\\\"column\\\"\\n  fxFlex>\\n  <button class=\\\"tool-button\\\"\\n    matTooltip=\\\"Select\\\"\\n    matTooltipPosition=\\\"right\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [class.is-checked]=\\\"model.isDefaultClick\\\"\\n    (click)=\\\"onDefaultClick($event)\\\">\\n    <mat-icon svgIcon=\\\"tool_select\\\"></mat-icon>\\n  </button>\\n  <button class=\\\"tool-button\\\"\\n    matTooltip=\\\"Rotate\\\"\\n    matTooltipPosition=\\\"right\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [class.is-checked]=\\\"model.isRotateItemsChecked\\\"\\n    [disabled]=\\\"!model.isRotateItemsEnabled\\\"\\n    (click)=\\\"onRotateItemsClick($event)\\\">\\n    <mat-icon>crop_rotate</mat-icon>\\n  </button>\\n  <button class=\\\"tool-button\\\"\\n    matTooltip=\\\"Transform\\\"\\n    matTooltipPosition=\\\"right\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [class.is-checked]=\\\"model.isTransformPathsChecked\\\"\\n    [disabled]=\\\"!model.isTransformPathsEnabled\\\"\\n    (click)=\\\"onTransformPathsClick($event)\\\">\\n    <mat-icon>transform</mat-icon>\\n  </button>\\n  <button class=\\\"tool-button\\\"\\n    matTooltip=\\\"Pencil\\\"\\n    matTooltipPosition=\\\"right\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [class.is-checked]=\\\"model.toolMode === this.TOOL_MODE_PENCIL\\\"\\n    (click)=\\\"onPencilClick($event)\\\">\\n    <mat-icon svgIcon=\\\"tool_pencil\\\"></mat-icon>\\n  </button>\\n  <button class=\\\"tool-button\\\"\\n    matTooltip=\\\"Vector\\\"\\n    matTooltipPosition=\\\"right\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [class.is-checked]=\\\"model.isEditPathChecked\\\"\\n    (click)=\\\"onEditPathClick($event)\\\">\\n    <mat-icon svgIcon=\\\"tool_vector\\\"></mat-icon>\\n  </button>\\n  <button class=\\\"tool-button\\\"\\n    matTooltip=\\\"Oval\\\"\\n    matTooltipPosition=\\\"right\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [class.is-checked]=\\\"model.toolMode === this.TOOL_MODE_ELLIPSE\\\"\\n    (click)=\\\"onEllipseClick($event)\\\">\\n    <mat-icon svgIcon=\\\"tool_ellipse\\\"></mat-icon>\\n  </button>\\n  <button class=\\\"tool-button\\\"\\n    matTooltip=\\\"Rectangle\\\"\\n    matTooltipPosition=\\\"right\\\"\\n    matTooltipShowDelay=\\\"500\\\"\\n    [class.is-checked]=\\\"model.toolMode === this.TOOL_MODE_RECTANGLE\\\"\\n    (click)=\\\"onRectangleClick($event)\\\">\\n    <mat-icon svgIcon=\\\"tool_rectangle\\\"></mat-icon>\\n  </button>\\n  <!-- TODO: set the tooltip delay back to 500 once we have a better way of telling the user about zooming out -->\\n  <button class=\\\"tool-button\\\"\\n    matTooltip=\\\"Zoom (hold {{ this.isMac() ? 'option' : 'alt' }} to zoom out)\\\"\\n    matTooltipPosition=\\\"right\\\"\\n    matTooltipShowDelay=\\\"0\\\"\\n    [class.is-checked]=\\\"model.toolMode === this.TOOL_MODE_ZOOMPAN\\\"\\n    (click)=\\\"onZoomPanClick($event)\\\">\\n    <mat-icon>zoom_in</mat-icon>\\n  </button>\\n</div>\"","module.exports = \".tool-panel {\\n  background-color: #eeeeee;\\n  position: relative; }\\n  .tool-panel .tool-button {\\n    margin: 4px; }\\n  .tool-panel .tool-button:hover {\\n      cursor: pointer; }\\n  .tool-panel .tool-button.is-checked {\\n      background-color: #d0d0d0; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS9TaGFwZVNoaWZ0ZXIvc3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL3Rvb2xwYW5lbC90b29scGFuZWwuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFRSwwQkFBeUI7RUFDekIsbUJBQWtCLEVBWW5CO0VBZkQ7SUFNSSxZQUFXLEVBUVo7RUFkSDtNQVFNLGdCQUFlLEVBQ2hCO0VBVEw7TUFZTSwwQkFBeUIsRUFDMUIiLCJmaWxlIjoic3JjL2FwcC9tb2R1bGVzL2VkaXRvci9jb21wb25lbnRzL3Rvb2xwYW5lbC90b29scGFuZWwuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudG9vbC1wYW5lbCB7XG4gIC8vIFRPRE86IG1vdmUgdGhpcyBpbnRvIGEgdGhlbWVkIENTUyBmaWxlXG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWU7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAudG9vbC1idXR0b24ge1xuICAgIG1hcmdpbjogNHB4O1xuICAgICY6aG92ZXIge1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbiAgICAmLmlzLWNoZWNrZWQge1xuICAgICAgICAvLyBUT0RPOiBtb3ZlIHRoaXMgaW50byBhIHRoZW1lZCBDU1MgZmlsZVxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2QwZDBkMDtcbiAgICB9XG4gIH1cbn1cblxuIl19 */\"","import { Component, OnInit } from '@angular/core';\nimport { ToolMode } from 'app/modules/editor/model/paper';\nimport { PaperService, ShortcutService } from 'app/modules/editor/services';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'app-toolpanel',\n  templateUrl: './toolpanel.component.html',\n  styleUrls: ['./toolpanel.component.scss'],\n})\nexport class ToolPanelComponent implements OnInit {\n  readonly TOOL_MODE_PENCIL = ToolMode.Pencil;\n  readonly TOOL_MODE_ELLIPSE = ToolMode.Ellipse;\n  readonly TOOL_MODE_RECTANGLE = ToolMode.Rectangle;\n  readonly TOOL_MODE_ZOOMPAN = ToolMode.ZoomPan;\n\n  // TODO: only enable edit path/rotate/transform in default mode?\n  model$: Observable<ToolPanelModel>;\n\n  constructor(private readonly ps: PaperService) {}\n\n  ngOnInit() {\n    this.model$ = this.ps.observeToolPanelState();\n  }\n\n  onDefaultClick(event: Event) {\n    this.ps.enterDefaultMode();\n    event.stopPropagation();\n  }\n\n  onRotateItemsClick(event: Event) {\n    this.ps.enterRotateItemsMode();\n    event.stopPropagation();\n  }\n\n  onTransformPathsClick(event: Event) {\n    this.ps.enterTransformPathsMode();\n    event.stopPropagation();\n  }\n\n  onPencilClick(event: Event) {\n    this.ps.enterPencilMode();\n    event.stopPropagation();\n  }\n\n  onEditPathClick(event: Event) {\n    this.ps.enterEditPathMode();\n    event.stopPropagation();\n  }\n\n  onEllipseClick(event: Event) {\n    this.ps.enterCreateEllipseMode();\n    event.stopPropagation();\n  }\n\n  onRectangleClick(event: Event) {\n    this.ps.enterCreateRectangleMode();\n    event.stopPropagation();\n  }\n\n  onZoomPanClick(event: Event) {\n    this.ps.setToolMode(ToolMode.ZoomPan);\n    event.stopPropagation();\n  }\n\n  isMac() {\n    return ShortcutService.isMac();\n  }\n}\n\ninterface ToolPanelModel {\n  readonly toolMode: ToolMode;\n  readonly isDefaultChecked: boolean;\n  readonly isEditPathChecked: boolean;\n  readonly isRotateItemsEnabled: boolean;\n  readonly isRotateItemsChecked: boolean;\n  readonly isTransformPathsEnabled: boolean;\n  readonly isTransformPathsChecked: boolean;\n}\n","import { HttpClientModule } from '@angular/common/http';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { FormsModule } from '@angular/forms';\nimport {\n  MatButtonModule,\n  MatDialogModule,\n  MatIconModule,\n  MatIconRegistry,\n  MatInputModule,\n  MatMenuModule,\n  MatOptionModule,\n  MatRadioModule,\n  MatSlideToggleModule,\n  MatSnackBarModule,\n  MatToolbarModule,\n  MatTooltipModule,\n} from '@angular/material';\nimport { BrowserModule, DomSanitizer } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { ServiceWorkerModule } from '@angular/service-worker';\nimport {\n  CanvasComponent,\n  CanvasContainerDirective,\n  CanvasLayersDirective,\n  CanvasOverlayDirective,\n  CanvasPaperDirective,\n  CanvasRulerDirective,\n} from 'app/modules/editor/components/canvas';\nimport {\n  ConfirmDialogComponent,\n  DemoDialogComponent,\n  DropFilesDialogComponent,\n} from 'app/modules/editor/components/dialogs';\nimport {\n  LayerListTreeComponent,\n  LayerTimelineComponent,\n  LayerTimelineGridDirective,\n  TimelineAnimationRowComponent,\n} from 'app/modules/editor/components/layertimeline';\nimport { PlaybackComponent } from 'app/modules/editor/components/playback';\nimport { PropertyInputComponent } from 'app/modules/editor/components/propertyinput';\nimport { DropTargetDirective } from 'app/modules/editor/components/root/droptarget.directive';\nimport { RootComponent } from 'app/modules/editor/components/root/root.component';\nimport { ScrollGroupDirective } from 'app/modules/editor/components/scrollgroup/scrollgroup.directive';\nimport { SplashScreenComponent } from 'app/modules/editor/components/splashscreen/splashscreen.component';\nimport { SplitterComponent } from 'app/modules/editor/components/splitter/splitter.component';\nimport { ToolbarComponent } from 'app/modules/editor/components/toolbar/toolbar.component';\nimport { ToolPanelComponent } from 'app/modules/editor/components/toolpanel/toolpanel.component';\nimport { errorHandlerFactory } from 'app/modules/editor/scripts/bugsnag';\nimport { StoreModule, metaReducers, reducers } from 'app/modules/editor/store';\nimport { environment } from 'environments/environment';\n\n@NgModule({\n  declarations: [\n    CanvasComponent,\n    CanvasContainerDirective,\n    CanvasLayersDirective,\n    CanvasOverlayDirective,\n    CanvasPaperDirective,\n    CanvasRulerDirective,\n    ConfirmDialogComponent,\n    DemoDialogComponent,\n    DropFilesDialogComponent,\n    DropTargetDirective,\n    LayerListTreeComponent,\n    LayerTimelineComponent,\n    LayerTimelineGridDirective,\n    PlaybackComponent,\n    PropertyInputComponent,\n    RootComponent,\n    ScrollGroupDirective,\n    SplashScreenComponent,\n    SplitterComponent,\n    TimelineAnimationRowComponent,\n    ToolbarComponent,\n    ToolPanelComponent,\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    FlexLayoutModule,\n    FormsModule,\n    HttpClientModule,\n    ServiceWorkerModule.register('/ngsw-worker.js', { enabled: environment.production }),\n    StoreModule.forRoot(reducers, { metaReducers }),\n    // Angular material components.\n    MatButtonModule,\n    MatDialogModule,\n    MatIconModule,\n    MatInputModule,\n    MatMenuModule,\n    MatOptionModule,\n    MatRadioModule,\n    MatSlideToggleModule,\n    MatSnackBarModule,\n    MatToolbarModule,\n    MatTooltipModule,\n  ],\n  providers: [{ provide: ErrorHandler, useFactory: errorHandlerFactory }],\n  entryComponents: [ConfirmDialogComponent, DemoDialogComponent, DropFilesDialogComponent],\n  bootstrap: [RootComponent],\n})\nexport class EditorModule {\n  constructor(matIconRegistry: MatIconRegistry, private readonly sanitizer: DomSanitizer) {\n    matIconRegistry\n      // Logo.\n      .addSvgIcon('shapeshifter', this.trustUrl('assets/shapeshifter.svg'))\n      // Icons.\n      .addSvgIcon('addlayer', this.trustUrl('assets/icons/addlayer.svg'))\n      .addSvgIcon('autofix', this.trustUrl('assets/icons/autofix.svg'))\n      .addSvgIcon('contribute', this.trustUrl('assets/icons/contribute.svg'))\n      .addSvgIcon('reverse', this.trustUrl('assets/icons/reverse.svg'))\n      .addSvgIcon('animation', this.trustUrl('assets/icons/animation.svg'))\n      .addSvgIcon('collection', this.trustUrl('assets/icons/collection.svg'))\n      .addSvgIcon('animationblock', this.trustUrl('assets/icons/animationblock.svg'))\n      .addSvgIcon('mask', this.trustUrl('assets/icons/clippathlayer.svg'))\n      .addSvgIcon('group', this.trustUrl('assets/icons/grouplayer.svg'))\n      .addSvgIcon('path', this.trustUrl('assets/icons/pathlayer.svg'))\n      .addSvgIcon('vector', this.trustUrl('assets/icons/vectorlayer.svg'))\n      // Tools.\n      .addSvgIcon('tool_select', this.trustUrl('assets/tools/tool_select.svg'))\n      .addSvgIcon('tool_pencil', this.trustUrl('assets/tools/tool_pencil.svg'))\n      .addSvgIcon('tool_vector', this.trustUrl('assets/tools/tool_vector.svg'))\n      .addSvgIcon('tool_ellipse', this.trustUrl('assets/tools/tool_ellipse.svg'))\n      .addSvgIcon('tool_rectangle', this.trustUrl('assets/tools/tool_rectangle.svg'))\n      .addSvgIcon('tool_zoompan', this.trustUrl('assets/tools/tool_zoompan.svg'));\n  }\n\n  private trustUrl(url: string) {\n    return this.sanitizer.bypassSecurityTrustResourceUrl(url);\n  }\n}\n","export { ActionMode, ActionSource, Hover, HoverType, Selection, SelectionType } from './types';\n","/**\n * A selection represents an action that is the result of a mouse click.\n */\nexport interface Selection {\n  readonly type: SelectionType;\n  readonly source: ActionSource;\n  readonly subIdx: number;\n  readonly cmdIdx?: number;\n}\n\n/**\n * Describes the different types of selection events.\n */\nexport enum SelectionType {\n  // The user selected an entire subpath.\n  SubPath = 1,\n  // The user selected an individual segment in a subpath.\n  Segment,\n  // The user selected an individual point in a subpath.\n  Point,\n}\n\n/**\n * Different shape shifter modes.\n */\nexport enum ActionMode {\n  None = 1,\n  Selection,\n  SplitCommands,\n  PairSubPaths,\n  SplitSubPaths,\n}\n\n/**\n * Different action sources.\n */\nexport enum ActionSource {\n  From = 1,\n  Animated,\n  To,\n}\n\n/**\n * A hover represents a transient action that results from a mouse movement.\n */\nexport interface Hover {\n  readonly type: HoverType;\n  readonly source: ActionSource;\n  readonly subIdx: number;\n  readonly cmdIdx?: number;\n}\n\n/**\n * Describes the different types of hover events.\n */\nexport enum HoverType {\n  SubPath = 1,\n  Segment,\n  Point,\n  Split,\n  Unsplit,\n  Reverse,\n  ShiftBack,\n  ShiftForward,\n  SetFirstPosition,\n}\n","const NEWTON_ITERATIONS = 4;\nconst NEWTON_MIN_SLOPE = 1e-3;\nconst SUBDIVISION_PRECISION = 1e-7;\nconst SUBDIVISION_MAX_ITERATIONS = 10;\nconst kSplineTableSize = 11;\nconst kSampleStepSize = 1 / (kSplineTableSize - 1);\nconst isFloat32ArraySupported = typeof Float32Array === 'function';\n\nfunction A(aA1: number, aA2: number) {\n  return 1 - 3 * aA2 + 3 * aA1;\n}\n\nfunction B(aA1: number, aA2: number) {\n  return 3 * aA2 - 6 * aA1;\n}\n\nfunction C(aA1: number) {\n  return 3 * aA1;\n}\n\n/** Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2. */\nfunction calcBezier(aT: number, aA1: number, aA2: number) {\n  return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n}\n\n/** Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2. */\nfunction getSlope(aT: number, aA1: number, aA2: number) {\n  return 3 * A(aA1, aA2) * aT * aT + 2 * B(aA1, aA2) * aT + C(aA1);\n}\n\nfunction binarySubdivide(aX: number, aA: number, aB: number, mX1: number, mX2: number) {\n  let currentX;\n  let currentT;\n  let i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate(aX: number, aGuessT: number, mX1: number, mX2: number) {\n  for (let i = 0; i < NEWTON_ITERATIONS; i++) {\n    const currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0) {\n      return aGuessT;\n    }\n    const currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n  return aGuessT;\n}\n\nexport function create(mX1: number, mY1: number, mX2: number, mY2: number) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  // Precompute samples table\n  const sampleValues = isFloat32ArraySupported\n    ? new Float32Array(kSplineTableSize)\n    : new Array(kSplineTableSize);\n  if (mX1 !== mY1 || mX2 !== mY2) {\n    for (let i = 0; i < kSplineTableSize; i++) {\n      sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  function getTForX(aX: number) {\n    let intervalStart = 0;\n    let currentSample = 1;\n    const lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; currentSample++) {\n      intervalStart += kSampleStepSize;\n    }\n    currentSample--;\n\n    // Interpolate to provide an initial guess for t\n    const dist =\n      (aX - sampleValues[currentSample]) /\n      (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    const guessForT = intervalStart + dist * kSampleStepSize;\n\n    const initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return (x: number) => {\n    if (mX1 === mY1 && mX2 === mY2) {\n      return x; // Linear.\n    }\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n}\n","import * as BezierEasing from './BezierEasing';\n\nexport interface Interpolator {\n  readonly value: string;\n  readonly label: string;\n  readonly interpolateFn: (fraction: number) => number;\n  readonly androidRef: string;\n  readonly webRef: string;\n}\n\nconst FAST_OUT_SLOW_IN_EASING = BezierEasing.create(0.4, 0, 0.2, 1);\nconst FAST_OUT_LINEAR_IN_EASING = BezierEasing.create(0.4, 0, 1, 1);\nconst LINEAR_OUT_SLOW_IN_EASING = BezierEasing.create(0, 0, 0.2, 1);\n\nexport const INTERPOLATORS: ReadonlyArray<Interpolator> = [\n  {\n    value: 'FAST_OUT_SLOW_IN',\n    label: 'Fast out, slow in',\n    androidRef: '@android:interpolator/fast_out_slow_in',\n    interpolateFn: f => FAST_OUT_SLOW_IN_EASING(f),\n    webRef: 'cubic-bezier(0.4, 0, 0.2, 1)',\n  },\n  {\n    value: 'FAST_OUT_LINEAR_IN',\n    label: 'Fast out, linear in',\n    androidRef: '@android:interpolator/fast_out_linear_in',\n    interpolateFn: f => FAST_OUT_LINEAR_IN_EASING(f),\n    webRef: 'cubic-bezier(0.4, 0, 1, 1)',\n  },\n  {\n    value: 'LINEAR_OUT_SLOW_IN',\n    label: 'Linear out, slow in',\n    androidRef: '@android:interpolator/linear_out_slow_in',\n    interpolateFn: f => LINEAR_OUT_SLOW_IN_EASING(f),\n    webRef: 'cubic-bezier(0, 0, 0.2, 1)',\n  },\n  {\n    value: 'ACCELERATE_DECELERATE',\n    label: 'Accelerate/decelerate',\n    androidRef: '@android:anim/accelerate_decelerate_interpolator',\n    interpolateFn: f => Math.cos((f + 1) * Math.PI) / 2.0 + 0.5,\n    webRef: 'cubic-bezier(0.455, 0.03, 0.515, 0.955)',\n  },\n  {\n    value: 'ACCELERATE',\n    label: 'Accelerate',\n    androidRef: '@android:anim/accelerate_interpolator',\n    interpolateFn: f => f * f,\n    webRef: 'cubic-bezier(0.55, 0.085, 0.68, 0.53)',\n  },\n  {\n    value: 'DECELERATE',\n    label: 'Decelerate',\n    androidRef: '@android:anim/decelerate_interpolator',\n    interpolateFn: f => 1 - (1 - f) * (1 - f),\n    webRef: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n  },\n  {\n    value: 'LINEAR',\n    label: 'Linear',\n    androidRef: '@android:anim/linear_interpolator',\n    interpolateFn: f => f,\n    webRef: 'linear',\n  },\n  {\n    value: 'ANTICIPATE',\n    label: 'Anticipate',\n    androidRef: '@android:anim/anticipate_interpolator',\n    interpolateFn: f => f * f * ((2 + 1) * f - 2),\n    webRef: 'cubic-bezier(0.4, 0, 0.2, 1)', // TODO: support exporting this interpolator!\n  },\n  {\n    value: 'OVERSHOOT',\n    label: 'Overshoot',\n    androidRef: '@android:anim/overshoot_interpolator',\n    interpolateFn: f => (f - 1) * (f - 1) * ((2 + 1) * (f - 1) + 2) + 1,\n    webRef: 'cubic-bezier(0.4, 0, 0.2, 1)', // TODO: support exporting this interpolator!\n  },\n  {\n    value: 'BOUNCE',\n    label: 'Bounce',\n    androidRef: '@android:anim/bounce_interpolator',\n    interpolateFn: f => {\n      const bounceFn = (t: number) => t * t * 8;\n      f *= 1.1226;\n      if (f < 0.3535) {\n        return bounceFn(f);\n      } else if (f < 0.7408) {\n        return bounceFn(f - 0.54719) + 0.7;\n      } else if (f < 0.9644) {\n        return bounceFn(f - 0.8526) + 0.9;\n      } else {\n        return bounceFn(f - 1.0435) + 0.95;\n      }\n    },\n    webRef: 'cubic-bezier(0.4, 0, 0.2, 1)', // TODO: support exporting this interpolator!\n  },\n  {\n    value: 'ANTICIPATE_OVERSHOOT',\n    label: 'Anticipate overshoot',\n    androidRef: '@android:anim/anticipate_overshoot_interpolator',\n    interpolateFn: f => {\n      const a = (t: number, s: number) => {\n        return t * t * ((s + 1) * t - s);\n      };\n      const o = (t: number, s: number) => {\n        return t * t * ((s + 1) * t + s);\n      };\n      if (f < 0.5) {\n        return 0.5 * a(f * 2, 2 * 1.5);\n      } else {\n        return 0.5 * (o(f * 2 - 2, 2 * 1.5) + 2);\n      }\n    },\n    webRef: 'cubic-bezier(0.4, 0, 0.2, 1)', // TODO: support exporting this interpolator!\n  },\n  // TODO: add support for custom path interpolators\n];\n","export { Interpolator, INTERPOLATORS } from './Interpolator';\n","import { Path } from 'app/modules/editor/model/paths';\nimport {\n  Animatable,\n  ColorProperty,\n  EnumProperty,\n  FractionProperty,\n  Inspectable,\n  NameProperty,\n  NumberProperty,\n  PathProperty,\n  Property,\n} from 'app/modules/editor/model/properties';\nimport { MathUtil, Matrix, Rect } from 'app/modules/editor/scripts/common';\nimport * as _ from 'lodash';\n\ntype Type = 'vector' | 'group' | 'mask' | 'path';\n\n/**\n * Interface that is shared by all vector drawable layer models below.\n */\n@Property.register(new NameProperty('name'))\nexport abstract class Layer implements Inspectable, Animatable {\n  /**\n   * A non-user-visible string that uniquely identifies this layer in the tree.\n   */\n  id?: string;\n\n  /**\n   * A user-visible string uniquely identifying this layer in the tree. This value\n   * can be renamed, as long as it doesn't conflict with other layers in the tree.\n   */\n  name: string;\n\n  /**\n   * This layers children list of layers.\n   */\n  children: ReadonlyArray<Layer>;\n\n  /**\n   * Returns the Layer type. This string value should not change,\n   * as it is used to identify the layer type and icon.\n   */\n  abstract type: Type;\n\n  /**\n   * Returns the bounding box for this Layer (or undefined if none exists).\n   */\n  abstract bounds: Rect | undefined;\n\n  constructor(obj: LayerConstructorArgs) {\n    this.id = obj.id || _.uniqueId();\n    this.name = obj.name || '';\n    this.children = (obj.children || []).map(child => load(child));\n  }\n\n  /**\n   * Returns the first descendent layer with the specified id.\n   */\n  findLayerById(id: string): Layer | undefined {\n    if (this.id === id) {\n      return this;\n    }\n    for (const child of this.children) {\n      const layer = child.findLayerById(id);\n      if (layer) {\n        return layer;\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Returns the first descendent layer with the specified name.\n   */\n  findLayerByName(name: string): Layer | undefined {\n    if (this.name === name) {\n      return this;\n    }\n    for (const child of this.children) {\n      const layer = child.findLayerByName(name);\n      if (layer) {\n        return layer;\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Walks the layer tree, executing beforeFunc on each node using a\n   * preorder traversal.\n   */\n  walk(beforeFn: (layer: Layer) => void) {\n    const visitFn = (layer: Layer) => {\n      beforeFn(layer);\n      layer.children.forEach(l => visitFn(l));\n    };\n    visitFn(this);\n  }\n\n  /**\n   * Returns the JSON representation of this layer.\n   */\n  toJSON() {\n    return {\n      id: this.id,\n      name: this.name,\n      type: this.type,\n    };\n  }\n\n  /**\n   * Returns a shallow clone of this Layer.\n   */\n  abstract clone(): Layer;\n\n  /**\n   * Returns a deep clone of this Layer.\n   */\n  abstract deepClone(): Layer;\n}\n\n// TODO: share this interface with Layer?\ninterface LayerArgs {\n  id?: string;\n  name: string;\n  children: ReadonlyArray<Layer>;\n}\n\nexport interface Layer extends LayerArgs, Inspectable, Animatable {}\nexport interface LayerConstructorArgs extends LayerArgs {}\n\nfunction load(obj: Layer | any): Layer {\n  if (obj instanceof Layer) {\n    return obj;\n  }\n  if (obj.type === 'vector') {\n    return new VectorLayer(obj);\n  }\n  if (obj.type === 'group') {\n    return new GroupLayer(obj);\n  }\n  if (obj.type === 'path') {\n    return new PathLayer(obj);\n  }\n  if (obj.type === 'mask') {\n    return new ClipPathLayer(obj);\n  }\n  console.error('Attempt to load layer with invalid object: ', obj);\n  throw new Error('Attempt to load layer with invalid object');\n}\n\nconst VECTOR_DEFAULTS = {\n  canvasColor: '',\n  alpha: 1,\n};\n\n/**\n * Model object that mirrors the VectorDrawable's '<vector>' element.\n */\n@Property.register(\n  new ColorProperty('canvasColor'),\n  new NumberProperty('width', { isAnimatable: false, min: 1, isInteger: true }),\n  new NumberProperty('height', { isAnimatable: false, min: 1, isInteger: true }),\n  new FractionProperty('alpha', { isAnimatable: true }),\n)\nexport class VectorLayer extends Layer {\n  // @Override\n  readonly type = 'vector';\n\n  constructor(obj = { children: [], name: 'vector' } as VectorConstructorArgs) {\n    super(obj);\n    const setterFn = (num: number, def: number) => (_.isNil(num) ? def : num);\n    this.canvasColor = obj.canvasColor || VECTOR_DEFAULTS.canvasColor;\n    this.width = setterFn(obj.width, 24);\n    this.height = setterFn(obj.height, 24);\n    this.alpha = setterFn(obj.alpha, VECTOR_DEFAULTS.alpha);\n  }\n\n  // @Override\n  get bounds() {\n    return { l: 0, t: 0, r: this.width, b: this.height };\n  }\n\n  // @Override\n  clone() {\n    const clone = new VectorLayer(this);\n    clone.children = [...this.children];\n    return clone;\n  }\n\n  // @Override\n  deepClone() {\n    const clone = this.clone();\n    clone.children = this.children.map(c => c.deepClone());\n    return clone;\n  }\n\n  // @Override\n  toJSON() {\n    const obj = Object.assign(super.toJSON(), {\n      canvasColor: this.canvasColor,\n      width: this.width,\n      height: this.height,\n      alpha: this.alpha,\n      children: this.children.map(child => child.toJSON()),\n    });\n    Object.entries(VECTOR_DEFAULTS).forEach(([key, value]) => {\n      if ((obj as any)[key] === value) {\n        delete (obj as any)[key];\n      }\n    });\n    return obj;\n  }\n}\n\ninterface VectorLayerArgs {\n  canvasColor?: string;\n  width?: number;\n  height?: number;\n  alpha?: number;\n}\n\nexport interface VectorLayer extends Layer, VectorLayerArgs {}\nexport interface VectorConstructorArgs extends LayerConstructorArgs, VectorLayerArgs {}\n\nconst GROUP_DEFAULTS = {\n  rotation: 0,\n  scaleX: 1,\n  scaleY: 1,\n  pivotX: 0,\n  pivotY: 0,\n  translateX: 0,\n  translateY: 0,\n};\n\n/**\n * Model object that mirrors the VectorDrawable's '<group>' element.\n */\n@Property.register(\n  new NumberProperty('rotation', { isAnimatable: true }),\n  new NumberProperty('scaleX', { isAnimatable: true }),\n  new NumberProperty('scaleY', { isAnimatable: true }),\n  new NumberProperty('pivotX', { isAnimatable: true }),\n  new NumberProperty('pivotY', { isAnimatable: true }),\n  new NumberProperty('translateX', { isAnimatable: true }),\n  new NumberProperty('translateY', { isAnimatable: true }),\n)\nexport class GroupLayer extends Layer {\n  // @Override\n  readonly type = 'group';\n\n  constructor(obj: GroupConstructorArgs) {\n    super(obj);\n    const setterFn = (num: number, def: number) => (_.isNil(num) ? def : num);\n    this.pivotX = setterFn(obj.pivotX, GROUP_DEFAULTS.pivotX);\n    this.pivotY = setterFn(obj.pivotY, GROUP_DEFAULTS.pivotY);\n    this.rotation = setterFn(obj.rotation, GROUP_DEFAULTS.rotation);\n    this.scaleX = setterFn(obj.scaleX, GROUP_DEFAULTS.scaleX);\n    this.scaleY = setterFn(obj.scaleY, GROUP_DEFAULTS.scaleY);\n    this.translateX = setterFn(obj.translateX, GROUP_DEFAULTS.translateX);\n    this.translateY = setterFn(obj.translateY, GROUP_DEFAULTS.translateY);\n  }\n\n  // @Override\n  get bounds() {\n    let bounds: { l: number; t: number; r: number; b: number };\n    this.children.forEach(child => {\n      const childBounds = child.bounds;\n      if (!childBounds) {\n        return;\n      }\n      if (bounds) {\n        bounds.l = Math.min(childBounds.l, bounds.l);\n        bounds.t = Math.min(childBounds.t, bounds.t);\n        bounds.r = Math.max(childBounds.r, bounds.r);\n        bounds.b = Math.max(childBounds.b, bounds.b);\n      } else {\n        bounds = { ...childBounds };\n      }\n    });\n    if (!bounds) {\n      return undefined;\n    }\n    bounds.l -= this.pivotX;\n    bounds.t -= this.pivotY;\n    bounds.r -= this.pivotX;\n    bounds.b -= this.pivotY;\n    const transforms = [\n      Matrix.scaling(this.scaleX, this.scaleY),\n      Matrix.rotation(this.rotation),\n      Matrix.translation(this.translateX, this.translateY),\n    ];\n    const topLeft = MathUtil.transformPoint({ x: bounds.l, y: bounds.t }, ...transforms);\n    const bottomRight = MathUtil.transformPoint({ x: bounds.r, y: bounds.b }, ...transforms);\n    return {\n      l: topLeft.x + this.pivotX,\n      t: topLeft.y + this.pivotY,\n      r: bottomRight.x + this.pivotX,\n      b: bottomRight.y + this.pivotY,\n    };\n  }\n\n  // @Override\n  clone() {\n    const clone = new GroupLayer(this);\n    clone.children = [...this.children];\n    return clone;\n  }\n\n  // @Override\n  deepClone() {\n    const clone = this.clone();\n    clone.children = this.children.map(c => c.deepClone());\n    return clone;\n  }\n\n  // @Override\n  toJSON() {\n    const obj = Object.assign(super.toJSON(), {\n      rotation: this.rotation,\n      scaleX: this.scaleX,\n      scaleY: this.scaleY,\n      pivotX: this.pivotX,\n      pivotY: this.pivotY,\n      translateX: this.translateX,\n      translateY: this.translateY,\n      children: this.children.map(child => child.toJSON()),\n    });\n    Object.entries(GROUP_DEFAULTS).forEach(([key, value]) => {\n      if ((obj as any)[key] === value) {\n        delete (obj as any)[key];\n      }\n    });\n    return obj;\n  }\n}\n\ninterface GroupLayerArgs {\n  pivotX?: number;\n  pivotY?: number;\n  rotation?: number;\n  scaleX?: number;\n  scaleY?: number;\n  translateX?: number;\n  translateY?: number;\n}\n\nexport interface GroupLayer extends Layer, GroupLayerArgs {}\nexport interface GroupConstructorArgs extends LayerConstructorArgs, GroupLayerArgs {}\n\n/**\n * Model object that mirrors the VectorDrawable's '<clip-path>' element.\n */\n@Property.register(new PathProperty('pathData', { isAnimatable: true }))\nexport class ClipPathLayer extends Layer implements MorphableLayer {\n  // @Override\n  readonly type = 'mask';\n\n  constructor(obj: ClipPathConstructorArgs) {\n    super(obj);\n    this.pathData = obj.pathData;\n  }\n\n  // @Override\n  get bounds() {\n    return this.pathData ? this.pathData.getBoundingBox() : undefined;\n  }\n\n  // @Override\n  clone() {\n    return new ClipPathLayer(this);\n  }\n\n  // @Override\n  deepClone() {\n    return this.clone();\n  }\n\n  // @Override\n  toJSON() {\n    return Object.assign(super.toJSON(), {\n      pathData: this.pathData ? this.pathData.getPathString() : '',\n    });\n  }\n\n  isStroked() {\n    // TODO: this may be the case for Android... but does this limit what web/iOS devs can do?\n    return false;\n  }\n\n  isFilled() {\n    return true;\n  }\n}\n\ninterface ClipPathLayerArgs {\n  pathData: Path;\n}\n\nexport interface ClipPathLayer extends Layer, ClipPathLayerArgs {}\nexport interface ClipPathConstructorArgs extends LayerConstructorArgs, ClipPathLayerArgs {}\n\nconst ENUM_LINECAP_OPTIONS = [\n  { value: 'butt', label: 'Butt' },\n  { value: 'square', label: 'Square' },\n  { value: 'round', label: 'Round' },\n];\n\nconst ENUM_LINEJOIN_OPTIONS = [\n  { value: 'miter', label: 'Miter' },\n  { value: 'round', label: 'Round' },\n  { value: 'bevel', label: 'Bevel' },\n];\n\nconst ENUM_FILLTYPE_OPTIONS = [\n  { value: 'nonZero', label: 'nonZero' },\n  { value: 'evenOdd', label: 'evenOdd' },\n];\n\nconst PATH_DEFAULTS = {\n  fillColor: '',\n  fillAlpha: 1,\n  strokeColor: '',\n  strokeAlpha: 1,\n  strokeWidth: 0,\n  strokeLinecap: 'butt' as StrokeLineCap,\n  strokeLinejoin: 'miter' as StrokeLineJoin,\n  strokeMiterLimit: 4,\n  trimPathStart: 0,\n  trimPathEnd: 1,\n  trimPathOffset: 0,\n  fillType: 'nonZero' as FillType,\n};\n\n/**\n * Model object that mirrors the VectorDrawable's '<path>' element.\n */\n@Property.register(\n  new PathProperty('pathData', { isAnimatable: true }),\n  new ColorProperty('fillColor', { isAnimatable: true }),\n  new FractionProperty('fillAlpha', { isAnimatable: true }),\n  new ColorProperty('strokeColor', { isAnimatable: true }),\n  new FractionProperty('strokeAlpha', { isAnimatable: true }),\n  new NumberProperty('strokeWidth', { min: 0, isAnimatable: true }),\n  new EnumProperty('strokeLinecap', ENUM_LINECAP_OPTIONS),\n  new EnumProperty('strokeLinejoin', ENUM_LINEJOIN_OPTIONS),\n  new NumberProperty('strokeMiterLimit', { min: 1 }),\n  new FractionProperty('trimPathStart', { isAnimatable: true }),\n  new FractionProperty('trimPathEnd', { isAnimatable: true }),\n  new FractionProperty('trimPathOffset', { isAnimatable: true }),\n  new EnumProperty('fillType', ENUM_FILLTYPE_OPTIONS),\n) // TODO: need to fix enum properties so they store/return strings instead of options?\nexport class PathLayer extends Layer implements MorphableLayer {\n  // @Override\n  readonly type = 'path';\n\n  constructor(obj: PathConstructorArgs) {\n    super(obj);\n    const setterFn = (num: number, def: number) => (_.isNil(num) ? def : num);\n    this.pathData = obj.pathData;\n    this.fillColor = obj.fillColor || PATH_DEFAULTS.fillColor;\n    this.fillAlpha = setterFn(obj.fillAlpha, PATH_DEFAULTS.fillAlpha);\n    this.strokeColor = obj.strokeColor || PATH_DEFAULTS.strokeColor;\n    this.strokeAlpha = setterFn(obj.strokeAlpha, PATH_DEFAULTS.strokeAlpha);\n    this.strokeWidth = setterFn(obj.strokeWidth, PATH_DEFAULTS.strokeWidth);\n    this.strokeLinecap = obj.strokeLinecap || PATH_DEFAULTS.strokeLinecap;\n    this.strokeLinejoin = obj.strokeLinejoin || PATH_DEFAULTS.strokeLinejoin;\n    this.strokeMiterLimit = setterFn(obj.strokeMiterLimit, PATH_DEFAULTS.strokeMiterLimit);\n    this.trimPathStart = setterFn(obj.trimPathStart, PATH_DEFAULTS.trimPathStart);\n    this.trimPathEnd = setterFn(obj.trimPathEnd, PATH_DEFAULTS.trimPathEnd);\n    this.trimPathOffset = setterFn(obj.trimPathOffset, PATH_DEFAULTS.trimPathOffset);\n    this.fillType = obj.fillType || PATH_DEFAULTS.fillType;\n  }\n\n  // @Override\n  get bounds() {\n    return this.pathData ? this.pathData.getBoundingBox() : undefined;\n  }\n\n  // @Override\n  clone() {\n    return new PathLayer(this);\n  }\n\n  // @Override\n  deepClone() {\n    return this.clone();\n  }\n\n  // @Override\n  toJSON() {\n    const obj = Object.assign(super.toJSON(), {\n      pathData: this.pathData ? this.pathData.getPathString() : '',\n      fillColor: this.fillColor,\n      fillAlpha: this.fillAlpha,\n      strokeColor: this.strokeColor,\n      strokeAlpha: this.strokeAlpha,\n      strokeWidth: this.strokeWidth,\n      strokeLinecap: this.strokeLinecap,\n      strokeLinejoin: this.strokeLinejoin,\n      strokeMiterLimit: this.strokeMiterLimit,\n      trimPathStart: this.trimPathStart,\n      trimPathEnd: this.trimPathEnd,\n      trimPathOffset: this.trimPathOffset,\n      fillType: this.fillType,\n    });\n    Object.entries(PATH_DEFAULTS).forEach(([key, value]) => {\n      if ((obj as any)[key] === value) {\n        delete (obj as any)[key];\n      }\n    });\n    return obj;\n  }\n\n  isStroked() {\n    return !!this.strokeColor;\n  }\n\n  isFilled() {\n    return !!this.fillColor;\n  }\n}\n\ninterface PathLayerArgs {\n  pathData: Path;\n  fillColor?: string;\n  fillAlpha?: number;\n  strokeColor?: string;\n  strokeAlpha?: number;\n  strokeWidth?: number;\n  strokeLinecap?: StrokeLineCap;\n  strokeLinejoin?: StrokeLineJoin;\n  strokeMiterLimit?: number;\n  trimPathStart?: number;\n  trimPathEnd?: number;\n  trimPathOffset?: number;\n  fillType?: FillType;\n}\n\nexport interface PathLayer extends Layer, PathLayerArgs {}\nexport interface PathConstructorArgs extends LayerConstructorArgs, PathLayerArgs {}\n\nexport type StrokeLineCap = 'butt' | 'square' | 'round';\nexport type StrokeLineJoin = 'miter' | 'round' | 'bevel';\nexport type FillType = 'nonZero' | 'evenOdd';\n\n/** Common interface for Layers with pathData properties. */\nexport interface MorphableLayer extends Layer {\n  pathData: Path;\n  isStroked(): boolean;\n  isFilled(): boolean;\n}\n","import { Path } from 'app/modules/editor/model/paths';\nimport { MathUtil, Matrix } from 'app/modules/editor/scripts/common';\nimport { environment } from 'environments/environment';\nimport * as _ from 'lodash';\n\nimport { ClipPathLayer, GroupLayer, Layer, PathLayer, VectorLayer } from './Layer';\n\nconst IS_DEV_BUILD = !environment.production;\n\n/**\n * Returns a single flattened transform matrix that can be used to perform canvas\n * transform operations. The resulting matrix will transform path coordinates to\n * canvas drawing coordinates. The inverse of the matrix will transform canvas\n * drawing coordinates back to path coordinates.\n */\nexport function getCanvasTransformForLayer(root: Layer, layerId: string) {\n  return Matrix.flatten(getCanvasTransformsForLayer(root, layerId));\n}\n\n/**\n * Returns a list of parent transforms for the specified layer ID. The transforms\n * are returned in top-down order (i.e. the transform for the layer's\n * immediate parent will be the very last matrix in the returned list).\n */\nfunction getCanvasTransformsForLayer(root: Layer, layerId: string) {\n  return (function recurseFn(parents: Layer[], current: Layer): Matrix[] {\n    if (current.id === layerId) {\n      return _.flatMap(parents, l => {\n        return l instanceof GroupLayer ? getCanvasTransformsForGroupLayer(l) : [];\n      });\n    }\n    for (const child of current.children) {\n      const transforms = recurseFn([...parents, current], child);\n      if (transforms) {\n        return transforms;\n      }\n    }\n    return undefined;\n  })([], root);\n}\n\n/**\n * Returns a list of matrix transforms for a given group layer.\n */\nexport function getCanvasTransformsForGroupLayer(l: GroupLayer) {\n  // First negative pivot, then scale, then rotation, then translation, then pivot.\n  // When drawing a path, the transforms are applied at the bottom up, which\n  // is why the order appears to be reversed below.\n  return [\n    Matrix.translation(l.pivotX, l.pivotY),\n    Matrix.translation(l.translateX, l.translateY),\n    Matrix.rotation(l.rotation),\n    Matrix.scaling(l.scaleX, l.scaleY),\n    Matrix.translation(-l.pivotX, -l.pivotY),\n  ];\n}\n\n/**\n * Makes two vector layers with possibly different viewports compatible with each other.\n */\nexport function adjustViewports(vl1: VectorLayer, vl2: VectorLayer) {\n  if (!vl1 || !vl2) {\n    return { vl1, vl2 };\n  }\n\n  vl1 = vl1.deepClone();\n  vl2 = vl2.deepClone();\n\n  let { width: w1, height: h1 } = vl1;\n  let { width: w2, height: h2 } = vl2;\n  const isMaxDimenFn = (n: number) => Math.max(w1, h1, w2, h2, n) === n;\n\n  let scale1 = 1;\n  let scale2 = 1;\n  if (isMaxDimenFn(w1)) {\n    scale2 = w1 / w2;\n  } else if (isMaxDimenFn(h1)) {\n    scale2 = h1 / h2;\n  } else if (isMaxDimenFn(w2)) {\n    scale1 = w2 / w1;\n  } else {\n    scale1 = h2 / h1;\n  }\n\n  if (isMaxDimenFn(w1) || isMaxDimenFn(h1)) {\n    w1 = MathUtil.round(w1);\n    h1 = MathUtil.round(h1);\n    w2 = MathUtil.round(w2 * scale2);\n    h2 = MathUtil.round(h2 * scale2);\n  } else {\n    w1 = MathUtil.round(w1 * scale1);\n    h1 = MathUtil.round(h1 * scale1);\n    w2 = MathUtil.round(w2);\n    h2 = MathUtil.round(h2);\n  }\n\n  let tx1 = 0;\n  let ty1 = 0;\n  let tx2 = 0;\n  let ty2 = 0;\n  if (w1 > w2) {\n    tx2 = (w1 - w2) / 2;\n  } else if (w1 < w2) {\n    tx1 = (w2 - w1) / 2;\n  } else if (h1 > h2) {\n    ty2 = (h1 - h2) / 2;\n  } else if (h1 < h2) {\n    ty1 = (h2 - h1) / 2;\n  }\n\n  const transformLayerFn = (vl: VectorLayer, scale: number, tx: number, ty: number) => {\n    const transforms = Matrix.flatten([Matrix.scaling(scale, scale), Matrix.translation(tx, ty)]);\n    (function recurseFn(layer: Layer) {\n      if (layer instanceof PathLayer || layer instanceof ClipPathLayer) {\n        if (layer instanceof PathLayer && layer.isStroked()) {\n          layer.strokeWidth *= scale;\n        }\n        if (layer.pathData) {\n          layer.pathData = new Path(\n            layer.pathData.getCommands().map(cmd =>\n              cmd\n                .mutate()\n                .transform(transforms)\n                .build(),\n            ),\n          );\n        }\n        return;\n      }\n      if (layer instanceof GroupLayer) {\n        const l = layer as GroupLayer;\n        l.translateX *= scale;\n        l.translateY *= scale;\n        l.pivotX *= scale;\n        l.pivotY *= scale;\n      }\n      layer.children.forEach(l => recurseFn(l));\n    })(vl);\n  };\n\n  transformLayerFn(vl1, scale1, tx1, ty1);\n  transformLayerFn(vl2, scale2, tx2, ty2);\n\n  const newWidth = Math.max(w1, w2);\n  const newHeight = Math.max(h1, h2);\n  vl1.width = newWidth;\n  vl2.width = newWidth;\n  vl1.height = newHeight;\n  vl2.height = newHeight;\n  return { vl1, vl2 };\n}\n\nexport function mergeVectorLayers(vl1: VectorLayer, vl2: VectorLayer) {\n  const { vl1: newVl1, vl2: newVl2 } = adjustViewports(vl1, vl2);\n  const vl = setLayerChildren(newVl1, [...newVl1.children, ...newVl2.children]);\n  if (!newVl1.children.length) {\n    // Only replace the vector layer's alpha if there are no children\n    // being displayed to the user. This is pretty much the best\n    // we can do.\n    vl.alpha = newVl2.alpha;\n  }\n  return vl;\n}\n\n/**\n * Adds a list of children to a parent layer in a vector layer tree.\n * @param root the root vector layer\n * @param addedLayerParentId the parent layer in which to add the given layers\n * @param startingChildIndex the index to start adding the layers\n * @param addedLayers the layers to add\n */\nexport function addLayers(\n  root: VectorLayer,\n  addedLayerParentId: string,\n  startingChildIndex: number,\n  ...addedLayers: Layer[]\n) {\n  return (function recurseFn(curr: Layer) {\n    if (curr.id === addedLayerParentId) {\n      // If we have reached the added layer's parent, then\n      // clone the parent, insert the new layer into its list\n      // of children, and return the new parent node.\n      const children = [...curr.children];\n      children.splice(startingChildIndex, 0, ...addedLayers);\n      return setLayerChildren(curr, children);\n    }\n    for (let i = 0; i < curr.children.length; i++) {\n      const clonedChild = recurseFn(curr.children[i]);\n      if (clonedChild) {\n        // Then clone the current layer, insert the cloned child\n        // into its list of children, and return the cloned current layer.\n        const children = [...curr.children];\n        children[i] = clonedChild;\n        return setLayerChildren(curr, children);\n      }\n    }\n    return undefined;\n  })(root) as VectorLayer;\n}\n\nexport function removeLayers<L extends Layer>(layer: L, ...removedLayerIds: string[]) {\n  const layerIds = new Set(removedLayerIds);\n  return (function recurseFn(curr: Layer): Layer {\n    if (layerIds.has(curr.id)) {\n      return undefined;\n    }\n    const children = curr.children.map(recurseFn).filter(l => !!l);\n    return setLayerChildren(curr, children);\n  })(layer) as L;\n}\n\nexport function updateLayer(vl: VectorLayer, layer: Layer) {\n  return replaceLayer(vl, layer.id, layer);\n}\n\nexport function replaceLayer(vl: VectorLayer, layerId: string, replacement: Layer) {\n  if (IS_DEV_BUILD && !vl.findLayerById(layerId)) {\n    console.warn('Attempt to replace a layer that does not exist in the tree');\n  }\n  return (function recurseFn(curr: Layer): Layer {\n    return curr.id === layerId\n      ? replacement\n      : setLayerChildren(curr, curr.children.map(child => recurseFn(child)));\n  })(vl) as VectorLayer;\n}\n\nexport function runPreorderTraversal(layer: Layer) {\n  // Add the layers as we iterate the tree to ensure they are properly sorted.\n  const layers: Layer[] = [];\n  (function recurseFn(l: Layer) {\n    layers.push(l);\n    l.children.forEach(recurseFn);\n  })(layer);\n  return layers;\n}\n\nexport function findLayerByName(layers: ReadonlyArray<Layer>, layerName: string) {\n  for (const layer of layers) {\n    const target = layer.findLayerByName(layerName);\n    if (target) {\n      return target;\n    }\n  }\n  return undefined;\n}\n\nexport function findParent(vl: VectorLayer, layerId: string) {\n  return (function recurseFn(curr: Layer, parent?: Layer): Layer {\n    if (curr.id === layerId) {\n      return parent;\n    }\n    for (const child of curr.children) {\n      const p = recurseFn(child, curr);\n      if (p) {\n        return p;\n      }\n    }\n    return undefined;\n  })(vl);\n}\n\nexport function findNextSibling(vl: VectorLayer, layerId: string) {\n  return findSibling(layerId, findParent(vl, layerId), 1);\n}\n\nexport function findPreviousSibling(vl: VectorLayer, layerId: string) {\n  return findSibling(layerId, findParent(vl, layerId), -1);\n}\n\nfunction findSibling(layerId: string, parent: Layer, offset: number) {\n  if (!parent || !parent.children) {\n    return undefined;\n  }\n  let index = _.findIndex(parent.children, c => c.id === layerId);\n  if (index < 0) {\n    return undefined;\n  }\n  index += offset;\n  if (index < 0 || parent.children.length <= index) {\n    return undefined;\n  }\n  return parent.children[index];\n}\n\nexport function getUniqueLayerName(layers: ReadonlyArray<Layer>, prefix: string) {\n  return getUniqueName(prefix, name => findLayerByName(layers, name));\n}\n\nexport function getUniqueName(prefix = '', objectByNameFn = (s: string) => undefined as any) {\n  let n = 0;\n  const nameFn = () => prefix + (n ? `_${n}` : '');\n  while (true) {\n    const o = objectByNameFn(nameFn());\n    if (!o) {\n      break;\n    }\n    n++;\n  }\n  return nameFn();\n}\n\n/**\n * Returns a cloned layer with the specified list of children layers.\n */\nfunction setLayerChildren<L extends Layer>(layer: L, children: ReadonlyArray<Layer>) {\n  const clone = layer.clone();\n  clone.children = children;\n  return clone as L;\n}\n\nexport function toStrokeDashArray(\n  trimPathStart: number,\n  trimPathEnd: number,\n  trimPathOffset: number,\n  pathLength: number,\n  // TODO: remove this eventually... it is used to fix a canvas bug (that I am probably not handling correctly)\n  marginOfError = 0,\n) {\n  // Calculate the visible fraction of the trimmed path. If trimPathStart\n  // is greater than trimPathEnd, then the result should be the combined\n  // length of the two line segments: [trimPathStart,1] and [0,trimPathEnd].\n  let shownFraction = trimPathEnd - trimPathStart;\n  if (trimPathStart > trimPathEnd) {\n    shownFraction += 1;\n  }\n  // Calculate the dash array. The first array element is the length of\n  // the trimmed path and the second element is the gap, which is the\n  // difference in length between the total path length and the visible\n  // trimmed path length.\n  return [shownFraction * pathLength, (1 - shownFraction + marginOfError) * pathLength];\n}\n\nexport function toStrokeDashOffset(\n  trimPathStart: number,\n  trimPathEnd: number,\n  trimPathOffset: number,\n  pathLength: number,\n) {\n  // The amount to offset the path is equal to the trimPathStart plus\n  // trimPathOffset. We mod the result because the trimmed path\n  // should wrap around once it reaches 1.\n  return pathLength * (1 - ((trimPathStart + trimPathOffset) % 1));\n}\n","import * as LayerUtil from './LayerUtil';\nexport { LayerUtil };\n\nexport {\n  Layer,\n  ClipPathLayer,\n  VectorLayer,\n  GroupLayer,\n  PathLayer,\n  StrokeLineCap,\n  StrokeLineJoin,\n  FillType,\n  MorphableLayer,\n} from './Layer';\n","// These names correspond to CSS class names declared in the root component.\nexport enum CursorType {\n  Default = 'default',\n  Pointer = 'pointer',\n  PointSelect = 'point-select',\n  Crosshair = 'crosshair',\n  Pen = 'pen',\n  PenAdd = 'pen-add',\n  PenClose = 'pen-close',\n  Pencil = 'pencil',\n  Resize0 = 'resize0',\n  Resize45 = 'resize45',\n  Resize90 = 'resize90',\n  Resize135 = 'resize135',\n  Rotate0 = 'rotate0',\n  Rotate45 = 'rotate45',\n  Rotate90 = 'rotate90',\n  Rotate135 = 'rotate135',\n  Rotate180 = 'rotate180',\n  Rotate225 = 'rotate225',\n  Rotate270 = 'rotate270',\n  Rotate315 = 'rotate315',\n  ZoomIn = 'zoom-in',\n  ZoomOut = 'zoom-out',\n  Grab = 'grab',\n  Grabbing = 'grabbing',\n}\n","export enum ToolMode {\n  Default = 'Default',\n  Pencil = 'Pencil',\n  Ellipse = 'Ellipse',\n  Rectangle = 'Rectangle',\n  ZoomPan = 'ZoomPan',\n}\n","export { ToolMode } from './ToolMode';\nexport { CursorType } from './CursorType';\n","import { MathUtil, Matrix, Point } from 'app/modules/editor/scripts/common';\nimport * as _ from 'lodash';\n\nimport { SvgChar } from '.';\n\n/**\n * Represents an individual SVG command. These are the essential building blocks\n * of all Paths and SubPath objects.\n */\nexport class Command {\n  constructor(\n    private readonly _type: SvgChar,\n    private readonly _points: ReadonlyArray<Point>,\n    private readonly _isSplitPoint = false,\n    private readonly _id = _.uniqueId(),\n    private readonly _isSplitSegment = false,\n  ) {\n    if (_type === undefined) {\n      throw new Error('Attempt to set an undefined svgChar');\n    }\n  }\n\n  /**\n   * Returns the unique ID for this command.\n   */\n  get id() {\n    return this._id;\n  }\n\n  /**\n   * Returns the SVG character for this command.\n   */\n  get type() {\n    return this._type;\n  }\n\n  /**\n   * Returns the points for this command.\n   */\n  get points() {\n    return this._points;\n  }\n\n  /**\n   * Returns true iff the command was created as a result of being split.\n   * Only split commands are able to be editted and deleted via the inspector/canvas.\n   */\n  isSplitPoint() {\n    return this._isSplitPoint;\n  }\n\n  /**\n   * Returns true iff the command was created as a result of a subpath split.\n   */\n  isSplitSegment() {\n    return this._isSplitSegment;\n  }\n\n  /**\n   * Returns the command's starting point. The starting point for the first\n   * command of the first subpath will be undefined.\n   */\n  get start() {\n    return _.first(this._points);\n  }\n\n  /**\n   * Returns the command's ending point.\n   */\n  get end() {\n    return _.last(this._points);\n  }\n\n  /**\n   * Returns true iff this command can be converted into a new command\n   * that is morphable with the specified SVG command type.\n   */\n  canConvertTo(targetChar: SvgChar) {\n    const ch = targetChar;\n    if (this._type === 'M' || ch === 'M' || this._type === ch) {\n      return false;\n    }\n    switch (this._type) {\n      case 'L':\n        return ch === 'Q' || ch === 'C';\n      case 'Z':\n        return ch === 'L' || ch === 'Q' || ch === 'C';\n      case 'Q': {\n        const uniquePoints = _.uniqWith(this._points, MathUtil.arePointsEqual);\n        return ch === 'C' || (ch === 'L' && uniquePoints.length <= 2);\n      }\n      case 'C': {\n        const uniquePoints = _.uniqWith(this._points, MathUtil.arePointsEqual);\n        return ch === 'L' && uniquePoints.length <= 2;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Returns a builder to construct a mutated Command.\n   */\n  mutate() {\n    return new CommandBuilder(\n      this._type,\n      [...this._points],\n      this.isSplitPoint(),\n      this._id,\n      this._isSplitSegment,\n    );\n  }\n\n  toString() {\n    if (this._type === 'Z') {\n      return `${this._type}`;\n    } else {\n      const p = _.last(this._points);\n      const x = _.round(p.x, 3);\n      const y = _.round(p.y, 3);\n      return `${this._type} ${x}, ${y}`;\n    }\n  }\n}\n\nexport class CommandBuilder {\n  private matrix: Matrix = Matrix.identity();\n\n  constructor(\n    private svgChar: SvgChar,\n    private points: Point[],\n    private isSplitPoint = false,\n    private id = '',\n    private isSplitSegment = false,\n  ) {}\n\n  setSvgChar(svgChar: SvgChar) {\n    this.svgChar = svgChar;\n    return this;\n  }\n\n  setId(id: string) {\n    this.id = id;\n    return this;\n  }\n\n  setPoints(...points: Point[]) {\n    this.points = points;\n    return this;\n  }\n\n  toggleSplitPoint() {\n    return this.setIsSplitPoint(!this.isSplitPoint);\n  }\n\n  setIsSplitPoint(isSplitPoint: boolean) {\n    this.isSplitPoint = isSplitPoint;\n    return this;\n  }\n\n  setIsSplitSegment(isSplitSegment: boolean) {\n    this.isSplitSegment = isSplitSegment;\n    return this;\n  }\n\n  transform(transform: Matrix) {\n    this.matrix = transform.dot(this.matrix);\n    return this;\n  }\n\n  reverse() {\n    if (this.svgChar !== 'M' || this.points[0]) {\n      // The first move command of an SVG path has an undefined\n      // starting point, so no change is required in that case.\n      this.points.reverse();\n    }\n    return this;\n  }\n\n  build() {\n    return new Command(\n      this.svgChar,\n      this.points.map(p => (p ? MathUtil.transformPoint(p, this.matrix) : p)),\n      this.isSplitPoint,\n      this.id || _.uniqueId(),\n      this.isSplitSegment,\n    );\n  }\n}\n","import { MathUtil, Matrix, Point } from 'app/modules/editor/scripts/common';\nimport * as _ from 'lodash';\n\nimport { Command, Projection, SvgChar } from '.';\nimport { Calculator, Line, newCalculator } from './calculators';\n\n/**\n * Container class that encapsulates a Command's underlying state.\n */\nexport class CommandState {\n  constructor(\n    // The original un-mutated command.\n    private readonly backingCommand: Command,\n    // A command state object wraps around the initial SVG command and outputs\n    // a list of transformed commands resulting from splits, unsplits,\n    // conversions, etc. If the initial SVG command hasn't been modified,\n    // then a list containing the initial SVG command is returned.\n    private readonly commands: ReadonlyArray<Command> = [backingCommand],\n    // The list of mutations describes how the initial backing command\n    // has since been modified. Since the command state always holds a\n    // reference to its initial backing command, these modifications\n    // can be reversed simply by removing mutations from the list.\n    private readonly mutations: ReadonlyArray<Mutation> = [\n      {\n        id: backingCommand.id,\n        t: 1,\n        svgChar: backingCommand.type,\n      },\n    ],\n    // The transformation matricies used to transform this command state object.\n    private readonly transform: Matrix = Matrix.identity(),\n    // The calculator that will do all of the math-y stuff for us.\n    private readonly calculator: Calculator = newCalculator(backingCommand),\n    // The lower bound T value (may be > 0 for split subpaths).\n    private readonly minT = 0,\n    // The upper bound T value (may be < 1 for split subpaths).\n    private readonly maxT = 1,\n    // When a filled subpath is split, we assign a 'split command id' to the two\n    // lines that are created (so that during unsplit operations we can identify\n    // which segments were added together).\n    private readonly splitSegmentId = '',\n    // The parent command state object (i.e. the one that created the new split segment).\n    private readonly parentCommandState?: CommandState,\n  ) {}\n\n  getBackingId() {\n    return this.backingCommand.id;\n  }\n\n  getCommands() {\n    return this.commands;\n  }\n\n  getBoundingBox() {\n    return this.calculator.getBoundingBox();\n  }\n\n  intersects(line: Line) {\n    return this.calculator.intersects(line).filter(t => this.minT < t && t <= this.maxT);\n  }\n\n  getIdAtIndex(splitIdx: number) {\n    return this.mutations[splitIdx].id;\n  }\n\n  getPathLength() {\n    return this.calculator.getPathLength();\n  }\n\n  getPointAtLength(distance: number) {\n    return this.calculator.getPointAtLength(distance);\n  }\n\n  project(point: Point): { projection: Projection; splitIdx: number } | undefined {\n    const projection = this.calculator.project(point);\n    if (!projection) {\n      return undefined;\n    }\n    const projT = projection.t;\n    if (projT < this.minT || this.maxT < projT) {\n      // If this happens, then the projection is being mapped to some other\n      // split command segment.\n      // TODO: recompute the projection so that it properly returned the correct value...\n      // console.warn('Failed to compute projection for CommandState');\n      return undefined;\n    }\n    // Count the number of t values that are less than the projection.\n    const splitIdx = _.sumBy(this.mutations, m => (m.t < projection.t ? 1 : 0));\n    const tempSplits = [this.minT, ...this.mutations.map(m => m.t)];\n    const startSplit = tempSplits[splitIdx];\n    const endSplit = tempSplits[splitIdx + 1];\n    // Update the t value so that it is in relation to the client-visible subIdx and cmdIdx.\n    projection.t =\n      startSplit === endSplit ? 0 : (projection.t - startSplit) / (endSplit - startSplit);\n    return { projection, splitIdx };\n  }\n\n  /**\n   * Slices the command state object into two parts. Useful for subpath splitting.\n   */\n  slice(splitIdx: number) {\n    const left = this.mutate()\n      .sliceLeft(splitIdx)\n      .build();\n    let right: CommandState;\n    if (this.isSplitAtIndex(splitIdx)) {\n      right = this.mutate()\n        .sliceRight(splitIdx)\n        .build();\n    }\n    return { left, right };\n  }\n\n  /**\n   * Merges two previously sliced command state objects into one.\n   */\n  merge(cs: CommandState) {\n    if (this.getBackingId() !== cs.getBackingId()) {\n      throw new Error('Attempt to merge command state objects with unequal backing IDs');\n    }\n    if (this.minT < cs.minT) {\n      console.warn('Merging command states out of order', this, cs);\n    }\n    return this.mutate()\n      .setMutations([...cs.mutations.slice(0, cs.mutations.length - 1), ...this.mutations])\n      .setMinT(cs.minT)\n      .build();\n  }\n\n  /**\n   * Returns true iff the command at the specified index is split.\n   */\n  isSplitAtIndex(splitIdx: number) {\n    return splitIdx !== this.mutations.length - 1;\n  }\n\n  getSplitSegmentId() {\n    return this.splitSegmentId;\n  }\n\n  getParentCommandState() {\n    return this.parentCommandState;\n  }\n\n  mutate() {\n    return new CommandStateMutator(\n      this.backingCommand,\n      [...this.mutations],\n      this.transform,\n      this.calculator,\n      this.minT,\n      this.maxT,\n      this.splitSegmentId,\n      this.parentCommandState,\n    );\n  }\n}\n\ninterface Mutation {\n  readonly id: string;\n  readonly t: number;\n  readonly svgChar: SvgChar;\n}\n\n/**\n * A builder class for creating new mutated CommandState objects.\n */\nclass CommandStateMutator {\n  constructor(\n    private backingCommand: Command,\n    private mutations: Mutation[],\n    private matrix: Matrix,\n    private calculator: Calculator,\n    private minT: number,\n    private maxT: number,\n    private splitSegmentId: string,\n    private parentCommandState: CommandState,\n  ) {}\n\n  /**\n   * Slices this command state object at the specified index, discarding\n   * anything to the right.\n   */\n  sliceLeft(splitIdx: number) {\n    this.mutations = this.mutations.slice(0, splitIdx + 1).map(m => _.clone(m));\n    this.maxT = _.last(this.mutations).t;\n    return this;\n  }\n\n  /**\n   * Slices this command state object at the specified index, discarding\n   * anything to the left.\n   */\n  sliceRight(splitIdx: number) {\n    this.minT = this.mutations[splitIdx].t;\n    this.mutations = this.mutations.slice(splitIdx + 1).map(m => _.clone(m));\n    return this;\n  }\n\n  setMutations(mutations: ReadonlyArray<Mutation>) {\n    this.mutations = [...mutations];\n    return this;\n  }\n\n  setMinT(minT: number) {\n    this.minT = minT;\n    return this;\n  }\n\n  /**\n   * Sets this command state object as a split segment with a unique ID.\n   * The parent state object represents the origin command state.\n   */\n  setSplitSegmentInfo(parentCommandState: CommandState, id: string) {\n    this.splitSegmentId = id;\n    this.parentCommandState = parentCommandState;\n    return this;\n  }\n\n  /**\n   * Reverses the information stored by this command state object.\n   */\n  reverse() {\n    this.backingCommand = this.backingCommand\n      .mutate()\n      .reverse()\n      .build();\n    this.calculator = newCalculator(this.backingCommand);\n    const lastMutation = this.mutations.pop();\n    this.mutations = this.mutations\n      .map(m => {\n        const { id, svgChar } = m;\n        return { id, svgChar, t: MathUtil.lerp(this.maxT, this.minT, m.t) };\n      })\n      .reverse();\n    this.mutations.push(lastMutation);\n    return this;\n  }\n\n  /**\n   * Inserts the provided t values at the specified split index. The t values\n   * are linearly interpolated between the split values at splitIdx and\n   * splitIdx + 1 to ensure the split is done in relation to the mutated command.\n   */\n  splitAtIndex(splitIdx: number, ts: ReadonlyArray<number>) {\n    const tempSplits = [this.minT, ...this.mutations.map(m => m.t)];\n    const startSplit = tempSplits[splitIdx];\n    const endSplit = tempSplits[splitIdx + 1];\n    return this.split(ts.map(t => MathUtil.lerp(startSplit, endSplit, t)));\n  }\n\n  /**\n   * Same as splitAtIndex() except the command is split into two approximately\n   * equal parts.\n   */\n  splitInHalfAtIndex(splitIdx: number) {\n    const tempSplits = [this.minT, ...this.mutations.map(m => m.t)];\n    const startSplit = tempSplits[splitIdx];\n    const endSplit = tempSplits[splitIdx + 1];\n    const distance = MathUtil.lerp(startSplit, endSplit, 0.5);\n    return this.split([this.calculator.findTimeByDistance(distance)]);\n  }\n\n  private split(ts: ReadonlyArray<number>) {\n    if (!ts.length || this.backingCommand.type === 'M') {\n      return this;\n    }\n    const currSplits = this.mutations.map(m => m.t);\n    const currSvgChars = this.mutations.map(m => m.svgChar);\n    for (const t of ts) {\n      const id = _.uniqueId();\n      const svgChar = currSvgChars[_.sortedIndex(currSplits, t)];\n      const mutation = { id, t, svgChar };\n      const insertionIdx = _.sortedIndexBy<Mutation>(this.mutations, mutation, m => m.t);\n      this.mutations.splice(insertionIdx, 0, { id, t, svgChar });\n    }\n    for (let i = 0; i < this.mutations.length - 1; i++) {\n      const mutation = this.mutations[i];\n      if (mutation.svgChar === 'Z') {\n        // Force convert the split closepath command into a line.\n        const { id, t } = mutation;\n        this.mutations[i] = { id, t, svgChar: 'L' };\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Unsplits the command at the specified split index.\n   */\n  unsplitAtIndex(splitIdx: number) {\n    if (!this.isSplitAtIndex(splitIdx)) {\n      console.warn('Ignoring attempt to unsplit a non-split command', this);\n      return this;\n    }\n    this.mutations.splice(splitIdx, 1);\n    return this;\n  }\n\n  /**\n   * Returns true iff the command at the specified index is split.\n   */\n  private isSplitAtIndex(splitIdx: number) {\n    return splitIdx !== this.mutations.length - 1;\n  }\n\n  /**\n   * Converts the command at the specified split index.\n   */\n  convertAtIndex(splitIdx: number, svgChar: SvgChar) {\n    const { id, t } = this.mutations[splitIdx];\n    this.mutations[splitIdx] = { id, t, svgChar };\n    return this;\n  }\n\n  /**\n   * Unconverts all conversions previously performed on this\n   * command state object.\n   */\n  unconvertSubpath() {\n    const backingSvgChar = this.backingCommand.type;\n    this.mutations = this.mutations.map((mutation, i) => {\n      let svgChar = backingSvgChar;\n      if (backingSvgChar === 'Z' && i !== this.mutations.length - 1) {\n        // Force convert the split closepath command back into a line.\n        svgChar = 'L';\n      }\n      const { id, t } = mutation;\n      return { id, t, svgChar };\n    });\n    return this;\n  }\n\n  /**\n   * Converts closepath commands to lines. This method irreversibly builds\n   * a new backing command to use.\n   */\n  forceConvertClosepathsToLines() {\n    if (this.backingCommand.type === 'Z') {\n      this.backingCommand = this.calculator.convert('L').toCommand();\n      this.calculator = newCalculator(this.backingCommand);\n      this.mutations = this.mutations.map(m => {\n        const { id, t, svgChar } = m;\n        const newSvgChar = svgChar === 'Z' ? 'L' : svgChar;\n        return { id, t, svgChar: newSvgChar };\n      });\n    }\n    return this;\n  }\n\n  /**\n   * Adds transforms to this command state object using the\n   * specified transformation matrices.\n   */\n  transform(transform: Matrix) {\n    this.matrix = transform.dot(this.matrix);\n    this.calculator = newCalculator(\n      this.backingCommand\n        .mutate()\n        .transform(this.matrix)\n        .build(),\n    );\n    return this;\n  }\n\n  /**\n   * Reverts this command state object back to its original state.\n   */\n  revert() {\n    this.mutations = [\n      {\n        id: _.last(this.mutations).id,\n        t: _.last(this.mutations).t,\n        svgChar: this.backingCommand.type,\n      },\n    ];\n    this.matrix = Matrix.identity();\n    this.calculator = newCalculator(this.backingCommand);\n    return this;\n  }\n\n  /**\n   * Builds a new command state object.\n   */\n  build() {\n    // TODO: this could be more efficient (avoid recreating commands unnecessarily)\n    const builtCommands: Command[] = [];\n    let prevT = this.minT;\n    for (let i = 0; i < this.mutations.length; i++) {\n      const currT = this.mutations[i].t;\n      const isSplitSegment = this.mutations[i].svgChar !== 'M' && !!this.parentCommandState;\n      builtCommands.push(\n        this.calculator\n          .split(prevT, currT)\n          .convert(this.mutations[i].svgChar)\n          .toCommand()\n          .mutate()\n          .setId(this.mutations[i].id)\n          .setIsSplitPoint(i !== this.mutations.length - 1)\n          .setIsSplitSegment(isSplitSegment)\n          .build(),\n      );\n      prevT = currT;\n    }\n    return new CommandState(\n      this.backingCommand,\n      builtCommands,\n      this.mutations,\n      this.matrix,\n      this.calculator,\n      this.minT,\n      this.maxT,\n      this.splitSegmentId,\n      this.parentCommandState,\n    );\n  }\n}\n","import { MathUtil, Matrix, Point } from 'app/modules/editor/scripts/common';\nimport { environment } from 'environments/environment';\nimport * as _ from 'lodash';\n\nimport { Projection } from './calculators';\nimport { Command } from './Command';\nimport { CommandState } from './CommandState';\nimport * as PathParser from './PathParser';\nimport { PathState } from './PathState';\nimport { SubPathState, SubPathStateMutator, flattenSubPathStates } from './SubPathState';\nimport { SvgChar } from './SvgChar';\n\n/**\n * A compound path that contains all of the information associated with a\n * PathLayer's pathData attribute.\n */\nexport class Path {\n  private readonly ps: PathState;\n  private pathString: string;\n\n  constructor(obj: string | Command[] | PathState) {\n    this.ps = typeof obj === 'string' || Array.isArray(obj) ? new PathState(obj) : obj;\n    if (!environment.production) {\n      // Don't initialize variables lazily for dev builds (to avoid\n      // ngrx-store-freeze crashes).\n      this.getPathString();\n\n      const allIds = this.getCommands().map(c => c.id);\n      const uniqueIds = new Set(allIds);\n      const numCommands = allIds.length;\n      if (uniqueIds.size !== numCommands) {\n        const dumpInfo = this.getSubPaths().map((s, subIdx) => {\n          return s.getCommands().map((c, cmdIdx) => {\n            return {\n              subIdx,\n              cmdIdx,\n              id: c.id,\n              isDup: allIds.filter(id => id === c.id).length > 1,\n            };\n          });\n        });\n        console.warn('duplicate IDs found!', this, _.flatten(dumpInfo));\n      }\n    }\n  }\n\n  /**\n   * Returns the path's SVG path string.\n   */\n  getPathString() {\n    if (this.pathString === undefined) {\n      this.pathString = PathParser.commandsToString(this.getCommands());\n    }\n    return this.pathString;\n  }\n\n  /**\n   * Returns the list of SubPaths in this path.\n   */\n  getSubPaths() {\n    return this.ps.subPaths;\n  }\n\n  /**\n   * Returns the subpath at the specified index.\n   */\n  getSubPath(subIdx: number) {\n    const numSubPaths = this.getSubPaths().length;\n    if (subIdx < 0 || numSubPaths <= subIdx) {\n      console.error(this);\n      throw new Error(\n        `Subpath index out of bounds: ` + `subIdx=${subIdx} numSubPaths=${numSubPaths}`,\n      );\n    }\n    return this.getSubPaths()[subIdx];\n  }\n\n  /**\n   * Returns the list of Commands in this path.\n   */\n  getCommands() {\n    return this.ps.commands;\n  }\n\n  /**\n   * Returns the command at the specified index.\n   */\n  getCommand(subIdx: number, cmdIdx: number) {\n    const subPath = this.getSubPath(subIdx);\n    const numCommands = subPath.getCommands().length;\n    if (cmdIdx < 0 || numCommands <= cmdIdx) {\n      console.error(this);\n      throw new Error(\n        `Command index out of bounds: ` +\n          `subIdx=${subIdx} cmdIdx=${cmdIdx}, numCommands=${numCommands}`,\n      );\n    }\n    return subPath.getCommands()[cmdIdx];\n  }\n\n  /**\n   * Returns the length of the path.\n   */\n  getPathLength() {\n    return this.ps.getPathLength();\n  }\n\n  /**\n   * Returns the length of the subpath.\n   */\n  getSubPathLength(subIdx: number) {\n    return this.ps.getSubPathLength(subIdx);\n  }\n\n  /**\n   * Returns the point at the given length along the path.\n   */\n  getPointAtLength(distance: number) {\n    return this.ps.getPointAtLength(distance);\n  }\n\n  /**\n   * Returns true iff this path is morphable with the specified path.\n   */\n  isMorphableWith(path: Path) {\n    const cmds1 = this.getCommands();\n    const cmds2 = path.getCommands();\n    return cmds1.length === cmds2.length && cmds1.every((cmd1, i) => cmd1.type === cmds2[i].type);\n  }\n\n  /**\n   * Calculates the point on this path that is closest to the specified point argument.\n   * Returns undefined if no point is found.\n   */\n  project(point: Point, restrictToSubIdx?: number): ProjectionOntoPath | undefined {\n    return this.ps.project(point, restrictToSubIdx);\n  }\n\n  /**\n   * Performs a hit test on the path and returns a HitResult.\n   */\n  hitTest(point: Point, opts: HitOptions): HitResult {\n    return this.ps.hitTest(point, opts);\n  }\n\n  /**\n   * Returns the pole of inaccessibility for the specified subpath index.\n   */\n  getPoleOfInaccessibility(subIdx: number) {\n    return this.ps.getPoleOfInaccessibility(subIdx);\n  }\n\n  /**\n   * Returns the bounding box for this path.\n   */\n  getBoundingBox() {\n    return this.ps.getBoundingBox();\n  }\n\n  /**\n   * Returns true iff the subpath at the specified index is clockwise.\n   */\n  isClockwise(subIdx: number) {\n    return this.ps.isClockwise(subIdx);\n  }\n\n  /**\n   * Returns true iff the path is closed.\n   */\n  isClosed() {\n    return this.getSubPaths().every(s => s.isClosed());\n  }\n\n  /**\n   * Transforms the path using the specified transform matrix.\n   */\n  transform(transform: Matrix) {\n    return this.mutate()\n      .transform(transform)\n      .build()\n      .clone();\n  }\n\n  /**\n   * Creates a builder that can create a mutated Path object.\n   */\n  mutate() {\n    return new PathMutator(this.ps);\n  }\n\n  /**\n   * Returns a cloned instance of this path. Any existing path state will be cleared.\n   */\n  clone() {\n    return new Path(this.getPathString());\n  }\n\n  /**\n   * Returns a Path representing its initial unmutated state.\n   */\n  revert() {\n    return this.mutate()\n      .revert()\n      .build();\n  }\n}\n\n/** Represents the options for a hit test. */\nexport interface HitOptions {\n  readonly isPointInRangeFn?: (distance: number, cmd?: Command) => boolean;\n  readonly isSegmentInRangeFn?: (distance: number, cmd?: Command) => boolean;\n  readonly findShapesInRange?: boolean;\n  readonly restrictToSubIdx?: ReadonlyArray<number>;\n}\n\n/** Represents the result of a hit test. */\nexport interface HitResult {\n  readonly isHit: boolean;\n  readonly isEndPointHit: boolean;\n  readonly isSegmentHit: boolean;\n  readonly isShapeHit: boolean;\n  readonly endPointHits?: ReadonlyArray<ProjectionOntoPath>;\n  readonly segmentHits?: ReadonlyArray<ProjectionOntoPath>;\n  readonly shapeHits?: Array<{ subIdx: number }>;\n}\n\nexport interface ProjectionOntoPath {\n  readonly subIdx: number;\n  readonly cmdIdx: number;\n  readonly projection: Projection;\n}\n\nconst ENABLE_LOGS = !environment.production && false;\n\n/**\n * A builder class for creating mutated Path objects.\n */\nexport class PathMutator {\n  // A tree of sub path state objects, including collapsing sub paths.\n  private subPathStateMap: SubPathState[];\n  // Maps subIdx --> spsIdx.\n  private subPathOrdering: number[];\n  private numCollapsingSubPaths: number;\n\n  constructor(ps: PathState) {\n    this.subPathStateMap = [...ps.subPathStateMap];\n    this.subPathOrdering = [...ps.subPathOrdering];\n    this.numCollapsingSubPaths = ps.numCollapsingSubPaths;\n  }\n\n  /**\n   * Reverses the order of the points in the sub path at the specified index.\n   */\n  reverseSubPath(subIdx: number) {\n    LOG('reverseSubPath', subIdx);\n    this.setSubPathStateLeaf(\n      subIdx,\n      this.findSubPathStateLeaf(subIdx)\n        .mutate()\n        .reverse()\n        .build(),\n    );\n    return this;\n  }\n\n  /**\n   * Shifts back the order of the points in the sub path at the specified index.\n   */\n  shiftSubPathBack(subIdx: number, numShifts = 1) {\n    LOG('shiftSubPathBack', subIdx, numShifts);\n    return this.findSubPathStateLeaf(subIdx).isReversed()\n      ? this.shift(subIdx, (o, n) => (o + numShifts) % (n - 1))\n      : this.shift(subIdx, (o, n) => MathUtil.floorMod(o - numShifts, n - 1));\n  }\n\n  /**\n   * Shifts forward the order of the points in the sub path at the specified index.\n   */\n  shiftSubPathForward(subIdx: number, numShifts = 1) {\n    LOG('shiftSubPathForward', subIdx, numShifts);\n    return this.findSubPathStateLeaf(subIdx).isReversed()\n      ? this.shift(subIdx, (o, n) => MathUtil.floorMod(o - numShifts, n - 1))\n      : this.shift(subIdx, (o, n) => (o + numShifts) % (n - 1));\n  }\n\n  private shift(subIdx: number, calcOffsetFn: (offset: number, numCommands: number) => number) {\n    const sps = this.findSubPathStateLeaf(subIdx);\n    const numCmdsInSubPath = _.sumBy(sps.getCommandStates(), cs => cs.getCommands().length);\n    if (numCmdsInSubPath <= 1) {\n      return this;\n    }\n    const firstCmd = sps.getCommandStates()[0].getCommands()[0];\n    const lastCmd = _.last(_.last(sps.getCommandStates()).getCommands());\n    if (!MathUtil.arePointsEqual(firstCmd.end, lastCmd.end)) {\n      // TODO: in some cases there may be rounding errors that cause a closed subpath\n      // to show up as non-closed. is there anything we can do to alleviate this?\n      console.warn('Ignoring attempt to shift a non-closed subpath');\n      return this;\n    }\n    this.setSubPathStateLeaf(\n      subIdx,\n      sps\n        .mutate()\n        .setShiftOffset(calcOffsetFn(sps.getShiftOffset(), numCmdsInSubPath))\n        .build(),\n    );\n    return this;\n  }\n\n  /**\n   * Splits the command using the specified t values.\n   */\n  splitCommand(subIdx: number, cmdIdx: number, ...ts: number[]) {\n    LOG('splitCommand', subIdx, cmdIdx, ts);\n    if (!ts.length) {\n      throw new Error('Must specify at least one t value');\n    }\n    const { targetCs, csIdx, splitIdx } = this.findReversedAndShiftedInternalIndices(\n      subIdx,\n      cmdIdx,\n    );\n    const shiftOffset = this.getUpdatedShiftOffsetsAfterSplit(subIdx, csIdx, splitIdx, ts.length);\n    const sps = this.findSubPathStateLeaf(subIdx);\n    if (sps.isReversed()) {\n      ts = ts.map(t => 1 - t);\n    }\n    this.setSubPathStateLeaf(\n      subIdx,\n      this.findSubPathStateLeaf(subIdx)\n        .mutate()\n        .setShiftOffset(shiftOffset)\n        .setCommandState(\n          csIdx,\n          targetCs\n            .mutate()\n            .splitAtIndex(splitIdx, ts)\n            .build(),\n        )\n        .build(),\n    );\n    return this;\n  }\n\n  /**\n   * Splits the command into two approximately equal parts.\n   */\n  splitCommandInHalf(subIdx: number, cmdIdx: number) {\n    LOG('splitCommandInHalf', subIdx, cmdIdx);\n    const { targetCs, csIdx, splitIdx } = this.findReversedAndShiftedInternalIndices(\n      subIdx,\n      cmdIdx,\n    );\n    const shiftOffset = this.getUpdatedShiftOffsetsAfterSplit(subIdx, csIdx, splitIdx, 1);\n    this.setSubPathStateLeaf(\n      subIdx,\n      this.findSubPathStateLeaf(subIdx)\n        .mutate()\n        .setShiftOffset(shiftOffset)\n        .setCommandState(\n          csIdx,\n          targetCs\n            .mutate()\n            .splitInHalfAtIndex(splitIdx)\n            .build(),\n        )\n        .build(),\n    );\n    return this;\n  }\n\n  // If 0 <= position <= shiftOffset, then that means we need to increase the\n  // shift offset to account for the new split points that are about to be inserted.\n  // Note that this method assumes all splits will occur within the same cmdIdx\n  // command. This means that the shift offset will only ever increase by either\n  // 'numShifts' or '0', since it will be impossible for splits to be added on\n  // both sides of the shift pivot. We could fix that, but it's a lot of\n  // complicated indexing and I don't think the user will ever need to do this anyway.\n  private getUpdatedShiftOffsetsAfterSplit(\n    subIdx: number,\n    csIdx: number,\n    splitIdx: number,\n    numSplits: number,\n  ) {\n    const sps = this.findSubPathStateLeaf(subIdx);\n    const shiftOffset = sps.getShiftOffset();\n    let position = splitIdx;\n    for (let i = 0; i < csIdx; i++) {\n      position += sps.getCommandStates()[i].getCommands().length;\n    }\n    if (shiftOffset && position <= shiftOffset) {\n      return shiftOffset + numSplits;\n    }\n    return shiftOffset;\n  }\n\n  /**\n   * Un-splits the path at the specified index. Returns a new path object.\n   */\n  unsplitCommand(subIdx: number, cmdIdx: number) {\n    LOG('unsplitCommand', subIdx, cmdIdx);\n    const { targetCs, csIdx, splitIdx } = this.findReversedAndShiftedInternalIndices(\n      subIdx,\n      cmdIdx,\n    );\n    const isSubPathReversed = this.findSubPathStateLeaf(subIdx).isReversed();\n    this.setSubPathStateLeaf(\n      subIdx,\n      this.findSubPathStateLeaf(subIdx)\n        .mutate()\n        .setCommandState(\n          csIdx,\n          targetCs\n            .mutate()\n            .unsplitAtIndex(isSubPathReversed ? splitIdx - 1 : splitIdx)\n            .build(),\n        )\n        .build(),\n    );\n    const sps = this.findSubPathStateLeaf(subIdx);\n    const shiftOffset = sps.getShiftOffset();\n    let position = splitIdx;\n    for (let i = 0; i < csIdx; i++) {\n      position += sps.getCommandStates()[i].getCommands().length;\n    }\n    if (shiftOffset && position <= shiftOffset) {\n      // Subtract the shift offset by 1 to ensure that the unsplit operation\n      // doesn't alter the positions of the path points.\n      this.setSubPathStateLeaf(\n        subIdx,\n        this.findSubPathStateLeaf(subIdx)\n          .mutate()\n          .setShiftOffset(shiftOffset - 1)\n          .build(),\n      );\n    }\n    return this;\n  }\n\n  /**\n   * Convert the path at the specified index. Returns a new path object.\n   */\n  convertCommand(subIdx: number, cmdIdx: number, svgChar: SvgChar) {\n    const { targetCs, csIdx, splitIdx } = this.findReversedAndShiftedInternalIndices(\n      subIdx,\n      cmdIdx,\n    );\n    this.setSubPathStateLeaf(\n      subIdx,\n      this.findSubPathStateLeaf(subIdx)\n        .mutate()\n        .setCommandState(\n          csIdx,\n          targetCs\n            .mutate()\n            .convertAtIndex(splitIdx, svgChar)\n            .build(),\n        )\n        .build(),\n    );\n    return this;\n  }\n\n  /**\n   * Reverts any conversions previously performed in the specified sub path.\n   */\n  unconvertSubPath(subIdx: number) {\n    const sps = this.findSubPathStateLeaf(subIdx);\n    const css = sps.getCommandStates().map((cs, csIdx) => {\n      return csIdx === 0\n        ? cs\n        : cs\n            .mutate()\n            .unconvertSubpath()\n            .build();\n    });\n    this.setSubPathStateLeaf(\n      subIdx,\n      sps\n        .mutate()\n        .setCommandStates(css)\n        .build(),\n    );\n    return this;\n  }\n\n  /**\n   * Transforms the path using the specified transformation matrix.\n   */\n  transform(transform: Matrix) {\n    const spss = flattenSubPathStates(this.subPathStateMap);\n    for (let spsIdx = 0; spsIdx < spss.length; spsIdx++) {\n      const sps = spss[spsIdx];\n      const css = sps.getCommandStates();\n      const subIdx = this.subPathOrdering.indexOf(spsIdx);\n      this.setSubPathStateLeaf(\n        subIdx,\n        sps\n          .mutate()\n          .setCommandStates(\n            css.map(cs =>\n              cs\n                .mutate()\n                .transform(transform)\n                .build(),\n            ),\n          )\n          .build(),\n      );\n    }\n    return this;\n  }\n\n  /**\n   * Moves a subpath from one index to another. Returns a new path object.\n   */\n  moveSubPath(fromSubIdx: number, toSubIdx: number) {\n    LOG('moveSubPath', fromSubIdx, toSubIdx);\n    this.subPathOrdering.splice(toSubIdx, 0, this.subPathOrdering.splice(fromSubIdx, 1)[0]);\n    return this;\n  }\n\n  /**\n   * Splits a stroked sub path using the specified indices.\n   * A 'moveTo' command will be inserted after the command at 'cmdIdx'.\n   */\n  splitStrokedSubPath(subIdx: number, cmdIdx: number) {\n    LOG('splitStrokedSubPath', subIdx, cmdIdx);\n    const sps = this.findSubPathStateLeaf(subIdx);\n    const css = reverseAndShiftCommandStates(\n      sps.getCommandStates(),\n      sps.isReversed(),\n      sps.getShiftOffset(),\n    );\n    const { csIdx, splitIdx } = this.findInternalIndices(css, cmdIdx);\n    const startCommandStates: CommandState[] = [];\n    const endCommandStates: CommandState[] = [];\n    for (let i = 0; i < css.length; i++) {\n      if (i < csIdx) {\n        startCommandStates.push(css[i]);\n      } else if (csIdx < i) {\n        endCommandStates.push(css[i]);\n      } else {\n        const splitPoint = css[i].getCommands()[splitIdx].end;\n        const { left, right } = css[i].slice(splitIdx);\n        startCommandStates.push(left);\n        let endMoveCs = new CommandState(new Command('M', [splitPoint, splitPoint]));\n        if (sps.isReversed()) {\n          endMoveCs = endMoveCs\n            .mutate()\n            .reverse()\n            .build();\n        }\n        endCommandStates.push(endMoveCs);\n        if (right) {\n          endCommandStates.push(right);\n        }\n      }\n    }\n    const splitSubPaths = [\n      new SubPathState(startCommandStates),\n      new SubPathState(endCommandStates),\n    ];\n    this.setSubPathStateLeaf(\n      subIdx,\n      sps\n        .mutate()\n        .setSplitSubPaths(splitSubPaths)\n        .build(),\n    );\n    this.subPathOrdering.push(this.subPathOrdering.length);\n    return this;\n  }\n\n  /**\n   * Deletes the stroked subpath at the specified index. The subpath's sibling\n   * will be deleted as well.\n   */\n  deleteStrokedSubPath(subIdx: number) {\n    LOG('unsplitStrokedSubPath', subIdx);\n    const parent = this.findSubPathStateParent(subIdx);\n    const splitId = _.last(_.last(parent.getSplitSubPaths()[0].getCommandStates()).getCommands())\n      .id;\n    const mutator = parent.mutate().setSplitSubPaths([]);\n    this.deleteSpsSplitPoint(parent.getCommandStates(), splitId, mutator);\n    this.subPathStateMap = this.replaceSubPathStateNode(\n      parent,\n      (states, i) => (states[i] = mutator.build()),\n    );\n    this.updateOrderingAfterUnsplitSubPath(subIdx);\n    return this;\n  }\n\n  /**\n   * Splits a filled subpath using the specified indices.\n   *\n   * Consider the following filled subpath:\n   *\n   * 2-------------------3\n   * |                   |\n   * |                   |\n   * |                   |\n   * 1                   4\n   * |                   |\n   * |                   |\n   * |                   |\n   * 0-------------------5\n   *\n   * Splitting the filled subpath with startCmdIdx=1 and endCmdIdx=4\n   * results in the following split subpaths:\n   *\n   * xxxxxxxxxxxxxxxxxxxxx    1-------->>>--------2\n   * x                   x    |                   |\n   * x                   x    ↑                   ↓\n   * x                   x    |                   |\n   * 1-------->>>--------2    0--------<<<--------3\n   * |                   |    x                   x\n   * ↑                   ↓    x                   x\n   * |                   |    x                   x\n   * 0--------<<<--------3    xxxxxxxxxxxxxxxxxxxxx\n   */\n  splitFilledSubPath(subIdx: number, startCmdIdx: number, endCmdIdx: number) {\n    LOG('splitFilledSubPath', subIdx, startCmdIdx, endCmdIdx);\n    const targetSps = this.findSubPathStateLeaf(subIdx);\n    const targetCss = reverseAndShiftCommandStates(\n      targetSps.getCommandStates(),\n      targetSps.isReversed(),\n      targetSps.getShiftOffset(),\n    );\n\n    const findTargetSplitIdxs = () => {\n      let s = this.findInternalIndices(targetCss, startCmdIdx);\n      let e = this.findInternalIndices(targetCss, endCmdIdx);\n      if (s.csIdx > e.csIdx || (s.csIdx === e.csIdx && s.splitIdx > e.csIdx)) {\n        // Make sure the start index appears before the end index in the path.\n        const temp = s;\n        s = e;\n        e = temp;\n      }\n      return {\n        startCsIdx: s.csIdx,\n        startSplitIdx: s.splitIdx,\n        endCsIdx: e.csIdx,\n        endSplitIdx: e.splitIdx,\n      };\n    };\n\n    // firstLeft: left portion of the 1st split segment (used in the 1st split path).\n    // secondLeft: left portion of the 2nd split segment (used in the 2nd split path).\n    // firstRight: right portion of the 1st split segment (used in the 2nd split path).\n    // secondRight: right portion of the 2nd split segment (used in the 1st split path).\n    const { startCsIdx, startSplitIdx, endCsIdx, endSplitIdx } = findTargetSplitIdxs();\n    const { left: firstLeft, right: firstRight } = targetCss[startCsIdx].slice(startSplitIdx);\n    const { left: secondLeft, right: secondRight } = targetCss[endCsIdx].slice(endSplitIdx);\n    const startSplitCmd = firstLeft.getCommands()[startSplitIdx];\n    const startSplitPoint = startSplitCmd.end;\n    const endSplitCmd = secondLeft.getCommands()[endSplitIdx];\n    const endSplitPoint = endSplitCmd.end;\n\n    // Give both line segments the same unique ID so that we can later identify which\n    // split segments were added together during the deletion phase.\n    const splitSegmentId = _.uniqueId();\n    const endLine = new CommandState(new Command('L', [endSplitPoint, startSplitPoint]))\n      .mutate()\n      .setSplitSegmentInfo(secondLeft, splitSegmentId)\n      .build();\n    const startLine = new CommandState(new Command('L', [startSplitPoint, endSplitPoint]))\n      .mutate()\n      .setSplitSegmentInfo(firstLeft, splitSegmentId)\n      .build();\n\n    const startCommandStates: CommandState[] = [];\n    for (let i = 0; i < targetCss.length; i++) {\n      if (i < startCsIdx || endCsIdx < i) {\n        startCommandStates.push(targetCss[i]);\n      } else if (i === startCsIdx) {\n        startCommandStates.push(firstLeft);\n        startCommandStates.push(startLine);\n      } else if (i === endCsIdx && secondRight) {\n        startCommandStates.push(secondRight);\n      }\n    }\n\n    const endCommandStates: CommandState[] = [];\n    for (let i = 0; i < targetCss.length; i++) {\n      if (i === startCsIdx) {\n        endCommandStates.push(\n          new CommandState(new Command('M', [startSplitPoint, startSplitPoint]))\n            .mutate()\n            // The move command identifies the beginning of a new split segment,\n            // so we'll mark it with the parent state as well (we'll need this\n            // information later on if the segment is deleted). Note that unlike\n            // the two segments above, we don't need to specify an ID here.\n            .setSplitSegmentInfo(firstLeft, '')\n            .build(),\n        );\n        if (firstRight) {\n          endCommandStates.push(firstRight);\n        }\n      } else if (startCsIdx < i && i < endCsIdx) {\n        endCommandStates.push(targetCss[i]);\n      } else if (i === endCsIdx) {\n        endCommandStates.push(secondLeft);\n        endCommandStates.push(endLine);\n      }\n    }\n\n    const splitSubPaths = [\n      new SubPathState(startCommandStates),\n      new SubPathState(endCommandStates),\n    ];\n    const newStates: SubPathState[] = [];\n    const parent = this.findSubPathStateParent(subIdx);\n\n    // Find the backing IDs for each parent command state that is a split segment.\n    const parentSplitBackingIds = _((parent ? parent.getCommandStates() : []) as CommandState[])\n      .filter(cs => !!cs.getSplitSegmentId())\n      .map(cs => cs.getBackingId())\n      .value();\n\n    // Find the backing IDs for each sibling command state that is a split segment,\n    // not including split segments that were inherited from the parent.\n    const siblingSplitBackingIds = _(targetSps.getCommandStates() as CommandState[])\n      .filter(cs => !!cs.getSplitSegmentId() && !parentSplitBackingIds.includes(cs.getBackingId()))\n      .map(cs => cs.getBackingId())\n      .value();\n\n    // Checking for the existence of 'firstRight' and 'secondRight' ensures that\n    // paths connected to the end point of a deleted split segment will still be kept.\n    if (\n      this.subPathStateMap.includes(targetSps) ||\n      (firstRight && siblingSplitBackingIds.includes(firstLeft.getBackingId())) ||\n      (secondRight && siblingSplitBackingIds.includes(secondLeft.getBackingId()))\n    ) {\n      // If we are at the first level of the tree or if one of the new\n      // split edges is a split segment, then add a new level to the tree.\n      // If the already existing split segment is deleted, we want to\n      // delete the split segment we are creating right now as well.\n      newStates.push(\n        targetSps\n          .mutate()\n          .setSplitSubPaths(splitSubPaths)\n          .build(),\n      );\n    } else {\n      // Otherwise insert the sub paths in the current level of the tree.\n      newStates.push(...splitSubPaths);\n    }\n\n    // Insert the new SubPathStates into the tree.\n    this.subPathStateMap = this.replaceSubPathStateNode(targetSps, (states, i) =>\n      states.splice(i, 1, ...newStates),\n    );\n    this.subPathOrdering.push(this.subPathOrdering.length);\n    return this;\n  }\n\n  /**\n   * Deletes the filled subpath at the specified index. All adjacent sibling subpaths\n   * will be deleted as well (i.e. subpaths that share the same split segment ID).\n   */\n  deleteFilledSubPath(subIdx: number) {\n    LOG('deleteFilledSubPath', subIdx);\n    const targetCss = this.findSubPathStateLeaf(subIdx).getCommandStates();\n    // Get the list of parent split segment IDs.\n    const parentSplitSegIds = _(this.findSubPathStateParent(\n      subIdx,\n    ).getCommandStates() as CommandState[])\n      .map(cs => cs.getSplitSegmentId())\n      .compact()\n      .uniq()\n      .value();\n    // Get the list of sibling split segment IDs, not including split segment\n    // IDs inherited from the parent.\n    const siblingSplitSegIds = _(targetCss as CommandState[])\n      .map(cs => cs.getSplitSegmentId())\n      .compact()\n      .uniq()\n      .difference(parentSplitSegIds)\n      .value();\n    siblingSplitSegIds.forEach(id => {\n      const targetCs = _.find(targetCss, cs => cs.getSplitSegmentId() === id);\n      const deletedSubIdxs = this.calculateDeletedSubIdxs(subIdx, targetCs);\n      this.deleteFilledSubPathSegmentInternal(subIdx, targetCs);\n      subIdx -= _.sumBy(deletedSubIdxs, idx => (idx <= subIdx ? 1 : 0));\n    });\n    return this;\n  }\n\n  /**\n   * Deletes the subpath split segment with the specified indices.\n   */\n  deleteFilledSubPathSegment(subIdx: number, cmdIdx: number) {\n    LOG('deleteSubPathSplitSegment', subIdx, cmdIdx);\n    const { targetCs } = this.findReversedAndShiftedInternalIndices(subIdx, cmdIdx);\n    this.deleteFilledSubPathSegmentInternal(subIdx, targetCs);\n    return this;\n  }\n\n  /**\n   * Deletes the subpath split segment with the specified index. The two subpaths\n   * that share the split segment ID will be merged into a single subpath.\n   */\n  private deleteFilledSubPathSegmentInternal(subIdx: number, targetCs: CommandState) {\n    // Get the SubPathState ID of the node representing the subpath with index 'subIdx'.\n    const targetSpsId = this.findSubPathStateLeaf(subIdx).getId();\n    // Get the split segment ID of the target command state object.\n    const targetSplitSegId = targetCs.getSplitSegmentId();\n    const psps = this.findSplitSegmentParentNode(targetSplitSegId);\n    const pssps = psps.getSplitSubPaths();\n    const pcss = psps.getCommandStates();\n    // Find the first index of the split sub path containing the target.\n    const splitSubPathIdx1 = _.findIndex(pssps, sps => {\n      return sps.getCommandStates().some(cs => cs.getSplitSegmentId() === targetSplitSegId);\n    });\n    // Find the second index of the split sub path containing the target.\n    const splitSubPathIdx2 = _.findLastIndex(pssps, sps => {\n      return sps.getCommandStates().some(cs => cs.getSplitSegmentId() === targetSplitSegId);\n    });\n    const deletedSubIdxs = this.calculateDeletedSubIdxs(subIdx, targetCs);\n    const splitCss1 = pssps[splitSubPathIdx1].getCommandStates();\n    const splitCss2 = pssps[splitSubPathIdx2].getCommandStates();\n    let updatedSplitSubPaths: SubPathState[] = [];\n    if (pssps.length > 2) {\n      // In addition to deleting the split segment, we will also have to merge its\n      // two adjacent sub paths together into one.\n      const parentBackingId2 = _.last(splitCss2)\n        .getParentCommandState()\n        .getBackingId();\n      const parentBackingCmd2 = _.find(pcss, c => parentBackingId2 === c.getBackingId());\n\n      const newCss: CommandState[] = [];\n      let cs: CommandState;\n      let i = 0;\n      for (; i < splitCss1.length; i++) {\n        cs = splitCss1[i];\n        if (splitCss1[i + 1].getSplitSegmentId() === targetSplitSegId) {\n          // Iterate until we reach the location of the first split.\n          break;\n        }\n        newCss.push(cs);\n      }\n      const parentBackingCmdIdx1 = i;\n      if (cs.getBackingId() === splitCss2[1].getBackingId()) {\n        newCss.push(splitCss2[1].merge(cs));\n      } else {\n        newCss.push(cs);\n        newCss.push(splitCss2[1]);\n      }\n      cs = undefined;\n      for (i = 2; i < splitCss2.length - 1; i++) {\n        cs = splitCss2[i];\n        if (splitCss2[i + 1].getSplitSegmentId() === targetSplitSegId) {\n          // Iterate until we reach the location of the second split.\n          break;\n        }\n        newCss.push(cs);\n      }\n      i = _.findIndex(splitCss1, c => c.getBackingId() === parentBackingCmd2.getBackingId());\n      if (i >= 0) {\n        if (cs) {\n          if (splitCss1[i].getBackingId() === cs.getBackingId()) {\n            // If the split created a new point, then merge the left/right commands\n            // together to reconstruct the previous state.\n            newCss.push(splitCss1[i].merge(cs));\n          } else if (cs) {\n            // If the split was done at an existing point, then simply push the next\n            // command state onto the list.\n            newCss.push(cs);\n          }\n        }\n      } else {\n        i = parentBackingCmdIdx1 + 1;\n        if (cs) {\n          newCss.push(cs);\n        }\n      }\n      for (i = i + 1; i < splitCss1.length; i++) {\n        newCss.push(splitCss1[i]);\n      }\n      const splits = [...pssps];\n      splits[splitSubPathIdx1] = new SubPathState([...newCss])\n        .mutate()\n        .setId(targetSpsId)\n        .build();\n      splits.splice(splitSubPathIdx2, 1);\n      updatedSplitSubPaths = splits;\n    }\n    const mutator = psps.mutate().setSplitSubPaths(updatedSplitSubPaths);\n    const firstSplitSegId = _.last(splitCss2[0].getParentCommandState().getCommands()).id;\n    const secondSplitSegId = _.last(\n      _.last(splitCss2)\n        .getParentCommandState()\n        .getCommands(),\n    ).id;\n    for (const id of [firstSplitSegId, secondSplitSegId]) {\n      this.deleteSpsSplitPoint(pcss, id, mutator);\n    }\n    this.subPathStateMap = this.replaceSubPathStateNode(\n      psps,\n      (states, i) => (states[i] = mutator.build()),\n    );\n    for (const idx of deletedSubIdxs) {\n      this.updateOrderingAfterUnsplitSubPath(idx);\n    }\n    return this;\n  }\n\n  /**\n   * Calculates the sub path indices that will be removed after unsplitting subIdx.\n   * targetCs is the command state object containing the split segment in question.\n   */\n  private calculateDeletedSubIdxs(subIdx: number, targetCs: CommandState) {\n    const splitSegId = targetCs.getSplitSegmentId();\n    const psps = this.findSplitSegmentParentNode(splitSegId);\n    const pssps = psps.getSplitSubPaths();\n    const splitSubPathIdx1 = _.findIndex(pssps, sps => {\n      return sps.getCommandStates().some(cs => cs.getSplitSegmentId() === splitSegId);\n    });\n    const splitSubPathIdx2 = _.findLastIndex(pssps, sps => {\n      return sps.getCommandStates().some(cs => cs.getSplitSegmentId() === splitSegId);\n    });\n    const pssp1 = pssps[splitSubPathIdx1];\n    const pssp2 = pssps[splitSubPathIdx2];\n    const deletedSps = [...flattenSubPathStates([pssp1]), ...flattenSubPathStates([pssp2])];\n    const spss = flattenSubPathStates(this.subPathStateMap);\n    return deletedSps\n      .slice(1)\n      .map(sps => this.subPathOrdering[spss.indexOf(sps)])\n      .sort((a, b) => b - a);\n  }\n\n  private deleteSpsSplitPoint(\n    css: ReadonlyArray<CommandState>,\n    splitCmdId: string,\n    mutator: SubPathStateMutator,\n  ) {\n    let csIdx = 0,\n      splitIdx = -1;\n    for (; csIdx < css.length; csIdx++) {\n      const cs = css[csIdx];\n      const csIds = cs.getCommands().map((unused, idx) => cs.getIdAtIndex(idx));\n      splitIdx = csIds.indexOf(splitCmdId);\n      if (splitIdx >= 0) {\n        break;\n      }\n    }\n    if (splitIdx >= 0 && css[csIdx].isSplitAtIndex(splitIdx)) {\n      // Delete the split point that created the sub path.\n      const unsplitCs = css[csIdx]\n        .mutate()\n        .unsplitAtIndex(splitIdx)\n        .build();\n      mutator.setCommandState(csIdx, unsplitCs);\n    }\n  }\n\n  private updateOrderingAfterUnsplitSubPath(subIdx: number) {\n    const spsIdx = this.subPathOrdering[subIdx];\n    this.subPathOrdering.splice(subIdx, 1);\n    // tslint:disable-next-line: prefer-for-of\n    for (let i = 0; i < this.subPathOrdering.length; i++) {\n      if (spsIdx < this.subPathOrdering[i]) {\n        this.subPathOrdering[i]--;\n      }\n    }\n  }\n\n  /**\n   * Adds a collapsing subpath to the path.\n   */\n  addCollapsingSubPath(point: Point, numCommands: number) {\n    const prevCmd = _.last(this.buildOrderedCommands());\n    const css = [new CommandState(new Command('M', [prevCmd.end, point]))];\n    for (let i = 1; i < numCommands; i++) {\n      css.push(new CommandState(new Command('L', [point, point])));\n    }\n    this.subPathStateMap.push(new SubPathState(css));\n    this.subPathOrdering.push(this.subPathOrdering.length);\n    this.numCollapsingSubPaths++;\n    return this;\n  }\n\n  /**\n   * Deletes all collapsing subpaths from the path.\n   */\n  deleteCollapsingSubPaths() {\n    const numSubPathsBeforeDelete = this.subPathOrdering.length;\n    const spsIdxToSubIdxMap: number[] = [];\n    for (let spsIdx = 0; spsIdx < numSubPathsBeforeDelete; spsIdx++) {\n      spsIdxToSubIdxMap.push(this.subPathOrdering.indexOf(spsIdx));\n    }\n    const numCollapsingSubPathsBeforeDelete = this.numCollapsingSubPaths;\n    const numSubPathsAfterDelete = numSubPathsBeforeDelete - numCollapsingSubPathsBeforeDelete;\n    function deleteCollapsingSubPathInfoFn<T>(arr: T[]) {\n      arr.splice(numSubPathsAfterDelete, numCollapsingSubPathsBeforeDelete);\n    }\n    for (let i = 0; i < numCollapsingSubPathsBeforeDelete; i++) {\n      this.subPathStateMap.pop();\n    }\n    deleteCollapsingSubPathInfoFn(spsIdxToSubIdxMap);\n    this.subPathOrdering = [];\n    for (let subIdx = 0; subIdx < numSubPathsBeforeDelete; subIdx++) {\n      for (let i = 0; i < spsIdxToSubIdxMap.length; i++) {\n        if (spsIdxToSubIdxMap[i] === subIdx) {\n          this.subPathOrdering.push(i);\n          break;\n        }\n      }\n    }\n    this.numCollapsingSubPaths = 0;\n    return this;\n  }\n\n  /**\n   * Returns the initial starting state of this path.\n   */\n  revert() {\n    this.deleteCollapsingSubPaths();\n    this.subPathStateMap = this.subPathStateMap.map(sps => sps.revert());\n    this.subPathOrdering = this.subPathStateMap.map((unused, i) => i);\n    return this;\n  }\n\n  /**\n   * Builds a new mutated path.\n   */\n  build() {\n    return new Path(\n      new PathState(\n        this.buildOrderedCommands(),\n        this.subPathStateMap,\n        this.subPathOrdering,\n        this.numCollapsingSubPaths,\n      ),\n    );\n  }\n\n  private buildOrderedCommands() {\n    const spsCmds = flattenSubPathStates(this.subPathStateMap).map(sps =>\n      reverseAndShiftCommands(sps),\n    );\n    const orderedSubPathCmds = this.subPathOrdering.map(\n      (unused, subIdx) => spsCmds[this.subPathOrdering[subIdx]],\n    );\n    return _(orderedSubPathCmds)\n      .map((cmds, subIdx) => {\n        const moveCmd = cmds[0];\n        if (subIdx === 0 && moveCmd.start) {\n          cmds[0] = moveCmd\n            .mutate()\n            .setPoints(undefined, moveCmd.end)\n            .build();\n        } else if (subIdx !== 0) {\n          const start = _.last(orderedSubPathCmds[subIdx - 1]).end;\n          cmds[0] = moveCmd\n            .mutate()\n            .setPoints(start, moveCmd.end)\n            .build();\n        }\n        return cmds;\n      })\n      .flatMap(cmds => cmds)\n      .value();\n  }\n\n  /**\n   * Returns the leaf node at the specified subpath index.\n   */\n  private findSubPathStateLeaf(subIdx: number) {\n    return flattenSubPathStates(this.subPathStateMap)[this.subPathOrdering[subIdx]];\n  }\n\n  /**\n   * Replaces the leaf node at the specified subpath index.\n   */\n  private setSubPathStateLeaf(subIdx: number, newState: SubPathState) {\n    this.subPathStateMap = this.replaceSubPathStateNode(\n      this.findSubPathStateLeaf(subIdx),\n      (states, i) => (states[i] = newState),\n    );\n  }\n\n  /**\n   * Returns the immediate parent of the leaf node at the specified subpath index.\n   */\n  private findSubPathStateParent(subIdx: number) {\n    const subPathStateParents: SubPathState[] = [];\n    (function recurseFn(currentLevel: ReadonlyArray<SubPathState>, parent?: SubPathState) {\n      currentLevel.forEach(state => {\n        if (!state.getSplitSubPaths().length) {\n          subPathStateParents.push(parent);\n          return;\n        }\n        recurseFn(state.getSplitSubPaths(), state);\n      });\n    })(this.subPathStateMap);\n    return subPathStateParents[this.subPathOrdering[subIdx]];\n  }\n\n  /**\n   * Returns the command state indices associated with the specified command index.\n   * The targetCs is the command state object that contains the command. The csIdx\n   * is the index in the sub path state's list of command state objects that points\n   * to targetCs. The splitIdx is the index into the targetCs pointing to the command.\n   * This method should only be used during sub path splitting. All other methods should\n   * use the findReversedAndShiftedInternalIndices() method below.\n   */\n  private findInternalIndices(css: ReadonlyArray<CommandState>, cmdIdx: number) {\n    let counter = 0;\n    let csIdx = 0;\n    for (const targetCs of css) {\n      if (counter + targetCs.getCommands().length > cmdIdx) {\n        return { targetCs, csIdx, splitIdx: cmdIdx - counter };\n      }\n      counter += targetCs.getCommands().length;\n      csIdx++;\n    }\n    throw new Error('Error retrieving command mutation');\n  }\n\n  /**\n   * Same as above, except this method first takes reversals and shift offsets\n   * into account.\n   */\n  private findReversedAndShiftedInternalIndices(subIdx: number, cmdIdx: number) {\n    const sps = this.findSubPathStateLeaf(subIdx);\n    const css = sps.getCommandStates();\n    const numCommandsInSubPath = _.sumBy(css, cs => cs.getCommands().length);\n    if (cmdIdx && sps.isReversed()) {\n      cmdIdx = numCommandsInSubPath - cmdIdx;\n    }\n    cmdIdx += sps.getShiftOffset();\n    if (cmdIdx >= numCommandsInSubPath) {\n      // Note that subtracting (numCommandsInSubPath - 1) is intentional here\n      // (as opposed to subtracting numCommandsInSubPath).\n      cmdIdx -= numCommandsInSubPath - 1;\n    }\n    return this.findInternalIndices(css, cmdIdx);\n  }\n\n  /**\n   * Replaces a node in the sub path state map. Note that this function uses\n   * object equality to determine the location of the node in the tree.\n   */\n  private replaceSubPathStateNode(\n    nodeToReplace: SubPathState,\n    replaceNodeFn: (states: SubPathState[], i: number) => void,\n  ) {\n    return (function recurseFn(states: SubPathState[]) {\n      if (!states.length) {\n        return undefined;\n      }\n      for (let i = 0; i < states.length; i++) {\n        const currentState = states[i];\n        if (currentState === nodeToReplace) {\n          replaceNodeFn(states, i);\n          return states;\n        }\n        const recurseStates = recurseFn([...currentState.getSplitSubPaths()]);\n        if (recurseStates) {\n          states[i] = currentState\n            .mutate()\n            .setSplitSubPaths(recurseStates)\n            .build();\n          return states;\n        }\n      }\n      // Return undefined to signal that the parent was not found.\n      return undefined;\n    })([...this.subPathStateMap]);\n  }\n\n  /**\n   * Finds the first node in the tree that contains the specified split segment ID.\n   */\n  private findSplitSegmentParentNode(splitSegId: string): SubPathState {\n    return (function recurseFn(...states: SubPathState[]): SubPathState {\n      for (const state of states) {\n        for (const sps of state.getSplitSubPaths()) {\n          if (sps.getCommandStates().some(cs => cs.getSplitSegmentId() === splitSegId)) {\n            return state;\n          }\n          const parent = recurseFn(sps);\n          if (parent) {\n            return parent;\n          }\n        }\n      }\n      return undefined;\n    })(...this.subPathStateMap);\n  }\n}\n\n/**\n * Returns a list of shifted and reversed command state objects. Used during\n * subpath splitting when creating new children split subpaths.\n */\nfunction reverseAndShiftCommandStates(\n  css: ReadonlyArray<CommandState>,\n  isReversed: boolean,\n  shiftOffset: number,\n) {\n  // If the last command is a 'Z', replace it with a line before we shift.\n  // TODO: replacing the 'Z' messes up certain stroke-linejoin values\n  const newCss = [...css];\n  newCss[newCss.length - 1] = _.last(css)\n    .mutate()\n    .forceConvertClosepathsToLines()\n    .build();\n  return shiftCommandStates(reverseCommandStates(newCss, isReversed), isReversed, shiftOffset);\n}\n\n/**\n * Returns a list of reversed command state objects.\n */\nfunction reverseCommandStates(css: CommandState[], isReversed: boolean) {\n  if (isReversed) {\n    const revCss = [\n      new CommandState(\n        new Command('M', [css[0].getCommands()[0].start, _.last(_.last(css).getCommands()).end]),\n      ),\n    ];\n    for (let i = css.length - 1; i > 0; i--) {\n      revCss.push(\n        css[i]\n          .mutate()\n          .reverse()\n          .build(),\n      );\n    }\n    css = revCss;\n  }\n  return css;\n}\n\n/**\n * Returns a list of shifted command state objects.\n */\nfunction shiftCommandStates(css: CommandState[], isReversed: boolean, shiftOffset: number) {\n  if (!shiftOffset || css.length === 1) {\n    return css;\n  }\n\n  const numCommands = _.sumBy(css, cs => cs.getCommands().length);\n  if (isReversed) {\n    shiftOffset *= -1;\n    shiftOffset += numCommands - 1;\n  }\n  const newCss: CommandState[] = [];\n\n  let counter = 0;\n  let targetCsIdx: number;\n  let targetSplitIdx: number;\n  let targetCs: CommandState;\n  for (let i = 0; i < css.length; i++) {\n    const cs = css[i];\n    const size = cs.getCommands().length;\n    if (counter + size <= shiftOffset) {\n      counter += size;\n      continue;\n    }\n    targetCs = cs;\n    targetCsIdx = i;\n    targetSplitIdx = shiftOffset - counter;\n    break;\n  }\n\n  newCss.push(\n    new CommandState(\n      new Command('M', [css[0].getCommands()[0].start, targetCs.getCommands()[targetSplitIdx].end]),\n    ),\n  );\n  const { left, right } = targetCs.slice(targetSplitIdx);\n  if (right) {\n    newCss.push(right);\n  }\n  for (let i = targetCsIdx + 1; i < css.length; i++) {\n    newCss.push(css[i]);\n  }\n  for (let i = 1; i < targetCsIdx; i++) {\n    newCss.push(css[i]);\n  }\n  newCss.push(left);\n  return newCss;\n}\n\n/**\n * Returns a list of reversed and shifted commands.\n */\nfunction reverseAndShiftCommands(subPathState: SubPathState) {\n  return shiftCommands(subPathState, reverseCommands(subPathState));\n}\n\n/**\n * Returns a list of reversed commands.\n */\nfunction reverseCommands(subPathState: SubPathState) {\n  const subPathCss = subPathState.getCommandStates();\n  const hasOneCmd = subPathCss.length === 1 && subPathCss[0].getCommands().length === 1;\n  if (hasOneCmd || !subPathState.isReversed()) {\n    // Nothing to do in these two cases.\n    return _.flatMap(subPathCss, cm => cm.getCommands() as Command[]);\n  }\n\n  // Extract the commands from our command mutation map.\n  const cmds = _.flatMap(subPathCss, cm => {\n    // Consider a segment A ---- B ---- C with AB split and\n    // BC non-split. When reversed, we want the user to see\n    // C ---- B ---- A w/ CB split and BA non-split.\n    const cmCmds = [...cm.getCommands()];\n    if (cmCmds[0].type === 'M') {\n      return cmCmds;\n    }\n    cmCmds[0] = cmCmds[0]\n      .mutate()\n      .toggleSplitPoint()\n      .build();\n    cmCmds[cmCmds.length - 1] = cmCmds[cmCmds.length - 1]\n      .mutate()\n      .toggleSplitPoint()\n      .build();\n    return cmCmds;\n  });\n\n  // If the last command is a 'Z', replace it with a line before we reverse.\n  // TODO: replacing the 'Z' messes up certain stroke-linejoin values\n  const lastCmd = _.last(cmds);\n  if (lastCmd.type === 'Z') {\n    cmds[cmds.length - 1] = lastCmd\n      .mutate()\n      .setSvgChar('L')\n      .setPoints(...lastCmd.points)\n      .build();\n  }\n\n  // Reverse the commands.\n  const newCmds: Command[] = [];\n  for (let i = cmds.length - 1; i > 0; i--) {\n    newCmds.push(\n      cmds[i]\n        .mutate()\n        .reverse()\n        .build(),\n    );\n  }\n  newCmds.unshift(\n    cmds[0]\n      .mutate()\n      .setPoints(cmds[0].start, newCmds[0].start)\n      .build(),\n  );\n  return newCmds;\n}\n\n/**\n * Returns a list of shifted commands.\n */\nfunction shiftCommands(subPathState: SubPathState, cmds: Command[]) {\n  let shiftOffset = subPathState.getShiftOffset();\n  if (\n    !shiftOffset ||\n    cmds.length === 1 ||\n    !MathUtil.arePointsEqual(_.first(cmds).end, _.last(cmds).end)\n  ) {\n    // If there is no shift offset, the sub path is one command long,\n    // or if the sub path is not closed, then do nothing.\n    return cmds;\n  }\n\n  const numCommands = cmds.length;\n  if (subPathState.isReversed()) {\n    shiftOffset *= -1;\n    shiftOffset += numCommands - 1;\n  }\n\n  // If the last command is a 'Z', replace it with a line before we shift.\n  const lastCmd = _.last(cmds);\n  if (lastCmd.type === 'Z') {\n    // TODO: replacing the 'Z' messes up certain stroke-linejoin values\n    cmds[numCommands - 1] = lastCmd\n      .mutate()\n      .setSvgChar('L')\n      .setPoints(...lastCmd.points)\n      .build();\n  }\n\n  const newCmds: Command[] = [];\n\n  // Handle these case separately cause they are annoying and I'm sick of edge cases.\n  if (shiftOffset === 1) {\n    newCmds.push(\n      cmds[0]\n        .mutate()\n        .setPoints(cmds[0].start, cmds[1].end)\n        .build(),\n    );\n    for (let i = 2; i < cmds.length; i++) {\n      newCmds.push(cmds[i]);\n    }\n    newCmds.push(cmds[1]);\n    return newCmds;\n  } else if (shiftOffset === numCommands - 1) {\n    newCmds.push(\n      cmds[0]\n        .mutate()\n        .setPoints(cmds[0].start, cmds[numCommands - 2].end)\n        .build(),\n    );\n    newCmds.push(_.last(cmds));\n    for (let i = 1; i < cmds.length - 1; i++) {\n      newCmds.push(cmds[i]);\n    }\n    return newCmds;\n  }\n\n  // Shift the sequence of commands. After the shift, the original move\n  // command will be at index 'numCommands - shiftOffset'.\n  for (let i = 0; i < numCommands; i++) {\n    newCmds.push(cmds[(i + shiftOffset) % numCommands]);\n  }\n\n  // The first start point will either be undefined,\n  // or the end point of the previous sub path.\n  const prevMoveCmd = newCmds.splice(numCommands - shiftOffset, 1)[0];\n  newCmds.push(newCmds.shift());\n  newCmds.unshift(\n    cmds[0]\n      .mutate()\n      .setPoints(prevMoveCmd.start, _.last(newCmds).end)\n      .build(),\n  );\n  return newCmds;\n}\n\nfunction LOG(...args: any[]) {\n  if (ENABLE_LOGS) {\n    const [obj, ...objs] = args;\n    // tslint:disable-next-line: no-console\n    console.info(obj, ...objs);\n  }\n}\n","import { Point } from 'app/modules/editor/scripts/common';\n\nimport { Command } from './Command';\n\n/**\n * Takes an SVG path string (i.e. the text specified in the path's 'd' attribute) and returns\n * list of Commands that represent the SVG path's individual sequence of instructions.\n * Arcs are converted to bezier curves because they make life too complicated. :D\n */\nexport function parseCommands(pathData: string) {\n  if (!pathData) {\n    pathData = '';\n  }\n  pathData = pathData.trim();\n  let start = 0;\n  let end = 1;\n\n  const nodes: Array<{ readonly type: string; readonly params: number[] }> = [];\n  while (end < pathData.length) {\n    end = nextStart(pathData, end);\n    const s = pathData.substring(start, end).trim();\n    if (s.length > 0) {\n      const val = getFloats(s);\n      nodes.push({ type: s.charAt(0), params: val });\n    }\n    start = end;\n    end++;\n  }\n  if (end - start === 1 && start < pathData.length) {\n    nodes.push({ type: pathData.charAt(start), params: [] });\n  }\n  const current: [number, number, number, number, number, number] = [0, 0, 0, 0, 0, 0];\n  let previousCommand = 'm';\n  const builder = new CommandsBuilder();\n  for (const n of nodes) {\n    addCommand(builder, current, previousCommand, n.type, n.params);\n    previousCommand = n.type;\n  }\n  return builder.toCommands();\n}\n\nfunction nextStart(s: string, end: number) {\n  while (end < s.length) {\n    const c = s.charAt(end);\n    // Note that 'e' or 'E' are not valid path commands, but could be used for floating\n    // point numbers' scientific notation. Therefore, when searching for the next command,\n    // we should ignore 'e' and 'E'.\n    if ((('A' <= c && c <= 'Z') || ('a' <= c && c <= 'z')) && c !== 'E' && c !== 'e') {\n      return end;\n    }\n    end++;\n  }\n  return end;\n}\n\nclass ExtractFloatResult {\n  mEndPosition = 0;\n  mEndWithNegOrDot = false;\n}\n\nfunction getFloats(s: string) {\n  if (s.charAt(0) === 'z' || s.charAt(0) === 'Z') {\n    return [];\n  }\n  const results: number[] = [];\n  let startPosition = 1;\n  let endPosition: number;\n  const result = new ExtractFloatResult();\n  const totalLength = s.length;\n  while (startPosition < totalLength) {\n    extract(s, startPosition, result);\n    endPosition = result.mEndPosition;\n    if (startPosition < endPosition) {\n      results.push(parseFloat(s.substring(startPosition, endPosition)));\n    }\n    if (result.mEndWithNegOrDot) {\n      startPosition = endPosition;\n    } else {\n      startPosition = endPosition + 1;\n    }\n  }\n  return results;\n}\n\n/**\n * Calculate the position of the next comma or space or negative sign\n *\n * @param {string} s the string to search\n * @param {number} start the position to start searching\n * @param {ExtractFloatResult} result the result of the extraction, including the position of the the starting position\n * of next number, whether it is ending with a '-'.\n */\nfunction extract(s: string, start: number, result: ExtractFloatResult) {\n  let currentIndex = start;\n  let foundSeparator = false;\n  result.mEndWithNegOrDot = false;\n  let secondDot = false;\n  let isExponential = false;\n  for (; currentIndex < s.length; currentIndex++) {\n    const isPrevExponential = isExponential;\n    isExponential = false;\n    const currentChar = s.charAt(currentIndex);\n    switch (currentChar) {\n      case ' ':\n      case ',':\n        foundSeparator = true;\n        break;\n      case '-':\n        if (currentIndex !== start && !isPrevExponential) {\n          foundSeparator = true;\n          result.mEndWithNegOrDot = true;\n        }\n        break;\n      case '.':\n        if (!secondDot) {\n          secondDot = true;\n        } else {\n          foundSeparator = true;\n          result.mEndWithNegOrDot = true;\n        }\n        break;\n      case 'e':\n      case 'E':\n        isExponential = true;\n        break;\n    }\n    if (foundSeparator) {\n      break;\n    }\n  }\n  result.mEndPosition = currentIndex;\n}\n\nfunction addCommand(\n  path: CommandsBuilder,\n  current: [number, number, number, number, number, number],\n  prevCmd: string,\n  cmd: string,\n  val: number[],\n) {\n  let increment = 2;\n  let [\n    currentX,\n    currentY,\n    ctrlPointX,\n    ctrlPointY,\n    currentSegmentStartX,\n    currentSegmentStartY,\n  ] = current;\n  let reflectiveCtrlPointX: number;\n  let reflectiveCtrlPointY: number;\n  switch (cmd) {\n    case 'z':\n    case 'Z':\n      path.close();\n      currentX = currentSegmentStartX;\n      currentY = currentSegmentStartY;\n      ctrlPointX = currentSegmentStartX;\n      ctrlPointY = currentSegmentStartY;\n      break;\n    case 'm':\n    case 'M':\n    case 'l':\n    case 'L':\n    case 't':\n    case 'T':\n      increment = 2;\n      break;\n    case 'h':\n    case 'H':\n    case 'v':\n    case 'V':\n      increment = 1;\n      break;\n    case 'c':\n    case 'C':\n      increment = 6;\n      break;\n    case 's':\n    case 'S':\n    case 'q':\n    case 'Q':\n      increment = 4;\n      break;\n    case 'a':\n    case 'A':\n      increment = 7;\n      break;\n  }\n  for (let k = 0; k < val.length; k += increment) {\n    switch (cmd) {\n      case 'm':\n        currentX += val[k];\n        currentY += val[k + 1];\n        if (k > 0) {\n          path.rLineTo(val[k], val[k + 1]);\n        } else {\n          path.rMoveTo(val[k], val[k + 1]);\n          currentSegmentStartX = currentX;\n          currentSegmentStartY = currentY;\n        }\n        break;\n      case 'M':\n        currentX = val[k];\n        currentY = val[k + 1];\n        if (k > 0) {\n          path.lineTo(val[k], val[k + 1]);\n        } else {\n          path.moveTo(val[k], val[k + 1]);\n          currentSegmentStartX = currentX;\n          currentSegmentStartY = currentY;\n        }\n        break;\n      case 'l':\n        path.rLineTo(val[k], val[k + 1]);\n        currentX += val[k];\n        currentY += val[k + 1];\n        break;\n      case 'L':\n        path.lineTo(val[k], val[k + 1]);\n        currentX = val[k];\n        currentY = val[k + 1];\n        break;\n      case 'h':\n        path.rLineTo(val[k], 0);\n        currentX += val[k];\n        break;\n      case 'H':\n        path.lineTo(val[k], currentY);\n        currentX = val[k];\n        break;\n      case 'v':\n        path.rLineTo(0, val[k]);\n        currentY += val[k];\n        break;\n      case 'V':\n        path.lineTo(currentX, val[k]);\n        currentY = val[k];\n        break;\n      case 'c':\n        path.rCubicTo(val[k], val[k + 1], val[k + 2], val[k + 3], val[k + 4], val[k + 5]);\n        ctrlPointX = currentX + val[k + 2];\n        ctrlPointY = currentY + val[k + 3];\n        currentX += val[k + 4];\n        currentY += val[k + 5];\n        break;\n      case 'C':\n        path.cubicTo(val[k], val[k + 1], val[k + 2], val[k + 3], val[k + 4], val[k + 5]);\n        currentX = val[k + 4];\n        currentY = val[k + 5];\n        ctrlPointX = val[k + 2];\n        ctrlPointY = val[k + 3];\n        break;\n      case 's':\n        reflectiveCtrlPointX = 0;\n        reflectiveCtrlPointY = 0;\n        if (prevCmd === 'c' || prevCmd === 's' || prevCmd === 'C' || prevCmd === 'S') {\n          reflectiveCtrlPointX = currentX - ctrlPointX;\n          reflectiveCtrlPointY = currentY - ctrlPointY;\n        }\n        path.rCubicTo(\n          reflectiveCtrlPointX,\n          reflectiveCtrlPointY,\n          val[k],\n          val[k + 1],\n          val[k + 2],\n          val[k + 3],\n        );\n        ctrlPointX = currentX + val[k];\n        ctrlPointY = currentY + val[k + 1];\n        currentX += val[k + 2];\n        currentY += val[k + 3];\n        break;\n      case 'S':\n        reflectiveCtrlPointX = currentX;\n        reflectiveCtrlPointY = currentY;\n        if (prevCmd === 'c' || prevCmd === 's' || prevCmd === 'C' || prevCmd === 'S') {\n          reflectiveCtrlPointX = 2 * currentX - ctrlPointX;\n          reflectiveCtrlPointY = 2 * currentY - ctrlPointY;\n        }\n        path.cubicTo(\n          reflectiveCtrlPointX,\n          reflectiveCtrlPointY,\n          val[k],\n          val[k + 1],\n          val[k + 2],\n          val[k + 3],\n        );\n        ctrlPointX = val[k];\n        ctrlPointY = val[k + 1];\n        currentX = val[k + 2];\n        currentY = val[k + 3];\n        break;\n      case 'q':\n        path.rQuadTo(val[k], val[k + 1], val[k + 2], val[k + 3]);\n        ctrlPointX = currentX + val[k];\n        ctrlPointY = currentY + val[k + 1];\n        currentX += val[k + 2];\n        currentY += val[k + 3];\n        break;\n      case 'Q':\n        path.quadTo(val[k], val[k + 1], val[k + 2], val[k + 3]);\n        ctrlPointX = val[k];\n        ctrlPointY = val[k + 1];\n        currentX = val[k + 2];\n        currentY = val[k + 3];\n        break;\n      case 't':\n        reflectiveCtrlPointX = 0;\n        reflectiveCtrlPointY = 0;\n        if (prevCmd === 'q' || prevCmd === 't' || prevCmd === 'Q' || prevCmd === 'T') {\n          reflectiveCtrlPointX = currentX - ctrlPointX;\n          reflectiveCtrlPointY = currentY - ctrlPointY;\n        }\n        path.rQuadTo(reflectiveCtrlPointX, reflectiveCtrlPointY, val[k], val[k + 1]);\n        ctrlPointX = currentX + reflectiveCtrlPointX;\n        ctrlPointY = currentY + reflectiveCtrlPointY;\n        currentX += val[k];\n        currentY += val[k + 1];\n        break;\n      case 'T':\n        reflectiveCtrlPointX = currentX;\n        reflectiveCtrlPointY = currentY;\n        if (prevCmd === 'q' || prevCmd === 't' || prevCmd === 'Q' || prevCmd === 'T') {\n          reflectiveCtrlPointX = 2 * currentX - ctrlPointX;\n          reflectiveCtrlPointY = 2 * currentY - ctrlPointY;\n        }\n        path.quadTo(reflectiveCtrlPointX, reflectiveCtrlPointY, val[k], val[k + 1]);\n        ctrlPointX = reflectiveCtrlPointX;\n        ctrlPointY = reflectiveCtrlPointY;\n        currentX = val[k];\n        currentY = val[k + 1];\n        break;\n      case 'a':\n        drawArc(\n          path,\n          currentX,\n          currentY,\n          val[k + 5] + currentX,\n          val[k + 6] + currentY,\n          val[k],\n          val[k + 1],\n          val[k + 2],\n          val[k + 3] !== 0,\n          val[k + 4] !== 0,\n        );\n        currentX += val[k + 5];\n        currentY += val[k + 6];\n        ctrlPointX = currentX;\n        ctrlPointY = currentY;\n        break;\n      case 'A':\n        drawArc(\n          path,\n          currentX,\n          currentY,\n          val[k + 5],\n          val[k + 6],\n          val[k],\n          val[k + 1],\n          val[k + 2],\n          val[k + 3] !== 0,\n          val[k + 4] !== 0,\n        );\n        currentX = val[k + 5];\n        currentY = val[k + 6];\n        ctrlPointX = currentX;\n        ctrlPointY = currentY;\n        break;\n    }\n    prevCmd = cmd;\n  }\n  current[0] = currentX;\n  current[1] = currentY;\n  current[2] = ctrlPointX;\n  current[3] = ctrlPointY;\n  current[4] = currentSegmentStartX;\n  current[5] = currentSegmentStartY;\n}\n\nfunction drawArc(\n  p: CommandsBuilder,\n  x0: number,\n  y0: number,\n  x1: number,\n  y1: number,\n  a: number,\n  b: number,\n  theta: number,\n  isMoreThanHalf: boolean,\n  isPositiveArc: boolean,\n) {\n  const thetaD = (theta * Math.PI) / 180;\n  const cosTheta = Math.cos(thetaD);\n  const sinTheta = Math.sin(thetaD);\n  const x0p = (x0 * cosTheta + y0 * sinTheta) / a;\n  const y0p = (-x0 * sinTheta + y0 * cosTheta) / b;\n  const x1p = (x1 * cosTheta + y1 * sinTheta) / a;\n  const y1p = (-x1 * sinTheta + y1 * cosTheta) / b;\n  const dx = x0p - x1p;\n  const dy = y0p - y1p;\n  const xm = (x0p + x1p) / 2;\n  const ym = (y0p + y1p) / 2;\n  const dsq = dx * dx + dy * dy;\n  if (dsq === 0.0) {\n    return;\n  }\n  const disc = 1.0 / dsq - 1.0 / 4.0;\n  if (disc < 0.0) {\n    const adjust = Math.sqrt(dsq) / 1.99999;\n    drawArc(p, x0, y0, x1, y1, a * adjust, b * adjust, theta, isMoreThanHalf, isPositiveArc);\n    return;\n  }\n  const s = Math.sqrt(disc);\n  const sdx = s * dx;\n  const sdy = s * dy;\n  let cx: number;\n  let cy: number;\n  if (isMoreThanHalf === isPositiveArc) {\n    cx = xm - sdy;\n    cy = ym + sdx;\n  } else {\n    cx = xm + sdy;\n    cy = ym - sdx;\n  }\n  const eta0 = Math.atan2(y0p - cy, x0p - cx);\n  const eta1 = Math.atan2(y1p - cy, x1p - cx);\n  let sweep = eta1 - eta0;\n  if (isPositiveArc !== sweep >= 0) {\n    if (sweep > 0) {\n      sweep -= 2 * Math.PI;\n    } else {\n      sweep += 2 * Math.PI;\n    }\n  }\n  cx *= a;\n  cy *= b;\n  const tcx = cx;\n  cx = cx * cosTheta - cy * sinTheta;\n  cy = tcx * sinTheta + cy * cosTheta;\n  arcToBezier(p, cx, cy, a, b, x0, y0, thetaD, eta0, sweep);\n}\n\n/**\n * Converts an arc to cubic Bezier segments and records them in p.\n *\n * @param {CommandsBuilder} p The target for the cubic Bezier segments\n * @param {number} cx The x coordinate center of the ellipse\n * @param {number} cy The y coordinate center of the ellipse\n * @param {number} a The radius of the ellipse in the horizontal direction\n * @param {number} b The radius of the ellipse in the vertical direction\n * @param {number} e1x E(eta1) x coordinate of the starting point of the arc\n * @param {number} e1y E(eta2) y coordinate of the starting point of the arc\n * @param {number} theta The angle that the ellipse bounding rectangle makes with horizontal plane\n * @param {number} start The start angle of the arc on the ellipse\n * @param {number} sweep The angle (positive or negative) of the sweep of the arc on the ellipse\n */\nfunction arcToBezier(\n  p: CommandsBuilder,\n  cx: number,\n  cy: number,\n  a: number,\n  b: number,\n  e1x: number,\n  e1y: number,\n  theta: number,\n  start: number,\n  sweep: number,\n) {\n  const numSegments = Math.trunc(Math.ceil(Math.abs((sweep * 4) / Math.PI)));\n  let eta1 = start;\n  const cosTheta = Math.cos(theta);\n  const sinTheta = Math.sin(theta);\n  const cosEta1 = Math.cos(eta1);\n  const sinEta1 = Math.sin(eta1);\n  let ep1x = -a * cosTheta * sinEta1 - b * sinTheta * cosEta1;\n  let ep1y = -a * sinTheta * sinEta1 + b * cosTheta * cosEta1;\n  const anglePerSegment = sweep / numSegments;\n  for (let i = 0; i < numSegments; i++) {\n    const eta2 = eta1 + anglePerSegment;\n    const sinEta2 = Math.sin(eta2);\n    const cosEta2 = Math.cos(eta2);\n    const e2x = cx + a * cosTheta * cosEta2 - b * sinTheta * sinEta2;\n    const e2y = cy + a * sinTheta * cosEta2 + b * cosTheta * sinEta2;\n    const ep2x = -a * cosTheta * sinEta2 - b * sinTheta * cosEta2;\n    const ep2y = -a * sinTheta * sinEta2 + b * cosTheta * cosEta2;\n    const tanDiff2 = Math.tan((eta2 - eta1) / 2);\n    const alpha = (Math.sin(eta2 - eta1) * (Math.sqrt(4 + 3 * tanDiff2 * tanDiff2) - 1)) / 3;\n    const q1x = e1x + alpha * ep1x;\n    const q1y = e1y + alpha * ep1y;\n    const q2x = e2x - alpha * ep2x;\n    const q2y = e2y - alpha * ep2y;\n    p.cubicTo(q1x, q1y, q2x, q2y, e2x, e2y);\n    eta1 = eta2;\n    e1x = e2x;\n    e1y = e2y;\n    ep1x = ep2x;\n    ep1y = ep2y;\n  }\n}\n\nclass CommandsBuilder {\n  private commands: Command[] = [];\n  private currentSegmentStartX = 0;\n  private currentSegmentStartY = 0;\n  private currentX = 0;\n  private currentY = 0;\n\n  rMoveTo(ri0: number, ri1: number) {\n    const i0 = this.currentX + ri0;\n    const i1 = this.currentY + ri1;\n    this.moveTo(i0, i1);\n  }\n\n  moveTo(i0: number, i1: number) {\n    const start = this.commands.length ? { x: this.currentX, y: this.currentY } : undefined;\n    const end = { x: i0, y: i1 };\n    this.commands.push(newMove(start, end));\n    this.currentSegmentStartX = i0;\n    this.currentSegmentStartY = i1;\n    this.currentX = i0;\n    this.currentY = i1;\n  }\n\n  rLineTo(ri0: number, ri1: number) {\n    const i0 = this.currentX + ri0;\n    const i1 = this.currentY + ri1;\n    this.lineTo(i0, i1);\n  }\n\n  lineTo(i0: number, i1: number) {\n    const start = { x: this.currentX, y: this.currentY };\n    const end = { x: i0, y: i1 };\n    this.commands.push(newLine(start, end));\n    this.currentX = i0;\n    this.currentY = i1;\n  }\n\n  rQuadTo(ri0: number, ri1: number, ri2: number, ri3: number) {\n    const i0 = this.currentX + ri0;\n    const i1 = this.currentY + ri1;\n    const i2 = this.currentX + ri2;\n    const i3 = this.currentY + ri3;\n    this.quadTo(i0, i1, i2, i3);\n  }\n\n  quadTo(i0: number, i1: number, i2: number, i3: number) {\n    const start = { x: this.currentX, y: this.currentY };\n    const cp = { x: i0, y: i1 };\n    const end = { x: i2, y: i3 };\n    this.commands.push(newQuadraticCurve(start, cp, end));\n    this.currentX = i2;\n    this.currentY = i3;\n  }\n\n  rCubicTo(ri0: number, ri1: number, ri2: number, ri3: number, ri4: number, ri5: number) {\n    const i0 = this.currentX + ri0;\n    const i1 = this.currentY + ri1;\n    const i2 = this.currentX + ri2;\n    const i3 = this.currentY + ri3;\n    const i4 = this.currentX + ri4;\n    const i5 = this.currentY + ri5;\n    this.cubicTo(i0, i1, i2, i3, i4, i5);\n  }\n\n  cubicTo(i0: number, i1: number, i2: number, i3: number, i4: number, i5: number) {\n    const start = { x: this.currentX, y: this.currentY };\n    const cp1 = { x: i0, y: i1 };\n    const cp2 = { x: i2, y: i3 };\n    const end = { x: i4, y: i5 };\n    this.commands.push(newBezierCurve(start, cp1, cp2, end));\n    this.currentX = i4;\n    this.currentY = i5;\n  }\n\n  close() {\n    const start = { x: this.currentX, y: this.currentY };\n    const end = { x: this.currentSegmentStartX, y: this.currentSegmentStartY };\n    this.commands.push(newClosePath(start, end));\n    this.currentX = this.currentSegmentStartX;\n    this.currentY = this.currentSegmentStartY;\n  }\n\n  toCommands() {\n    return this.commands;\n  }\n}\n\n/** Takes an list of Commands and converts them back into a SVG path string. */\nexport function commandsToString(commands: ReadonlyArray<Command>) {\n  const tokens: string[] = [];\n  commands.forEach(cmd => {\n    tokens.push(cmd.type);\n    const isClosePathCommand = cmd.type === 'Z';\n    const pointsToNumberListFunc = (...points: { x: number; y: number }[]) =>\n      points.reduce((list, p) => [...list, p.x, p.y], [] as number[]);\n    const args = pointsToNumberListFunc(...(isClosePathCommand ? [] : cmd.points.slice(1)));\n    tokens.splice(tokens.length, 0, ...args.map(n => Number(n.toFixed(3)).toString()));\n  });\n  return tokens.join(' ');\n}\n\nfunction newMove(start: Point, end: Point) {\n  return new Command('M', [start, end]);\n}\n\nfunction newLine(start: Point, end: Point) {\n  return new Command('L', [start, end]);\n}\n\nfunction newQuadraticCurve(start: Point, cp: Point, end: Point) {\n  return new Command('Q', [start, cp, end]);\n}\n\nfunction newBezierCurve(start: Point, cp1: Point, cp2: Point, end: Point) {\n  return new Command('C', [start, cp1, cp2, end]);\n}\n\nfunction newClosePath(start: Point, end: Point) {\n  return new Command('Z', [start, end]);\n}\n","import { MathUtil, Point, Rect } from 'app/modules/editor/scripts/common';\nimport * as _ from 'lodash';\nimport polylabel from 'polylabel';\n\nimport { CommandState } from './CommandState';\nimport * as PathParser from './PathParser';\nimport { createSubPaths } from './SubPath';\nimport { SubPathState, findSubPathState } from './SubPathState';\nimport { Command, HitOptions, HitResult, Projection, ProjectionOntoPath, SubPath } from '.';\n\n/**\n * Container class that encapsulates a Path's underlying state.\n */\nexport class PathState {\n  readonly subPaths: ReadonlyArray<SubPath>;\n  readonly commands: ReadonlyArray<Command>;\n\n  constructor(\n    obj: string | ReadonlyArray<Command>,\n    // Maps internal spsIdx indices to SubPathState objects. The last 'numCollapsingSubPaths'\n    // indices hold references to the collapsing sub paths.\n    readonly subPathStateMap?: ReadonlyArray<SubPathState>,\n    // Maps client-visible subIdx values to their positions in the subPathStateMap.\n    readonly subPathOrdering?: ReadonlyArray<number>,\n    // The number of collapsing subpaths appended to the end of the subPathStateMap.\n    readonly numCollapsingSubPaths = 0,\n  ) {\n    const commands = typeof obj === 'string' ? PathParser.parseCommands(obj) : obj;\n    const subPaths = createSubPaths(commands);\n    this.subPathStateMap =\n      subPathStateMap ||\n      subPaths.map(s => new SubPathState(s.getCommands().map(c => new CommandState(c))));\n    this.subPathOrdering = subPathOrdering || subPaths.map((unused, i) => i);\n    this.subPaths = subPaths.map((subPath, subIdx) => {\n      const cmds = subPath.getCommands().map((cmd, cmdIdx) => {\n        const { cs, splitIdx } = this.findCommandStateInfo(subIdx, cmdIdx);\n        return cmd\n          .mutate()\n          .setId(cs.getIdAtIndex(splitIdx))\n          .build();\n      });\n      const spsIdx = this.subPathOrdering[subIdx];\n      const isCollapsing = this.subPathOrdering.length - this.numCollapsingSubPaths <= spsIdx;\n      const sps = this.findSubPathState(subIdx);\n      const isSplit = isSubPathSplit(this.subPathStateMap, spsIdx);\n      const isUnsplittable = !this.subPathStateMap.includes(sps);\n      return subPath\n        .mutate()\n        .setId(sps.getId())\n        .setCommands(cmds)\n        .setIsCollapsing(isCollapsing)\n        .setIsReversed(sps.isReversed())\n        .setShiftOffset(sps.getShiftOffset())\n        .setIsSplit(isSplit)\n        .setIsUnsplittable(isUnsplittable)\n        .build();\n    });\n    this.commands = _.flatMap(this.subPaths, subPath => subPath.getCommands() as Command[]);\n  }\n\n  getPathLength() {\n    let length = 0;\n    for (let i = 0; i < this.subPathStateMap.length; i++) {\n      length += this.getSubPathLength(i);\n    }\n    return length;\n  }\n\n  getSubPathLength(subIdx: number) {\n    const sps = this.findSubPathState(subIdx);\n    return _.sumBy(sps.getCommandStates(), cs => cs.getPathLength());\n  }\n\n  getPointAtLength(distance: number) {\n    const spss = this.subPathStateMap.map((unused, i) => this.findSubPathState(i));\n    let length = 0;\n    for (const sps of spss) {\n      for (const cs of sps.getCommandStates()) {\n        const len = cs.getPathLength();\n        if (length <= distance && distance < length + len) {\n          return cs.getPointAtLength(distance - length);\n        }\n        length += len;\n      }\n    }\n    return undefined;\n  }\n\n  project(point: Point, restrictToSubIdx?: number): ProjectionOntoPath | undefined {\n    interface ReduceArg {\n      readonly spsIdx: number;\n      readonly csIdx: number;\n      readonly splitIdx: number;\n      readonly projection: Projection;\n    }\n    const minProjectionResultInfo = _(this.subPaths as SubPath[])\n      .map((subPath, subIdx) => ({ subPath, subIdx }))\n      .filter(\n        ({ subPath, subIdx }) =>\n          !subPath.isCollapsing() &&\n          (restrictToSubIdx === undefined || restrictToSubIdx === subIdx),\n      )\n      .map(obj => {\n        const { subIdx } = obj;\n        const sps = this.findSubPathState(subIdx);\n        return sps.getCommandStates().map((cs, csIdx) => {\n          const csProjection = cs.project(point);\n          if (csProjection && sps.isReversed()) {\n            const t = csProjection.projection.t;\n            csProjection.projection.t = 1 - t;\n          }\n          return {\n            spsIdx: this.subPathOrdering[subIdx],\n            csIdx,\n            splitIdx: csProjection ? csProjection.splitIdx : 0,\n            projection: csProjection ? csProjection.projection : undefined,\n          };\n        });\n      })\n      .flatMap(projections => projections)\n      .filter(obj => !!obj.projection)\n      // Reverse so that commands drawn with higher z-orders are preferred.\n      .reverse()\n      .reduce((prev: ReduceArg, curr: ReduceArg) => {\n        return prev && prev.projection.d < curr.projection.d ? prev : curr;\n      }, undefined);\n    if (!minProjectionResultInfo) {\n      return undefined;\n    }\n    const { spsIdx, splitIdx, projection } = minProjectionResultInfo;\n    const cmdIdx = this.toCmdIdx(spsIdx, minProjectionResultInfo.csIdx, splitIdx);\n    return { projection, subIdx: this.subPathOrdering.indexOf(spsIdx), cmdIdx };\n  }\n\n  hitTest(point: Point, opts: HitOptions = {}): HitResult {\n    const endPointHits: ProjectionOntoPath[] = [];\n    const segmentHits: ProjectionOntoPath[] = [];\n    const shapeHits: Array<{ readonly subIdx: number }> = [];\n    const defaultRestrictToSubIdx = this.subPaths.map((unused, i) => i);\n    const restrictToSubIdxSet = new Set<number>(opts.restrictToSubIdx || defaultRestrictToSubIdx);\n\n    if (opts.isPointInRangeFn) {\n      endPointHits.push(\n        ..._(this.subPaths as SubPath[])\n          .map((subPath, subIdx) => ({ subPath, subIdx }))\n          .filter(obj => {\n            const { subPath, subIdx } = obj;\n            return !subPath.isCollapsing() && restrictToSubIdxSet.has(subIdx);\n          })\n          .map(obj => {\n            const { subPath, subIdx } = obj;\n            return subPath.getCommands().map((cmd, cmdIdx) => {\n              const { x, y } = cmd.end;\n              const d = MathUtil.distance(cmd.end, point);\n              const t = 1;\n              const projection = { x, y, d, t };\n              return { subIdx, cmdIdx, projection, cmd };\n            });\n          })\n          .flatMap(pointInfos => pointInfos)\n          .filter(pointInfo => opts.isPointInRangeFn(pointInfo.projection.d, pointInfo.cmd))\n          .map(pointInfo => {\n            const { subIdx, cmdIdx, projection } = pointInfo;\n            return { subIdx, cmdIdx, projection };\n          })\n          .value(),\n      );\n    }\n\n    if (opts.isSegmentInRangeFn) {\n      // TODO: also check to see if the hit occurred at a stroke-linejoin vertex\n      // TODO: take stroke width scaling into account as well?\n      segmentHits.push(\n        ..._(this.subPaths as SubPath[])\n          .map((subPath, subIdx) => ({ subPath, subIdx }))\n          .filter(obj => {\n            const { subPath, subIdx } = obj;\n            return !subPath.isCollapsing() && restrictToSubIdxSet.has(subIdx);\n          })\n          .flatMap(obj => {\n            const { subIdx } = obj;\n            const spsIdx = this.subPathOrdering[subIdx];\n            const sps = this.findSubPathState(subIdx);\n            // We iterate by csIdx here to improve performance (since cmdIdx\n            // values can be split points).\n            return _.flatMap(sps.getCommandStates(), (cs, csIdx) => {\n              const projectionWithSplitIdx = cs.project(point);\n              if (!projectionWithSplitIdx) {\n                return [] as ProjectionOntoPath[];\n              }\n              const { projection, splitIdx } = projectionWithSplitIdx;\n              if (sps.isReversed()) {\n                projection.t = 1 - projection.t;\n              }\n              const cmdIdx = this.toCmdIdx(spsIdx, csIdx, splitIdx);\n              return [{ subIdx, cmdIdx, projection }];\n            });\n          })\n          .filter(obj => {\n            const cmd = this.subPaths[obj.subIdx].getCommands()[obj.cmdIdx];\n            return opts.isSegmentInRangeFn(obj.projection.d, cmd);\n          })\n          .value(),\n      );\n    }\n\n    if (opts.findShapesInRange) {\n      shapeHits.push(\n        ..._(this.subPaths as SubPath[])\n          .map((subPath, subIdx) => ({ subPath, subIdx }))\n          .filter(obj => {\n            const { subPath, subIdx } = obj;\n            return subPath.isClosed() && !subPath.isCollapsing() && restrictToSubIdxSet.has(subIdx);\n          })\n          .flatMap(obj => {\n            const { subIdx } = obj;\n            const css = this.findSubPathState(subIdx).getCommandStates();\n            const bounds = createBoundingBox(css);\n            if (!containsPoint(bounds, point)) {\n              // Nothing to see here. Check the next subpath.\n              return [] as Array<{ readonly subIdx: number }>;\n            }\n            // The point is inside the subpath's bounding box, so next, we will\n            // use the 'even-odd rule' to determine if the filled path has been hit.\n            // We create a line from the mouse point to a point we know that is not\n            // inside the path (in this case, we use a coordinate outside the path's\n            // bounded box). A hit has occured if and only if the number of\n            // intersections between the line and the path is odd.\n            const line = { p1: point, p2: { x: bounds.r + 1, y: bounds.b + 1 } };\n            const intersectionResults = css.map(cs => cs.intersects(line));\n            const numIntersections = _.sumBy(intersectionResults, ts => ts.length);\n            if (numIntersections % 2 === 0) {\n              // Nothing to see here. Check the next subpath.\n              return [] as Array<{ readonly subIdx: number }>;\n            }\n            return [{ subIdx }];\n          })\n          .value(),\n      );\n    }\n    const isEndPointHit = !!endPointHits.length;\n    const isSegmentHit = !!segmentHits.length;\n    const isShapeHit = !!shapeHits.length;\n    const isHit = isEndPointHit || isSegmentHit || isShapeHit;\n    return {\n      isHit,\n      isEndPointHit,\n      isSegmentHit,\n      isShapeHit,\n      endPointHits,\n      segmentHits,\n      shapeHits,\n    };\n  }\n\n  // TODO: move this math stuff into the calculators module\n  // TODO: approximate bezier curves by splitting them up into line segments\n  // TODO: write tests for this stuff\n  getPoleOfInaccessibility(subIdx: number) {\n    const subPathCmds = this.subPaths[subIdx].getCommands();\n    if (subPathCmds.length === 1) {\n      const { end } = subPathCmds[0];\n      return { x: end.x, y: end.y };\n    }\n    const cmds = subPathCmds.slice(1);\n    const polygon = _.flatMap(cmds, cmd => {\n      const { x: p1x, y: p1y } = cmd.start;\n      const { x: p2x, y: p2y } = cmd.end;\n      return [[p1x, p1y], [p2x, p2y]];\n    });\n    if (cmds.length && !this.subPaths[subIdx].isClosed()) {\n      const { x: p1x, y: p1y } = cmds[0].start;\n      const { x: p2x, y: p2y } = _.last(cmds).end;\n      polygon.push(...[[p1x, p1y], [p2x, p2y]]);\n    }\n    const pole = polylabel([polygon]);\n    return { x: pole[0], y: pole[1] };\n  }\n\n  // TODO: cache this?\n  getBoundingBox() {\n    const css = _.flatMap(this.subPathStateMap, sps => sps.getCommandStates() as CommandState[]);\n    return createBoundingBox(css);\n  }\n\n  isClockwise(subIdx: number) {\n    const cmds = this.subPaths[subIdx].getCommands();\n    return _.sumBy(cmds, cmd => getArea(cmd)) >= 0;\n  }\n\n  private findSubPathState(subIdx: number) {\n    return findSubPathState(this.subPathStateMap, this.subPathOrdering[subIdx]);\n  }\n\n  private findCommandStateInfo(subIdx: number, cmdIdx: number) {\n    const sps = this.findSubPathState(subIdx);\n    const numCommandsInSubPath = _.sumBy(sps.getCommandStates(), cs => cs.getCommands().length);\n    if (cmdIdx && sps.isReversed()) {\n      cmdIdx = numCommandsInSubPath - cmdIdx;\n    }\n    cmdIdx += sps.getShiftOffset();\n    if (cmdIdx >= numCommandsInSubPath) {\n      // Note that subtracting numCommandsInSubPath is intentional here\n      // (as opposed to subtracting numCommandsInSubPath - 1).\n      cmdIdx -= numCommandsInSubPath;\n    }\n    let counter = 0;\n    for (const cs of sps.getCommandStates()) {\n      if (counter + cs.getCommands().length > cmdIdx) {\n        return { sps, cs, splitIdx: cmdIdx - counter };\n      }\n      counter += cs.getCommands().length;\n    }\n    throw new Error('Error retrieving command mutation');\n  }\n\n  private toCmdIdx(spsIdx: number, csIdx: number, splitIdx: number) {\n    const sps = this.findSubPathState(this.subPathOrdering.indexOf(spsIdx));\n    const commandStates = sps.getCommandStates();\n    const numCmds = _.sumBy(commandStates, cs => cs.getCommands().length);\n    let cmdIdx =\n      splitIdx + _.sum(commandStates.map((cs, i) => (i < csIdx ? cs.getCommands().length : 0)));\n    let shiftOffset = sps.getShiftOffset();\n    if (sps.isReversed()) {\n      cmdIdx = numCmds - cmdIdx;\n      shiftOffset *= -1;\n      shiftOffset += numCmds - 1;\n    }\n    if (shiftOffset) {\n      cmdIdx += numCmds - shiftOffset - 1;\n      if (cmdIdx >= numCmds) {\n        cmdIdx = cmdIdx - numCmds + 1;\n      }\n    }\n    return cmdIdx;\n  }\n}\n\n// TODO: cache this?\nfunction createBoundingBox(css: ReadonlyArray<CommandState>) {\n  const bounds = { l: Infinity, t: Infinity, r: -Infinity, b: -Infinity };\n\n  const expandBoundsFn = (x: number, y: number) => {\n    if (isNaN(x) || isNaN(y)) {\n      return;\n    }\n    bounds.l = Math.min(x, bounds.l);\n    bounds.t = Math.min(y, bounds.t);\n    bounds.r = Math.max(x, bounds.r);\n    bounds.b = Math.max(y, bounds.b);\n  };\n\n  const expandBoundsForCommandMutationFn = (cs: CommandState) => {\n    const bbox = cs.getBoundingBox();\n    expandBoundsFn(bbox.x.min, bbox.y.min);\n    expandBoundsFn(bbox.x.max, bbox.y.min);\n    expandBoundsFn(bbox.x.min, bbox.y.max);\n    expandBoundsFn(bbox.x.max, bbox.y.max);\n  };\n\n  css.forEach(cs => expandBoundsForCommandMutationFn(cs));\n  return bounds;\n}\n\nfunction isSubPathSplit(map: ReadonlyArray<SubPathState>, spsIdx: number) {\n  return !!findSubPathState(map, spsIdx).getSplitSubPaths().length;\n}\n\nfunction containsPoint(rect: Rect, p: Point) {\n  return rect.l <= p.x && p.x < rect.r && rect.t <= p.y && p.y < rect.b;\n}\n\nfunction getArea(cmd: Command) {\n  if (cmd.type === 'M') {\n    return 0;\n  }\n  const { x: x0, y: y0 } = cmd.start;\n  const { x: x3, y: y3 } = cmd.end;\n  let area = 0;\n  switch (cmd.type) {\n    case 'L':\n    case 'Z':\n      area = (x3 - x0) * (y3 - y0);\n      break;\n    case 'Q':\n    case 'C':\n      let x1: number;\n      let y1: number;\n      let x2: number;\n      let y2: number;\n      if (cmd.type === 'Q') {\n        const cp = cmd.points[1];\n        x1 = x0 + (2 / 3) * (cp.x - x0);\n        y1 = y0 + (2 / 3) * (cp.y - y0);\n        x2 = x3 + (2 / 3) * (cp.x - x3);\n        y2 = y3 + (2 / 3) * (cp.y - y3);\n      } else {\n        x1 = cmd.points[1].x;\n        y1 = cmd.points[1].y;\n        x2 = cmd.points[2].x;\n        y2 = cmd.points[2].y;\n      }\n      area =\n        (3 *\n          ((y3 - y0) * (x1 + x2) -\n            (x3 - x0) * (y1 + y2) +\n            y1 * (x0 - x2) -\n            x1 * (y0 - y2) +\n            y3 * (x2 + x0 / 3) -\n            x3 * (y2 + y0 / 3))) /\n        20;\n      break;\n  }\n  return area;\n}\n","import { MathUtil, Point } from 'app/modules/editor/scripts/common';\n\nimport { Command } from './Command';\nimport { Path } from './Path';\n\n/**\n * Interpolates between a start and end path using the specified fraction.\n *\n * TODO: make it possible to create 'stateless' paths (to save memory on animation frames).\n */\nexport function interpolate(start: Path, end: Path, fraction: number) {\n  if (!start.isMorphableWith(end)) {\n    throw new Error('Attempt to interpolate two unmorphable paths');\n  }\n  const newCommands: Command[] = [];\n  start.getCommands().forEach((startCmd, i) => {\n    const endCmd = end.getCommands()[i];\n    const points: Point[] = [];\n    for (let j = 0; j < startCmd.points.length; j++) {\n      const p1 = startCmd.points[j];\n      const p2 = endCmd.points[j];\n      if (p1 && p2) {\n        // The 'start' point of the first Move command in a path\n        // will be undefined. Skip it.\n        const px = MathUtil.lerp(p1.x, p2.x, fraction);\n        const py = MathUtil.lerp(p1.y, p2.y, fraction);\n        points.push({ x: px, y: py });\n      } else {\n        points.push(undefined);\n      }\n    }\n    // TODO: avoid re-generating unique ids on each animation frame.\n    newCommands.push(new Command(startCmd.type, points));\n  });\n  return new Path(newCommands);\n}\n\n/**\n * Sorts a list of path ops in descending order.\n */\nexport function sortPathOps(ops: Array<{ subIdx: number; cmdIdx: number }>) {\n  return ops.sort(({ subIdx: s1, cmdIdx: c1 }, { subIdx: s2, cmdIdx: c2 }) => {\n    // Perform higher index splits first so that we don't alter the\n    // indices of the lower index split operations.\n    return s1 !== s2 ? s2 - s1 : c2 - c1;\n  });\n}\n","import { MathUtil } from 'app/modules/editor/scripts/common';\nimport * as _ from 'lodash';\n\nimport { Command } from '.';\n\n/**\n * Represents a string of Commands, beginning with a 'moveTo' command and ending\n * with either a 'closepath' command or the next 'moveTo' command.\n */\nexport class SubPath {\n  constructor(\n    private readonly commands: ReadonlyArray<Command>,\n    private readonly id = _.uniqueId(),\n    private readonly isCollapsing_ = false,\n    private readonly isReversed_ = false,\n    private readonly shiftOffset = 0,\n    private readonly isSplit_ = false,\n    private readonly isUnsplittable_ = false,\n  ) {}\n\n  /**\n   * Returns a unique ID for this subpath.\n   */\n  getId() {\n    return this.id;\n  }\n\n  /**\n   * The list of commands in this subpath.\n   */\n  getCommands() {\n    return this.commands;\n  }\n\n  /**\n   * Returns true iff this sub path was created to collapse to a single point.\n   */\n  isCollapsing() {\n    return this.isCollapsing_;\n  }\n\n  /**\n   * Returns true iff this sub path has been reversed.\n   */\n  isReversed() {\n    return this.isReversed_;\n  }\n\n  /**\n   * Returns the shift offset of this sub path.\n   */\n  getShiftOffset() {\n    return this.shiftOffset;\n  }\n\n  /**\n   * Returns true iff this sub path was created as a result of a split.\n   */\n  isSplit() {\n    return this.isSplit_;\n  }\n\n  /**\n   * Returns true iff this sub path can be unsplit.\n   */\n  isUnsplittable() {\n    return this.isUnsplittable_;\n  }\n\n  /**\n   * Returns true iff the sub path's start point is equal to its end point.\n   */\n  isClosed() {\n    const start = _.first(this.getCommands()).end;\n    const end = _.last(this.getCommands()).end;\n    return MathUtil.arePointsEqual(start, end);\n  }\n\n  /**\n   * Returns a builder to construct a mutated SubPath.\n   */\n  mutate() {\n    return new SubPathBuilder(\n      this.commands,\n      this.id,\n      this.isCollapsing_,\n      this.isReversed_,\n      this.shiftOffset,\n      this.isSplit_,\n      this.isUnsplittable_,\n    );\n  }\n}\n\nexport function createSubPaths(commands: ReadonlyArray<Command>) {\n  if (!commands.length || commands[0].type !== 'M') {\n    // TODO: is this case actually possible? should we insert 'M 0 0' instead?\n    return [];\n  }\n\n  let currentCmdList: Command[] = [];\n  let lastSeenMove: Command;\n  const subPathCmds: SubPath[] = [];\n  for (const cmd of commands) {\n    if (cmd.type === 'M') {\n      lastSeenMove = cmd;\n      if (currentCmdList.length) {\n        subPathCmds.push(new SubPath(currentCmdList));\n        currentCmdList = [];\n      } else {\n        currentCmdList.push(cmd);\n      }\n      continue;\n    }\n    if (!currentCmdList.length) {\n      currentCmdList.push(\n        lastSeenMove\n          .mutate()\n          .setId(_.uniqueId())\n          .build(),\n      );\n    }\n    currentCmdList.push(cmd);\n    if (cmd.type === 'Z') {\n      subPathCmds.push(new SubPath(currentCmdList));\n      currentCmdList = [];\n    }\n  }\n  if (currentCmdList.length) {\n    subPathCmds.push(new SubPath(currentCmdList));\n  }\n  return subPathCmds;\n}\n\nexport class SubPathBuilder {\n  constructor(\n    private commands: ReadonlyArray<Command>,\n    private id: string,\n    private isCollapsing: boolean,\n    private isReversed: boolean,\n    private shiftOffset: number,\n    private isSplit: boolean,\n    private isUnsplittable: boolean,\n  ) {}\n\n  setCommands(commands: Command[]) {\n    this.commands = commands;\n    return this;\n  }\n\n  setId(id: string) {\n    this.id = id;\n    return this;\n  }\n\n  setIsCollapsing(isCollapsing: boolean) {\n    this.isCollapsing = isCollapsing;\n    return this;\n  }\n\n  setIsReversed(isReversed: boolean) {\n    this.isReversed = isReversed;\n    return this;\n  }\n\n  setShiftOffset(shiftOffset: number) {\n    this.shiftOffset = shiftOffset;\n    return this;\n  }\n\n  setIsSplit(isSplit: boolean) {\n    this.isSplit = isSplit;\n    return this;\n  }\n\n  setIsUnsplittable(isUnsplittable: boolean) {\n    this.isUnsplittable = isUnsplittable;\n    return this;\n  }\n\n  build() {\n    return new SubPath(\n      [...this.commands],\n      this.id,\n      this.isCollapsing,\n      this.isReversed,\n      this.shiftOffset,\n      this.isSplit,\n      this.isUnsplittable,\n    );\n  }\n}\n","import * as _ from 'lodash';\n\nimport { CommandState } from './CommandState';\n\n/**\n * Container class that encapsulates a SubPath's underlying state.\n */\nexport class SubPathState {\n  constructor(\n    private readonly commandStates: ReadonlyArray<CommandState>,\n    private readonly isReversed_ = false,\n    private readonly shiftOffset = 0,\n    private readonly id = _.uniqueId(),\n    // Either empty if this sub path is not split, or an array\n    // containing this sub path's split children.\n    private readonly splitSubPaths: ReadonlyArray<SubPathState> = [],\n  ) {}\n\n  getId() {\n    return this.id;\n  }\n\n  getCommandStates() {\n    return this.commandStates;\n  }\n\n  isReversed() {\n    return this.isReversed_;\n  }\n\n  getShiftOffset() {\n    return this.shiftOffset;\n  }\n\n  getSplitSubPaths() {\n    return this.splitSubPaths;\n  }\n\n  revert() {\n    return this.mutate()\n      .revert()\n      .build();\n  }\n\n  clone() {\n    return this.mutate().build();\n  }\n\n  mutate() {\n    return new SubPathStateMutator(\n      [...this.commandStates],\n      this.isReversed_,\n      this.shiftOffset,\n      this.id,\n      [...this.splitSubPaths],\n    );\n  }\n}\n\n/**\n * Builder class for creating new SubPathState objects.\n */\nexport class SubPathStateMutator {\n  constructor(\n    private commandStates: CommandState[],\n    private isReversed: boolean,\n    private shiftOffset: number,\n    private id: string,\n    private splitSubPaths: ReadonlyArray<SubPathState>,\n  ) {}\n\n  setCommandStates(commandStates: CommandState[]) {\n    this.commandStates = [...commandStates];\n    return this;\n  }\n\n  setCommandState(index: number, commandState: CommandState) {\n    if (!this.commandStates || this.commandStates.length <= index) {\n      throw new Error('Attempt to set a CommandState object using an invalid index');\n    }\n    this.commandStates[index] = commandState;\n    return this;\n  }\n\n  reverse() {\n    return this.setIsReversed(!this.isReversed);\n  }\n\n  setIsReversed(isReversed: boolean) {\n    this.isReversed = isReversed;\n    return this;\n  }\n\n  setShiftOffset(shiftOffset: number) {\n    this.shiftOffset = shiftOffset;\n    return this;\n  }\n\n  setSplitSubPaths(splitSubPaths: SubPathState[]) {\n    this.splitSubPaths = [...splitSubPaths];\n    return this;\n  }\n\n  setId(id: string) {\n    this.id = id;\n    return this;\n  }\n\n  revert() {\n    this.commandStates = this.commandStates.map(cs =>\n      cs\n        .mutate()\n        .revert()\n        .build(),\n    );\n    this.isReversed = false;\n    this.shiftOffset = 0;\n    this.splitSubPaths = [];\n    return this;\n  }\n\n  build() {\n    return new SubPathState(\n      this.commandStates,\n      this.isReversed,\n      this.shiftOffset,\n      this.id,\n      this.splitSubPaths,\n    );\n  }\n}\n\nexport function findSubPathState(map: ReadonlyArray<SubPathState>, spsIdx: number) {\n  return flattenSubPathStates(map)[spsIdx];\n}\n\nexport function flattenSubPathStates(map: ReadonlyArray<SubPathState>) {\n  const subPathStates: SubPathState[] = [];\n  (function recurseFn(currentLevel: ReadonlyArray<SubPathState>) {\n    currentLevel.forEach(state => {\n      if (!state.getSplitSubPaths().length) {\n        subPathStates.push(state);\n        return;\n      }\n      recurseFn(state.getSplitSubPaths());\n    });\n  })(map);\n  return subPathStates;\n}\n","import { Projection, SvgChar } from 'app/modules/editor/model/paths';\nimport { CommandBuilder } from 'app/modules/editor/model/paths/Command';\nimport { MathUtil, Point } from 'app/modules/editor/scripts/common';\nimport * as BezierJs from 'bezier-js';\nimport { environment } from 'environments/environment';\nimport * as _ from 'lodash';\n\nimport { BBox, Calculator, Line } from '.';\nimport { LineCalculator } from './LineCalculator';\nimport { PointCalculator } from './PointCalculator';\n\n/**\n * A simple typed wrapper class around the amazing bezier-js library.\n */\nexport class BezierCalculator implements Calculator {\n  private readonly points: ReadonlyArray<Point>;\n  private length: number;\n  private bbox: BBox;\n  private bezierJs_: any;\n\n  constructor(private readonly id: string, private readonly svgChar: SvgChar, ...points: Point[]) {\n    this.points = points;\n\n    // Don't initialize variables lazily for dev builds (to avoid\n    // ngrx-store-freeze crashes).\n    if (!environment.production) {\n      this.getPathLength();\n      this.getBoundingBox();\n    }\n  }\n\n  private get bezierJs() {\n    if (this.bezierJs_ === undefined) {\n      this.bezierJs_ = new BezierJs(this.points);\n    }\n    return this.bezierJs_;\n  }\n\n  getPointAtLength(distance: number) {\n    return this.bezierJs.get(this.findTimeByDistance(distance / this.getPathLength())) as Point;\n  }\n\n  getPathLength() {\n    if (this.length === undefined) {\n      this.length = this.bezierJs.length();\n    }\n    return this.length;\n  }\n\n  project(point: Point): Projection {\n    // Create a new bezier curve for dev builds to avoid ngrx-store-freeze crashes.\n    const bezierJs = !environment.production ? new BezierJs(this.points) : this.bezierJs;\n    const { x, y, t, d } = bezierJs.project(point);\n    return { x, y, t, d };\n  }\n\n  split(t1: number, t2: number): Calculator {\n    if (t1 === t2) {\n      return new PointCalculator(this.id, this.svgChar, this.bezierJs.get(t1) as Point);\n    }\n    const points: ReadonlyArray<Point> = this.bezierJs.split(t1, t2).points;\n    const uniquePoints: Point[] = _.uniqWith(points, MathUtil.arePointsEqual);\n    if (uniquePoints.length === 2) {\n      return new LineCalculator(this.id, this.svgChar, _.first(points), _.last(points));\n    }\n    return new BezierCalculator(this.id, this.svgChar, ...points);\n  }\n\n  convert(svgChar: SvgChar) {\n    if (svgChar === undefined) {\n      throw new Error('Attempt to convert an undefined svgChar');\n    }\n    if (this.svgChar === 'Q' && svgChar === 'C') {\n      const qcp0 = this.points[0];\n      const qcp1 = this.points[1];\n      const qcp2 = this.points[2];\n      const ccp0 = qcp0;\n      const ccp1 = {\n        x: qcp0.x + (2 / 3) * (qcp1.x - qcp0.x),\n        y: qcp0.y + (2 / 3) * (qcp1.y - qcp0.y),\n      };\n      const ccp2 = {\n        x: qcp2.x + (2 / 3) * (qcp1.x - qcp2.x),\n        y: qcp2.y + (2 / 3) * (qcp1.y - qcp2.y),\n      };\n      const ccp3 = qcp2;\n      return new BezierCalculator(this.id, svgChar, ccp0, ccp1, ccp2, ccp3);\n    }\n    return new BezierCalculator(this.id, svgChar, ...this.points);\n  }\n\n  findTimeByDistance(distance: number): number {\n    if (distance < 0 || distance > 1) {\n      console.warn('distance must be a number between 0 and 1.');\n    }\n    if (distance === 0 || distance === 1) {\n      return distance;\n    }\n    const originalDistance = distance;\n    const epsilon = 0.001;\n    const maxDepth = -100;\n\n    const lowToHighRatio = distance / (1 - distance);\n    let step = -2;\n    while (step > maxDepth) {\n      const split = this.bezierJs.split(distance);\n      const low = split.left.length();\n      const high = split.right.length();\n      const diff = low - lowToHighRatio * high;\n      if (Math.abs(diff) < epsilon) {\n        // We found a satisfactory midpoint t value.\n        break;\n      }\n      // Jump half the t-distance in the direction of the bias.\n      step = step - 1;\n      distance += (diff > 0 ? -1 : 1) * 2 ** step;\n    }\n\n    if (step === maxDepth) {\n      // TODO: handle degenerate curves!!!!!\n      console.warn(\n        'Could not find the midpoint for: ',\n        `${this.svgChar} ` + this.points.toString(),\n      );\n      return originalDistance;\n    }\n\n    return distance;\n  }\n\n  toCommand() {\n    return new CommandBuilder(this.svgChar, [...this.points]).setId(this.id).build();\n  }\n\n  getBoundingBox() {\n    if (this.bbox === undefined) {\n      const bbox = this.bezierJs.bbox();\n      this.bbox = {\n        x: { min: bbox.x.min, max: bbox.x.max },\n        y: { min: bbox.y.min, max: bbox.y.max },\n      };\n    }\n    return this.bbox;\n  }\n\n  intersects(line: Line): number[] {\n    if (MathUtil.arePointsEqual(_.first(this.points), _.last(this.points))) {\n      // Points can't be intersected.\n      return [];\n    }\n    return this.bezierJs.intersects(line);\n  }\n}\n","import { MathUtil, Point } from 'app/modules/editor/scripts/common';\nimport * as _ from 'lodash';\n\nimport { Command, SvgChar } from '..';\nimport { BezierCalculator } from './BezierCalculator';\nimport { LineCalculator } from './LineCalculator';\nimport { MoveCalculator } from './MoveCalculator';\nimport { PointCalculator } from './PointCalculator';\n\n/**\n * A wrapper around a backing SVG command that abstracts a lot of the math-y\n * path-related code from the rest of the application.\n */\nexport interface Calculator {\n  getPathLength(): number;\n  getPointAtLength(distance: number): Point;\n  project(point: Point): Projection | undefined;\n  split(t1: number, t2: number): Calculator;\n  convert(svgChar: SvgChar): Calculator;\n  findTimeByDistance(distance: number): number;\n  toCommand(): Command;\n  getBoundingBox(): BBox;\n  intersects(line: Line): number[];\n}\n\nexport function newCalculator(cmd: Command): Calculator {\n  const points = cmd.points;\n  if (cmd.type === 'M') {\n    return new MoveCalculator(cmd.id, points[0], points[1]);\n  }\n  const uniquePoints: Point[] = _.uniqWith(points, MathUtil.arePointsEqual);\n  if (uniquePoints.length === 1) {\n    return new PointCalculator(cmd.id, cmd.type, points[0]);\n  }\n  if (cmd.type === 'L' || cmd.type === 'Z' || uniquePoints.length === 2) {\n    return new LineCalculator(cmd.id, cmd.type, _.first(points), _.last(points));\n  }\n  if (cmd.type === 'Q') {\n    return new BezierCalculator(cmd.id, cmd.type, points[0], points[1], points[2]);\n  }\n  if (cmd.type === 'C') {\n    const pts = cmd.points;\n    return new BezierCalculator(cmd.id, cmd.type, pts[0], pts[1], pts[2], pts[3]);\n  }\n  throw new Error('Invalid command type: ' + cmd.type);\n}\n\n/** Represents a projection onto a path. */\nexport interface Projection {\n  /** The x-coordinate of the point on the path. */\n  x: number;\n  /** The y-coordinate of the point on the path. */\n  y: number;\n  /** The t-value of the point on the path. */\n  t: number;\n  /** The distance of the source point to the point on the path. */\n  d: number;\n}\n\n/** Represents a rectangular bounding box. */\nexport interface BBox {\n  x: MinMax;\n  y: MinMax;\n}\n\ninterface MinMax {\n  min: number;\n  max: number;\n}\n\n/** Represents a 2D line. */\nexport interface Line {\n  p1: Point;\n  p2: Point;\n}\n","import { Projection, SvgChar } from 'app/modules/editor/model/paths';\nimport { CommandBuilder } from 'app/modules/editor/model/paths/Command';\nimport { MathUtil, Point } from 'app/modules/editor/scripts/common';\nimport * as _ from 'lodash';\n\nimport { BBox, Calculator, Line } from '.';\nimport { PointCalculator } from './PointCalculator';\n\nconst ROUNDING_PRECISION = 10;\n\nexport class LineCalculator implements Calculator {\n  constructor(\n    private readonly id: string,\n    private readonly svgChar: SvgChar,\n    private readonly p1: Point,\n    private readonly p2: Point,\n  ) {}\n\n  getPathLength() {\n    return MathUtil.distance(this.p1, this.p2);\n  }\n\n  getPointAtLength(distance: number): Point {\n    const t = distance / this.getPathLength();\n    const { x: x1, y: y1 } = this.p1;\n    const { x: x2, y: y2 } = this.p2;\n    return {\n      x: MathUtil.lerp(x1, x2, t),\n      y: MathUtil.lerp(y1, y2, t),\n    };\n  }\n\n  project({ x, y }: Point): Projection {\n    const { x: x1, y: y1 } = this.p1;\n    const { x: x2, y: y2 } = this.p2;\n    const a = x2 - x1;\n    const b = y2 - y1;\n    const dot = (x - x1) * a + (y - y1) * b;\n    const lenSq = round(a * a + b * b);\n    const param = lenSq === 0 ? -1 : round(dot / lenSq);\n    let xx: number;\n    let yy: number;\n    if (param < 0) {\n      xx = x1;\n      yy = y1;\n    } else if (param > 1) {\n      xx = x2;\n      yy = y2;\n    } else {\n      xx = x1 + param * a;\n      yy = y1 + param * b;\n    }\n    const dx = x - xx;\n    const dy = y - yy;\n    const dd = Math.sqrt(dx * dx + dy * dy);\n    let dt: number;\n    const rx1 = round(x1);\n    const rx2 = round(x2);\n    const ry1 = round(y1);\n    const ry2 = round(y2);\n    if (rx2 !== rx1) {\n      dt = (xx - x1) / (x2 - x1);\n    } else if (ry2 !== ry1) {\n      dt = (yy - y1) / (y2 - y1);\n    } else {\n      dt = 0.5;\n    }\n    return { x: round(xx), y: round(yy), d: round(dd), t: round(dt) };\n  }\n\n  split(t1: number, t2: number) {\n    const { x: x1, y: y1 } = this.p1;\n    const { x: x2, y: y2 } = this.p2;\n    const p1 = { x: MathUtil.lerp(x1, x2, t1), y: MathUtil.lerp(y1, y2, t1) };\n    const p2 = { x: MathUtil.lerp(x1, x2, t2), y: MathUtil.lerp(y1, y2, t2) };\n    if (MathUtil.arePointsEqual(p1, p2)) {\n      return new PointCalculator(this.id, this.svgChar, p1);\n    }\n    return new LineCalculator(this.id, this.svgChar, p1, p2);\n  }\n\n  convert(svgChar: SvgChar) {\n    return new LineCalculator(this.id, svgChar, this.p1, this.p2);\n  }\n\n  findTimeByDistance(distance: number) {\n    return distance;\n  }\n\n  toCommand() {\n    let points: Point[];\n    switch (this.svgChar) {\n      case 'L':\n      case 'Z':\n        points = [this.p1, this.p2];\n        break;\n      case 'Q':\n        const cp = {\n          x: MathUtil.lerp(this.p1.x, this.p2.x, 0.5),\n          y: MathUtil.lerp(this.p1.y, this.p2.y, 0.5),\n        };\n        points = [this.p1, cp, this.p2];\n        break;\n      case 'C':\n        const cp1 = {\n          x: MathUtil.lerp(this.p1.x, this.p2.x, 1 / 3),\n          y: MathUtil.lerp(this.p1.y, this.p2.y, 1 / 3),\n        };\n        const cp2 = {\n          x: MathUtil.lerp(this.p1.x, this.p2.x, 2 / 3),\n          y: MathUtil.lerp(this.p1.y, this.p2.y, 2 / 3),\n        };\n        points = [this.p1, cp1, cp2, this.p2];\n        break;\n      default:\n        throw new Error('Invalid command type: ' + this.svgChar);\n    }\n    return new CommandBuilder(this.svgChar, points).setId(this.id).build();\n  }\n\n  getBoundingBox() {\n    const minx = Math.min(this.p1.x, this.p2.x);\n    const miny = Math.min(this.p1.y, this.p2.y);\n    const maxx = Math.max(this.p1.x, this.p2.x);\n    const maxy = Math.max(this.p1.y, this.p2.y);\n    return { x: { min: minx, max: maxx }, y: { min: miny, max: maxy } } as BBox;\n  }\n\n  intersects(line: Line) {\n    if (MathUtil.arePointsEqual(this.p1, this.p2)) {\n      // Points can't be intersected.\n      return [];\n    }\n\n    // Check to see if the line from (a,b) to (c,d) intersects\n    // with the line from (p,q) to (r,s).\n    const { x: a, y: b } = this.p1;\n    const { x: c, y: d } = this.p2;\n    const {\n      p1: { x: p, y: q },\n      p2: { x: r, y: s },\n    } = line;\n    const det = round((c - a) * (s - q) - (r - p) * (d - b));\n    if (det === 0) {\n      // Then the two lines are parallel. In our case it is fine to\n      // return an empty list, even though the lines may technically\n      // be collinear.\n      return [];\n    } else {\n      const t = round(((s - q) * (r - a) + (p - r) * (s - b)) / det);\n      const u = round(((b - d) * (r - a) + (c - a) * (s - b)) / det);\n      return 0 <= t && t <= 1 && (0 <= u && u <= 1) ? [t] : [];\n    }\n  }\n}\n\nfunction round(num: number) {\n  return _.round(num, ROUNDING_PRECISION);\n}\n","import { Projection, SvgChar } from 'app/modules/editor/model/paths';\nimport { CommandBuilder } from 'app/modules/editor/model/paths/Command';\nimport { Point } from 'app/modules/editor/scripts/common';\n\nimport { BBox, Calculator, Line } from '.';\n\nexport class MoveCalculator implements Calculator {\n  constructor(\n    private readonly id: string,\n    private readonly startPoint: Point | undefined,\n    private readonly endPoint: Point,\n  ) {}\n\n  getPathLength() {\n    return 0;\n  }\n\n  project(point: Point): Projection | undefined {\n    return undefined;\n  }\n\n  getPointAtLength(distance: number): Point {\n    return this.endPoint;\n  }\n\n  split(t1: number, t2: number): Calculator {\n    return this;\n  }\n\n  convert(svgChar: SvgChar) {\n    return this;\n  }\n\n  findTimeByDistance(distance: number) {\n    return distance;\n  }\n\n  toCommand() {\n    return new CommandBuilder('M', [this.startPoint, this.endPoint]).setId(this.id).build();\n  }\n\n  getBoundingBox() {\n    const x = { min: NaN, max: NaN };\n    const y = { min: NaN, max: NaN };\n    return { x, y } as BBox;\n  }\n\n  intersects(line: Line): number[] {\n    return [];\n  }\n}\n","import { Projection, SvgChar } from 'app/modules/editor/model/paths';\nimport { CommandBuilder } from 'app/modules/editor/model/paths/Command';\nimport { MathUtil, Point } from 'app/modules/editor/scripts/common';\n\nimport { BBox, Calculator, Line } from '.';\n\nexport class PointCalculator implements Calculator {\n  private readonly svgChar: SvgChar;\n  private readonly point: Point;\n\n  constructor(private readonly id: string, svgChar: SvgChar, point: Point) {\n    this.svgChar = svgChar;\n    this.point = point;\n  }\n\n  getPathLength() {\n    return 0;\n  }\n\n  getPointAtLength(distance: number) {\n    return this.point;\n  }\n\n  project(point: Point) {\n    const x = this.point.x;\n    const y = this.point.y;\n    const t = 0.5;\n    const d = MathUtil.distance(this.point, point);\n    return { x, y, t, d } as Projection;\n  }\n\n  split(t1: number, t2: number) {\n    return new PointCalculator(this.id, this.svgChar, this.point);\n  }\n\n  convert(svgChar: SvgChar) {\n    return new PointCalculator(this.id, svgChar, this.point);\n  }\n\n  findTimeByDistance(distance: number) {\n    return distance;\n  }\n\n  toCommand() {\n    let points;\n    switch (this.svgChar) {\n      case 'L':\n      case 'Z':\n        points = [this.point, this.point];\n        break;\n      case 'Q':\n        points = [this.point, this.point, this.point];\n        break;\n      case 'C':\n        points = [this.point, this.point, this.point, this.point];\n        break;\n      default:\n        throw new Error('Invalid command type: ' + this.svgChar);\n    }\n    return new CommandBuilder(this.svgChar, points).setId(this.id).build();\n  }\n\n  getBoundingBox() {\n    const x = { min: this.point.x, max: this.point.x };\n    const y = { min: this.point.y, max: this.point.y };\n    return { x, y } as BBox;\n  }\n\n  intersects(line: Line): number[] {\n    return [];\n  }\n}\n","export { Calculator, newCalculator, Projection, BBox, Line } from './Calculator';\n","import * as PathUtil from './PathUtil';\n\nexport { PathUtil };\nexport { Projection, Line } from './calculators';\nexport { SvgChar } from './SvgChar';\nexport { Path, HitOptions, HitResult, ProjectionOntoPath, PathMutator } from './Path';\nexport { SubPath } from './SubPath';\nexport { Command } from './Command';\n","import { ColorUtil, MathUtil } from 'app/modules/editor/scripts/common';\nimport * as _ from 'lodash';\n\nimport { Property } from './Property';\n\nexport class ColorProperty extends Property<string> {\n  // @Override\n  setEditableValue(model: any, propertyName: string, value: string) {\n    if (!value) {\n      model[propertyName] = undefined;\n      return;\n    }\n    let processedValue = ColorUtil.parseAndroidColor(value);\n    if (!processedValue) {\n      processedValue = ColorUtil.parseAndroidColor(ColorUtil.svgToAndroidColor(value));\n    }\n    model[propertyName] = ColorUtil.toAndroidString(processedValue);\n  }\n\n  // @Override\n  interpolateValue(start: string, end: string, f: number) {\n    if (!start || !end) {\n      return undefined;\n    }\n    const s = ColorUtil.parseAndroidColor(start);\n    const e = ColorUtil.parseAndroidColor(end);\n    return ColorUtil.toAndroidString({\n      r: _.clamp(Math.round(MathUtil.lerp(s.r, e.r, f)), 0, 0xff),\n      g: _.clamp(Math.round(MathUtil.lerp(s.g, e.g, f)), 0, 0xff),\n      b: _.clamp(Math.round(MathUtil.lerp(s.b, e.b, f)), 0, 0xff),\n      a: _.clamp(Math.round(MathUtil.lerp(s.a, e.a, f)), 0, 0xff),\n    });\n  }\n\n  // @Override\n  getAnimatorValueType() {\n    return 'colorType';\n  }\n\n  // @Override\n  getTypeName() {\n    return 'ColorProperty';\n  }\n}\n","import * as _ from 'lodash';\n\nimport { Property } from './Property';\n\nexport class EnumProperty extends Property<string> {\n  constructor(name: string, readonly options: ReadonlyArray<Option>) {\n    super(name);\n  }\n\n  // @Override\n  displayValueForValue(value: string) {\n    return _.find(this.options, o => o.value === value).label;\n  }\n\n  // @Override\n  getTypeName() {\n    return 'EnumProperty';\n  }\n}\n\n/**\n * The value is the unique string used as a key (and that is stored inside of\n * the model object). The label is what we display in the UI.\n */\nexport interface Option {\n  readonly value: string;\n  readonly label: string;\n}\n","import { NumberConfig, NumberProperty } from './NumberProperty';\n\nexport class FractionProperty extends NumberProperty {\n  constructor(name: string, config: NumberConfig = {}) {\n    super(name, {\n      isAnimatable: config.isAnimatable,\n      min: 0,\n      max: 1,\n      isInteger: false,\n    });\n  }\n\n  // @Override\n  getAnimatorValueType() {\n    return 'floatType';\n  }\n\n  // @Override\n  getTypeName() {\n    return 'FractionProperty';\n  }\n}\n","import { Property } from './Property';\n\nexport class NameProperty extends Property<string> {\n  static sanitize(value = '') {\n    return value\n      .toLowerCase()\n      .replace(/^\\s+|\\s+$/g, '')\n      .replace(/[\\s-]+/g, '_')\n      .replace(/[^\\w_]+/g, '');\n  }\n\n  // @Override\n  setEditableValue(model: any, propertyName: string, value: string) {\n    model[propertyName] = NameProperty.sanitize(value);\n  }\n\n  // @Override\n  getTypeName() {\n    return 'NameProperty';\n  }\n}\n","import { MathUtil } from 'app/modules/editor/scripts/common';\nimport * as _ from 'lodash';\n\nimport { Config, Property } from './Property';\n\nexport class NumberProperty extends Property<number> {\n  private readonly min: number;\n  private readonly max: number;\n  private readonly isInteger: boolean;\n\n  constructor(name: string, config: NumberConfig = {}) {\n    super(name, config);\n    this.min = config.min === undefined ? -Infinity : config.min;\n    this.max = config.max === undefined ? Infinity : config.max;\n    this.isInteger = !!config.isInteger;\n  }\n\n  // @Override\n  setEditableValue(model: any, propertyName: string, value: string | number | undefined) {\n    if (typeof value !== 'number') {\n      value = parseFloat(value);\n    }\n    if (isNaN(value)) {\n      return;\n    }\n    value = _.clamp(value, this.min, this.max);\n    if (this.isInteger) {\n      value = Math.floor(value);\n    }\n    model[propertyName] = value;\n  }\n\n  // @Override\n  protected setter(model: any, propertyName: string, value: string | number | undefined) {\n    if (typeof value === 'string') {\n      value = Number(value);\n    }\n    if (typeof value === 'number') {\n      if (!isNaN(value)) {\n        value = _.clamp(value, this.min, this.max);\n        if (this.isInteger) {\n          value = Math.floor(value);\n        }\n      }\n    }\n    model[`${propertyName}_`] = value;\n  }\n\n  // @Override\n  interpolateValue(start: number, end: number, fraction: number) {\n    return MathUtil.lerp(start, end, fraction);\n  }\n\n  // @Override\n  displayValueForValue(value: any) {\n    if (typeof value === 'number') {\n      return (Number.isInteger(value)\n        ? value.toString()\n        : Number(value.toFixed(3)).toString()\n      ).replace(/-/g, '\\u2212');\n    }\n    return value;\n  }\n\n  // @Override\n  getAnimatorValueType() {\n    return 'floatType';\n  }\n\n  // @Override\n  getTypeName() {\n    return 'NumberProperty';\n  }\n}\n\nexport interface NumberConfig extends Config {\n  isInteger?: boolean;\n  min?: number;\n  max?: number;\n}\n","import { Path, PathUtil } from 'app/modules/editor/model/paths';\n\nimport { Property } from './Property';\n\nexport class PathProperty extends Property<Path> {\n  // @Override\n  setEditableValue(model: any, propertyName: string, value: string) {\n    let path: Path;\n    try {\n      path = new Path(value);\n    } catch (e) {\n      // An error will be thrown if the user attempts to enter an invalid path,\n      // which will occur frequently if they type the path out by hand.\n      return;\n    }\n    model[propertyName] = path;\n  }\n\n  // @Override\n  getEditableValue(model: any, propertyName: string) {\n    return model[propertyName] ? model[propertyName].getPathString() : '';\n  }\n\n  // @Override\n  protected getter(model: any, propertyName: string): Path {\n    return model[`${propertyName}_`];\n  }\n\n  // @Override\n  protected setter(model: any, propertyName: string, value: Path | string) {\n    if (!value) {\n      model[`${propertyName}_`] = undefined;\n      return;\n    }\n    model[`${propertyName}_`] = typeof value === 'string' ? new Path(value) : value;\n  }\n\n  // @Override\n  displayValueForValue(value: Path) {\n    return value ? value.getPathString() : '';\n  }\n\n  // @Override\n  interpolateValue(start: Path, end: Path, fraction: number) {\n    if (!start || !end || !start.isMorphableWith(end) || !fraction) {\n      return start;\n    }\n    if (fraction === 1) {\n      return end;\n    }\n    return PathUtil.interpolate(start, end, fraction);\n  }\n\n  // @Override\n  cloneValue(value: Path) {\n    return value ? value.mutate().build() : undefined;\n  }\n\n  // @Override\n  getAnimatorValueType() {\n    return 'pathType';\n  }\n\n  // @Override\n  getTypeName() {\n    return 'PathProperty';\n  }\n}\n","/**\n * A property is used to decorate a model object so that it can be inspected\n * and/or animated. T is the value type that is stored inside the model object.\n *\n * Model objects decorated with a property are given the following:\n *\n * - A getter/setter that can be accessed using the property's name.\n * - An 'inspectableProperties' object mapping string property names\n *   to their corresponding inspectable property objects.\n * - An 'animatableProperties' object mapping string property names\n *   to their corresponding animatable property objects.\n */\nexport abstract class Property<T> {\n  private readonly isAnimatable: boolean;\n\n  /**\n   * Builds a decorator factory for the specified properties.\n   */\n  static register(...props: Property<any>[]) {\n    return function(cls: any) {\n      props.forEach(prop => {\n        // Create's a property with the specified property name.\n        Object.defineProperty(cls.prototype, prop.propertyName, {\n          get() {\n            return prop.getter(this, prop.propertyName);\n          },\n          set(value: any) {\n            prop.setter(this, prop.propertyName, value);\n          },\n        });\n      });\n\n      let animatableProperties = new Map<string, Property<any>>();\n      if (cls.prototype.animatableProperties) {\n        animatableProperties = new Map<string, Property<any>>(cls.prototype.animatableProperties);\n      }\n      let inspectableProperties = new Map<string, Property<any>>();\n      if (cls.prototype.inspectableProperties) {\n        inspectableProperties = new Map<string, Property<any>>(cls.prototype.inspectableProperties);\n      }\n\n      props.forEach(prop => {\n        if (prop.isAnimatable) {\n          animatableProperties.set(prop.propertyName, prop);\n        }\n        inspectableProperties.set(prop.propertyName, prop);\n      });\n\n      Object.defineProperty(cls.prototype, 'animatableProperties', {\n        get: () => new Map(animatableProperties),\n      });\n\n      Object.defineProperty(cls.prototype, 'inspectableProperties', {\n        get: () => new Map(inspectableProperties),\n      });\n    };\n  }\n\n  constructor(private readonly propertyName: string, config: Config = {}) {\n    this.isAnimatable = !!config.isAnimatable;\n  }\n\n  getEditableValue(model: any, propertyName: string) {\n    return model[propertyName];\n  }\n\n  setEditableValue(model: any, propertyName: string, value: any) {\n    model[propertyName] = value;\n  }\n\n  protected getter(model: any, propertyName: string) {\n    return model[`${propertyName}_`];\n  }\n\n  protected setter(model: any, propertyName: string, value: any) {\n    model[`${propertyName}_`] = value;\n  }\n\n  displayValueForValue(value: any) {\n    return value;\n  }\n\n  /**\n   * Returns an interpolated value between start and end using the specified fraction.\n   * This method does not modify the property's internal state, but rather\n   * returns a newly created object.\n   */\n  interpolateValue(start: T, end: T, fraction: number) {\n    return start;\n  }\n\n  /**\n   * Returns a cloned instance of the value.\n   */\n  cloneValue(value: T) {\n    return value;\n  }\n\n  /**\n   * Returns the animator value type for used in Android AnimatedVectorDrawable files.\n   */\n  getAnimatorValueType() {\n    return '';\n  }\n\n  abstract getTypeName(): string;\n}\n\nexport interface Config {\n  readonly isAnimatable?: boolean;\n}\n","export { ColorProperty } from './ColorProperty';\nexport { FractionProperty } from './FractionProperty';\nexport { NameProperty } from './NameProperty';\nexport { NumberProperty } from './NumberProperty';\nexport { PathProperty } from './PathProperty';\nexport { Property } from './Property';\nexport { Animatable, Inspectable } from './PropertyMaps';\nexport { EnumProperty, Option } from './EnumProperty';\n","import {\n  Inspectable,\n  NameProperty,\n  NumberProperty,\n  Property,\n} from 'app/modules/editor/model/properties';\nimport * as _ from 'lodash';\n\nimport { AnimationBlock } from './AnimationBlock';\n\n/**\n * An animation represents a collection of layer property tweens for a VectorLayer.\n * An animation has an ID and a duration, as well as a list of AnimationBlocks that\n * each target a single layer in the vector. An animation is structured as an\n * AnimatedVectorDrawable, with the targets being AnimationBlocks.\n */\n@Property.register(\n  new NameProperty('name'),\n  new NumberProperty('duration', { min: 100, max: 60000 }),\n)\nexport class Animation {\n  constructor(obj = {} as ConstructorArgs) {\n    this.id = obj.id || _.uniqueId();\n    this.name = obj.name || 'anim';\n    this.blocks = (obj.blocks || []).map(block => AnimationBlock.from(block));\n    this.duration = obj.duration || 300;\n  }\n\n  clone() {\n    const clone = new Animation(this);\n    clone.blocks = [...clone.blocks];\n    return clone;\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      name: this.name,\n      duration: this.duration,\n      blocks: this.blocks.map(block => block.toJSON()),\n    };\n  }\n}\n\ninterface AnimationArgs {\n  id?: string;\n  name?: string;\n  duration?: number;\n  blocks?: ReadonlyArray<AnimationBlock>;\n}\n\nexport interface Animation extends AnimationArgs, Inspectable {}\nexport interface ConstructorArgs extends AnimationArgs {}\n","import { INTERPOLATORS } from 'app/modules/editor/model/interpolators';\nimport { Path } from 'app/modules/editor/model/paths';\nimport {\n  ColorProperty,\n  EnumProperty,\n  Inspectable,\n  NumberProperty,\n  PathProperty,\n  Property,\n} from 'app/modules/editor/model/properties';\nimport * as _ from 'lodash';\n\ntype AnimationBlockType = 'path' | 'color' | 'number';\n\n/**\n * An animation block is an individual layer property tween (property animation).\n */\n@Property.register(\n  new NumberProperty('startTime', { min: 0, isInteger: true }),\n  new NumberProperty('endTime', { min: 0, isInteger: true }),\n  new EnumProperty('interpolator', INTERPOLATORS),\n)\nexport abstract class AnimationBlock {\n  static from(obj: ConstructorArgs) {\n    switch (obj.type) {\n      case 'path':\n        return new PathAnimationBlock(obj);\n      case 'color':\n        return new ColorAnimationBlock(obj);\n      case 'number':\n        return new NumberAnimationBlock(obj);\n      default:\n        throw new Error('invalid block type: ' + obj.type);\n    }\n  }\n\n  protected constructor(obj: ConstructorArgs) {\n    this.id = obj.id || _.uniqueId();\n    this.layerId = obj.layerId;\n    this.propertyName = obj.propertyName;\n    this.startTime = obj.startTime || 0;\n    this.endTime = obj.endTime || 100;\n    if (this.startTime > this.endTime) {\n      // TODO: don't let this happen (usually results in behavior that seems weird to users)\n      const tmp = this.endTime;\n      this.endTime = this.startTime;\n      this.startTime = tmp;\n    }\n    // TODO: use the correct default interpolator for import svg/avd/property input\n    this.interpolator = obj.interpolator || INTERPOLATORS[0].value;\n    this.fromValue = obj.fromValue;\n    this.toValue = obj.toValue;\n    this.type = obj.type;\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      layerId: this.layerId,\n      propertyName: this.propertyName,\n      startTime: this.startTime,\n      endTime: this.endTime,\n      interpolator: this.interpolator,\n      type: this.type,\n      fromValue: this.fromValue,\n      toValue: this.toValue,\n    };\n  }\n\n  clone() {\n    return AnimationBlock.from(this);\n  }\n\n  abstract isAnimatable(): boolean;\n}\n\n/**\n * An animation block that animates the 'pathData' property.\n */\n@Property.register(new PathProperty('fromValue'), new PathProperty('toValue'))\nexport class PathAnimationBlock extends AnimationBlock {\n  // @Override\n  toJSON() {\n    return Object.assign(super.toJSON(), {\n      fromValue: this.fromValue ? this.fromValue.getPathString() : '',\n      toValue: this.toValue ? this.toValue.getPathString() : '',\n    });\n  }\n\n  // @Override\n  isAnimatable() {\n    return !!this.fromValue && !!this.toValue && this.fromValue.isMorphableWith(this.toValue);\n  }\n}\n\n/**\n * An animation block that animates a color property.\n */\n@Property.register(new ColorProperty('fromValue'), new ColorProperty('toValue'))\nexport class ColorAnimationBlock extends AnimationBlock {\n  // @Override\n  isAnimatable() {\n    // TODO should this be more specific (i.e. check if valid color values?)\n    return !!this.fromValue && !!this.toValue;\n  }\n}\n\n/**\n * An animation block that animates a number property.\n */\n@Property.register(new NumberProperty('fromValue'), new NumberProperty('toValue'))\nexport class NumberAnimationBlock extends AnimationBlock {\n  // @Override\n  isAnimatable() {\n    return _.isFinite(this.fromValue) && _.isFinite(this.toValue);\n  }\n}\n\ninterface AnimationBlockArgs {\n  id?: string;\n  layerId: string;\n  propertyName: string;\n  startTime?: number;\n  endTime?: number;\n  interpolator?: string; // Stores the 'value' key of the Interpolator object.\n  fromValue: any;\n  toValue: any;\n  type: AnimationBlockType;\n}\n\nexport interface AnimationBlock extends AnimationBlockArgs, Inspectable {}\nexport interface ConstructorArgs extends AnimationBlockArgs {}\n\nexport interface PathAnimationBlock {\n  fromValue: Path;\n  toValue: Path;\n  clone(): PathAnimationBlock;\n}\n\nexport interface ColorAnimationBlock {\n  fromValue: string;\n  toValue: string;\n  clone(): ColorAnimationBlock;\n}\n\nexport interface NumberAnimationBlock {\n  fromValue: number;\n  toValue: number;\n  clone(): NumberAnimationBlock;\n}\n","export { Animation } from './Animation';\nexport {\n  AnimationBlock,\n  PathAnimationBlock,\n  ColorAnimationBlock,\n  NumberAnimationBlock,\n} from './AnimationBlock';\n","import { ActionSource } from 'app/modules/editor/model/actionmode';\nimport { PathAnimationBlock } from 'app/modules/editor/model/timeline';\n\ninterface Result {\n  // True iff the paths are compatible.\n  readonly areCompatible: boolean;\n  // If the paths are incompatible, this is the path that the user should add points to.\n  readonly errorPath?: ActionSource;\n  // If the paths are incompatible, then the subpath at index 'subIdx'...\n  readonly errorSubIdx?: number;\n  // ...is missing 'numPointsMissing' points.\n  readonly numPointsMissing?: number;\n}\n\nexport function checkPathsCompatible(block: PathAnimationBlock): Result {\n  const { fromValue, toValue } = block;\n  if (block.isAnimatable()) {\n    return { areCompatible: true };\n  }\n\n  const numFromSubPaths = fromValue.getSubPaths().length;\n  const numToSubPaths = toValue.getSubPaths().length;\n  if (numFromSubPaths !== numToSubPaths) {\n    // This should never happen in the app (since collapsing subpaths will\n    // be added before this can occur).\n    return { areCompatible: false };\n  }\n  for (let i = 0; i < numFromSubPaths; i++) {\n    const fromCmds = fromValue.getSubPath(i).getCommands();\n    const toCmds = toValue.getSubPath(i).getCommands();\n    if (fromCmds.length === toCmds.length) {\n      continue;\n    }\n    const errorSubIdx = i;\n    const errorPath = fromCmds.length < toCmds.length ? ActionSource.From : ActionSource.To;\n    const numPointsMissing = Math.abs(fromCmds.length - toCmds.length);\n    return { areCompatible: false, errorPath, errorSubIdx, numPointsMissing };\n  }\n\n  // This should never happen.\n  return { areCompatible: false };\n}\n","import * as ActionModeUtil from './ActionModeUtil';\nexport { ActionModeUtil };\n","// TODO: test stroked paths\n\nimport { Command, Path, PathUtil } from 'app/modules/editor/model/paths';\nimport { bugsnagClient } from 'app/modules/editor/scripts/bugsnag';\nimport { MathUtil } from 'app/modules/editor/scripts/common';\nimport * as _ from 'lodash';\n\nimport { Alignment, MATCH, MISMATCH, align } from './NeedlemanWunsch';\n\n// POSSIBLE IMPROVEMENTS\n//\n// - Add additional points to both shapes first such that every segment longer than\n//   a certain distance is bisected. This may help reduce a bit of noise during alignment.\n// - Tweaking the placement of added points with simulated annealing.\n// - Using a cost function that factors in self-intersections at the halfway mark in\n//   addition to distance traveled.\n// - Use triangulation and/or Volonoi topology diagram in order to more accurately morph\n//   between SVGs with differing numbers of subpaths.\n//\n// Useful links/examples:\n// - Triangulation: https://goo.gl/Ug2pj9\n// - Jigsaw morphing: https://goo.gl/Za3akJ\n// - Voronoi topology: https://goo.gl/VNM7Tb\n// - Smoother polygon transitions: https://goo.gl/5njTsf\n// - Redistricting: https://goo.gl/sMkYEM\n\n/**\n * Takes two arbitrary paths, calculates a best-estimate alignment of the two,\n * and then inserts no-op commands into the alignment gaps to make the two paths\n * compatible with each other.\n */\nexport function autoFix(from: Path, to: Path): [Path, Path] {\n  // TODO: remove this once we fix the bug below\n  const origFrom = from.getPathString();\n  const origTo = to.getPathString();\n  try {\n    [from, to] = autoUnconvertSubPaths(from, to);\n    [from, to] = autoAddCollapsingSubPaths(from, to);\n    [from, to] = orderSubPaths(from, to);\n\n    const min = Math.min(from.getSubPaths().length, to.getSubPaths().length);\n    for (let subIdx = 0; subIdx < min; subIdx++) {\n      // Pass the command with the larger subpath as the 'from' command.\n      const numFromCmds = from.getSubPath(subIdx).getCommands().length;\n      const numToCmds = to.getSubPath(subIdx).getCommands().length;\n      const shouldSwap = numFromCmds < numToCmds;\n      if (shouldSwap) {\n        [from, to] = [to, from];\n      }\n      [from, to] = alignSubPath(from, to, subIdx);\n      if (shouldSwap) {\n        [from, to] = [to, from];\n      }\n    }\n    for (let subIdx = 0; subIdx < min; subIdx++) {\n      [from, to] = permuteSubPath(from, to, subIdx);\n    }\n  } catch (e) {\n    // TODO: remove this once we determine what is causing this bug...\n    console.error('autofix failed', origFrom, origTo);\n    bugsnagClient.leaveBreadcrumb('autoFix', {\n      from: origFrom,\n      to: origTo,\n    });\n    throw e;\n  }\n  return [from, to];\n}\n\nfunction autoUnconvertSubPaths(from: Path, to: Path) {\n  return [from, to].map(p => {\n    const pm = p.mutate();\n    p.getSubPaths().forEach((unused, subIdx) => pm.unconvertSubPath(subIdx));\n    return pm.build();\n  }) as [Path, Path];\n}\n\nexport function autoAddCollapsingSubPaths(from: Path, to: Path): [Path, Path] {\n  const deleteCollapsingSubPathsFn = (p: Path) => {\n    return p.getSubPaths().some(s => s.isCollapsing())\n      ? p\n          .mutate()\n          .deleteCollapsingSubPaths()\n          .build()\n      : p;\n  };\n  from = deleteCollapsingSubPathsFn(from);\n  to = deleteCollapsingSubPathsFn(to);\n\n  const numFrom = from.getSubPaths().length;\n  const numTo = to.getSubPaths().length;\n  if (numFrom === numTo) {\n    return [from, to];\n  }\n  // TODO: allow the user to specify the location of collapsing paths?\n  const pm = (numFrom < numTo ? from : to).mutate();\n  for (let subIdx = Math.min(numFrom, numTo); subIdx < Math.max(numFrom, numTo); subIdx++) {\n    const opp = numFrom < numTo ? to : from;\n    const pole = opp.getPoleOfInaccessibility(subIdx);\n    pm.addCollapsingSubPath(pole, opp.getSubPath(subIdx).getCommands().length);\n  }\n  if (numFrom < numTo) {\n    from = pm.build();\n  } else {\n    to = pm.build();\n  }\n  return [from, to];\n}\n\n/**\n * Reorders the subpaths in each path to minimize the distance each shape will\n * travel during the morph.\n */\nfunction orderSubPaths(from: Path, to: Path): [Path, Path] {\n  if (from.getSubPaths().length > 8 || to.getSubPaths().length > 8) {\n    // Don't attempt to order paths with many subpaths.\n    return [from, to];\n  }\n\n  const shouldSwap = from.getSubPaths().length < to.getSubPaths().length;\n  if (shouldSwap) {\n    [from, to] = [to, from];\n  }\n\n  const fromSubPaths = from.getSubPaths();\n  const toSubPaths = to.getSubPaths();\n\n  const distances = fromSubPaths.map((f, i) => {\n    return toSubPaths.map((t, j) => {\n      const pole1 = from.getPoleOfInaccessibility(i);\n      const pole2 = to.getPoleOfInaccessibility(j);\n      return MathUtil.distance(pole1, pole2);\n    });\n  });\n\n  let min = Infinity;\n  let best: number[] = [];\n\n  (function recurseFn(arr: number[], order: number[] = []) {\n    if (order.length === toSubPaths.length) {\n      let sum = 0;\n      for (let i = 0; i < order.length; i++) {\n        sum += distances[order[i]][i];\n      }\n      if (sum < min) {\n        min = sum;\n        best = order;\n      }\n      return;\n    }\n    for (let i = 0; i < arr.length; i++) {\n      const [cur] = arr.splice(i, 1);\n      recurseFn([...arr], [...order, cur]);\n      if (arr.length) {\n        arr.splice(i, 0, cur);\n      }\n    }\n  })(_.range(fromSubPaths.length));\n\n  const pm = from.mutate();\n  for (let i = 0; i < best.length; i++) {\n    const m = best[i];\n    pm.moveSubPath(m, i);\n    for (let j = i + 1; j < best.length; j++) {\n      const n = best[j];\n      if (n < m) {\n        best[j]++;\n      }\n    }\n  }\n  from = pm.build();\n\n  if (shouldSwap) {\n    [from, to] = [to, from];\n  }\n\n  return [from, to];\n}\n\n/** Aligns two paths using the Needleman-Wunsch algorithm. */\nfunction alignSubPath(from: Path, to: Path, subIdx: number): [Path, Path] {\n  // Create and return a list of reversed and shifted from paths to test.\n  // Each generated 'from path' will be aligned with the target 'to path'.\n  const fromPaths: ReadonlyArray<Path> = _.flatMap(\n    [\n      from,\n      from\n        .mutate()\n        .reverseSubPath(subIdx)\n        .build(),\n    ],\n    p => {\n      const paths = [p];\n      if (p.getSubPath(subIdx).isClosed()) {\n        for (let i = 1; i < p.getSubPath(subIdx).getCommands().length - 1; i++) {\n          // TODO: we need to find a way to reduce the number of paths to try.\n          paths.push(\n            p\n              .mutate()\n              .shiftSubPathBack(subIdx, i)\n              .build(),\n          );\n        }\n      }\n      return paths;\n    },\n  );\n\n  // The scoring function to use to calculate the alignment. Convert-able\n  // commands are considered matches. However, the farther away the points\n  // are from each other, the lower the score.\n  const getScoreFn = (a: Command, b: Command) => {\n    const charA = a.type;\n    const charB = b.type;\n    if (charA !== charB && !a.canConvertTo(charB) && !b.canConvertTo(charA)) {\n      return MISMATCH;\n    }\n    const { x, y } = a.end;\n    const start = { x, y };\n    const end = b.end;\n    return 1 / Math.max(MATCH, MathUtil.distance(start, end));\n  };\n\n  const alignmentInfos = fromPaths.map(generatedFromPath => {\n    const fromCmds = generatedFromPath.getSubPath(subIdx).getCommands();\n    const toCmds = to.getSubPath(subIdx).getCommands();\n    return {\n      generatedFromPath,\n      alignment: align(fromCmds, toCmds, getScoreFn),\n    };\n  });\n\n  // Find the alignment with the highest score.\n  const alignmentInfo = alignmentInfos.reduce((prev, curr) => {\n    const prevScore = prev.alignment.score;\n    const currScore = curr.alignment.score;\n    return prevScore > currScore ? prev : curr;\n  });\n\n  interface CmdInfo {\n    readonly isGap: boolean;\n    readonly isNextGap: boolean;\n    readonly nextCmdIdx: number;\n  }\n\n  // For each alignment, determine whether it and its neighbor is a gap.\n  const processAlignmentsFn = (\n    alignments: ReadonlyArray<Alignment<Command>>,\n  ): ReadonlyArray<CmdInfo> => {\n    let nextCmdIdx = 0;\n    return alignments.map((alignment, i) => {\n      const isGap = !alignment.obj;\n      const isNextGap = i + 1 < alignments.length && !alignments[i + 1].obj;\n      if (!isGap) {\n        nextCmdIdx++;\n      }\n      return { isGap, isNextGap, nextCmdIdx } as CmdInfo;\n    });\n  };\n\n  const fromCmdInfos = processAlignmentsFn(alignmentInfo.alignment.from);\n  const toCmdInfos = processAlignmentsFn(alignmentInfo.alignment.to);\n\n  // Process each list of alignments. Each streak of gaps represents a series\n  // of one or more splits we'll perform on the path.\n  const createGapStreaksFn = (cmdInfos: ReadonlyArray<CmdInfo>) => {\n    const gapStreaks: CmdInfo[][] = [];\n    let currentGapStreak: CmdInfo[] = [];\n    for (const cmdInfo of cmdInfos) {\n      if (cmdInfo.isGap) {\n        currentGapStreak.push(cmdInfo);\n        if (!cmdInfo.isNextGap) {\n          gapStreaks.push(currentGapStreak);\n          currentGapStreak = [];\n        }\n      }\n    }\n    return gapStreaks as ReadonlyTable<CmdInfo>;\n  };\n  const fromGapGroups = createGapStreaksFn(fromCmdInfos);\n  const toGapGroups = createGapStreaksFn(toCmdInfos);\n\n  // Fill in the gaps by applying linear subdivide batch splits.\n  const applySplitsFn = (path: Path, gapGroups: ReadonlyTable<CmdInfo>) => {\n    const splitOps: Array<{\n      readonly subIdx: number;\n      readonly cmdIdx: number;\n      readonly ts: number[];\n    }> = [];\n    const numPaths = path.getSubPath(subIdx).getCommands().length;\n    for (let i = gapGroups.length - 1; i >= 0; i--) {\n      const gapGroup = gapGroups[i];\n      // Clamp the index between 1 and numCommands - 1 to account for cases\n      // where the alignment algorithm attempts to append new commands to the\n      // front and back of the sequence.\n      const cmdIdx = _.clamp(_.last(gapGroup).nextCmdIdx, 1, numPaths - 1);\n      const ts = gapGroup.map((unused, gapIdx) => (gapIdx + 1) / (gapGroup.length + 1));\n      splitOps.push({ subIdx, cmdIdx, ts });\n    }\n    PathUtil.sortPathOps(splitOps);\n    const mutator = path.mutate();\n    for (const { cmdIdx, ts } of splitOps) {\n      mutator.splitCommand(subIdx, cmdIdx, ...ts);\n    }\n    return mutator.build();\n  };\n\n  const fromPathResult = applySplitsFn(alignmentInfo.generatedFromPath, fromGapGroups);\n  const toPathResult = applySplitsFn(to, toGapGroups);\n\n  // Finally, convert the commands before returning the result.\n  return autoConvertSubPath(fromPathResult, toPathResult, subIdx);\n}\n\n/**\n * Takes two paths with an equal number of commands and makes them compatible\n * by converting each pair one-by-one.\n */\nexport function autoConvert(from: Path, to: Path): [Path, Path] {\n  [from, to] = autoUnconvertSubPaths(from, to);\n  const numFrom = from.getSubPaths().length;\n  const numTo = to.getSubPaths().length;\n  for (let subIdx = 0; subIdx < Math.min(numFrom, numTo); subIdx++) {\n    // Only auto convert when the number of commands in both canvases\n    // are equal. Otherwise we'll wait for the user to add more points.\n    [from, to] = autoConvertSubPath(from, to, subIdx);\n  }\n  return [from, to];\n}\n\nfunction autoConvertSubPath(from: Path, to: Path, subIdx: number): [Path, Path] {\n  const numFrom = from.getSubPath(subIdx).getCommands().length;\n  const numTo = to.getSubPath(subIdx).getCommands().length;\n  if (numFrom !== numTo) {\n    // Only auto convert when the number of commands in both subpaths are equal.\n    return [from, to];\n  }\n  const fromPm = from.mutate();\n  const toPm = to.mutate();\n  for (let cmdIdx = 0; cmdIdx < numFrom; cmdIdx++) {\n    const fromCmd = from.getCommand(subIdx, cmdIdx);\n    const toCmd = to.getCommand(subIdx, cmdIdx);\n    if (fromCmd.type === toCmd.type) {\n      continue;\n    }\n    if (fromCmd.canConvertTo(toCmd.type)) {\n      fromPm.convertCommand(subIdx, cmdIdx, toCmd.type);\n    } else if (toCmd.canConvertTo(fromCmd.type)) {\n      toPm.convertCommand(subIdx, cmdIdx, fromCmd.type);\n    }\n  }\n  return [fromPm.build(), toPm.build()];\n}\n\nfunction permuteSubPath(from: Path, to: Path, subIdx: number): [Path, Path] {\n  if (from.isClockwise(subIdx) !== to.isClockwise(subIdx)) {\n    // Make sure the paths share the same direction.\n    to = to\n      .mutate()\n      .reverseSubPath(subIdx)\n      .build();\n  }\n\n  // Create and return a list of reversed and shifted from paths to test.\n  // Each generated 'from path' will be aligned with the target 'to path'.\n  const fromPaths: Path[] = [from];\n  if (from.getSubPath(subIdx).isClosed()) {\n    for (let i = 1; i < from.getSubPath(subIdx).getCommands().length - 1; i++) {\n      // TODO: we need to find a way to reduce the number of paths to try.\n      fromPaths.push(\n        from\n          .mutate()\n          .shiftSubPathBack(subIdx, i)\n          .build(),\n      );\n    }\n  }\n\n  let bestFromPath = from;\n  let min = Infinity;\n  for (const fromPath of fromPaths) {\n    const fromCmds = fromPath.getSubPath(subIdx).getCommands();\n    let sumOfSquares = 0;\n    const toCmds = to.getSubPath(subIdx).getCommands();\n    fromCmds.forEach(\n      (c, cmdIdx) => (sumOfSquares += MathUtil.distance(c.end, toCmds[cmdIdx].end) ** 2),\n    );\n    if (sumOfSquares < min) {\n      min = sumOfSquares;\n      bestFromPath = fromPath;\n    }\n  }\n\n  return [bestFromPath, to];\n}\n","import * as _ from 'lodash';\n\n// Needleman-Wunsch scoring function constants.\nexport const MATCH = 1;\nexport const MISMATCH = -1;\nexport const INDEL = 0;\n\n/** Represents either a valid object or an empty gap slot. */\nexport interface Alignment<T> {\n  obj?: T;\n}\n\n/**\n * Aligns two sequences of objects using the Needleman-Wunsch algorithm.\n */\nexport function align<T>(\n  from: ReadonlyArray<T>,\n  to: ReadonlyArray<T>,\n  scoringFn: (t1: T, t2: T) => number,\n) {\n  const listA: Alignment<T>[] = from.map(obj => ({ obj }));\n  const listB: Alignment<T>[] = to.map(obj => ({ obj }));\n  const alignedListA: Alignment<T>[] = [];\n  const alignedListB: Alignment<T>[] = [];\n\n  // Add dummy nodes at the first position of each list.\n  listA.unshift(undefined);\n  listB.unshift(undefined);\n\n  let i: number, j: number;\n\n  // Initialize the scoring matrix.\n  const matrix: number[][] = [];\n  for (i = 0; i < listA.length; i++) {\n    const row: number[] = [];\n    for (j = 0; j < listB.length; j++) {\n      row.push(i === 0 ? j * INDEL : j === 0 ? i * INDEL : 0);\n    }\n    matrix.push(row);\n  }\n\n  // Process the scoring matrix.\n  for (i = 1; i < listA.length; i++) {\n    for (j = 1; j < listB.length; j++) {\n      const match = matrix[i - 1][j - 1] + scoringFn(listA[i].obj, listB[j].obj);\n      const ins = matrix[i][j - 1] + INDEL;\n      const del = matrix[i - 1][j] + INDEL;\n      matrix[i][j] = Math.max(match, ins, del);\n    }\n  }\n\n  // Backtracking.\n  i = listA.length - 1;\n  j = listB.length - 1;\n\n  while (i > 0 || j > 0) {\n    if (\n      i > 0 &&\n      j > 0 &&\n      matrix[i][j] === matrix[i - 1][j - 1] + scoringFn(listA[i].obj, listB[j].obj)\n    ) {\n      alignedListA.unshift(listA[i--]);\n      alignedListB.unshift(listB[j--]);\n    } else if (i > 0 && matrix[i][j] === matrix[i - 1][j] + INDEL) {\n      alignedListA.unshift(listA[i--]);\n      alignedListB.unshift({});\n    } else {\n      alignedListA.unshift({});\n      alignedListB.unshift(listB[j--]);\n    }\n  }\n  return {\n    from: alignedListA as ReadonlyArray<Alignment<T>>,\n    to: alignedListB as ReadonlyArray<Alignment<T>>,\n    score: _.last(_.last(matrix)),\n  };\n}\n","import * as AutoAwesome from './AutoAwesome';\nexport { AutoAwesome };\n","import { INTERPOLATORS } from 'app/modules/editor/model/interpolators';\nimport { Layer, VectorLayer } from 'app/modules/editor/model/layers';\nimport { Animation, AnimationBlock } from 'app/modules/editor/model/timeline';\nimport { ModelUtil } from 'app/modules/editor/scripts/common';\nimport * as _ from 'lodash';\n\nconst DEFAULT_LAYER_PROPERTY_STATE: PropertyState = {\n  activeBlock: undefined,\n  interpolatedValue: false,\n};\n\n/**\n * A simple class that takes a VectorLayer and an animation and outputs a new\n * rendered VectorLayer given a specific time.\n */\nexport class AnimationRenderer {\n  private readonly renderedVectorLayer: VectorLayer;\n\n  // Keys are layerIds and values are RenderedData objects.\n  private readonly animDataByLayer: Dictionary<RendererData> = {};\n\n  constructor(originalVectorLayer: VectorLayer, activeAnimation: Animation) {\n    // TODO: technically this could be more performant if we only cloned the affected layers\n    this.renderedVectorLayer = originalVectorLayer.deepClone();\n    const animDataByLayer = ModelUtil.getOrderedBlocksByPropertyByLayer(activeAnimation);\n    Object.keys(animDataByLayer).forEach(layerId => {\n      this.animDataByLayer[layerId] = {\n        originalLayer: originalVectorLayer.findLayerById(layerId),\n        renderedLayer: this.renderedVectorLayer.findLayerById(layerId),\n        orderedBlocks: animDataByLayer[layerId],\n      };\n    });\n    this.setCurrentTime(0);\n  }\n\n  /**\n   * Returns a rendered vector layer given a specific time. The time must be\n   * non-negative and must be less than the animation's duration. The returned\n   * vector layer should not be mutated externally, as it will be cached and\n   * returned on subsequent time frames.\n   */\n  setCurrentTime(timeMillis: number) {\n    Object.keys(this.animDataByLayer).forEach(layerId => {\n      const animData = this.animDataByLayer[layerId];\n      animData.cachedState = animData.cachedState || ({} as PropertyState);\n\n      Object.keys(animData.orderedBlocks).forEach(propertyName => {\n        const blocks = animData.orderedBlocks[propertyName];\n        const _ar = { ...DEFAULT_LAYER_PROPERTY_STATE };\n\n        // Compute the rendered value at the given time.\n        const property = animData.originalLayer.animatableProperties.get(propertyName);\n        let value = (animData.originalLayer as any)[propertyName];\n        for (const block of blocks) {\n          if (timeMillis < block.startTime) {\n            break;\n          }\n          if (timeMillis < block.endTime) {\n            const f = (timeMillis - block.startTime) / (block.endTime - block.startTime);\n            // TODO: this is a bit hacky... no need to perform a search every time.\n            const interpolatorFn = _.find(INTERPOLATORS, i => i.value === block.interpolator)\n              .interpolateFn;\n            value = property.interpolateValue(block.fromValue, block.toValue, interpolatorFn(f));\n            _ar.activeBlock = block;\n            _ar.interpolatedValue = true;\n            break;\n          }\n          value = block.toValue;\n          _ar.activeBlock = block;\n        }\n\n        (animData.renderedLayer as any)[propertyName] = value;\n\n        // Cached data.\n        (animData.cachedState as any)[propertyName] =\n          (animData.cachedState as any)[propertyName] || {};\n        (animData.cachedState as any)[propertyName] = _ar;\n      });\n    });\n    return this.renderedVectorLayer;\n  }\n}\n\ninterface RendererData {\n  readonly originalLayer: Layer;\n  readonly renderedLayer: Layer;\n  // Maps property names to animation block lists.\n  readonly orderedBlocks: Dictionary<AnimationBlock[]>;\n  cachedState?: PropertyState;\n}\n\ninterface PropertyState {\n  activeBlock: AnimationBlock;\n  interpolatedValue: boolean;\n}\n","export { AnimationRenderer } from './AnimationRenderer';\n","import BugsnagErrorHandler from 'bugsnag-angular';\nimport bugsnag from 'bugsnag-js';\nimport { environment } from 'environments/environment';\nimport { version } from 'environments/version';\n\nexport const bugsnagClient = bugsnag({\n  apiKey: 'd662c2c8a7e13ac94f67e81e26bf3a4e',\n  appVersion: version,\n  releaseStage: environment.production ? 'production' : 'development',\n  notifyReleaseStages: ['production'],\n});\n\nexport function errorHandlerFactory() {\n  return new BugsnagErrorHandler(bugsnagClient);\n}\n","import { bugsnagClient } from 'app/modules/editor/scripts/bugsnag';\nimport * as tinycolor from 'tinycolor2';\n\n//BHAARATA: my code\ndeclare namespace ColorFormats\n{\n\tinterface RGB {r: number; g: number; b: number}\n\tinterface RGBA extends RGB {a: number}\n}\n//BHAARATA: end of my code\n\nexport function parseAndroidColor(val: string): ColorFormats.RGBA | undefined {\n  if (typeof val !== 'string') {\n    bugsnagClient.notify(new TypeError(`Argument has incorrect type (${typeof val}): ` + val), {\n      severity: 'warning',\n    });\n    return undefined;\n  }\n  val = (val || '').replace(/^\\s*#?|\\s*$/g, '');\n  const dict: ColorFormats.RGBA = { a: 0, r: 0, g: 0, b: 0 };\n\n  if (val.length === 3) {\n    dict.a = 255;\n    dict.r = parseInt(val.substring(0, 1), 16) * 17;\n    dict.g = parseInt(val.substring(1, 2), 16) * 17;\n    dict.b = parseInt(val.substring(2, 3), 16) * 17;\n  } else if (val.length === 4) {\n    dict.a = parseInt(val.substring(0, 1), 16) * 17;\n    dict.r = parseInt(val.substring(1, 2), 16) * 17;\n    dict.g = parseInt(val.substring(2, 3), 16) * 17;\n    dict.b = parseInt(val.substring(3, 4), 16) * 17;\n  } else if (val.length === 6) {\n    dict.a = 255;\n    dict.r = parseInt(val.substring(0, 2), 16);\n    dict.g = parseInt(val.substring(2, 4), 16);\n    dict.b = parseInt(val.substring(4, 6), 16);\n  } else if (val.length === 8) {\n    dict.a = parseInt(val.substring(0, 2), 16);\n    dict.r = parseInt(val.substring(2, 4), 16);\n    dict.g = parseInt(val.substring(4, 6), 16);\n    dict.b = parseInt(val.substring(6, 8), 16);\n  } else {\n    return undefined;\n  }\n\n  return isNaN(dict.r) || isNaN(dict.g) || isNaN(dict.b) || isNaN(dict.a) ? undefined : dict;\n}\n\nexport function toAndroidString(dict: ColorFormats.RGBA): string {\n  let str = '#';\n  if (dict.a !== 255) {\n    str += (dict.a < 16 ? '0' : '') + dict.a.toString(16);\n  }\n  str +=\n    (dict.r < 16 ? '0' : '') +\n    dict.r.toString(16) +\n    (dict.g < 16 ? '0' : '') +\n    dict.g.toString(16) +\n    (dict.b < 16 ? '0' : '') +\n    dict.b.toString(16);\n  return str;\n}\n\nexport function svgToAndroidColor(color: string): string | undefined {\n  if (color === 'none') {\n    return undefined;\n  }\n  const colorInstance = tinycolor(color);\n  const colorHex = colorInstance.toHex();\n  const alphaHex = colorInstance.toHex8().substr(6);\n  return '#' + (alphaHex !== 'ff' ? alphaHex : '') + colorHex;\n}\n\nexport function androidToCssHexColor(androidColor: string | undefined, multAlpha = 1): string {\n  if (!androidColor) {\n    return 'transparent';\n  }\n  const d = parseAndroidColor(androidColor);\n  let str = '#';\n  str +=\n    (d.r < 16 ? '0' : '') +\n    d.r.toString(16) +\n    (d.g < 16 ? '0' : '') +\n    d.g.toString(16) +\n    (d.b < 16 ? '0' : '') +\n    d.b.toString(16);\n  if (d.a !== 255) {\n    str += (d.a < 16 ? '0' : '') + d.a.toString(16);\n  }\n  return str;\n}\n\nexport function androidToCssRgbaColor(androidColor: string | undefined, multAlpha = 1): string {\n  if (!androidColor) {\n    return 'transparent';\n  }\n  const d = parseAndroidColor(androidColor);\n  return `rgba(${d.r},${d.g},${d.b},${((d.a * multAlpha) / 255).toFixed(2)})`;\n}\n","import * as _ from 'lodash';\n\nimport { Matrix } from './Matrix';\nimport { Point } from './Point';\n\n/** Returns the floor modulus of the integer argument. */\nexport function floorMod(num: number, maxNum: number) {\n  return ((num % maxNum) + maxNum) % maxNum;\n}\n\n/** Linearly interpolate between a and b using time t. */\nexport function lerp(a: number, b: number, t: number) {\n  return a + (b - a) * t;\n}\n\n/** Returns true if the points are collinear. */\nexport function areCollinear(...points: Point[]) {\n  if (points.length < 3) {\n    return true;\n  }\n  const { x: a, y: b } = points[0];\n  const { x: m, y: n } = points[1];\n  return points.every(({ x, y }) => {\n    // The points are collinear if the area of the triangle they form\n    // is equal to (or in this case, close to) zero.\n    return Math.abs(a * (n - y) + m * (y - b) + x * (b - n)) < 1e-9;\n  });\n}\n\n/** Applies a list of transformation matrices to the specified point. */\nexport function transformPoint(point: Point, ...matrices: Matrix[]) {\n  return matrices.reduce((p: Point, m: Matrix) => {\n    // [a c e]   [p.x]\n    // [b d f] * [p.y]\n    // [0 0 1]   [ 1 ]\n    const x = round(m.a * p.x + m.c * p.y + m.e * 1);\n    const y = round(m.b * p.x + m.d * p.y + m.f * 1);\n    return { x, y };\n  }, point);\n}\n\n/** Calculates the distance between two points. */\nexport function distance(p1: Point, p2: Point) {\n  return Math.hypot(p1.x - p2.x, p1.y - p2.y);\n}\n\n/** Returns true if the two points are equal. */\nexport function arePointsEqual(p1: Point, p2: Point) {\n  return p1 && p2 && isNearZero(distance(p1, p2));\n}\n\n/** Rounds the number to a prespecified precision. */\nexport function round(n: number) {\n  return _.round(n, 9);\n}\n\n/** Snaps a directional vector to the specified angle. */\nexport function snapVectorToAngle(delta: Point, snapAngleDegrees: number): Point {\n  const snapAngle = (snapAngleDegrees * Math.PI) / 180;\n  const angle = Math.round(Math.atan2(delta.y, delta.x) / snapAngle) * snapAngle;\n  const dirx = Math.cos(angle);\n  const diry = Math.sin(angle);\n  const d = dirx * delta.x + diry * delta.y;\n  return { x: dirx * d, y: diry * d };\n}\n\n/** Returns true iff the number is near 0. */\nexport function isNearZero(n: number) {\n  return round(n) === 0;\n}\n","import * as MathUtil from './MathUtil';\n\n/**\n * An immutable Matrix class that uses the standard SVG transformation\n * matrix notation.\n */\nexport class Matrix {\n  static identity() {\n    return new Matrix(1, 0, 0, 1, 0, 0);\n  }\n\n  /**\n   * Flattens the matrices into a single matrix by performing matrix multiplication\n   * on each in left to right order.\n   */\n  static flatten(matrices: ReadonlyArray<Matrix>) {\n    return matrices.reduce((prev, curr) => prev.dot(curr), Matrix.identity());\n  }\n\n  /**\n   * Creates a scaling transformation matrix.\n   */\n  static scaling(sx: number, sy: number) {\n    return new Matrix(sx, 0, 0, sy, 0, 0);\n  }\n\n  /**\n   * Creates a counter clockwise rotation transformation matrix.\n   */\n  static rotation(degrees: number) {\n    const cosr = Math.cos((degrees * Math.PI) / 180);\n    const sinr = Math.sin((degrees * Math.PI) / 180);\n    return new Matrix(cosr, sinr, -sinr, cosr, 0, 0);\n  }\n\n  /**\n   * Creates a translation transformation matrix.\n   */\n  static translation(tx: number, ty: number) {\n    return new Matrix(1, 0, 0, 1, tx, ty);\n  }\n\n  constructor(\n    readonly a: number,\n    readonly b: number,\n    readonly c: number,\n    readonly d: number,\n    readonly e: number,\n    readonly f: number,\n  ) {}\n\n  /**\n   * Returns the dot product of this 2D transformation matrices with m.\n   */\n  dot(m: Matrix) {\n    // [a c e]   [a' c' e']\n    // [b d f] * [b' d' f']\n    // [0 0 1]   [0  0  1 ]\n    return new Matrix(\n      MathUtil.round(this.a * m.a + this.c * m.b),\n      MathUtil.round(this.b * m.a + this.d * m.b),\n      MathUtil.round(this.a * m.c + this.c * m.d),\n      MathUtil.round(this.b * m.c + this.d * m.d),\n      MathUtil.round(this.a * m.e + this.c * m.f + this.e),\n      MathUtil.round(this.b * m.e + this.d * m.f + this.f),\n    );\n  }\n\n  /**\n   * Returns the inverse of this transformation matrix or undefined if the\n   * matrix is not invertible.\n   */\n  invert(): Matrix | undefined {\n    const { a, b, c, d, e, f } = this;\n    let det = MathUtil.round(a * d - b * c);\n    if (!det) {\n      return undefined;\n    }\n    det = 1 / det;\n    return new Matrix(\n      MathUtil.round(d * det),\n      MathUtil.round(-b * det),\n      MathUtil.round(-c * det),\n      MathUtil.round(a * det),\n      MathUtil.round((c * f - d * e) * det),\n      MathUtil.round((b * e - a * f) * det),\n    );\n  }\n\n  /**\n   * Extracts the x/y scaling from the transformation matrix.\n   */\n  getScaling() {\n    const { a, b, c, d } = this;\n    const sx = (a >= 0 ? 1 : -1) * Math.hypot(a, c);\n    const sy = (d >= 0 ? 1 : -1) * Math.hypot(b, d);\n    return { sx: MathUtil.round(sx), sy: MathUtil.round(sy) };\n  }\n  /**\n   * Extracts the rotation in degrees from the transformation matrix.\n   */\n  getRotation() {\n    return MathUtil.round((180 / Math.PI) * Math.atan2(-this.c, this.a));\n  }\n\n  /**\n   * Extracts the x/y translation from the transformation matrix.\n   */\n  getTranslation() {\n    return { tx: MathUtil.round(this.e), ty: MathUtil.round(this.f) };\n  }\n\n  /**\n   * Returns a single scale factor (to use for scaling a path's stroke width, etc.).\n   */\n  getScaleFactor() {\n    // Given unit vectors u0 = (0, 1) and v0 = (1, 0).\n    //\n    // After matrix mapping, we get u1 and v1. Let Θ be the angle between u1 and v1.\n    // Then the final scale we want is:\n    //\n    // Math.min(|u1|sin(Θ),|v1|sin(Θ)) = |u1||v1|sin(Θ) / Math.max(|u1|,|v1|)\n    //\n    // If Math.max(|u1|,|v1|) = 0, that means either x or y has a scale of 0.\n    //\n    // For the non-skew case, which is most of the cases, matrix scale is\n    // computing exactly the scale on x and y axis, and take the minimal of these two.\n    //\n    // For the skew case, an unit square will mapped to a parallelogram,\n    // and this function will return the minimal height of the 2 bases.\n    const m = new Matrix(this.a, this.b, this.c, this.d, 0, 0);\n    const u0 = { x: 0, y: 1 };\n    const v0 = { x: 1, y: 0 };\n    const u1 = MathUtil.transformPoint(u0, m);\n    const v1 = MathUtil.transformPoint(v0, m);\n    const sx = Math.hypot(u1.x, u1.y);\n    const sy = Math.hypot(v1.x, v1.y);\n    const dotProduct = u1.y * v1.x - u1.x * v1.y;\n    const maxScale = Math.max(sx, sy);\n    return maxScale > 0 ? Math.abs(dotProduct) / maxScale : 0;\n  }\n\n  /**\n   * Returns true if the matrix is approximately equal to this matrix.\n   */\n  equals(m: Matrix) {\n    return (\n      Math.abs(this.a - m.a) < 1e-9 &&\n      Math.abs(this.b - m.b) < 1e-9 &&\n      Math.abs(this.c - m.c) < 1e-9 &&\n      Math.abs(this.d - m.d) < 1e-9 &&\n      Math.abs(this.e - m.e) < 1e-9 &&\n      Math.abs(this.f - m.f) < 1e-9\n    );\n  }\n}\n","import { Layer, VectorLayer } from 'app/modules/editor/model/layers';\nimport { Animation, AnimationBlock } from 'app/modules/editor/model/timeline';\nimport * as _ from 'lodash';\n\n/**\n * Builds a map where the keys are layer IDs and the values are\n * maps of property names to their corresponding animation blocks.\n */\nexport function getOrderedBlocksByPropertyByLayer(animation: Animation) {\n  const blocksByPropertyByLayer: Dictionary<Dictionary<AnimationBlock[]>> = {};\n\n  animation.blocks.forEach(block => {\n    let blocksByProperty = blocksByPropertyByLayer[block.layerId];\n    if (!blocksByProperty) {\n      blocksByProperty = {};\n      blocksByPropertyByLayer[block.layerId] = blocksByProperty;\n    }\n    const propertyName = block.propertyName;\n    blocksByProperty[propertyName] = blocksByProperty[propertyName] || [];\n    blocksByProperty[propertyName].push(block);\n  });\n\n  _.forEach(blocksByPropertyByLayer, blocksByProperty => {\n    _.forEach(blocksByProperty, blocks => {\n      blocks.sort((a, b) => a.startTime - b.startTime);\n    });\n  });\n\n  return blocksByPropertyByLayer;\n}\n\n/**\n * Returns a set of property names that have not yet been animated.\n */\nexport function getAvailablePropertyNamesForLayer(layer: Layer, animation: Animation) {\n  const availablePropertyNames = new Set(layer.animatableProperties.keys());\n  const blocksByPropertyByLayer = getOrderedBlocksByPropertyByLayer(animation);\n  const blocksByProperty = blocksByPropertyByLayer[layer.id];\n  if (blocksByProperty) {\n    for (const name of Object.keys(blocksByProperty)) {\n      availablePropertyNames.delete(name);\n    }\n  }\n  return availablePropertyNames;\n}\n\nexport function regenerateModelIds(\n  vectorLayer: VectorLayer,\n  animation: Animation,\n  hiddenLayerIds: ReadonlySet<string>,\n) {\n  // Create a map of old IDs to new IDs.\n  const layerIdMap: Dictionary<string> = {};\n  vectorLayer.walk(layer => (layerIdMap[layer.id] = _.uniqueId()));\n\n  vectorLayer = <VectorLayer>(function recurseFn<T extends Layer>(layer: T) {\n    const clone = layer.clone();\n    clone.id = layerIdMap[clone.id];\n    clone.children = clone.children.map(l => recurseFn(l));\n    return clone;\n  })(vectorLayer);\n\n  const clonedAnim = animation.clone();\n  clonedAnim.id = _.uniqueId();\n  clonedAnim.blocks = clonedAnim.blocks.map(block => {\n    const clonedBlock = block.clone();\n    clonedBlock.id = _.uniqueId();\n    clonedBlock.layerId = layerIdMap[clonedBlock.layerId];\n    return clonedBlock;\n  });\n  animation = clonedAnim;\n\n  hiddenLayerIds = new Set(Array.from(hiddenLayerIds).map(id => layerIdMap[id]));\n\n  return { vectorLayer, animation, hiddenLayerIds };\n}\n","// TODO: change argument types to a Quadrilateral\nexport function distort(sourcePoints: [number, number][], targetPoints: [number, number][]) {\n  const a = [];\n  const b = [];\n  for (let i = 0, n = sourcePoints.length; i < n; ++i) {\n    const s = sourcePoints[i];\n    const t = targetPoints[i];\n    a.push([s[0], s[1], 1, 0, 0, 0, -s[0] * t[0], -s[1] * t[0]]), b.push(t[0]);\n    a.push([0, 0, 0, s[0], s[1], 1, -s[0] * t[1], -s[1] * t[1]]), b.push(t[1]);\n  }\n\n  const X = solve(a, b, true);\n\n  // prettier-ignore\n  const matrix = [\n      X[0], X[3], 0, X[6],\n      X[1], X[4], 0, X[7],\n         0,    0, 1,    0,\n      X[2], X[5], 0,    1,\n    ].map((x) => Math.round(x * 10e6) / 10e6);\n\n  // Given a 4x4 perspective transformation matrix, and a 2D point (a 2x1 vector),\n  // applies the transformation matrix by converting the point to homogeneous\n  // coordinates at z=0, post-multiplying, and then applying a perspective divide.\n  return (point: [number, number]) => {\n    const pt = multiply(matrix, [point[0], point[1], 0, 1]);\n    return [pt[0] / pt[3], pt[1] / pt[3]];\n  };\n\n  // Post-multiply a 4x4 matrix in column-major order by a 4x1 column vector:\n  // [ m0 m4 m8  m12 ]   [ v0 ]   [ x ]\n  // [ m1 m5 m9  m13 ] * [ v1 ] = [ y ]\n  // [ m2 m6 m10 m14 ]   [ v2 ]   [ z ]\n  // [ m3 m7 m11 m15 ]   [ v3 ]   [ w ]\n  function multiply(m: number[], v: [number, number, number, number]) {\n    // prettier-ignore\n    return [\n    m[0] * v[0] + m[4] * v[1] + m[8 ] * v[2] + m[12] * v[3],\n    m[1] * v[0] + m[5] * v[1] + m[9 ] * v[2] + m[13] * v[3],\n    m[2] * v[0] + m[6] * v[1] + m[10] * v[2] + m[14] * v[3],\n    m[3] * v[0] + m[7] * v[1] + m[11] * v[2] + m[15] * v[3],\n  ];\n  }\n}\n\n/* Code below is copied from numeric.js */\n\nconst abs = Math.abs;\n\nfunction _foreach2(x: any, s: any, k: any, f: any) {\n  if (k === s.length - 1) {\n    return f(x);\n  }\n  let i;\n  const n = s[k];\n  const ret = Array(n);\n  for (i = n - 1; i >= 0; --i) {\n    ret[i] = _foreach2(x[i], s, k + 1, f);\n  }\n  return ret;\n}\n\nfunction _dim(x: any) {\n  const ret = [];\n  while (typeof x === 'object') {\n    ret.push(x.length), (x = x[0]);\n  }\n  return ret;\n}\n\nfunction dim(x: any) {\n  let y, z;\n  if (typeof x === 'object') {\n    y = x[0];\n    if (typeof y === 'object') {\n      z = y[0];\n      if (typeof z === 'object') {\n        return _dim(x);\n      }\n      return [x.length, y.length];\n    }\n    return [x.length];\n  }\n  return [];\n}\n\nfunction cloneV(x: any) {\n  const _n = x.length;\n  let i;\n  const ret = Array(_n);\n  for (i = _n - 1; i !== -1; --i) {\n    ret[i] = x[i];\n  }\n  return ret;\n}\n\nfunction clone(x: any) {\n  return typeof x !== 'object' ? x : _foreach2(x, dim(x), 0, cloneV);\n}\n\nfunction LU(A: any, fast: any) {\n  fast = fast || false;\n\n  let i, j, k, absAjk, Akk, Ak, Pk, Ai, max;\n  const n = A.length;\n  const n1 = n - 1;\n  const P = new Array(n);\n\n  if (!fast) {\n    A = clone(A);\n  }\n\n  for (k = 0; k < n; ++k) {\n    Pk = k;\n    Ak = A[k];\n    max = abs(Ak[k]);\n    for (j = k + 1; j < n; ++j) {\n      absAjk = abs(A[j][k]);\n      if (max < absAjk) {\n        max = absAjk;\n        Pk = j;\n      }\n    }\n    P[k] = Pk;\n\n    if (Pk !== k) {\n      A[k] = A[Pk];\n      A[Pk] = Ak;\n      Ak = A[k];\n    }\n\n    Akk = Ak[k];\n\n    for (i = k + 1; i < n; ++i) {\n      A[i][k] /= Akk;\n    }\n\n    for (i = k + 1; i < n; ++i) {\n      Ai = A[i];\n      for (j = k + 1; j < n1; ++j) {\n        Ai[j] -= Ai[k] * Ak[j];\n        ++j;\n        Ai[j] -= Ai[k] * Ak[j];\n      }\n      if (j === n1) {\n        Ai[j] -= Ai[k] * Ak[j];\n      }\n    }\n  }\n\n  return {\n    LU: A,\n    P: P,\n  };\n}\n\nfunction LUsolve(LUP: any, b: any) {\n  let i;\n  let j;\n  const lu = LUP.LU;\n  const n = lu.length;\n  const x = clone(b);\n  const P = LUP.P;\n  let Pi;\n  let LUi;\n  let tmp;\n\n  for (i = n - 1; i !== -1; --i) {\n    x[i] = b[i];\n  }\n  for (i = 0; i < n; ++i) {\n    Pi = P[i];\n    if (P[i] !== i) {\n      (tmp = x[i]), (x[i] = x[Pi]), (x[Pi] = tmp);\n    }\n    LUi = lu[i];\n    for (j = 0; j < i; ++j) {\n      x[i] -= x[j] * LUi[j];\n    }\n  }\n\n  for (i = n - 1; i >= 0; --i) {\n    LUi = lu[i];\n    for (j = i + 1; j < n; ++j) {\n      x[i] -= x[j] * LUi[j];\n    }\n    x[i] /= LUi[i];\n  }\n\n  return x;\n}\n\nfunction solve(A: any, b: any, fast: any) {\n  return LUsolve(LU(A, fast), b);\n}\n","import * as ColorUtil from './ColorUtil';\nimport * as MathUtil from './MathUtil';\nimport * as ModelUtil from './ModelUtil';\nimport * as TransformUtil from './TransformUtil';\nexport * from './Matrix';\nexport { ColorUtil, MathUtil, ModelUtil, TransformUtil };\nexport { Point } from './Point';\nexport { Rect } from './Rect';\n","export interface DemoInfo {\n  readonly id: string;\n  readonly title: string;\n}\n\nexport const DEMO_INFOS: ReadonlyArray<DemoInfo> = [\n  { id: 'playtopause', title: 'Play-to-pause' },\n  { id: 'searchtoclose', title: 'Search-to-close' },\n  { id: 'morphinganimals', title: 'Morphing animals' },\n  { id: 'visibilitystrike', title: 'Visibility strike' },\n  { id: 'heartbreak', title: 'Heart break' },\n];\n","import { Point } from 'app/modules/editor/scripts/common';\nimport * as $ from 'jquery';\n\nconst DRAG_SLOP_PIXELS = 4;\n\nexport class Dragger {\n  private readonly direction: Direction;\n  private readonly downX: number;\n  private readonly downY: number;\n  private readonly shouldSkipSlopCheck: boolean;\n  private readonly onBeginDragFn: (event: JQuery.Event) => void;\n  private readonly onDragFn: (event: JQuery.Event, point: Point) => void;\n  private readonly onDropFn: () => void;\n  private draggingCursor_: string;\n  private isDragging: boolean;\n  private draggingScrim: JQuery;\n\n  constructor(opts: ConstructorArgs = {}) {\n    this.direction = opts.direction || 'both';\n    this.downX = opts.downX;\n    this.downY = opts.downY;\n    this.shouldSkipSlopCheck = !!opts.shouldSkipSlopCheck;\n\n    this.onBeginDragFn = opts.onBeginDragFn || (() => {});\n    this.onDragFn = opts.onDragFn || (() => {});\n    this.onDropFn = opts.onDropFn || (() => {});\n\n    this.isDragging = false;\n    this.draggingScrim = undefined;\n\n    this.draggingCursor = opts.draggingCursor || 'grabbing';\n\n    const mouseMoveHandlerFn = (event: JQuery.Event) => {\n      if (!this.isDragging && this.shouldBeginDragging(event)) {\n        this.isDragging = true;\n        this.draggingScrim = this.buildDraggingScrim().appendTo(document.body);\n        this.draggingCursor = this.draggingCursor_;\n        this.onBeginDragFn(event);\n      }\n\n      if (this.isDragging) {\n        this.onDragFn(event, { x: event.clientX - this.downX, y: event.clientY - this.downY });\n      }\n    };\n\n    const mouseUpHandlerFn = (event: JQuery.Event) => {\n      $(window).off('mousemove', mouseMoveHandlerFn).off('mouseup', mouseUpHandlerFn);\n\n      if (this.isDragging) {\n        this.onDragFn(event, { x: event.clientX - this.downX, y: event.clientY - this.downY });\n\n        this.onDropFn();\n\n        this.draggingScrim.remove();\n        this.draggingScrim = undefined;\n        this.isDragging = false;\n\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n      }\n      return undefined;\n    };\n\n    $(window).on('mousemove', mouseMoveHandlerFn).on('mouseup', mouseUpHandlerFn);\n  }\n\n  private shouldBeginDragging(mouseMoveEvent: JQuery.Event) {\n    if (this.shouldSkipSlopCheck) {\n      return true;\n    }\n    let begin = false;\n    if (this.direction === 'both' || this.direction === 'horizontal') {\n      begin = begin || Math.abs(mouseMoveEvent.clientX - this.downX) > DRAG_SLOP_PIXELS;\n    }\n    if (this.direction === 'both' || this.direction === 'vertical') {\n      begin = begin || Math.abs(mouseMoveEvent.clientY - this.downY) > DRAG_SLOP_PIXELS;\n    }\n    return begin;\n  }\n\n  private set draggingCursor(cursor: string) {\n    if (cursor === 'grabbing') {\n      cursor = `-webkit-${cursor}`;\n    }\n\n    this.draggingCursor_ = cursor;\n    if (this.draggingScrim) {\n      this.draggingScrim.css({ cursor });\n    }\n  }\n\n  private buildDraggingScrim() {\n    return $('<div>').css({\n      position: 'fixed',\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0,\n      zIndex: 9999,\n    });\n  }\n}\n\ntype Direction = 'horizontal' | 'vertical' | 'both';\n\ninterface ConstructorArgs {\n  direction?: Direction;\n  downX?: number;\n  downY?: number;\n  shouldSkipSlopCheck?: boolean;\n  onBeginDragFn?: (event: JQuery.Event) => void;\n  onDragFn?: (event: JQuery.Event, point: Point) => void;\n  onDropFn?: () => void;\n  draggingCursor?: string;\n}\n","export { Dragger } from './Dragger';\n","import { INTERPOLATORS } from 'app/modules/editor/model/interpolators';\nimport {\n  ClipPathLayer,\n  GroupLayer,\n  Layer,\n  PathLayer,\n  VectorLayer,\n} from 'app/modules/editor/model/layers';\nimport { Animation, AnimationBlock, PathAnimationBlock } from 'app/modules/editor/model/timeline';\nimport * as _ from 'lodash';\n\nimport * as XmlSerializer from './XmlSerializer';\n\nconst XMLNS_NS = 'http://www.w3.org/2000/xmlns/';\nconst ANDROID_NS = 'http://schemas.android.com/apk/res/android';\nconst AAPT_NS = 'http://schemas.android.com/aapt';\n\n/**\n * Serializes a VectorLayer to a vector drawable XML string.\n */\nexport function toVectorDrawableXmlString(vl: VectorLayer) {\n  const xmlDoc = document.implementation.createDocument(undefined, 'vector', undefined);\n  const rootNode = xmlDoc.documentElement;\n  vectorLayerToXmlNode(vl, rootNode, xmlDoc);\n  return serializeXmlNode(rootNode);\n}\n\n/**\n * Serializes a given VectorLayer and Animation to an animatedvector drawable XML file.\n */\nexport function toAnimatedVectorDrawableXmlString(vl: VectorLayer, animation: Animation) {\n  const xmlDoc = document.implementation.createDocument(undefined, 'animated-vector', undefined);\n  const rootNode = xmlDoc.documentElement;\n  rootNode.setAttributeNS(XMLNS_NS, 'xmlns:android', ANDROID_NS);\n  rootNode.setAttributeNS(XMLNS_NS, 'xmlns:aapt', AAPT_NS);\n\n  // Create drawable node containing the vector layer.\n  const vectorLayerContainerNode = xmlDoc.createElementNS(AAPT_NS, 'aapt:attr');\n  vectorLayerContainerNode.setAttribute('name', 'android:drawable');\n  rootNode.appendChild(vectorLayerContainerNode);\n\n  const vectorLayerNode = xmlDoc.createElement('vector');\n  vectorLayerToXmlNode(vl, vectorLayerNode, xmlDoc, false);\n  vectorLayerContainerNode.appendChild(vectorLayerNode);\n\n  // create animation nodes (one per layer)\n  const animBlocksByLayer = new Map<string, AnimationBlock[]>();\n  animation.blocks.forEach(block => {\n    const blocks = animBlocksByLayer.get(block.layerId) || [];\n    blocks.push(block);\n    animBlocksByLayer.set(block.layerId, blocks);\n  });\n\n  animBlocksByLayer.forEach((blocksForLayer, layerId) => {\n    const targetNode = xmlDoc.createElement('target');\n    const layer = vl.findLayerById(layerId);\n    targetNode.setAttributeNS(ANDROID_NS, 'android:name', layer.name);\n    rootNode.appendChild(targetNode);\n\n    const animationNode = xmlDoc.createElementNS(AAPT_NS, 'aapt:attr');\n    animationNode.setAttribute('name', 'android:animation');\n    targetNode.appendChild(animationNode);\n\n    let blockContainerNode = animationNode;\n    if (blocksForLayer.length > 1) {\n      // <set> for multiple property animations on a single layer.\n      blockContainerNode = xmlDoc.createElement('set');\n      animationNode.appendChild(blockContainerNode);\n    }\n\n    const animatableProperties = layer.animatableProperties;\n\n    blocksForLayer.forEach(block => {\n      const blockNode = xmlDoc.createElement('objectAnimator');\n      blockNode.setAttributeNS(ANDROID_NS, 'android:propertyName', block.propertyName);\n      conditionalAttrFn(blockNode, 'android:startOffset', block.startTime, 0);\n      conditionalAttrFn(blockNode, 'android:duration', block.endTime - block.startTime);\n      if (block instanceof PathAnimationBlock) {\n        const fromPath = block.fromValue;\n        const toPath = block.toValue;\n        conditionalAttrFn(blockNode, 'android:valueFrom', fromPath ? fromPath.getPathString() : '');\n        conditionalAttrFn(blockNode, 'android:valueTo', toPath ? toPath.getPathString() : '');\n      } else {\n        conditionalAttrFn(blockNode, 'android:valueFrom', block.fromValue);\n        conditionalAttrFn(blockNode, 'android:valueTo', block.toValue);\n      }\n      conditionalAttrFn(\n        blockNode,\n        'android:valueType',\n        animatableProperties.get(block.propertyName).getAnimatorValueType(),\n      );\n      const interpolator = _.find(INTERPOLATORS, i => i.value === block.interpolator);\n      conditionalAttrFn(blockNode, 'android:interpolator', interpolator.androidRef);\n      blockContainerNode.appendChild(blockNode);\n    });\n  });\n  return serializeXmlNode(rootNode);\n}\n\n/**\n * Helper method that serializes an VectorLayer to a destinationNode in an xmlDoc.\n * The destinationNode should be a <vector> node.\n */\nfunction vectorLayerToXmlNode(\n  vl: VectorLayer,\n  destinationNode: any,\n  xmlDoc: any,\n  withAndroidNs = true,\n) {\n  if (withAndroidNs) {\n    destinationNode.setAttributeNS(XMLNS_NS, 'xmlns:android', ANDROID_NS);\n  }\n  conditionalAttrFn(destinationNode, 'android:name', vl.name);\n  destinationNode.setAttributeNS(ANDROID_NS, 'android:width', `${vl.width}dp`);\n  destinationNode.setAttributeNS(ANDROID_NS, 'android:height', `${vl.height}dp`);\n  destinationNode.setAttributeNS(ANDROID_NS, 'android:viewportWidth', `${vl.width}`);\n  destinationNode.setAttributeNS(ANDROID_NS, 'android:viewportHeight', `${vl.height}`);\n  conditionalAttrFn(destinationNode, 'android:alpha', vl.alpha, 1);\n\n  walk(\n    vl,\n    (layer: any, parentNode: any) => {\n      if (layer instanceof VectorLayer) {\n        return parentNode;\n      } else if (layer instanceof PathLayer) {\n        const node = xmlDoc.createElement('path');\n        const path = layer.pathData;\n        conditionalAttrFn(node, 'android:name', layer.name);\n        conditionalAttrFn(node, 'android:pathData', path ? path.getPathString() : '');\n        conditionalAttrFn(node, 'android:fillColor', layer.fillColor, '');\n        conditionalAttrFn(node, 'android:fillAlpha', layer.fillAlpha, 1);\n        conditionalAttrFn(node, 'android:strokeColor', layer.strokeColor, '');\n        conditionalAttrFn(node, 'android:strokeAlpha', layer.strokeAlpha, 1);\n        conditionalAttrFn(node, 'android:strokeWidth', layer.strokeWidth, 0);\n        conditionalAttrFn(node, 'android:trimPathStart', layer.trimPathStart, 0);\n        conditionalAttrFn(node, 'android:trimPathEnd', layer.trimPathEnd, 1);\n        conditionalAttrFn(node, 'android:trimPathOffset', layer.trimPathOffset, 0);\n        conditionalAttrFn(node, 'android:strokeLineCap', layer.strokeLinecap, 'butt');\n        conditionalAttrFn(node, 'android:strokeLineJoin', layer.strokeLinejoin, 'miter');\n        conditionalAttrFn(node, 'android:strokeMiterLimit', layer.strokeMiterLimit, 4);\n        conditionalAttrFn(node, 'android:fillType', layer.fillType, 'nonZero');\n        parentNode.appendChild(node);\n        return parentNode;\n      } else if (layer instanceof ClipPathLayer) {\n        const node = xmlDoc.createElement('clip-path');\n        const path = layer.pathData;\n        conditionalAttrFn(node, 'android:name', layer.name);\n        conditionalAttrFn(node, 'android:pathData', path ? path.getPathString() : '');\n        parentNode.appendChild(node);\n        return parentNode;\n      } else if (layer instanceof GroupLayer) {\n        const node = xmlDoc.createElement('group');\n        conditionalAttrFn(node, 'android:name', layer.name);\n        conditionalAttrFn(node, 'android:pivotX', layer.pivotX, 0);\n        conditionalAttrFn(node, 'android:pivotY', layer.pivotY, 0);\n        conditionalAttrFn(node, 'android:translateX', layer.translateX, 0);\n        conditionalAttrFn(node, 'android:translateY', layer.translateY, 0);\n        conditionalAttrFn(node, 'android:scaleX', layer.scaleX, 1);\n        conditionalAttrFn(node, 'android:scaleY', layer.scaleY, 1);\n        conditionalAttrFn(node, 'android:rotation', layer.rotation, 0);\n        parentNode.appendChild(node);\n        return node;\n      }\n    },\n    destinationNode,\n  );\n}\n\nfunction conditionalAttrFn(node: any, attr: any, value: any, skipValue?: any) {\n  if (!_.isNil(value) && (skipValue === undefined || value !== skipValue)) {\n    node.setAttributeNS(ANDROID_NS, attr, value);\n  }\n}\n\nfunction serializeXmlNode(xmlNode: any) {\n  return XmlSerializer.serializeToString(xmlNode, { indent: 4, multiAttributeIndent: 4 });\n}\n\nfunction walk(layer: VectorLayer, fn: any, context: any) {\n  const visitFn = (l: Layer, ctx: any) => {\n    const childCtx = fn(l, ctx);\n    if (l.children) {\n      l.children.forEach(child => visitFn(child, childCtx));\n    }\n  };\n  visitFn(layer, context);\n}\n","import { VectorLayer } from 'app/modules/editor/model/layers';\nimport { Animation } from 'app/modules/editor/model/timeline';\nimport { AnimationRenderer } from 'app/modules/editor/scripts/animator';\nimport { optimizeSvg } from 'app/modules/editor/scripts/svgo';\n\nimport * as SvgSerializer from './SvgSerializer';\n\nexport function createHtml(svgFileName: string, cssFileName: string) {\n  return `<html>\n<head>\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"${cssFileName}\"/>\n</head>\n<body>\n  <div class=\"shapeshifter play\" style=\"background-image: url(${svgFileName})\"></div>\n</body>\n</html>\n`;\n}\n\nexport function createCss(width: number, height: number, duration: number, numSteps: number) {\n  return (\n    createKeyframes(width, numSteps) +\n    `\n.shapeshifter {\n  animation-duration: ${duration}ms;\n  animation-timing-function: steps(${numSteps});\n  width: ${width}px;\n  height: ${height}px;\n  background-repeat: no-repeat;\n}\n.shapeshifter.play {\n  animation-name: play${numSteps};\n}\n`\n  );\n}\n\nfunction createKeyframes(width: number, numSteps: number) {\n  return `@keyframes play${numSteps} {\n  0% {\n    background-position: 0px 0px;\n  }\n  100% {\n    background-position: -${numSteps * width}px 0px;\n  }\n}`;\n}\n\nexport function createSvgFrames(vectorLayer: VectorLayer, animation: Animation, numSteps: number) {\n  const renderer = new AnimationRenderer(vectorLayer, animation);\n  const svgs: string[] = [];\n  const { width, height } = vectorLayer;\n  for (let i = 0; i <= numSteps; i++) {\n    const time = (i / numSteps) * animation.duration;\n    svgs.push(SvgSerializer.toSvgString(renderer.setCurrentTime(time), width, height));\n  }\n  return svgs;\n}\n\nexport function createSvgSprite(vectorLayer: VectorLayer, animation: Animation, numSteps: number) {\n  const renderer = new AnimationRenderer(vectorLayer, animation);\n  const svgs: string[] = [];\n  const { width, height } = vectorLayer;\n  for (let i = 0; i <= numSteps; i++) {\n    const time = (i / numSteps) * animation.duration;\n    const vl = renderer.setCurrentTime(time);\n    svgs.push(SvgSerializer.toSvgSpriteFrameString(vl, width * i, 0, i.toString()));\n  }\n  const totalWidth = width * numSteps + width;\n  const svg =\n    `<svg xmlns=\"http://www.w3.org/2000/svg\" ` +\n    `viewBox=\"0 0 ${totalWidth} ${height}\" width=\"${totalWidth}\" height=\"${height}\">\n${svgs.join('\\n')}\n</svg>\n`;\n  return optimizeSvg(svg, false);\n}\n","import {\n  ClipPathLayer,\n  GroupLayer,\n  Layer,\n  LayerUtil,\n  PathLayer,\n  VectorLayer,\n} from 'app/modules/editor/model/layers';\nimport { ColorUtil } from 'app/modules/editor/scripts/common';\nimport * as _ from 'lodash';\n\nimport * as XmlSerializer from './XmlSerializer';\n\nconst XMLNS_NS = 'http://www.w3.org/2000/xmlns/';\nconst SVG_NS = 'http://www.w3.org/2000/svg';\n\n/**\n * Serializes an VectorLayer to a SVG string.\n */\nexport function toSvgString(vl: VectorLayer, width?: number, height?: number) {\n  const xmlDoc = document.implementation.createDocument(undefined, 'svg', undefined);\n  const rootNode = xmlDoc.documentElement;\n  rootNode.setAttributeNS(XMLNS_NS, 'xmlns', SVG_NS);\n  rootNode.setAttributeNS(undefined, 'viewBox', `0 0 ${vl.width} ${vl.height}`);\n  vectorLayerToSvgNode(vl, rootNode, xmlDoc);\n  if (width !== undefined) {\n    rootNode.setAttributeNS(undefined, 'width', width.toString());\n  }\n  if (height !== undefined) {\n    rootNode.setAttributeNS(undefined, 'height', height.toString());\n  }\n  return serializeXmlNode(rootNode);\n}\n\nexport function toSvgSpriteFrameString(\n  vectorLayer: VectorLayer,\n  translateX = 0,\n  translateY = 0,\n  frameNumber = '',\n) {\n  const xmlDoc = document.implementation.createDocument(undefined, 'g', undefined);\n  const rootNode = xmlDoc.documentElement;\n  vectorLayerToSvgNode(vectorLayer, rootNode, xmlDoc, false, frameNumber);\n  rootNode.setAttributeNS(undefined, 'transform', `translate(${translateX}, ${translateY})`);\n  return serializeXmlNode(rootNode);\n}\n\n/**\n * Helper method that serializes a VectorLayer to a destinationNode in an xmlDoc.\n * The destinationNode should be a <vector> node.\n */\nfunction vectorLayerToSvgNode(\n  vl: VectorLayer,\n  destinationNode: HTMLElement,\n  xmlDoc: Document,\n  withIds = true,\n  frameNumber = '',\n) {\n  // Create a map where the keys are ClipPathLayer IDs and the values\n  // are their associated path data strings.\n  const clipPathToPathDataMap = new Map<string, string>();\n  // Create a map where the keys are non-ClipPathLayer IDs and the values are\n  // the in-order list of ClipPathLayers that are clipping the layer (nearest\n  // ClipPathLayer appears in the list last).\n  const clippedLayerToSeenClipPathsMap = new Map<string, ReadonlyArray<string>>();\n  (function recurseFn(layer: Layer) {\n    interface Entry {\n      readonly layer: Layer;\n      readonly seenClipPaths: ReadonlyArray<ClipPathLayer>;\n    }\n    layer.children\n      .reduce(\n        (acc: ReadonlyArray<Entry>, curr) => {\n          const seenClipPaths = acc.length ? [..._.last(acc).seenClipPaths] : [];\n          // Ignore clip paths with empty path data strings.\n          if (curr instanceof ClipPathLayer && curr.pathData && curr.pathData.getPathString()) {\n            clipPathToPathDataMap.set(curr.id, curr.pathData.getPathString());\n            seenClipPaths.push(curr);\n          }\n          return [...acc, { layer: curr, seenClipPaths }];\n        },\n        [] as ReadonlyArray<Entry>,\n      )\n      .filter(({ layer: l, seenClipPaths }) => {\n        // Keep the entry if the key isn't a ClipPathLayer and its\n        // associated list of seen clip paths isn't empty.\n        return !(l instanceof ClipPathLayer) && seenClipPaths.length > 0;\n      })\n      .map(({ layer: l, seenClipPaths }) => {\n        return { layerId: l.id, seenClipPaths: seenClipPaths.map(({ id }) => id) };\n      })\n      .forEach(({ layerId, seenClipPaths }) => {\n        clippedLayerToSeenClipPathsMap.set(layerId, seenClipPaths);\n      });\n    layer.children.forEach(recurseFn);\n  })(vl);\n\n  // Create a map where the keys are non-ClipPathLayer IDs and the values are the\n  // clip path names they should use when referencing the clip-path.\n  const clippedLayerToClipPathNameMap = new Map<string, string>();\n  clippedLayerToSeenClipPathsMap.forEach((seenClipPaths, layerId) => {\n    const frameInfo = frameNumber ? `_frame${frameNumber}` : '';\n    const layerInfo = `_${vl.findLayerById(layerId).name}`;\n    const clipPathName = `clip${frameInfo}${layerInfo}`;\n    clippedLayerToClipPathNameMap.set(layerId, clipPathName);\n  });\n\n  const shouldCreateDefs = clippedLayerToSeenClipPathsMap.size > 0;\n  if (shouldCreateDefs) {\n    const defsNode = xmlDoc.createElement('defs');\n    clippedLayerToSeenClipPathsMap.forEach((seenClipPaths, layerId) => {\n      const clipPathName = clippedLayerToClipPathNameMap.get(layerId);\n      seenClipPaths.forEach((id, i) => {\n        const clipPathNode = xmlDoc.createElement('clipPath');\n        conditionalAttr(clipPathNode, 'id', clipPathName + (i ? '_' + i : ''));\n        const pathNode = xmlDoc.createElement('path');\n        conditionalAttr(pathNode, 'd', clipPathToPathDataMap.get(id));\n        if (i + 1 < seenClipPaths.length) {\n          // Build the intersection of all seen clip paths.\n          const nextClipPathName = clipPathName + '_' + (i + 1);\n          conditionalAttr(pathNode, 'clip-path', `url(#${nextClipPathName})`);\n        }\n        clipPathNode.appendChild(pathNode);\n        defsNode.appendChild(clipPathNode);\n      });\n    });\n    destinationNode.appendChild(defsNode);\n  }\n\n  const isLayerBeingClippedFn = (layerId: string) => clippedLayerToClipPathNameMap.has(layerId);\n  const maybeSetClipPathForLayerFn = (node: HTMLElement, layerId: string) => {\n    if (isLayerBeingClippedFn(layerId)) {\n      conditionalAttr(node, 'clip-path', `url(#${clippedLayerToClipPathNameMap.get(layerId)})`);\n    }\n  };\n\n  walk(\n    vl,\n    (layer: VectorLayer | GroupLayer | PathLayer, parentNode: Node) => {\n      if (layer instanceof VectorLayer) {\n        if (withIds) {\n          conditionalAttr(destinationNode, 'id', vl.name, '');\n        }\n        conditionalAttr(destinationNode, 'opacity', vl.alpha, 1);\n        return parentNode;\n      }\n      if (layer instanceof PathLayer) {\n        const { pathData } = layer;\n        if (!pathData || !pathData.getPathString()) {\n          return undefined;\n        }\n        const node = xmlDoc.createElement('path');\n        if (withIds) {\n          conditionalAttr(node, 'id', layer.name);\n        }\n        maybeSetClipPathForLayerFn(node, layer.id);\n        conditionalAttr(node, 'd', pathData.getPathString());\n        if (layer.fillColor) {\n          conditionalAttr(node, 'fill', ColorUtil.androidToCssHexColor(layer.fillColor), '');\n        } else {\n          conditionalAttr(node, 'fill', 'none');\n        }\n        conditionalAttr(node, 'fill-opacity', layer.fillAlpha, 1);\n        if (layer.strokeColor) {\n          conditionalAttr(node, 'stroke', ColorUtil.androidToCssHexColor(layer.strokeColor), '');\n        }\n        conditionalAttr(node, 'stroke-opacity', layer.strokeAlpha, 1);\n        conditionalAttr(node, 'stroke-width', layer.strokeWidth, 0);\n\n        if (layer.trimPathStart !== 0 || layer.trimPathEnd !== 1 || layer.trimPathOffset !== 0) {\n          const flattenedTransform = LayerUtil.getCanvasTransformForLayer(vl, layer.id);\n          const { a, d } = flattenedTransform;\n          // Note that we only return the length of the first sub path due to\n          // https://code.google.com/p/android/issues/detail?id=172547\n          let pathLength: number;\n          if (Math.abs(a) !== 1 || Math.abs(d) !== 1) {\n            // Then recompute the scaled path length.\n            pathLength = pathData\n              .mutate()\n              .transform(flattenedTransform)\n              .build()\n              .getSubPathLength(0);\n          } else {\n            pathLength = pathData.getSubPathLength(0);\n          }\n          const strokeDashArray = LayerUtil.toStrokeDashArray(\n            layer.trimPathStart,\n            layer.trimPathEnd,\n            layer.trimPathOffset,\n            pathLength,\n          ).join(',');\n          const strokeDashOffset = LayerUtil.toStrokeDashOffset(\n            layer.trimPathStart,\n            layer.trimPathEnd,\n            layer.trimPathOffset,\n            pathLength,\n          ).toString();\n          conditionalAttr(node, 'stroke-dasharray', strokeDashArray);\n          conditionalAttr(node, 'stroke-dashoffset', strokeDashOffset);\n        }\n\n        conditionalAttr(node, 'stroke-linecap', layer.strokeLinecap, 'butt');\n        conditionalAttr(node, 'stroke-linejoin', layer.strokeLinejoin, 'miter');\n        conditionalAttr(node, 'stroke-miterlimit', layer.strokeMiterLimit, 4);\n        const fillRule = !layer.fillType || layer.fillType === 'nonZero' ? 'nonzero' : 'evenodd';\n        conditionalAttr(node, 'fill-rule', fillRule, 'nonzero');\n        parentNode.appendChild(node);\n        return parentNode;\n      }\n      if (layer instanceof GroupLayer) {\n        const node = xmlDoc.createElement('g');\n        if (withIds) {\n          conditionalAttr(node, 'id', layer.name);\n        }\n        const transformValues: string[] = [];\n        if (layer.translateX || layer.translateY) {\n          transformValues.push(`translate(${layer.translateX} ${layer.translateY})`);\n        }\n        if (layer.rotation) {\n          transformValues.push(`rotate(${layer.rotation} ${layer.pivotX} ${layer.pivotY})`);\n        }\n        if (layer.scaleX !== 1 || layer.scaleY !== 1) {\n          if (layer.pivotX || layer.pivotY) {\n            transformValues.push(`translate(${layer.pivotX} ${layer.pivotY})`);\n          }\n          transformValues.push(`scale(${layer.scaleX} ${layer.scaleY})`);\n          if (layer.pivotX || layer.pivotY) {\n            transformValues.push(`translate(${-layer.pivotX} ${-layer.pivotY})`);\n          }\n        }\n        let nodeToAttachToParent = node;\n        if (transformValues.length) {\n          node.setAttributeNS(undefined, 'transform', transformValues.join(' '));\n          if (isLayerBeingClippedFn(layer.id)) {\n            // Create a wrapper node so that the clip-path is applied before the transformations.\n            const wrapperNode = xmlDoc.createElement('g');\n            wrapperNode.appendChild(node);\n            nodeToAttachToParent = wrapperNode;\n          }\n        }\n        maybeSetClipPathForLayerFn(nodeToAttachToParent, layer.id);\n        parentNode.appendChild(nodeToAttachToParent);\n        return node;\n      }\n      return undefined;\n    },\n    destinationNode,\n  );\n}\n\nfunction conditionalAttr(\n  node: HTMLElement,\n  attr: string,\n  value: string | number,\n  skipValue?: string | number,\n) {\n  if (!_.isNil(value) && (skipValue === undefined || value !== skipValue)) {\n    node.setAttributeNS(undefined, attr, value.toString());\n  }\n}\n\nfunction serializeXmlNode(xmlNode: HTMLElement) {\n  return XmlSerializer.serializeToString(xmlNode, { indent: 4, multiAttributeIndent: 4 });\n}\n\nfunction walk(layer: VectorLayer, fn: (layer: Layer, ctx: Node) => Node, context: Node) {\n  const visitFn = (l: Layer, ctx: Node) => {\n    const childCtx = fn(l, ctx);\n    if (l.children) {\n      l.children.forEach(child => visitFn(child, childCtx));\n    }\n  };\n  visitFn(layer, context);\n}\n","export function serializeToString(node: any, options: any): string {\n  options = options || {};\n  options.rootNode = true;\n  return removeInvalidCharacters(nodeTreeToXHTML(node, options));\n}\n\nfunction removeInvalidCharacters(content: string) {\n  // See http://www.w3.org/TR/xml/#NT-Char for valid XML 1.0 characters.\n  return content.replace(/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F]/g, '');\n}\n\nfunction serializeAttributeValue(value: string) {\n  return value\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&apos;');\n}\n\nfunction serializeTextContent(content: string) {\n  return content\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n}\n\nfunction serializeAttribute(attr: any) {\n  const value = attr.value;\n  return attr.name + '=\"' + serializeAttributeValue(value) + '\"';\n}\n\nfunction getTagName(node: Element) {\n  let tagName = node.tagName;\n\n  // Aid in serializing of original HTML documents.\n  if (node.namespaceURI === 'http://www.w3.org/1999/xhtml') {\n    tagName = tagName.toLowerCase();\n  }\n  return tagName;\n}\n\nfunction serializeNamespace(node: any, options: any) {\n  const nodeHasXmlnsAttr =\n    Array.prototype.map\n      .call(node.attributes || node.attrs, (attr: any) => {\n        return attr.name;\n      })\n      .indexOf('xmlns') >= 0;\n\n  // Serialize the namespace as an xmlns attribute whenever the element\n  // doesn't already have one and the inherited namespace does not match\n  // the element's namespace.\n  if (\n    !nodeHasXmlnsAttr &&\n    node.namespaceURI &&\n    options.isRootNode /* ||\n         node.namespaceURI !== node.parentNode.namespaceURI*/\n  ) {\n    return ' xmlns=\"' + node.namespaceURI + '\"';\n  }\n  return '';\n}\n\nfunction serializeChildren(node: Element, options: any) {\n  return Array.prototype.map\n    .call(node.childNodes, (childNode: any) => {\n      return nodeTreeToXHTML(childNode, options);\n    })\n    .join('');\n}\n\nfunction serializeTag(node: any, options: any) {\n  let output = '';\n  if (options.indent && options._indentLevel) {\n    output += Array(options._indentLevel * options.indent + 1).join(' ');\n  }\n  output += '<' + getTagName(node);\n  output += serializeNamespace(node, options.isRootNode);\n\n  const attributes = node.attributes || node.attrs;\n  Array.prototype.forEach.call(attributes, (attr: any) => {\n    if (options.multiAttributeIndent && attributes.length > 1) {\n      output += '\\n';\n      output += Array(\n        (options._indentLevel || 0) * options.indent + options.multiAttributeIndent + 1,\n      ).join(' ');\n    } else {\n      output += ' ';\n    }\n    output += serializeAttribute(attr);\n  });\n\n  if (node.childNodes.length > 0) {\n    output += '>';\n    if (options.indent) {\n      output += '\\n';\n    }\n    options.isRootNode = false;\n    options._indentLevel = (options._indentLevel || 0) + 1;\n    output += serializeChildren(node, options);\n    --options._indentLevel;\n    if (options.indent && options._indentLevel) {\n      output += Array(options._indentLevel * options.indent + 1).join(' ');\n    }\n    output += '</' + getTagName(node) + '>';\n  } else {\n    output += '/>';\n  }\n  if (options.indent) {\n    output += '\\n';\n  }\n  return output;\n}\n\nfunction serializeText(node: any) {\n  const text = node.nodeValue || node.value || '';\n  return serializeTextContent(text);\n}\n\nfunction serializeComment(node: any) {\n  return '<!--' + node.data.replace(/-/g, '&#45;') + '-->';\n}\n\nfunction serializeCDATA(node: Element) {\n  return '<![CDATA[' + node.nodeValue + ']]>';\n}\n\nfunction nodeTreeToXHTML(node: Element, options: any) {\n  if (node.nodeName === '#document' || node.nodeName === '#document-fragment') {\n    return serializeChildren(node, options);\n  } else {\n    if (node.tagName) {\n      return serializeTag(node, options);\n    } else if (node.nodeName === '#text') {\n      return serializeText(node);\n    } else if (node.nodeName === '#comment') {\n      return serializeComment(node);\n    } else if (node.nodeName === '#cdata-section') {\n      return serializeCDATA(node);\n    }\n  }\n}\n","import * as AvdSerializer from './AvdSerializer';\nimport * as SpriteSerializer from './SpriteSerializer';\nimport * as SvgSerializer from './SvgSerializer';\nexport { AvdSerializer, SpriteSerializer, SvgSerializer };\n","import {\n  ClipPathLayer,\n  FillType,\n  GroupLayer,\n  Layer,\n  LayerUtil,\n  PathLayer,\n  StrokeLineCap,\n  StrokeLineJoin,\n  VectorLayer,\n} from 'app/modules/editor/model/layers';\nimport { Path } from 'app/modules/editor/model/paths';\nimport { NameProperty } from 'app/modules/editor/model/properties';\nimport { ColorUtil, MathUtil, Matrix } from 'app/modules/editor/scripts/common';\nimport { optimizeSvg } from 'app/modules/editor/scripts/svgo';\nimport * as _ from 'lodash';\n\n// TODO: trim ids/strings?\n// TODO: check for invalid enum values\n\n/**\n * Utility function that takes an SVG string as input and\n * returns a VectorLayer model object.\n */\nexport function loadVectorLayerFromSvgString(\n  svgString: string,\n  doesNameExistFn: (name: string) => boolean,\n) {\n  return optimizeSvg(svgString).then(optimizedSvgString => {\n    return new Promise<VectorLayer>((resolve, reject) => {\n      if (!optimizedSvgString) {\n        reject();\n        return;\n      }\n      resolve(loadVectorLayerFromSvgStringInternal(optimizedSvgString, doesNameExistFn));\n    });\n  });\n}\n\n// TODO: give better error message when user attempts to import SVG w/o a namespace declaration\nfunction loadVectorLayerFromSvgStringInternal(\n  svgString: string,\n  doesNameExistFn: (name: string) => boolean,\n): VectorLayer {\n  const usedIds = new Set<string>();\n  const makeFinalNodeIdFn = (nodeId: string, prefix: string) => {\n    const finalName = LayerUtil.getUniqueName(\n      NameProperty.sanitize(nodeId || prefix),\n      name => doesNameExistFn(name) || usedIds.has(name),\n    );\n    usedIds.add(finalName);\n    return finalName;\n  };\n\n  const parser = new DOMParser();\n  const { documentElement } = parser.parseFromString(svgString, 'image/svg+xml');\n  if (!isSvgNode(documentElement)) {\n    return undefined;\n  }\n\n  // TODO: handle clipPaths that have children path elements with clip-path attributes\n  // TODO: handle clipPaths with clipPathUnits=\"objectBoundingBox\"\n  // TODO: confirm that clipPath transforms (and any referenced transforms) are handled correctly\n  const clipPathMap = _.mapValues(buildPathInfosMap(documentElement), infos => {\n    return infos.map(info => info.path);\n  });\n\n  const nodeToLayerFn = (node: Element, transforms: ReadonlyArray<Matrix>): Layer => {\n    if (\n      !node ||\n      node.nodeType === Node.TEXT_NODE ||\n      node.nodeType === Node.COMMENT_NODE ||\n      node instanceof SVGDefsElement ||\n      node instanceof SVGUseElement\n    ) {\n      return undefined;\n    }\n\n    const nodeTransforms = getNodeTransforms(node as SVGGraphicsElement);\n    transforms = [...transforms, ...nodeTransforms];\n    const flattenedTransforms = Matrix.flatten(transforms);\n\n    // Get the referenced clip-path ID, if one exists.\n    const refClipPathId = getReferencedClipPathId(node);\n\n    const maybeWrapClipPathInGroupFn = (layer: Layer) => {\n      if (!refClipPathId) {\n        return layer;\n      }\n      const paths = (clipPathMap[refClipPathId] || []).map(p => {\n        return new Path(\n          p\n            .mutate()\n            .transform(flattenedTransforms)\n            .build()\n            .getPathString(),\n        );\n      });\n      if (!paths.length) {\n        // If the clipPath has no children, then clip the entire layer.\n        paths.push(new Path('M 0 0 Z'));\n      }\n      const groupChildren: Layer[] = paths.map(p => {\n        return new ClipPathLayer({\n          name: makeFinalNodeIdFn(refClipPathId, 'mask'),\n          pathData: p,\n          children: [],\n        });\n      });\n      groupChildren.push(layer);\n      return new GroupLayer({\n        name: makeFinalNodeIdFn('wrapper', 'group'),\n        children: groupChildren,\n      });\n    };\n\n    if (node instanceof SVGPathElement && node.getAttribute('d')) {\n      const path = node.getAttribute('d');\n      const attrMap: Dictionary<any> = {};\n      const simpleAttrFn = (nodeAttr: string, contextAttr: string) => {\n        if (node.hasAttribute(nodeAttr)) {\n          attrMap[contextAttr] = node.getAttribute(nodeAttr);\n        }\n      };\n\n      simpleAttrFn('stroke', 'strokeColor');\n      simpleAttrFn('stroke-width', 'strokeWidth');\n      simpleAttrFn('stroke-linecap', 'strokeLinecap');\n      simpleAttrFn('stroke-linejoin', 'strokeLinejoin');\n      simpleAttrFn('stroke-miterlimit', 'strokeMiterLimit');\n      simpleAttrFn('stroke-opacity', 'strokeAlpha');\n      simpleAttrFn('fill', 'fillColor');\n      simpleAttrFn('fill-opacity', 'fillAlpha');\n      simpleAttrFn('fill-rule', 'fillType');\n\n      // Set the default values as specified by the SVG spec. Note that some of these default\n      // values are different than the default values used by VectorDrawables.\n      const fillColor =\n        'fillColor' in attrMap ? ColorUtil.svgToAndroidColor(attrMap['fillColor']) : '#000';\n      const strokeColor =\n        'strokeColor' in attrMap ? ColorUtil.svgToAndroidColor(attrMap['strokeColor']) : undefined;\n      const fillAlpha = 'fillAlpha' in attrMap ? Number(attrMap['fillAlpha']) : 1;\n      let strokeWidth = 'strokeWidth' in attrMap ? Number(attrMap['strokeWidth']) : 1;\n      const strokeAlpha = 'strokeAlpha' in attrMap ? Number(attrMap['strokeAlpha']) : 1;\n      const strokeLinecap: StrokeLineCap =\n        'strokeLinecap' in attrMap ? attrMap['strokeLinecap'] : 'butt';\n      const strokeLinejoin: StrokeLineJoin =\n        'strokeLinejoin' in attrMap ? attrMap['strokeLinecap'] : 'miter';\n      const strokeMiterLimit =\n        'strokeMiterLimit' in attrMap ? Number(attrMap['strokeMiterLimit']) : 4;\n      const fillRuleToFillTypeFn = (fillRule: string) => {\n        return fillRule === 'evenodd' ? 'evenOdd' : 'nonZero';\n      };\n      const fillType: FillType =\n        'fillType' in attrMap ? fillRuleToFillTypeFn(attrMap['fillType']) : 'nonZero';\n\n      let pathData = new Path(path);\n      if (transforms.length) {\n        pathData = new Path(\n          pathData\n            .mutate()\n            .transform(flattenedTransforms)\n            .build()\n            .getPathString(),\n        );\n        strokeWidth = MathUtil.round(strokeWidth * flattenedTransforms.getScaleFactor());\n      }\n      // TODO: make best effort attempt to restore trimPath{Start,End,Offset}\n      return maybeWrapClipPathInGroupFn(\n        new PathLayer({\n          id: _.uniqueId(),\n          name: makeFinalNodeIdFn(node.getAttribute('id'), 'path'),\n          children: [],\n          pathData,\n          fillColor,\n          fillAlpha,\n          strokeColor,\n          strokeAlpha,\n          strokeWidth,\n          strokeLinecap,\n          strokeLinejoin,\n          strokeMiterLimit,\n          fillType,\n        }),\n      );\n    }\n\n    // TODO: we should *not* iterate over a clip path's children here...\n    if (node.childNodes) {\n      const children: Layer[] = [];\n      for (let i = 0; i < node.childNodes.length; i++) {\n        const child = node.childNodes.item(i) as Element;\n        const layer = nodeToLayerFn(child, transforms);\n        if (layer) {\n          children.push(layer);\n        }\n      }\n      return maybeWrapClipPathInGroupFn(\n        new GroupLayer({\n          id: _.uniqueId(),\n          name: makeFinalNodeIdFn(node.getAttribute('id'), 'group'),\n          children,\n        }),\n      );\n    }\n    return undefined;\n  };\n\n  const toNumberFn = (num: any) => (num === undefined ? undefined : Number(num));\n  let width = toNumberFn(svgLengthToPx(documentElement.width) || undefined);\n  let height = toNumberFn(svgLengthToPx(documentElement.height) || undefined);\n  const alpha = toNumberFn(documentElement.getAttribute('opacity') || undefined);\n\n  const rootTransforms: Matrix[] = [];\n  const { viewBox } = documentElement;\n  if (viewBox && (!!viewBox.baseVal.width || !!viewBox.baseVal.height)) {\n    width = viewBox.baseVal.width;\n    height = viewBox.baseVal.height;\n\n    // Fake a translate transform for the viewbox.\n    rootTransforms.push(Matrix.translation(-viewBox.baseVal.x, -viewBox.baseVal.y));\n  }\n  const rootLayer = nodeToLayerFn(documentElement, rootTransforms);\n  return new VectorLayer({\n    id: _.uniqueId(),\n    name: makeFinalNodeIdFn(documentElement.getAttribute('id'), 'vector'),\n    children: rootLayer ? rootLayer.children : undefined,\n    width,\n    height,\n    alpha,\n  });\n}\n\nfunction svgLengthToPx(svgLength: any) {\n  if (!svgLength) {\n    return 0;\n  }\n  if (svgLength.baseVal) {\n    svgLength = svgLength.baseVal;\n  }\n  svgLength.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);\n  return svgLength.valueInSpecifiedUnits;\n}\n\nfunction isSvgNode(node: Element): node is SVGSVGElement {\n  return node.nodeName === 'svg';\n}\n\n/**\n * Returns a list of transform matricies assigned to the specified node.\n */\nfunction getNodeTransforms(node: SVGGraphicsElement) {\n  if (!node.transform) {\n    return [];\n  }\n  const transformList = node.transform.baseVal;\n  const matrices: Matrix[] = [];\n  for (let i = 0; i < transformList.numberOfItems; i++) {\n    const { a, b, c, d, e, f } = transformList.getItem(i).matrix;\n    matrices.push(new Matrix(a, b, c, d, e, f));\n  }\n  return matrices;\n}\n\n/**\n * Returns the name of the referenced ID assigned to the clip-path attribute,\n * if one exists.\n */\nfunction getReferencedClipPathId(node: Element) {\n  if (!node.getAttribute('clip-path')) {\n    return undefined;\n  }\n  const clipPathAttr = node.getAttribute('clip-path').trim();\n  if (!clipPathAttr || !clipPathAttr.startsWith('url(#')) {\n    return undefined;\n  }\n  const endParenIndex = clipPathAttr.indexOf(')');\n  if (endParenIndex !== clipPathAttr.length - 1) {\n    return undefined;\n  }\n  return clipPathAttr.slice('url(#'.length, endParenIndex);\n}\n\ninterface PathInfo {\n  readonly path: Path;\n  readonly refClipPathId?: string;\n}\n\ninterface ClipPathInfo {\n  readonly pathInfos: ReadonlyArray<PathInfo>;\n  readonly refClipPathId?: string;\n}\n\n/**\n * Builds a map of clip path IDs to their corresponding clip path nodes.\n */\nfunction buildClipPathIdMap(rootNode: Element) {\n  const clipPathIdMap: Dictionary<SVGClipPathElement> = {};\n  (function recurseFn(node: Element) {\n    if (node instanceof SVGClipPathElement) {\n      const clipPathId = node.getAttribute('id');\n      if (clipPathId) {\n        clipPathIdMap[clipPathId] = node;\n      }\n      return;\n    }\n    if (node && node.childNodes) {\n      for (let i = 0; i < node.childNodes.length; i++) {\n        recurseFn(node.childNodes.item(i) as Element);\n      }\n    }\n  })(rootNode);\n  return clipPathIdMap;\n}\n\n/**\n * Builds a list of path info objects for the specified clip path element.\n */\nfunction buildPathInfosForClipPath(node: SVGClipPathElement) {\n  // TODO: make sure that transforms from parent clip-paths aren't inherited...\n  const clipPathTransforms = getNodeTransforms(node).reverse();\n\n  const pathInfos: PathInfo[] = [];\n  if (node.childNodes) {\n    for (let i = 0; i < node.childNodes.length; i++) {\n      const childNode = node.childNodes.item(i) as Element;\n      if (childNode instanceof SVGPathElement && childNode.getAttribute('d')) {\n        const pathStr = childNode.getAttribute('d');\n        const pathTransforms = getNodeTransforms(childNode).reverse();\n        const transforms = [...pathTransforms, ...clipPathTransforms];\n        const refClipPathId = getReferencedClipPathId(childNode);\n        pathInfos.push({\n          refClipPathId,\n          path: new Path(\n            new Path(pathStr)\n              .mutate()\n              .transform(Matrix.flatten(transforms))\n              .build()\n              .getPathString(),\n          ),\n        });\n      }\n    }\n  }\n  return pathInfos;\n}\n\n/**\n * Builds a map of clip path IDs to their corresponding path info objects.\n */\nfunction buildPathInfosMap(root: Element) {\n  const clipPathInfoMap = _.mapValues(buildClipPathIdMap(root), n => {\n    const pathInfos = buildPathInfosForClipPath(n);\n    const refClipPathId = getReferencedClipPathId(n);\n    return { pathInfos, refClipPathId } as ClipPathInfo;\n  });\n  const pathInfosMap: Dictionary<ReadonlyArray<PathInfo>> = {};\n  const recurseFn = (clipPathId: string) => {\n    if (pathInfosMap[clipPathId]) {\n      // Then the path infos have already been computed.\n      return;\n    }\n    const { pathInfos, refClipPathId } = clipPathInfoMap[clipPathId];\n    if (!refClipPathId) {\n      // Then simply assign the path infos to the clip path id.\n      pathInfosMap[clipPathId] = pathInfos;\n      return;\n    }\n    // Then concatenate the clip path's path info objects with its\n    // referenced path info objects.\n    recurseFn(refClipPathId);\n    pathInfosMap[clipPathId] = [...pathInfos, ...pathInfosMap[refClipPathId]];\n  };\n  Object.keys(clipPathInfoMap).forEach(recurseFn);\n  return pathInfosMap;\n}\n","import {\n  ClipPathLayer,\n  FillType,\n  GroupLayer,\n  Layer,\n  LayerUtil,\n  PathLayer,\n  StrokeLineCap,\n  StrokeLineJoin,\n  VectorLayer,\n} from 'app/modules/editor/model/layers';\nimport { Path } from 'app/modules/editor/model/paths';\nimport { NameProperty } from 'app/modules/editor/model/properties';\nimport { ColorUtil } from 'app/modules/editor/scripts/common';\nimport * as _ from 'lodash';\n\n// import { INTERPOLATORS } from 'app/modules/editor/model/interpolators';\n// import { AnimationBlock } from 'app/modules/editor/model/timeline';\n\nexport function loadVectorLayerFromXmlString(\n  xmlString: string,\n  doesLayerNameExistFn: (name: string) => boolean,\n) {\n  const parser = new DOMParser();\n  const doc = parser.parseFromString(xmlString, 'application/xml');\n  return loadVectorLayerFromElement(doc.documentElement, doesLayerNameExistFn);\n}\n\nfunction loadVectorLayerFromElement(\n  docEl: HTMLElement,\n  doesLayerNameExistFn: (name: string) => boolean,\n) {\n  if (!docEl) {\n    return undefined;\n  }\n  const usedNames = new Set<string>();\n  const makeFinalNodeIdFn = (value: string, prefix: string) => {\n    const finalName = LayerUtil.getUniqueName(\n      NameProperty.sanitize(value || prefix),\n      n => doesLayerNameExistFn(n) || usedNames.has(n),\n    );\n    usedNames.add(finalName);\n    return finalName;\n  };\n\n  const nodeToLayerDataFn = (node: Node): Layer => {\n    if (!isElement(node)) {\n      return undefined;\n    }\n\n    if (node.tagName === 'path') {\n      return new PathLayer({\n        id: _.uniqueId(),\n        name: makeFinalNodeIdFn(node.getAttribute('android:name'), 'path'),\n        children: [],\n        pathData: getPath(node),\n        fillColor: getColor(node, 'fillColor', ''),\n        fillAlpha: getNumber(node, 'fillAlpha', '1'),\n        strokeColor: getColor(node, 'strokeColor', ''),\n        strokeAlpha: getNumber(node, 'strokeAlpha', '1'),\n        strokeWidth: getNumber(node, 'strokeWidth', '0'),\n        strokeLinecap: get(node, 'strokeLineCap', 'butt') as StrokeLineCap,\n        strokeLinejoin: get(node, 'strokeLineJoin', 'miter') as StrokeLineJoin,\n        strokeMiterLimit: getNumber(node, 'strokeMiterLimit', '4'),\n        trimPathStart: getNumber(node, 'trimPathStart', '0'),\n        trimPathEnd: getNumber(node, 'trimPathEnd', '1'),\n        trimPathOffset: getNumber(node, 'trimPathOffset', '0'),\n        fillType: get(node, 'fillType', 'nonZero') as FillType,\n      });\n    }\n\n    if (node.tagName === 'clip-path') {\n      return new ClipPathLayer({\n        id: _.uniqueId(),\n        name: makeFinalNodeIdFn(get(node, 'name', ''), 'clip-path'),\n        children: [],\n        pathData: getPath(node),\n      });\n    }\n\n    if (node.childNodes.length) {\n      const children = Array.from(node.childNodes)\n        .map(child => nodeToLayerDataFn(child))\n        .filter(child => !!child);\n      if (children && children.length) {\n        return new GroupLayer({\n          id: _.uniqueId(),\n          name: makeFinalNodeIdFn(get(node, 'name', ''), 'group'),\n          children,\n          pivotX: getNumber(node, 'pivotX', '0'),\n          pivotY: getNumber(node, 'pivotY', '0'),\n          rotation: getNumber(node, 'rotation', '0'),\n          scaleX: getNumber(node, 'scaleX', '1'),\n          scaleY: getNumber(node, 'scaleY', '1'),\n          translateX: getNumber(node, 'translateX', '0'),\n          translateY: getNumber(node, 'translateY', '0'),\n        });\n      }\n    }\n\n    return undefined;\n  };\n\n  const rootLayer = nodeToLayerDataFn(docEl);\n  const name = makeFinalNodeIdFn(get(docEl, 'name', ''), 'vector');\n  usedNames.add(name);\n  const width = getNumber(docEl, 'viewportWidth', '24');\n  const height = getNumber(docEl, 'viewportHeight', '24');\n  const alpha = getNumber(docEl, 'alpha', '1');\n  return new VectorLayer({\n    id: _.uniqueId(),\n    name,\n    children: rootLayer ? rootLayer.children : [],\n    width,\n    height,\n    alpha,\n  });\n}\n\n// export function loadAnimationFromXmlString(\n//   xmlString: string,\n//   animationName: string,\n//   doesLayerNameExistFn: (name: string) => boolean) {\n\n//   const parser = new DOMParser();\n//   const avdNode = parser.parseFromString(xmlString, 'application/xml').documentElement;\n//   const vl =\n//     _(Array.from(avdNode.childNodes))\n//       .filter(elem => {\n//         return isElement(elem)\n//           && elem.tagName === 'aapt:attr'\n//           && elem.hasAttribute('name')\n//           && elem.getAttribute('name') === 'android:drawable';\n//       })\n//       .map((elem: HTMLElement) => {\n//         return _(Array.from(elem.childNodes))\n//           .filter(e => isElement(e) && e.tagName === 'vector')\n//           .map((e: HTMLElement) => loadVectorLayerFromElement(e, doesLayerNameExistFn))\n//           .first();\n//       })\n//       .first();\n//   if (!vl) {\n//     return undefined;\n//   }\n//   const blocks =\n//     _(Array.from(avdNode.childNodes))\n//       .filter(e => {\n//         return isElement(e)\n//           && e.tagName === 'target'\n//           && !!e.getAttribute('android:name');\n//       })\n//       .flatMap((targetElem: HTMLElement) => {\n//         const targetName = targetElem.getAttribute('android:name');\n//         const layerId = vl.findLayerByName(targetName).id;\n//         const animElem =\n//           _(Array.from(targetElem.childNodes))\n//             .filter(elem => {\n//               return isElement(elem)\n//                 && elem.tagName === 'aapt:attr'\n//                 && elem.hasAttribute('name')\n//                 && elem.getAttribute('name') === 'android:animation'\n//                 && elem.childNodes.length;\n//             })\n//             .flatMap((elem: HTMLElement) => Array.from(elem.childNodes))\n//             .filter(e => isElement(e) && (e.tagName === 'set' || e.tagName === 'objectAnimator'))\n//             .map((e: HTMLElement) => {\n//               if (e.tagName === 'set') {\n//                 // TODO: handle animator set case\n//                 return undefined;\n//               }\n//               // Otherwise it is an object animator.\n//               return e;\n//             })\n//             .first() as HTMLElement;\n//         const animationBlocks: AnimationBlock[] = [];\n//         const propertyName = get(animElem, 'propertyName');\n//         const fromValue = get(animElem, 'valueFrom');\n//         const toValue = get(animElem, 'valueTo');\n//         // TODO: confirm difference between @android:anim and @android:interpolator\n//         // TODO: @android:interpolator/linear doesn't work\n//         const interpolatorRef =\n//           get(animElem, 'interpolator', '@android:anim/accelerate_decelerate_interpolator');\n//         const interpolator = _.find(INTERPOLATORS, i => i.androidRef === interpolatorRef).value;\n//         const startTime = Number(get(animElem, 'startOffset'));\n//         const endTime = startTime + Number(get(animElem, 'duration'));\n//         if (get(animElem, 'valueType') === 'pathType' && propertyName === 'pathData') {\n//           animationBlocks.push(AnimationBlock.from({\n//             layerId,\n//             propertyName,\n//             fromValue: new Path(fromValue),\n//             toValue: new Path(toValue),\n//             startTime,\n//             endTime,\n//             interpolator,\n//             type: 'path',\n//           }));\n//         } else if (propertyName === 'fillAlpha' || propertyName === 'translateX') {\n//           animationBlocks.push(AnimationBlock.from({\n//             layerId,\n//             propertyName,\n//             fromValue: Number(fromValue),\n//             toValue: Number(toValue),\n//             startTime,\n//             endTime,\n//             interpolator,\n//             type: 'number',\n//           }));\n//         }\n//         // TODO: return a list of animation blocks here\n//         return animationBlocks;\n//       })\n//       .value();\n// const avdTargetElements = avdChildElements.filter(e => e.tagName === 'target');\n// avdTargetElements.forEach(e => getTargetFn(e));\n// console.info(vl, avdTargetElements);\n//   return undefined;\n// }\n\nfunction isElement(node: Node): node is HTMLElement {\n  return (\n    node &&\n    node.nodeType !== Node.TEXT_NODE &&\n    node.nodeType !== Node.COMMENT_NODE &&\n    _.isElement(node)\n  );\n}\n\nfunction get(obj: HTMLElement, attr: string, def = '') {\n  const androidAttr = `android:${attr}`;\n  return obj.hasAttribute(androidAttr) ? obj.getAttribute(androidAttr) : def;\n}\n\nfunction getNumber(obj: HTMLElement, attr: string, def: string) {\n  const androidAttr = `android:${attr}`;\n  const num = Number(obj.hasAttribute(androidAttr) ? obj.getAttribute(androidAttr) : def);\n  return isFinite(num) ? num : Number(def);\n}\n\nfunction getPath(obj: HTMLElement) {\n  const androidAttr = 'android:pathData';\n  const pathData = obj.hasAttribute(androidAttr) ? obj.getAttribute(androidAttr) : '';\n  try {\n    return new Path(pathData);\n  } catch (e) {\n    console.warn('Failed to import pathData: ', pathData);\n    return undefined;\n  }\n}\n\nfunction getColor(obj: HTMLElement, attr: string, def = '') {\n  const androidAttr = `android:${attr}`;\n  const color = obj.hasAttribute(androidAttr) ? obj.getAttribute(androidAttr) : def;\n  return !!ColorUtil.parseAndroidColor(color) ? color : def;\n}\n","import * as SvgLoader from './SvgLoader';\nimport * as VectorDrawableLoader from './VectorDrawableLoader';\nexport { SvgLoader, VectorDrawableLoader };\n","/**\n * A naive implementation of an interval tree with O(n) search performance.\n */\nexport class IntervalTree<T> {\n  private readonly intervals: Interval<T>[] = [];\n\n  /**\n   * Note that inserted numbers are automatically rounded to the nearest integer.\n   */\n  insert(low: number, high: number, data: T) {\n    low = Math.round(low);\n    high = Math.round(high);\n    this.intervals.push({ low, high, data });\n  }\n\n  /**\n   * Check if the interval (low, high) intersects with any intervals in the tree.\n   * An extra predicateFn can be supplied to further filter the results.\n   */\n  intersectsWith(low: number, high: number, predicateFn = (data: T) => true) {\n    return this.intervals.some(interval => {\n      return low < interval.high && interval.low < high && predicateFn(interval.data);\n    });\n  }\n}\n\ninterface Interval<T> {\n  readonly low: number;\n  readonly high: number;\n  readonly data: T;\n}\n","export { IntervalTree } from './IntervalTree';\n","import { OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nexport function DestroyableMixin<T extends Constructor>(Base = class {} as T) {\n  return class extends Base implements OnDestroy {\n    private readonly subscriptions: Subscription[] = [];\n\n    protected registerSubscription(sub: Subscription) {\n      this.subscriptions.push(sub);\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.forEach(x => x.unsubscribe());\n    }\n  };\n}\n","export { DestroyableMixin } from './DestroyableMixin';\n","import { PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { MasterToolPicker } from 'app/modules/editor/scripts/paper/tool';\nimport { PaperService } from 'app/modules/editor/services';\nimport { State, Store } from 'app/modules/editor/store';\nimport { getHiddenLayerIds, getSelectedLayerIds } from 'app/modules/editor/store/layers/selectors';\nimport {\n  getCreatePathInfo,\n  getEditPathInfo,\n  getHoveredLayerId,\n  getRotateItemsInfo,\n  getSelectionBox,\n  getSnapGuideInfo,\n  getSplitCurveInfo,\n  getToolMode,\n  getTooltipInfo,\n  getZoomPanInfo,\n} from 'app/modules/editor/store/paper/selectors';\nimport { getAnimatedVectorLayer } from 'app/modules/editor/store/playback/selectors';\nimport * as paper from 'paper';\nimport { Subscription } from 'rxjs';\n\nexport class PaperProject extends paper.Project {\n  private readonly paperLayer: PaperLayer;\n  private readonly masterToolPicker: MasterToolPicker;\n  private readonly subscriptions: Subscription[] = [];\n\n  constructor(canvas: HTMLCanvasElement, ps: PaperService, store: Store<State>) {\n    super(canvas);\n    const pl = new PaperLayer(ps);\n    paper.project.addLayer(pl);\n    this.paperLayer = pl;\n    this.masterToolPicker = new MasterToolPicker(ps);\n    this.subscriptions.push(\n      store.select(getToolMode).subscribe(() => this.masterToolPicker.onToolModeChanged()),\n      // TODO: dont allow the user to modify the vector layer when current time > 0\n      store.select(getAnimatedVectorLayer).subscribe(() => pl.onVectorLayerChanged()),\n      store.select(getSelectedLayerIds).subscribe(() => pl.onSelectedLayerIdsChanged()),\n      store.select(getHoveredLayerId).subscribe(() => pl.onHoveredLayerIdChanged()),\n      store.select(getHiddenLayerIds).subscribe(() => pl.onHiddenLayerIdsChanged()),\n      store.select(getCreatePathInfo).subscribe(info => pl.setCreatePathInfo(info)),\n      store.select(getSplitCurveInfo).subscribe(info => pl.setSplitCurveInfo(info)),\n      store.select(getEditPathInfo).subscribe(info => pl.onEditPathInfoChanged()),\n      store.select(getRotateItemsInfo).subscribe(info => pl.onRotateItemsInfoChanged()),\n      store.select(getSnapGuideInfo).subscribe(info => pl.setSnapGuideInfo(info)),\n      store.select(getTooltipInfo).subscribe(info => pl.setTooltipInfo(info)),\n      store.select(getSelectionBox).subscribe(box => {\n        if (box) {\n          const from = new paper.Point(box.from);\n          const to = new paper.Point(box.to);\n          pl.setSelectionBox({ from, to });\n        } else {\n          pl.setSelectionBox(undefined);\n        }\n      }),\n      store.select(getZoomPanInfo).subscribe(({ zoom, translation: { tx, ty } }) => {\n        this.view.matrix = new paper.Matrix(zoom, 0, 0, zoom, tx, ty);\n      }),\n    );\n  }\n\n  /**\n   * Sets the project's dimensions with the new VectorLayer viewport and canvas element size (in CSS pixels).\n   */\n  setDimensions(\n    viewportWidth: number,\n    viewportHeight: number,\n    viewWidth: number,\n    viewHeight: number,\n  ) {\n    // The view size represents the actual size of the canvas in CSS pixels.\n    // The viewport size represents the user-visible dimensions (i.e. the default 24x24).\n    this.view.viewSize = new paper.Size(viewWidth, viewHeight);\n    this.paperLayer.setDimensions(viewportWidth, viewportHeight, viewWidth, viewHeight);\n  }\n\n  // @Override\n  remove() {\n    super.remove();\n    while (this.subscriptions.length) {\n      this.subscriptions.pop().unsubscribe();\n    }\n  }\n}\n","import * as paper from 'paper';\n\nimport { Handler } from './Handler';\n\nconst DOUBLE_CLICK_MIN_TIME = 40;\nconst DOUBLE_CLICK_TIMEOUT = 300;\n\n/**\n * Helper class for detecting single/double click events.\n */\nexport class ClickDetector {\n  private readonly handler = new Handler();\n  private currentDownEvent: paper.ToolEvent;\n  private previousUpEvent: paper.ToolEvent;\n  private isDoubleClicking = false;\n  private deferSingleClick = false;\n  private stillDown = false;\n\n  onToolEvent(event: paper.ToolEvent) {\n    if (event.type === 'mousedown') {\n      this.processMouseDown(event);\n    } else if (event.type === 'mouseup') {\n      this.processMouseUp(event);\n    }\n  }\n\n  private processMouseDown(event: paper.ToolEvent) {\n    const hadClickMessage = this.handler.hasPendingMessages();\n    if (hadClickMessage) {\n      this.handler.removePendingMessages();\n    }\n    const isDoubleClickFn = (firstUp: paper.ToolEvent, secondDown: paper.ToolEvent) => {\n      const deltaTime = secondDown.timeStamp - firstUp.timeStamp;\n      return DOUBLE_CLICK_MIN_TIME <= deltaTime && deltaTime <= DOUBLE_CLICK_TIMEOUT;\n    };\n    if (\n      this.currentDownEvent &&\n      this.previousUpEvent &&\n      hadClickMessage &&\n      isDoubleClickFn(this.previousUpEvent, event)\n    ) {\n      // This is a second tap, so give a callback with the\n      // first click of the double click.\n      this.isDoubleClicking = true;\n      this.onDoubleClick(this.currentDownEvent);\n    } else {\n      // This is the first click.\n      this.handler.postDelayed(() => {\n        if (this.stillDown) {\n          // If the user's mouse is still down, do not dispatch the click\n          // event until the next mouse up event.\n          this.deferSingleClick = true;\n        } else {\n          // At this point we are certain that a second click is not coming,\n          // so dispatch the single click event.\n          this.onSingleClickConfirmed(event);\n        }\n      }, DOUBLE_CLICK_TIMEOUT);\n    }\n    this.currentDownEvent = event;\n    this.stillDown = true;\n    this.deferSingleClick = false;\n  }\n\n  private processMouseUp(event: paper.ToolEvent) {\n    this.onSingleClick(event);\n    if (this.deferSingleClick) {\n      this.onSingleClickConfirmed(event);\n    }\n    this.stillDown = false;\n    this.previousUpEvent = event;\n    this.isDoubleClicking = false;\n    this.deferSingleClick = false;\n  }\n\n  isDoubleClick() {\n    return this.isDoubleClicking;\n  }\n\n  protected onSingleClick(event: paper.ToolEvent) {}\n\n  protected onSingleClickConfirmed(event: paper.ToolEvent) {}\n\n  protected onDoubleClick(event: paper.ToolEvent) {}\n}\n","/**\n * A Handler implements a simple asynchronous message queue. Useful for\n * actions that are inherently asynchronous, such as click events and\n * other gestures.\n */\nexport class Handler {\n  private readonly pendingMessageIds = new Set<number>();\n\n  postDelayed(fn: () => void, delayMillis: number) {\n    const id = window.setTimeout(() => {\n      this.pendingMessageIds.delete(id);\n      fn();\n    }, Math.max(0, delayMillis));\n    this.pendingMessageIds.add(id);\n  }\n\n  hasPendingMessages() {\n    return this.pendingMessageIds.size > 0;\n  }\n\n  removePendingMessages() {\n    this.pendingMessageIds.forEach(id => window.clearTimeout(id));\n    this.pendingMessageIds.clear();\n  }\n}\n","export { ClickDetector } from './ClickDetector';\n","import * as paper from 'paper';\n\n/**\n * A gesture represents a user interaction with the mouse or keyboard. Typically\n * a gesture is used in one of two ways:\n *\n * (1) To monitor the state of events that occurs between the initial\n *     mouse down through the final mouse up.\n *\n * (2) To monitor mouse move events and react accordingly.\n */\nexport abstract class Gesture {\n  onMouseDown(event: paper.ToolEvent) {}\n  onMouseDrag(event: paper.ToolEvent) {}\n  onMouseMove(event: paper.ToolEvent) {}\n  onMouseUp(event: paper.ToolEvent) {}\n  onKeyDown(event: paper.KeyEvent) {}\n  onKeyUp(event: paper.KeyEvent) {}\n}\n","import * as paper from 'paper';\n\nimport { ShapeGesture } from './ShapeGesture';\n\n/** A gesture that creates an elliptical path. */\nexport class EllipseGesture extends ShapeGesture {\n  // @Override\n  protected newPath(vpBounds: paper.Rectangle) {\n    return new paper.Path.Ellipse(vpBounds);\n  }\n}\n","import { ToolMode } from 'app/modules/editor/model/paper';\nimport { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\n/**\n * A gesture that draws a path.\n *\n * Preconditions:\n * - The user is in pencil mode.\n */\nexport class PencilGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n\n  // The last drag point in viewport coordinates.\n  private vpLastPoint: paper.Point;\n\n  constructor(private readonly ps: PaperService) {\n    super();\n  }\n\n  // @Override\n  onMouseDrag(event: paper.ToolEvent) {\n    const vpDownPoint = this.pl.globalToLocal(event.downPoint);\n    const vpMiddlePoint = this.pl.globalToLocal(event.middlePoint);\n    const vpPoint = this.pl.globalToLocal(event.point);\n    if (!this.vpLastPoint) {\n      this.vpLastPoint = vpDownPoint;\n    }\n    const vpDelta = vpPoint.subtract(this.vpLastPoint);\n    vpDelta.angle += 90;\n    const createPathInfo = this.ps.getCreatePathInfo();\n    const pencilPath = createPathInfo ? new paper.Path(createPathInfo.pathData) : new paper.Path();\n    pencilPath.add(vpMiddlePoint.add(vpDelta));\n    this.ps.setCreatePathInfo({ pathData: pencilPath.pathData, strokeColor: '#979797' });\n    this.vpLastPoint = vpPoint;\n  }\n\n  // @Override\n  onMouseUp(event: paper.ToolEvent) {\n    if (this.vpLastPoint) {\n      this.vpLastPoint = this.pl.globalToLocal(event.point);\n    }\n    this.finishGesture();\n  }\n\n  // @Override\n  onKeyDown(event: paper.KeyEvent) {\n    if (event.key === 'escape') {\n      this.finishGesture();\n    }\n  }\n\n  private finishGesture() {\n    if (this.vpLastPoint) {\n      const newPath = new paper.Path(this.ps.getCreatePathInfo().pathData);\n      const projStartPoint = this.pl.localToGlobal(newPath.firstSegment.point);\n      const projLastPoint = this.pl.localToGlobal(this.vpLastPoint);\n      // If the pencil path's start and end point are within 10px of each other\n      // at the end of the gesture, then we should close the path before saving\n      // it to the store.\n      if (projStartPoint.isClose(projLastPoint, 10)) {\n        newPath.closePath(true);\n      }\n      newPath.smooth({ type: 'continuous' });\n      const newPathLayer = PaperUtil.addPathToStore(this.ps, newPath.pathData);\n      this.ps.setSelectedLayerIds(new Set([newPathLayer.id]));\n      this.ps.setCreatePathInfo(undefined);\n    }\n    this.ps.setToolMode(ToolMode.Default);\n  }\n}\n","import * as paper from 'paper';\n\nimport { ShapeGesture } from './ShapeGesture';\n\n/** A gesture that creates a rectangular path. */\nexport class RectangleGesture extends ShapeGesture {\n  // @Override\n  protected newPath(vpBounds: paper.Rectangle) {\n    return new paper.Path.Rectangle(vpBounds);\n  }\n}\n","import { ToolMode } from 'app/modules/editor/model/paper';\nimport { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\n/** Base class for all shape-building gestures. */\nexport abstract class ShapeGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n\n  private vpLastDragInfo: Readonly<{ vpDownPoint: paper.Point; vpPoint: paper.Point }>;\n\n  constructor(private readonly ps: PaperService) {\n    super();\n  }\n\n  // @Override\n  onMouseDrag(event: paper.ToolEvent) {\n    const vpDownPoint = this.pl.globalToLocal(event.downPoint);\n    const vpPoint = this.pl.globalToLocal(event.point);\n    this.vpLastDragInfo = { vpDownPoint, vpPoint };\n    this.processEvent(event);\n  }\n\n  // @Override\n  onMouseUp(event: paper.ToolEvent) {\n    if (this.vpLastDragInfo) {\n      const { pathData } = this.ps.getCreatePathInfo();\n      const newPathLayer = PaperUtil.addPathToStore(this.ps, pathData);\n      this.ps.setSelectedLayerIds(new Set([newPathLayer.id]));\n    }\n    this.finishGesture();\n  }\n\n  // @Override\n  onKeyDown(event: paper.KeyEvent) {\n    if (event.key === 'shift' || event.key === 'alt') {\n      this.processEvent(event);\n    } else if (event.key === 'escape') {\n      this.finishGesture();\n    }\n  }\n\n  // @Override\n  onKeyUp(event: paper.KeyEvent) {\n    if (event.key === 'shift' || event.key === 'alt') {\n      this.processEvent(event);\n    }\n  }\n\n  private processEvent({ modifiers: { alt, shift } }: paper.Event) {\n    const { vpDownPoint, vpPoint } = this.vpLastDragInfo;\n\n    // If shift is pressed, then set the height equal to the width.\n    const vpSize = new paper.Size(\n      vpPoint.x - vpDownPoint.x,\n      shift ? vpPoint.x - vpDownPoint.x : vpPoint.y - vpDownPoint.y,\n    ).multiply(alt ? 2 : 1);\n\n    // If alt is pressed, then the initial downpoint represents the shape's center point.\n    const vpTopLeft = alt\n      ? vpDownPoint.subtract(new paper.Point(vpSize.width / 2, vpSize.height / 2))\n      : vpDownPoint;\n\n    const { pathData } = this.newPath(new paper.Rectangle(vpTopLeft, vpSize));\n    this.ps.setCreatePathInfo({ pathData, strokeColor: '#979797' });\n  }\n\n  private finishGesture() {\n    this.ps.setCreatePathInfo(undefined);\n    this.ps.setToolMode(ToolMode.Default);\n  }\n\n  /** Factory method that creates a new path given its bounding box. */\n  protected abstract newPath(vpBounds: paper.Rectangle): paper.Path;\n}\n","export { RectangleGesture } from './RectangleGesture';\nexport { EllipseGesture } from './EllipseGesture';\nexport { PencilGesture } from './PencilGesture';\n","import { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as _ from 'lodash';\nimport * as paper from 'paper';\n\n/**\n * A gesture that selects multiple segments using a bounded box.\n *\n * Preconditions:\n * - The user is in edit path mode.\n */\nexport class BatchSelectSegmentsGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n  private initialSelectedSegments: ReadonlySet<number>;\n  private updatedSelectedSegments: ReadonlySet<number>;\n  private isDragging = false;\n\n  constructor(\n    private readonly ps: PaperService,\n    private readonly editPathId: string,\n    private readonly clearEditPathAfterDraglessClick: boolean,\n  ) {\n    super();\n  }\n\n  // @Override\n  onMouseDown(event: paper.ToolEvent) {\n    this.initialSelectedSegments = this.ps.getEditPathInfo().selectedSegments;\n    this.updatedSelectedSegments = new Set();\n    this.updateCurrentSelection(event.modifiers.command || event.modifiers.shift);\n  }\n\n  // @Override\n  onMouseDrag(event: paper.ToolEvent) {\n    this.isDragging = true;\n    this.ps.setSelectionBox({\n      from: this.pl.globalToLocal(event.downPoint),\n      to: this.pl.globalToLocal(event.point),\n    });\n    this.processToolEvent(event);\n  }\n\n  // @Override\n  onMouseUp(event: paper.ToolEvent) {\n    if (this.isDragging) {\n      this.processToolEvent(event);\n    } else if (this.clearEditPathAfterDraglessClick) {\n      this.ps.setEditPathInfo(undefined);\n    }\n    this.ps.setSelectionBox(undefined);\n  }\n\n  private processToolEvent(event: paper.ToolEvent) {\n    // Calculate the bounding rectangle to use to select segments in\n    // the edit path's local coordinate space.\n    const editPath = this.pl.findItemByLayerId(this.editPathId) as paper.Path;\n    const rectangle = new paper.Rectangle(\n      editPath.globalToLocal(event.downPoint),\n      editPath.globalToLocal(event.point),\n    );\n    this.updatedSelectedSegments = new Set(\n      _.flatMap(editPath.segments, ({ point }, segmentIndex) => {\n        return rectangle.contains(point) ? [segmentIndex] : [];\n      }),\n    );\n    this.updateCurrentSelection(event.modifiers.command || event.modifiers.shift);\n  }\n\n  // @Override\n  onKeyDown(event: paper.KeyEvent) {\n    this.processKeyEvent(event);\n  }\n\n  // @Override\n  onKeyUp(event: paper.KeyEvent) {\n    this.processKeyEvent(event);\n  }\n\n  private processKeyEvent(event: paper.KeyEvent) {\n    if (event.key === 'ctrl' || event.key === 'meta' || event.key === 'shift') {\n      this.updateCurrentSelection(event.modifiers.command || event.modifiers.shift);\n    }\n  }\n\n  private updateCurrentSelection(toggleInitialSelections: boolean) {\n    const selectedSegments = new Set(this.updatedSelectedSegments);\n    if (toggleInitialSelections) {\n      this.initialSelectedSegments.forEach(segmentIndex => {\n        if (selectedSegments.has(segmentIndex)) {\n          selectedSegments.delete(segmentIndex);\n        } else {\n          selectedSegments.add(segmentIndex);\n        }\n      });\n    }\n    const editPath = this.pl.findItemByLayerId(this.editPathId) as paper.Path;\n    this.ps.setEditPathInfo({ ...PaperUtil.selectCurves(editPath, selectedSegments) });\n  }\n}\n","import { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\n/**\n * A gesture that allows the user to mould a curve by dragging a point on its path.\n *\n * Based on math from here: https://pomax.github.io/bezierinfo/#moulding\n *\n * Preconditions:\n * - The user is in edit path mode.\n * - The user hit one of the edit path's curves.\n */\nexport class MouldCurveGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n\n  private points: CubicPoints;\n  private B: paper.Point;\n  private C: paper.Point;\n  private ratio: number;\n  private t: number;\n\n  // TODO: update HoverSegmentsCurvesGesture to *not* display a split path dot when command is held down\n  // TODO: handle cases where t === 0 and t === 1?\n  constructor(\n    private readonly ps: PaperService,\n    private readonly editPathId: string,\n    private readonly hitCurveInfo: Readonly<{ curveIndex: number; time: number }>,\n  ) {\n    super();\n  }\n\n  // @Override\n  onMouseDown(event: paper.ToolEvent) {\n    const editPath = this.pl.findItemByLayerId(this.editPathId) as paper.Path;\n    const curve = editPath.curves[this.hitCurveInfo.curveIndex];\n    const start = curve.segment1.point;\n    const end = curve.segment2.point;\n    const cp1 = start.add(curve.handle1);\n    const cp2 = end.add(curve.handle2);\n    const points: CubicPoints = [start, cp1, cp2, end];\n\n    const t = this.hitCurveInfo.time;\n    const A = hull(points, t)[5];\n    const B = curve.getPointAtTime(t);\n    const C = lli(A, B, start, end);\n    const bottom = t ** 3 + (1 - t) ** 3;\n    const top = bottom - 1;\n    const ratio = Math.abs(top / bottom);\n\n    // Cache these for later use.\n    this.points = points;\n    this.B = B;\n    this.C = C;\n    this.ratio = ratio;\n    this.t = t;\n  }\n\n  // @Override\n  onMouseDrag(event: paper.ToolEvent) {\n    const editPath = this.pl.findItemByLayerId(this.editPathId) as paper.Path;\n    const localDownPoint = editPath.globalToLocal(event.downPoint);\n    const localDragPoint = editPath.globalToLocal(event.point);\n\n    const { points, B, C, ratio, t } = this;\n    const newB = B.add(localDragPoint.subtract(localDownPoint));\n\n    // Preserve struts for B when repositioning.\n    const hullPoints = hull(this.points, t);\n    const Bl = hullPoints[7];\n    const Br = hullPoints[8];\n    const dbl = Bl.subtract(B);\n    const dbr = Br.subtract(B);\n    // Now that we know A, B, C and the AB:BC ratio, we can compute the new A' based on the desired B'.\n    const newA = newB.subtract(C.subtract(newB).divide(ratio));\n    // Find new point on s--c1.\n    const p1 = newB.add(dbl);\n    const sc1 = newA.subtract(newA.subtract(p1).divide(1 - t));\n    // Find new point on c2--e.\n    const p2 = newB.add(dbr);\n    const sc2 = newA.add(p2.subtract(newA).divide(t));\n    // Construct new c1` based on the fact that s--sc1 is s--c1 * t.\n    const nc1 = points[0].add(sc1.subtract(points[0]).divide(t));\n    // Construct new c2` based on the fact that e--sc2 is e--c2 * (1-t).\n    const nc2 = points[3].subtract(points[3].subtract(sc2).divide(1 - t));\n\n    const curve = editPath.curves[this.hitCurveInfo.curveIndex];\n    curve.handle1 = nc1.subtract(points[0]);\n    curve.handle2 = nc2.subtract(points[3]);\n    PaperUtil.replacePathInStore(this.ps, this.editPathId, editPath.pathData);\n  }\n\n  // @Override\n  onKeyDown(event: paper.KeyEvent) {\n    // TODO: react to escape key presses?\n  }\n}\n\n// TODO: rename this...\nfunction lli(\n  { x: x1, y: y1 }: paper.Point,\n  { x: x2, y: y2 }: paper.Point,\n  { x: x3, y: y3 }: paper.Point,\n  { x: x4, y: y4 }: paper.Point,\n) {\n  const nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4);\n  const ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4);\n  const d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n  if (d === 0) {\n    return undefined;\n  }\n  return new paper.Point(nx / d, ny / d);\n}\n\nfunction hull(points: CubicPoints, t: number): CubicHull {\n  let p = points as paper.Point[];\n  let _p: paper.Point[] = [];\n  let pt: paper.Point;\n  const q = [...p];\n  // We lerp between all points at each iteration, until we have 1 point left.\n  while (p.length > 1) {\n    _p = [];\n    for (let i = 0, l = p.length - 1; i < l; i++) {\n      pt = p[i].add(p[i + 1].subtract(p[i]).multiply(t));\n      q.push(pt);\n      _p.push(pt);\n    }\n    p = _p;\n  }\n  return q as CubicHull;\n}\n\ntype CubicPoints = [paper.Point, paper.Point, paper.Point, paper.Point];\ntype CubicHull = [\n  paper.Point,\n  paper.Point,\n  paper.Point,\n  paper.Point,\n  paper.Point,\n  paper.Point,\n  paper.Point,\n  paper.Point,\n  paper.Point,\n  paper.Point\n];\n","import { CursorType } from 'app/modules/editor/model/paper';\nimport { MathUtil } from 'app/modules/editor/scripts/common';\nimport { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil, SnapUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport { Line } from 'app/modules/editor/store/paper/actions';\nimport * as paper from 'paper';\n\n/**\n * A gesture that performs selection and drag operations on one or more path\n * segments. It also supports adding a segment to an existing path's curve,\n * as well as extending an open path by appending segments to its end points.\n *\n * Preconditions:\n * - The user is in edit path mode.\n * - The user either hit a segment, a curve, or missed entirely\n *   (the 'missed entirely' case occurs when the user is in vector\n *   mode, in which the user can create new segments by clicking\n *   on the canvas).\n */\nexport class SelectDragDrawSegmentsGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n\n  // Maps segment indices to each segment's location at the beginning of the gesture.\n  // The initial locations are expressed in the\n  private selectedSegmentIndexToInitialLocationMap: ReadonlyMap<number, paper.Point>;\n  // The location of the last mouse event in the edit path's local coordinates.\n  private localLastPoint: paper.Point;\n  // True if we should exit edit path mode on the next mouse up event.\n  private exitEditPathModeOnMouseUp = false;\n  // If this gesture was used to split a curve, this tells us the index of the\n  // new segment that was created in onMouseDown().\n  private newSplitCurveSegmentIndex: number;\n\n  /** Static factory method to use when the user's mouse down hits a segment. */\n  static hitSegment(ps: PaperService, editPathId: string, segmentIndex: number) {\n    return new SelectDragDrawSegmentsGesture(ps, editPathId, { segmentIndex });\n  }\n\n  /** Static factory method to use when the user's mouse down hits a curve. */\n  static hitCurve(ps: PaperService, editPathId: string, curveIndex: number, time: number) {\n    return new SelectDragDrawSegmentsGesture(ps, editPathId, undefined, { curveIndex, time });\n  }\n\n  /** Static factory method to use when the user misses the edit path. */\n  static miss(ps: PaperService, editPathId: string) {\n    return new SelectDragDrawSegmentsGesture(ps, editPathId);\n  }\n\n  private constructor(\n    private readonly ps: PaperService,\n    private readonly editPathId: string,\n    private readonly hitSegmentInfo?: Readonly<{ segmentIndex: number }>,\n    private readonly hitCurveInfo?: Readonly<{ curveIndex?: number; time: number }>,\n  ) {\n    super();\n  }\n\n  // @Override\n  onMouseDown(event: paper.ToolEvent) {\n    const fpi = this.ps.getEditPathInfo();\n    const beforeSelectedSegmentIndices = fpi.selectedSegments;\n    const afterSelectedSegmentIndices = new Set(beforeSelectedSegmentIndices);\n    const editPath = this.pl.findItemByLayerId(this.editPathId) as paper.Path;\n\n    if (this.hitSegmentInfo) {\n      const isEndPointFn = (i: number) => i === 0 || i === editPath.segments.length - 1;\n      const { segmentIndex } = this.hitSegmentInfo;\n      const singleSelectedSegmentIndex = beforeSelectedSegmentIndices.size\n        ? beforeSelectedSegmentIndices.values().next().value\n        : undefined;\n      if (\n        !editPath.closed &&\n        singleSelectedSegmentIndex !== undefined &&\n        isEndPointFn(segmentIndex) &&\n        isEndPointFn(singleSelectedSegmentIndex) &&\n        segmentIndex !== singleSelectedSegmentIndex\n      ) {\n        // If the path is open, one of the end points is selected, and the\n        // user clicked the other end point segment, then close the path\n        // and end the gesture on the next mouse up event.\n        editPath.closed = true;\n        this.exitEditPathModeOnMouseUp = true;\n        PaperUtil.replacePathInStore(this.ps, this.editPathId, editPath.pathData);\n      }\n      if (event.modifiers.shift || event.modifiers.command) {\n        // If shift or command is pressed, toggle the segment's selection state.\n        if (beforeSelectedSegmentIndices.has(segmentIndex)) {\n          afterSelectedSegmentIndices.delete(segmentIndex);\n        } else {\n          afterSelectedSegmentIndices.add(segmentIndex);\n        }\n      } else {\n        // Otherwise, select the hit segment and deselect all others.\n        afterSelectedSegmentIndices.clear();\n        afterSelectedSegmentIndices.add(segmentIndex);\n      }\n    } else if (this.hitCurveInfo) {\n      // If there is no hit segment, then create one along the curve\n      // at the given location and select the new segment.\n      const { curveIndex, time } = this.hitCurveInfo;\n      const curve = editPath.curves[curveIndex];\n      const newSegment = event.modifiers.shift\n        ? curve.divideAt(curve.getLocationAt(curve.length / 2))\n        : curve.divideAtTime(time).segment1;\n      PaperUtil.replacePathInStore(this.ps, this.editPathId, editPath.pathData);\n      afterSelectedSegmentIndices.clear();\n      afterSelectedSegmentIndices.add(newSegment.index);\n      this.newSplitCurveSegmentIndex = newSegment.index;\n    } else {\n      // Otherwise, we are either (1) extending an existing open path (beginning\n      // at one of its selected end points), or (2) beginning to create a new path\n      // from scratch.\n      const localPoint = editPath.globalToLocal(event.point);\n      let addedSegment: paper.Segment;\n      if (editPath.segments.length === 0) {\n        addedSegment = editPath.add(localPoint);\n      } else {\n        // Note that there will always be a single selected end point segment in this case\n        // (otherwise we would have used a batch select segments gesture instead).\n        const singleSelectedSegmentIndex = beforeSelectedSegmentIndices.values().next().value;\n        const selectedSegment = editPath.segments[singleSelectedSegmentIndex];\n        addedSegment = selectedSegment.isLast()\n          ? editPath.add(localPoint)\n          : editPath.insert(0, localPoint);\n        afterSelectedSegmentIndices.delete(singleSelectedSegmentIndex);\n      }\n      afterSelectedSegmentIndices.add(addedSegment.index);\n      PaperUtil.replacePathInStore(this.ps, this.editPathId, editPath.pathData);\n    }\n\n    this.selectedSegmentIndexToInitialLocationMap = new Map(\n      Array.from(afterSelectedSegmentIndices).map(segmentIndex => {\n        const point = editPath.segments[segmentIndex].point.clone();\n        return [segmentIndex, point] as [number, paper.Point];\n      }),\n    );\n\n    this.ps.setEditPathInfo({\n      ...fpi,\n      ...PaperUtil.selectCurves(editPath, afterSelectedSegmentIndices),\n    });\n    this.ps.setCursorType(CursorType.PointSelect);\n    this.ps.setCreatePathInfo(undefined);\n    this.ps.setSplitCurveInfo(undefined);\n  }\n\n  // @Override\n  onMouseDrag(event: paper.ToolEvent) {\n    const editPath = this.pl.findItemByLayerId(this.editPathId) as paper.Path;\n\n    const localDownPoint = editPath.globalToLocal(event.downPoint);\n    if (!this.localLastPoint) {\n      this.localLastPoint = localDownPoint;\n    }\n    const localPoint = editPath.globalToLocal(event.point);\n    const localDownPointDelta = localPoint.subtract(localDownPoint);\n    const localLastPointDelta = localPoint.subtract(this.localLastPoint);\n    const localSnappedDownPointDelta = new paper.Point(\n      MathUtil.snapVectorToAngle(localDownPointDelta, 90),\n    );\n\n    if (this.hitSegmentInfo || this.hitCurveInfo) {\n      // A segment was created on mouse down and is still being grabbed,\n      // so continue to drag the currently selected segments.\n      const selectedSegmentIndices = new Set(this.selectedSegmentIndexToInitialLocationMap.keys());\n      const nonSelectedSegmentIndices = editPath.segments\n        .map((s, i) => i)\n        .filter((s, i) => !selectedSegmentIndices.has(i));\n      this.selectedSegmentIndexToInitialLocationMap.forEach((initialSegmentPoint, i) => {\n        const segment = editPath.segments[i];\n        segment.point = event.modifiers.shift\n          ? initialSegmentPoint.add(localSnappedDownPointDelta)\n          : segment.point.add(localLastPointDelta);\n      });\n      const draggedSegmentIndex = this.hitSegmentInfo\n        ? this.hitSegmentInfo.segmentIndex\n        : this.newSplitCurveSegmentIndex;\n      const dragSnapPoint = editPath.localToGlobal(editPath.segments[draggedSegmentIndex].point);\n      const { topLeft, center, bottomRight } = Array.from(\n        this.selectedSegmentIndexToInitialLocationMap.values(),\n      ).reduce((rect: paper.Rectangle, p: paper.Point) => {\n        p = editPath.localToGlobal(p);\n        return rect ? rect.include(p) : new paper.Rectangle(p, new paper.Size(0, 0));\n      }, undefined);\n      const siblingSnapPointsTable = [\n        [topLeft, center, bottomRight],\n        ...nonSelectedSegmentIndices.map(i => {\n          return [editPath.localToGlobal(editPath.segments[i].point)];\n        }),\n      ];\n\n      // TODO: snap this stuff like we do in the other gestures!\n      const snapInfo = SnapUtil.computeSnapInfo([dragSnapPoint], siblingSnapPointsTable);\n      if (snapInfo) {\n        this.ps.setSnapGuideInfo({\n          guides: snapInfo.guides.map(({ from, to }: Line) => {\n            from = this.pl.globalToLocal(new paper.Point(from));\n            to = this.pl.globalToLocal(new paper.Point(to));\n            return { from, to };\n          }),\n          rulers: [],\n        });\n      }\n    } else {\n      // Then we have just added a segment to the path in onMouseDown()\n      // and should thus move the segment's handles onMouseDrag().\n      // Note that there will only ever be one selected segment in this case.\n      const selectedSegmentIndex = this.selectedSegmentIndexToInitialLocationMap.keys().next()\n        .value;\n      const selectedSegment = editPath.segments[selectedSegmentIndex];\n      // TODO: dragging a handle belonging to an endpoint doesn't work! handle info is lost!\n      // TODO: snap the dragged segment handle with the newly created segment\n      if (event.modifiers.shift) {\n        const index = selectedSegmentIndex;\n        const initialSelectedSegmentPosition = this.selectedSegmentIndexToInitialLocationMap.get(\n          index,\n        );\n        const delta = localSnappedDownPointDelta;\n        selectedSegment.handleIn = initialSelectedSegmentPosition.subtract(delta);\n        selectedSegment.handleOut = initialSelectedSegmentPosition.add(delta);\n      } else {\n        selectedSegment.handleIn = selectedSegment.handleIn.subtract(localLastPointDelta);\n        selectedSegment.handleOut = selectedSegment.handleOut.add(localLastPointDelta);\n      }\n    }\n    this.localLastPoint = localPoint;\n\n    PaperUtil.replacePathInStore(this.ps, this.editPathId, editPath.pathData);\n  }\n\n  // @Override\n  onMouseUp(event: paper.ToolEvent) {\n    this.ps.setCursorType(CursorType.Default);\n    this.ps.setSnapGuideInfo(undefined);\n    if (this.exitEditPathModeOnMouseUp) {\n      this.ps.setEditPathInfo(undefined);\n    }\n  }\n\n  // TODO: handle escape key event?\n}\n","import { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\n/**\n * A gesture that performs selection and drag operations on a segment handle.\n *\n * Preconditions:\n * - The user is in edit path mode.\n * - The user hit a segment handle.\n */\nexport class SelectDragHandleGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n  private readonly hitHandleType: 'handleIn' | 'handleOut';\n\n  // The handle's initial location in local coordinates.\n  private localDownHandle: paper.Point;\n  private localLastDragInfo: {\n    readonly localDownPoint: paper.Point;\n    readonly localPoint: paper.Point;\n  };\n\n  constructor(\n    private readonly ps: PaperService,\n    private readonly editPathId: string,\n    private readonly hitSegmentIndex: number,\n    hitResultType: 'handle-in' | 'handle-out',\n  ) {\n    super();\n    this.hitHandleType = hitResultType === 'handle-in' ? 'handleIn' : 'handleOut';\n  }\n\n  // @Override\n  onMouseDown(event: paper.ToolEvent) {\n    // Deselect all currently selected segments.\n    const selectedSegments = new Set<number>();\n    const selectedHandleIn = this.hitHandleType === 'handleIn' ? this.hitSegmentIndex : undefined;\n    const selectedHandleOut = this.hitHandleType === 'handleOut' ? this.hitSegmentIndex : undefined;\n    this.ps.setEditPathInfo({\n      ...this.ps.getEditPathInfo(),\n      selectedSegments,\n      selectedHandleIn,\n      selectedHandleOut,\n    });\n    const editPath = this.pl.findItemByLayerId(this.editPathId) as paper.Path;\n    this.localDownHandle = editPath.segments[this.hitSegmentIndex][this.hitHandleType].clone();\n  }\n\n  // @Override\n  onMouseDrag(event: paper.ToolEvent) {\n    const editPath = this.pl.findItemByLayerId(this.editPathId);\n    this.localLastDragInfo = {\n      localDownPoint: editPath.globalToLocal(event.downPoint),\n      localPoint: editPath.globalToLocal(event.point),\n    };\n    this.processEvent(event);\n  }\n\n  // @Override\n  onKeyDown(event: paper.KeyEvent) {\n    this.processKeyEvent(event);\n  }\n\n  // @Override\n  onKeyUp(event: paper.KeyEvent) {\n    this.processKeyEvent(event);\n  }\n\n  // TODO: react to 'escape' key presses\n  private processKeyEvent(event: paper.KeyEvent) {\n    if (event.key === 'shift') {\n      this.processEvent(event);\n    }\n  }\n\n  private processEvent(event: paper.Event) {\n    if (!this.localLastDragInfo) {\n      return;\n    }\n    // TODO: add 'straight', 'mirrored', 'disconnected', and 'asymmetric' modes (similar to Sketch)\n    const { localDownPoint, localPoint } = this.localLastDragInfo;\n    const localHandle = this.localDownHandle.add(localPoint.subtract(localDownPoint));\n    if (event.modifiers.shift) {\n      // Project the handle onto the handle's original vector.\n      const theta = (-(this.localDownHandle.angle - localHandle.angle) * Math.PI) / 180;\n      localHandle.set(\n        this.localDownHandle.normalize().multiply(localHandle.length * Math.cos(theta)),\n      );\n    }\n    const editPath = this.pl.findItemByLayerId(this.editPathId) as paper.Path;\n    editPath.segments[this.hitSegmentIndex][this.hitHandleType] = localHandle;\n    PaperUtil.replacePathInStore(this.ps, this.editPathId, editPath.pathData);\n  }\n}\n","import { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\n/**\n * A gesture that toggles the handles associated with a path segment.\n *\n * Preconditions:\n * - The user is in edit path mode.\n * - The gesture began with a mouse down event on top of a segment\n *   (typically this is the second mouse down of a double click).\n */\nexport class ToggleSegmentHandlesGesture extends Gesture {\n  constructor(\n    private readonly ps: PaperService,\n    private readonly editPathId: string,\n    private readonly hitSegmentIndex: number,\n  ) {\n    super();\n  }\n\n  // @Override\n  onMouseDown(event: paper.ToolEvent) {\n    const path = new paper.Path(PaperUtil.getPathFromStore(this.ps, this.editPathId));\n    const segment = path.segments[this.hitSegmentIndex];\n    if (segment.hasHandles()) {\n      segment.clearHandles();\n    } else {\n      // TODO: polish this a bit more using the extra options argument?\n      segment.smooth();\n    }\n    PaperUtil.replacePathInStore(this.ps, this.editPathId, path.pathData);\n  }\n}\n","export { BatchSelectSegmentsGesture } from './BatchSelectSegmentsGesture';\nexport { MouldCurveGesture } from './MouldCurveGesture';\nexport { SelectDragDrawSegmentsGesture } from './SelectDragDrawSegmentsGesture';\nexport { SelectDragHandleGesture } from './SelectDragHandleGesture';\nexport { ToggleSegmentHandlesGesture } from './ToggleSegmentHandlesGesture';\n","import { ToolMode } from 'app/modules/editor/model/paper';\nimport { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\nimport { HoverItemsGesture } from './HoverItemsGesture';\nimport { HoverSegmentsCurvesGesture } from './HoverSegmentsCurvesGesture';\n\n/**\n * A gesture that handles mouse move hover events.\n */\nexport class HoverGesture extends Gesture {\n  private readonly hoverItemsGesture = new HoverItemsGesture(this.ps);\n  private readonly hoverSegmentsCurvesGesture = new HoverSegmentsCurvesGesture(this.ps);\n\n  constructor(private readonly ps: PaperService) {\n    super();\n  }\n\n  // @Override\n  onMouseMove(event: paper.ToolEvent) {\n    const gesture = this.getCurrentGesture();\n    if (gesture) {\n      gesture.onMouseMove(event);\n    }\n  }\n\n  // @Override\n  onKeyDown(event: paper.KeyEvent) {\n    const gesture = this.getCurrentGesture();\n    if (gesture) {\n      gesture.onKeyDown(event);\n    }\n  }\n\n  private getCurrentGesture() {\n    if (this.ps.getToolMode() !== ToolMode.Default) {\n      return undefined;\n    }\n    const epi = this.ps.getEditPathInfo();\n    if (!epi) {\n      return this.hoverItemsGesture;\n    }\n    if (!this.ps.getSelectedLayerIds().size) {\n      // If we are in edit path mode but there is no selected layer ID, then\n      // the user is using the 'vector' tool and hasn't yet started to create\n      // a path. In this case we do not want to show any hovers.\n      return undefined;\n    }\n    return this.hoverSegmentsCurvesGesture;\n  }\n}\n","import { CursorType } from 'app/modules/editor/model/paper';\nimport { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { HitTests } from 'app/modules/editor/scripts/paper/item';\nimport { PivotType } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\n// prettier-ignore\nconst RESIZE_CURSOR_MAP: ReadonlyMap<PivotType, CursorType> = new Map([\n  ['bottomLeft', CursorType.Resize45], ['leftCenter', CursorType.Resize90],\n  ['topLeft', CursorType.Resize135], ['topCenter', CursorType.Resize0],\n  ['topRight', CursorType.Resize45], ['rightCenter', CursorType.Resize90],\n  ['bottomRight', CursorType.Resize135], ['bottomCenter', CursorType.Resize0],\n] as [PivotType, CursorType][]);\n\n// prettier-ignore\nconst ROTATE_CURSOR_MAP: ReadonlyMap<PivotType, CursorType> = new Map([\n  ['bottomLeft', CursorType.Rotate225], ['leftCenter', CursorType.Rotate270],\n  ['topLeft', CursorType.Rotate315], ['topCenter', CursorType.Rotate0],\n  ['topRight', CursorType.Rotate45], ['rightCenter', CursorType.Rotate90],\n  ['bottomRight', CursorType.Rotate135], ['bottomCenter', CursorType.Rotate180],\n] as [PivotType, CursorType][]);\n\n// prettier-ignore\nconst TRANSFORM_CURSOR_MAP: ReadonlyMap<PivotType, CursorType> = new Map([\n  ['bottomLeft', CursorType.Resize45], ['leftCenter', CursorType.Resize0],\n  ['topLeft', CursorType.Resize135], ['topCenter', CursorType.Resize90],\n  ['topRight', CursorType.Resize45], ['rightCenter', CursorType.Resize0],\n  ['bottomRight', CursorType.Resize135], ['bottomCenter', CursorType.Resize90],\n] as [PivotType, CursorType][]);\n\n/**\n * A gesture that performs hover operations on items.\n *\n * Preconditions:\n * - The user is in default, rotate items, or transform paths mode.\n */\nexport class HoverItemsGesture extends Gesture {\n  constructor(private readonly ps: PaperService) {\n    super();\n  }\n\n  // @Override\n  onMouseMove(event: paper.ToolEvent) {\n    this.ps.setCursorType(CursorType.Default);\n\n    const selectedLayers = this.ps.getSelectedLayerIds();\n    if (selectedLayers.size) {\n      const rii = this.ps.getRotateItemsInfo();\n      const selectionBoundSegmentsHitResult = HitTests.selectionModeSegments(event.point);\n      if (selectionBoundSegmentsHitResult) {\n        const tpi = this.ps.getTransformPathsInfo();\n        const cursorMap = rii ? ROTATE_CURSOR_MAP : tpi ? TRANSFORM_CURSOR_MAP : RESIZE_CURSOR_MAP;\n        this.ps.setCursorType(cursorMap.get(selectionBoundSegmentsHitResult.item.pivotType));\n        this.ps.setHoveredLayerId(undefined);\n        return;\n      }\n      if (rii && HitTests.rotateItemsPivot(event.point)) {\n        this.ps.setCursorType(CursorType.Grab);\n        this.ps.setHoveredLayerId(undefined);\n        return;\n      }\n    }\n\n    const hitResult = HitTests.selectionMode(event.point, this.ps);\n    if (hitResult && !selectedLayers.has(hitResult.hitItem.data.id)) {\n      this.ps.setHoveredLayerId(hitResult.hitItem.data.id);\n    } else {\n      this.ps.setHoveredLayerId(undefined);\n    }\n  }\n\n  // @Override\n  onKeyDown(event: paper.KeyEvent) {\n    switch (event.key) {\n      case 'escape':\n        // TODO: also do this in any other hover/pen/pencil related gestures?\n        this.ps.setCursorType(CursorType.Default);\n        this.ps.setSnapGuideInfo(undefined);\n        this.ps.setRotateItemsInfo(undefined);\n        this.ps.setTransformPathsInfo(undefined);\n        break;\n      case 'backspace':\n      case 'delete':\n        this.ps.deleteSelectedModels();\n        break;\n    }\n  }\n}\n","import { CursorType } from 'app/modules/editor/model/paper';\nimport { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { HitTests, PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport { Action } from 'app/modules/editor/store';\nimport { BatchAction } from 'app/modules/editor/store/batch/actions';\nimport { SetVectorLayer } from 'app/modules/editor/store/layers/actions';\nimport { SetEditPathInfo } from 'app/modules/editor/store/paper/actions';\nimport * as paper from 'paper';\n\n/**\n * A gesture that performs hover operations over segments and curves.\n *\n * Preconditions:\n * - The user is in edit path mode for a selected layer id.\n */\nexport class HoverSegmentsCurvesGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n\n  constructor(private readonly ps: PaperService) {\n    super();\n  }\n\n  // @Override\n  onMouseMove(event: paper.ToolEvent) {\n    this.ps.setCursorType(CursorType.Default);\n    this.ps.setSplitCurveInfo(undefined);\n\n    // TODO: this seems kinda hacky\n    // TODO: currently necessary (if the previous gesture was the create/drag/draw segments gesture)\n    this.ps.setCreatePathInfo(undefined);\n\n    const editPathId = this.ps\n      .getSelectedLayerIds()\n      .values()\n      .next().value;\n    const editPath = this.pl.findItemByLayerId(editPathId) as paper.Path;\n    const segmentsAndHandlesHitResult = HitTests.editPathModeSegmentsAndHandles(event.point);\n    if (segmentsAndHandlesHitResult) {\n      // If we are hovering over a segment or a handle, then show a point select\n      // cursor and return.\n      this.ps.setCursorType(CursorType.PointSelect);\n      return;\n    }\n\n    const editPathHitResult = HitTests.editPathMode(event.point, editPath, {\n      curves: true,\n    });\n    if (editPathHitResult) {\n      if (editPathHitResult.type !== 'curve') {\n        // If we hit the edit path but missed its segments/handles/curves,\n        // then do nothing.\n        return;\n      }\n      // Show a pen add cursor and highlight the curve the user is about to split.\n      this.ps.setCursorType(CursorType.PenAdd);\n      const hitCurve = editPathHitResult.location.curve;\n      const location = event.modifiers.shift\n        ? hitCurve.getLocationAt(hitCurve.length / 2)\n        : editPathHitResult.location;\n      const vpSplitPoint = this.localToVpPoint(editPath, location.point);\n      const { point: p1, handleIn: in1, handleOut: out1 } = this.localToVpSegment(\n        editPath,\n        location.curve.segment1,\n      );\n      const { point: p2, handleIn: in2, handleOut: out2 } = this.localToVpSegment(\n        editPath,\n        location.curve.segment2,\n      );\n      this.ps.setSplitCurveInfo({\n        splitPoint: vpSplitPoint,\n        segment1: { point: p1, handleIn: in1, handleOut: out1 },\n        segment2: { point: p2, handleIn: in2, handleOut: out2 },\n      });\n      return;\n    }\n\n    // Draw an 'extend path' preview curve if one of its end points\n    // is selected and the path is still open.\n    const singleSelectedSegmentIndex = this.findSingleSelectedEndSegmentIndex(editPath);\n    if (singleSelectedSegmentIndex !== undefined) {\n      this.ps.setCursorType(CursorType.PenAdd);\n      const vpStartSegment = this.localToVpSegment(\n        editPath,\n        editPath.segments[singleSelectedSegmentIndex],\n      );\n      const vpEndSegment = new paper.Segment(this.pl.globalToLocal(event.point));\n      const { pathData } = new paper.Path([vpStartSegment, vpEndSegment]);\n      this.ps.setCreatePathInfo({\n        pathData,\n        strokeColor: '#979797',\n      });\n    }\n  }\n\n  /** Converts local coordinates to viewport coordinates for a point. */\n  private localToVpPoint(localItem: paper.Item, localPoint: paper.Point) {\n    return localPoint ? this.pl.globalToLocal(localItem.localToGlobal(localPoint)) : undefined;\n  }\n\n  /** Converts local coordinates to viewport coordinates for a segment. */\n  private localToVpSegment(localItem: paper.Item, localSegment: paper.Segment) {\n    return new paper.Segment(\n      this.localToVpPoint(localItem, localSegment.point),\n      this.localToVpHandle(localItem, localSegment.point, localSegment.handleIn),\n      this.localToVpHandle(localItem, localSegment.point, localSegment.handleOut),\n    );\n  }\n\n  /** Converts local coordinates to viewport coordinates for a segment handle. */\n  private localToVpHandle(\n    localItem: paper.Item,\n    localPoint: paper.Point,\n    localHandle: paper.Point,\n  ) {\n    const vpPoint = this.localToVpPoint(localItem, localPoint);\n    const vpHandle = this.localToVpPoint(localItem, localPoint.add(localHandle));\n    return vpHandle.subtract(vpPoint);\n  }\n\n  /**\n   * Returns the single selected end point segment index for the given path,\n   * or undefined if one doesn't exist.\n   */\n  private findSingleSelectedEndSegmentIndex(path: paper.Path) {\n    if (path.closed) {\n      // Return undefined if the path is closed.\n      return undefined;\n    }\n    const { selectedSegments } = this.ps.getEditPathInfo();\n    if (selectedSegments.size !== 1) {\n      // Return undefined if there is not a single selected segment.\n      return undefined;\n    }\n    const lastIndex = path.segments.length - 1;\n    return selectedSegments.has(0) ? 0 : selectedSegments.has(lastIndex) ? lastIndex : undefined;\n  }\n\n  // @Override\n  onKeyDown(event: paper.KeyEvent) {\n    switch (event.key) {\n      case 'escape':\n        // TODO: also do this in any other hover/pen/pencil related gestures?\n        this.ps.exitEditPathMode();\n        break;\n      case 'backspace':\n      case 'delete':\n        this.deleteSelectedSegmentsAndHandles();\n        break;\n    }\n  }\n\n  private deleteSelectedSegmentsAndHandles() {\n    const layerId = this.ps\n      .getSelectedLayerIds()\n      .values()\n      .next().value;\n    const { selectedHandleIn, selectedHandleOut, selectedSegments } = this.ps.getEditPathInfo();\n    if (\n      selectedHandleIn === undefined &&\n      selectedHandleOut === undefined &&\n      selectedSegments.size === 0\n    ) {\n      // Do nothing if there are no selected segments/handles.\n      // TODO: should we delete the layer in this case?\n      return;\n    }\n    const editPath = this.pl.findItemByLayerId(layerId) as paper.Path;\n    for (let i = editPath.segments.length - 1; i >= 0; i--) {\n      const segment = editPath.segments[i];\n      if (selectedSegments.has(i)) {\n        segment.remove();\n        continue;\n      }\n      if (selectedHandleIn === i) {\n        segment.handleIn = undefined;\n      }\n      if (selectedHandleOut === i) {\n        segment.handleOut = undefined;\n      }\n    }\n    const actions: Action[] = [];\n    if (editPath.segments.length === 0) {\n      // Delete the layer and exit edit path mode if there are no segments remaining.\n      actions.push(...this.ps.getDeleteSelectedModelsActions());\n      actions.push(...this.ps.getExitEditPathModeActions());\n    } else {\n      actions.push(\n        new SetVectorLayer(\n          PaperUtil.getReplacePathInStoreVectorLayer(this.ps, layerId, editPath.pathData),\n        ),\n        new SetEditPathInfo({\n          selectedHandleIn: undefined,\n          selectedHandleOut: undefined,\n          selectedSegments: new Set(),\n          visibleHandleIns: new Set(),\n          visibleHandleOuts: new Set(),\n        }),\n        ...this.ps.getClearEditPathModeStateActions(),\n      );\n    }\n    this.ps.dispatchStore(new BatchAction(...actions));\n  }\n}\n","export { HoverGesture } from './HoverGesture';\n","export { Gesture } from './Gesture';\n","import { CursorType } from 'app/modules/editor/model/paper';\nimport { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\n/**\n * A gesture that performs rotation operations.\n *\n * Preconditions:\n * - The user is in default mode.\n * - One or more layers are selected.\n * - A mouse down event occurred on top of the rotate items pivot.\n */\nexport class RotateItemsDragPivotGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n  private vpInitialPivotPoint: paper.Point;\n  private vpDownPoint: paper.Point;\n\n  constructor(private readonly ps: PaperService) {\n    super();\n  }\n\n  // @Override\n  onMouseDown(event: paper.ToolEvent) {\n    this.ps.setCursorType(CursorType.Grabbing);\n\n    // TODO: reuse this code with PaperLayer (filter out empty groups)\n    const selectedItems = Array.from(this.ps.getSelectedLayerIds())\n      .map(id => this.pl.findItemByLayerId(id))\n      .filter(i => !(i instanceof paper.Group) || i.children.length);\n    const invertedPaperLayerMatrix = this.pl.matrix.inverted();\n    const rii = this.ps.getRotateItemsInfo();\n    if (rii.pivot) {\n      this.vpInitialPivotPoint = new paper.Point(rii.pivot);\n    } else {\n      this.vpInitialPivotPoint = PaperUtil.transformRectangle(\n        PaperUtil.computeBounds(selectedItems),\n        invertedPaperLayerMatrix,\n      ).center;\n    }\n    this.vpDownPoint = this.pl.globalToLocal(event.downPoint);\n  }\n\n  // @Override\n  onMouseDrag(event: paper.ToolEvent) {\n    const vpPoint = this.pl.globalToLocal(event.point);\n    const pivot = this.vpInitialPivotPoint.add(vpPoint.subtract(this.vpDownPoint));\n    this.ps.setRotateItemsInfo({ pivot });\n  }\n\n  // @Override\n  onMouseUp(event: paper.ToolEvent) {\n    this.ps.setCursorType(CursorType.Default);\n  }\n\n  // @Override\n  onKeyDown(event: paper.KeyEvent) {}\n\n  // @Override\n  onKeyUp(event: paper.KeyEvent) {}\n}\n","import { LayerUtil, PathLayer, VectorLayer } from 'app/modules/editor/model/layers';\nimport { Path } from 'app/modules/editor/model/paths';\nimport { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\n/**\n * A gesture that performs rotation operations.\n *\n * Preconditions:\n * - The user is in default mode.\n * - One or more layers are selected.\n * - A mouse down event occurred on a selection bounds handle.\n *\n * TODO: avoid jank at beginning of rotation (when angle is near 0)\n * TODO: make sure the 'empty group' logic we add also matches what we have in PaperLayer.ts\n * TODO: show a tool tip during rotations\n * TODO: make sure the pivot doesn't move during the initial drag\n */\nexport class RotateItemsGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n  private selectedItems: ReadonlyArray<paper.Item>;\n  private localToVpItemMatrices: ReadonlyArray<paper.Matrix>;\n  private initialVectorLayer: VectorLayer;\n  private vpPivot: paper.Point;\n  private vpDownPoint: paper.Point;\n  private vpPoint: paper.Point;\n\n  constructor(private readonly ps: PaperService) {\n    super();\n  }\n\n  // @Override\n  onMouseDown(event: paper.ToolEvent) {\n    this.ps.setHoveredLayerId(undefined);\n\n    const scaleItems: paper.Item[] = [];\n    const scaleItemsSet = new Set<string>();\n    Array.from(this.ps.getSelectedLayerIds())\n      .map(id => this.pl.findItemByLayerId(id))\n      // TODO: reuse this code with PaperLayer (filter out empty groups)\n      .filter(i => !(i instanceof paper.Group) || i.children.length)\n      .forEach(function recurseFn(i: paper.Item) {\n        if (i instanceof paper.Group) {\n          i.children.forEach(recurseFn);\n        } else if (!scaleItemsSet.has(i.data.id)) {\n          scaleItemsSet.add(i.data.id);\n          scaleItems.push(i);\n        }\n      });\n    this.selectedItems = scaleItems;\n\n    const invertedPaperLayerMatrix = this.pl.matrix.inverted();\n    this.localToVpItemMatrices = this.selectedItems.map(item => {\n      // Compute the matrices to directly transform during drag events.\n      return item.globalMatrix.prepended(invertedPaperLayerMatrix).inverted();\n    });\n    const rii = this.ps.getRotateItemsInfo();\n    if (rii.pivot) {\n      this.vpPivot = new paper.Point(rii.pivot);\n    } else {\n      this.vpPivot = PaperUtil.transformRectangle(\n        PaperUtil.computeBounds(this.selectedItems),\n        invertedPaperLayerMatrix,\n      ).center;\n    }\n    this.initialVectorLayer = this.ps.getVectorLayer();\n    this.vpDownPoint = this.pl.globalToLocal(event.downPoint);\n  }\n\n  // @Override\n  onMouseDrag(event: paper.ToolEvent) {\n    this.vpPoint = this.pl.globalToLocal(event.point);\n    this.processEvent(event);\n  }\n\n  // @Override\n  onKeyDown(event: paper.KeyEvent) {\n    this.processKeyEvent(event);\n  }\n\n  // @Override\n  onKeyUp(event: paper.KeyEvent) {\n    this.processKeyEvent(event);\n  }\n\n  private processKeyEvent(event: paper.KeyEvent) {\n    if (event.key === 'shift') {\n      this.processEvent(event);\n    }\n  }\n\n  // TODO: determine if we should be baking transforms into the children layers when rotating a group?\n  private processEvent(event: paper.Event) {\n    if (!this.vpPoint) {\n      return;\n    }\n    const rotationAngle = this.getRotationAngle(event);\n    let newVl = this.initialVectorLayer.clone();\n    this.selectedItems.forEach((item, index) => {\n      const path = item.clone() as paper.Path;\n      path.applyMatrix = true;\n      const localToViewportMatrix = this.localToVpItemMatrices[index];\n      const matrix = localToViewportMatrix.clone();\n      matrix.rotate(rotationAngle, this.vpPivot);\n      matrix.append(localToViewportMatrix.inverted());\n      path.matrix = matrix;\n      const newPl = newVl.findLayerById(item.data.id).clone() as PathLayer;\n      newPl.pathData = new Path(path.pathData);\n      newVl = LayerUtil.replaceLayer(newVl, item.data.id, newPl);\n    });\n    this.ps.setVectorLayer(newVl);\n  }\n\n  private getRotationAngle(event: paper.Event) {\n    const initialDelta = this.vpDownPoint.subtract(this.vpPivot);\n    const initialAngle = (Math.atan2(initialDelta.y, initialDelta.x) * 180) / Math.PI;\n    const delta = this.vpPoint.subtract(this.vpPivot);\n    const angle = (Math.atan2(delta.y, delta.x) * 180) / Math.PI - initialAngle;\n    // TODO: this doesn't round properly if the angle was previously changed\n    return event.modifiers.shift ? Math.round(angle / 15) * 15 : angle;\n  }\n}\n","export { RotateItemsGesture } from './RotateItemsGesture';\nexport { RotateItemsDragPivotGesture } from './RotateItemsDragPivotGesture';\n","import { LayerUtil, MorphableLayer, VectorLayer } from 'app/modules/editor/model/layers';\nimport { Path } from 'app/modules/editor/model/paths';\nimport { MathUtil } from 'app/modules/editor/scripts/common';\nimport { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperLayer, SelectionBoundsRaster } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil, SnapUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport { Line } from 'app/modules/editor/store/paper/actions';\nimport * as _ from 'lodash';\nimport * as paper from 'paper';\n\n/**\n * A gesture that performs scaling operations.\n *\n * Preconditions:\n * - The user is in default mode.\n * - One or more layers are selected.\n * - A mouse down event occurred on a selection bounds handle.\n *\n * TODO: should we also scale the stroke width?\n */\nexport class ScaleItemsGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n  private selectedItems: ReadonlyArray<paper.Item>;\n  private localToVpItemMatrices: ReadonlyArray<paper.Matrix>;\n  private vpInitialPivot: paper.Point;\n  private vpInitialSize: paper.Point;\n  private vpInitialCenteredSize: paper.Point;\n  private vpInitialCenter: paper.Point;\n  private vpInitialDraggedSegment: paper.Point;\n  private vpDownPoint: paper.Point;\n  private vpPoint: paper.Point;\n  private initialVectorLayer: VectorLayer;\n\n  constructor(\n    private readonly ps: PaperService,\n    private readonly selectionBoundsRaster: SelectionBoundsRaster,\n  ) {\n    super();\n  }\n\n  // @Override\n  onMouseDown(event: paper.ToolEvent) {\n    this.ps.setHoveredLayerId(undefined);\n\n    // TODO: make searches like this more efficient...\n    const scaleItems: paper.Item[] = [];\n    const scaleItemsSet = new Set<string>();\n    Array.from(this.ps.getSelectedLayerIds())\n      .map(id => this.pl.findItemByLayerId(id))\n      // TODO: reuse this code with PaperLayer (filter out empty groups)\n      .filter(i => !(i instanceof paper.Group) || i.children.length)\n      .forEach(function recurseFn(i: paper.Item) {\n        if (i instanceof paper.Group) {\n          i.children.forEach(recurseFn);\n        } else if (!scaleItemsSet.has(i.data.id)) {\n          scaleItemsSet.add(i.data.id);\n          scaleItems.push(i);\n        }\n      });\n    this.selectedItems = scaleItems;\n\n    this.localToVpItemMatrices = this.selectedItems.map(item => {\n      // Compute the matrices to directly transform during drag events.\n      return item.globalMatrix.prepended(this.pl.matrix.inverted()).inverted();\n    });\n    const bounds = PaperUtil.transformRectangle(\n      PaperUtil.computeBounds(this.selectedItems),\n      this.pl.matrix.inverted(),\n    );\n    this.vpInitialPivot = bounds[this.selectionBoundsRaster.oppositePivotType];\n    this.vpInitialDraggedSegment = bounds[this.selectionBoundsRaster.pivotType];\n    this.vpDownPoint = bounds[this.selectionBoundsRaster.pivotType];\n    this.vpPoint = this.vpDownPoint;\n    this.vpInitialSize = this.vpDownPoint.subtract(this.vpInitialPivot);\n    this.vpInitialCenteredSize = this.vpInitialSize.multiply(0.5);\n    this.vpInitialCenter = bounds.center.clone();\n    this.initialVectorLayer = this.ps.getVectorLayer();\n  }\n\n  // @Override\n  onMouseDrag(event: paper.ToolEvent) {\n    this.vpPoint = this.pl.globalToLocal(event.point);\n    const { x, y } = this.vpPoint;\n    this.ps.setTooltipInfo({\n      point: { x, y },\n      // TODO: display the current width/height of the shape\n      label: `${_.round(x, 1)} ⨯ ${_.round(y, 1)}`,\n    });\n    this.processEvent(event);\n  }\n\n  // @Override\n  onMouseUp(event: paper.ToolEvent) {\n    // TODO: need to disable this in onKeyEvents as well?\n    this.ps.setSnapGuideInfo(undefined);\n    this.ps.setTooltipInfo(undefined);\n  }\n\n  // @Override\n  onKeyDown(event: paper.KeyEvent) {\n    this.processKeyEvent(event);\n  }\n\n  // @Override\n  onKeyUp(event: paper.KeyEvent) {\n    this.processKeyEvent(event);\n  }\n\n  private processKeyEvent(event: paper.KeyEvent) {\n    if (event.key === 'alt' || event.key === 'shift') {\n      this.processEvent(event);\n    }\n  }\n\n  // TODO: make sure it is possible to scale/shrink the item when holding shift?\n  private processEvent(event: paper.Event) {\n    const projDownPoint = this.pl.localToGlobal(this.vpDownPoint);\n    const projPoint = this.pl.localToGlobal(this.vpPoint);\n    const projDelta = projPoint.subtract(projDownPoint);\n\n    let newVl = this.initialVectorLayer.clone();\n    newVl = this.scaleItems(newVl, projDelta, event.modifiers.alt, event.modifiers.shift);\n    this.ps.setVectorLayer(newVl);\n\n    // TODO: this could be WAY more efficient (no need to scale/snap things twice)\n    // TODO: snap if shift is held and aspect ratio doesn't change?\n    // TODO: first snap the widths and heights, then snap the guides\n    const shouldSnap = !event.modifiers.shift;\n    if (shouldSnap) {\n      const snapInfo = this.buildSnapInfo();\n      if (snapInfo) {\n        const projSnapDelta = new paper.Point(snapInfo.projSnapDelta);\n        if (!projSnapDelta.isZero()) {\n          const shouldScaleAboutCenter = event.modifiers.alt;\n          const vpFixedPivot = shouldScaleAboutCenter ? this.vpInitialCenter : this.vpInitialPivot;\n          // TODO: confirm this is the correct way to fix the project snap delta?\n          if (this.vpPoint.x < vpFixedPivot.x) {\n            projSnapDelta.x *= -1;\n          }\n          if (this.vpPoint.y < vpFixedPivot.y) {\n            projSnapDelta.y *= -1;\n          }\n          newVl = this.scaleItems(\n            newVl,\n            projPoint.add(projSnapDelta).subtract(projDownPoint),\n            shouldScaleAboutCenter,\n          );\n          this.ps.setVectorLayer(newVl);\n        }\n      }\n    }\n\n    if (shouldSnap) {\n      const snapInfo = this.buildSnapInfo();\n      if (snapInfo) {\n        this.ps.setSnapGuideInfo({\n          guides: snapInfo.guides.map(g => this.projToVpLine(g)),\n          rulers: snapInfo.rulers.map(r => this.projToVpLine(r)),\n        });\n      } else {\n        this.ps.setSnapGuideInfo(undefined);\n      }\n    } else {\n      this.ps.setSnapGuideInfo(undefined);\n    }\n  }\n\n  private scaleItems(\n    newVl: VectorLayer,\n    projDelta: paper.Point,\n    shouldScaleAboutCenter: boolean,\n    shouldSnapDelta = false,\n  ) {\n    // Transform about the center if alt is pressed. Otherwise trasform about\n    // the pivot opposite of the currently active pivot.\n    const vpFixedPivot = shouldScaleAboutCenter ? this.vpInitialCenter : this.vpInitialPivot;\n    const currentSize = this.vpInitialDraggedSegment\n      .add(this.pl.globalToLocal(projDelta))\n      .subtract(vpFixedPivot);\n    const initialSize = shouldScaleAboutCenter ? this.vpInitialCenteredSize : this.vpInitialSize;\n    let sx = 1;\n    let sy = 1;\n    if (!MathUtil.isNearZero(initialSize.x)) {\n      sx = currentSize.x / initialSize.x;\n    }\n    if (!MathUtil.isNearZero(initialSize.y)) {\n      sy = currentSize.y / initialSize.y;\n    }\n    if (shouldSnapDelta) {\n      const signx = sx > 0 ? 1 : -1;\n      const signy = sy > 0 ? 1 : -1;\n      sx = sy = Math.max(Math.abs(sx), Math.abs(sy));\n      sx *= signx;\n      sy *= signy;\n    }\n\n    // TODO: determine if we should be baking transforms into the children layers when scaling a group?\n    this.selectedItems.forEach((item, index) => {\n      const path = item.clone() as paper.Path;\n      path.applyMatrix = true;\n      const localToVpMatrix = this.localToVpItemMatrices[index];\n      const matrix = localToVpMatrix.clone();\n      matrix.scale(sx, sy, vpFixedPivot);\n      matrix.append(localToVpMatrix.inverted());\n      path.matrix = matrix;\n      console.log(item.data.id);\n      const newPl = newVl.findLayerById(item.data.id).clone() as MorphableLayer;\n      newPl.pathData = new Path(path.pathData);\n      newVl = LayerUtil.replaceLayer(newVl, item.data.id, newPl);\n    });\n\n    return newVl;\n  }\n\n  // TODO: reuse this code with SelectDragCloneItemsGesture\n  private buildSnapInfo() {\n    const selectedLayerIds = this.ps.getSelectedLayerIds();\n    if (!selectedLayerIds.size) {\n      return undefined;\n    }\n    const draggedItems = Array.from(selectedLayerIds).map(id => this.pl.findItemByLayerId(id));\n    const { parent } = draggedItems[0];\n    if (!draggedItems.every(item => item.parent === parent)) {\n      // TODO: copy the behavior used in Sketch\n      console.warn('All snapped items must share the same parent item.');\n      return undefined;\n    }\n    const siblingItems = parent.children.filter(i => !draggedItems.includes(i));\n    if (!siblingItems.length) {\n      return undefined;\n    }\n\n    // Perform the snap test.\n    const toSnapPointsFn = (items: ReadonlyArray<paper.Item>) => {\n      const { topLeft, center, bottomRight } = PaperUtil.computeBounds(items);\n      return [topLeft, center, bottomRight];\n    };\n    // TODO: also snap-to-VectorLayer bounds (similar to the dragging gesture)\n    return SnapUtil.computeSnapInfo(\n      toSnapPointsFn(draggedItems),\n      siblingItems.map(siblingItem => toSnapPointsFn([siblingItem])),\n      true /* snapToDimensions */,\n    );\n  }\n\n  private projToVpLine({ from, to }: Line) {\n    return {\n      from: this.pl.globalToLocal(new paper.Point(from)),\n      to: this.pl.globalToLocal(new paper.Point(to)),\n    };\n  }\n}\n","export { ScaleItemsGesture } from './ScaleItemsGesture';\n","import { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\n/**\n * A gesture that selects one or more items using a selection box.\n *\n * Preconditions:\n * - The user is in default mode.\n */\nexport class BatchSelectItemsGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n  // private initialSelectedLayers: ReadonlySet<string>;\n\n  constructor(private readonly ps: PaperService) {\n    super();\n  }\n\n  // @Override\n  onMouseDown(event: paper.ToolEvent) {\n    if (!event.modifiers.shift) {\n      // A selection box implies that the gesture began with a failed hit test,\n      // so deselect everything on mouse down (unless the user is holding shift).\n      this.ps.setSelectedLayerIds(new Set());\n    }\n    // TODO: make use of this information (i.e. toggle the layers when shift is pressed)\n    // this.initialSelectedLayers = this.ps.getSelectedLayerIds();\n  }\n\n  // @Override\n  onMouseDrag(event: paper.ToolEvent) {\n    this.ps.setSelectionBox({\n      from: this.pl.globalToLocal(event.downPoint),\n      to: this.pl.globalToLocal(event.point),\n    });\n    this.selectItemsInSelectionBox(!event.modifiers.alt);\n  }\n\n  // @Override\n  onMouseUp(event: paper.ToolEvent) {\n    this.selectItemsInSelectionBox(!event.modifiers.alt);\n    this.ps.setSelectionBox(undefined);\n    this.ps.setRotateItemsInfo(undefined);\n    this.ps.setTransformPathsInfo(undefined);\n  }\n\n  // @Override\n  onKeyDown(event: paper.KeyEvent) {\n    if (event.key === 'alt') {\n      this.selectItemsInSelectionBox(false);\n    }\n  }\n\n  // @Override\n  onKeyUp(event: paper.KeyEvent) {\n    if (event.key === 'alt') {\n      this.selectItemsInSelectionBox(true);\n    }\n  }\n\n  private selectItemsInSelectionBox(includePartialOverlaps: boolean) {\n    const box = this.ps.getSelectionBox();\n    if (box) {\n      const from = new paper.Point(box.from);\n      const to = new paper.Point(box.to);\n      const selectedItems = this.pl.findItemsInBounds(\n        new paper.Rectangle(from, to),\n        includePartialOverlaps,\n      );\n      this.ps.setSelectedLayerIds(new Set(selectedItems.map(i => i.data.id)));\n    }\n  }\n}\n","import { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\n/**\n * A gesture that deselects a single item.\n *\n * Preconditions:\n * - The user is in default mode.\n */\nexport class DeselectItemGesture extends Gesture {\n  constructor(private readonly ps: PaperService, private readonly deselectedItemId: string) {\n    super();\n  }\n\n  // @Override\n  onMouseDown(event: paper.ToolEvent) {\n    const layerIds = new Set(this.ps.getSelectedLayerIds());\n    layerIds.delete(this.deselectedItemId);\n    this.ps.setSelectedLayerIds(layerIds);\n  }\n}\n","import { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\n/**\n * A gesture that exits default mode and enters edit path mode.\n *\n * Preconditions:\n * - The user is in default mode.\n */\nexport class EditPathGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n\n  constructor(private readonly ps: PaperService, private readonly editPathId: string) {\n    super();\n  }\n\n  // @Override\n  onMouseDown(event: paper.ToolEvent) {\n    const editPath = this.pl.findItemByLayerId(this.editPathId) as paper.Path;\n    this.ps.setSelectedLayerIds(new Set([this.editPathId]));\n    this.ps.setEditPathInfo({\n      ...PaperUtil.selectCurves(editPath, new Set([editPath.segments.length - 1])),\n    });\n    this.ps.setRotateItemsInfo(undefined);\n    this.ps.setTransformPathsInfo(undefined);\n  }\n}\n","import {\n  ClipPathLayer,\n  GroupLayer,\n  LayerUtil,\n  PathLayer,\n  VectorLayer,\n} from 'app/modules/editor/model/layers';\nimport { CursorType } from 'app/modules/editor/model/paper';\nimport { MathUtil, Matrix } from 'app/modules/editor/scripts/common';\nimport { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil, SnapUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport { Line } from 'app/modules/editor/store/paper/actions';\nimport * as paper from 'paper';\n\n/**\n * A gesture that performs selection, move, and clone operations\n * on one or more items.\n *\n * Preconditions:\n * - The user is in default mode.\n * - The user hit an item in the previous mousedown event.\n */\nexport class SelectDragCloneItemsGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n  private initialVectorLayer: VectorLayer;\n  private isDragging = false;\n\n  constructor(private readonly ps: PaperService, private readonly hitLayerId: string) {\n    super();\n  }\n\n  // @Override\n  onMouseDown(event: paper.ToolEvent) {\n    // Clear the current hover layer, if it exists.\n    this.ps.setHoveredLayerId(undefined);\n\n    const selectedLayers = new Set(this.ps.getSelectedLayerIds());\n    if (!event.modifiers.shift && !selectedLayers.has(this.hitLayerId)) {\n      // If shift isn't pressed and the hit layer isn't already selected,\n      // then clear any existing selections.\n      selectedLayers.clear();\n    }\n\n    // Select the hit item.\n    selectedLayers.add(this.hitLayerId);\n    this.ps.setSelectedLayerIds(selectedLayers);\n\n    // Save a copy of the initial vector layer so that we can make changes\n    // to it as we drag.\n    this.initialVectorLayer = this.ps.getVectorLayer();\n  }\n\n  // @Override\n  onMouseDrag(event: paper.ToolEvent) {\n    if (!this.isDragging) {\n      this.isDragging = true;\n      if (event.modifiers.alt) {\n        // TODO: clone the selected items\n      }\n      this.ps.setCursorType(CursorType.Grabbing);\n    }\n\n    let newVl = this.initialVectorLayer.clone();\n    newVl = this.dragItems(newVl, event.downPoint, event.point, event.modifiers.shift);\n    this.ps.setVectorLayer(newVl);\n\n    // TODO: this could be WAY more efficient (no need to drag/snap things twice)\n    const snapInfo = this.buildSnapInfo();\n    if (snapInfo) {\n      const projSnapDelta = new paper.Point(snapInfo.projSnapDelta);\n      if (!projSnapDelta.isZero()) {\n        newVl = this.dragItems(newVl, event.downPoint, event.downPoint.add(projSnapDelta));\n        this.ps.setVectorLayer(newVl);\n      }\n      const updatedSnapInfo = this.buildSnapInfo();\n      this.ps.setSnapGuideInfo({\n        guides: updatedSnapInfo.guides.map(g => this.projToVpLine(g)),\n        rulers: updatedSnapInfo.rulers.map(r => this.projToVpLine(r)),\n      });\n    } else {\n      this.ps.setSnapGuideInfo(undefined);\n    }\n  }\n\n  // TODO: dragging a parent and child simultaneously doesn't work\n  private dragItems(\n    newVl: VectorLayer,\n    projDownPoint: paper.Point,\n    projPoint: paper.Point,\n    shouldSnapDelta = false,\n  ) {\n    Array.from(this.ps.getSelectedLayerIds()).forEach(layerId => {\n      const item = this.pl.findItemByLayerId(layerId);\n      const localDown = item.globalToLocal(projDownPoint).transform(item.matrix);\n      const localCurr = item.globalToLocal(projPoint).transform(item.matrix);\n      const localDelta = localCurr.subtract(localDown);\n      const localFinalDelta = shouldSnapDelta\n        ? new paper.Point(MathUtil.snapVectorToAngle(localDelta, 90))\n        : localDelta;\n      newVl = dragItem(newVl, layerId, localFinalDelta);\n    });\n    return newVl;\n  }\n\n  // TODO: reuse this code with ScaleItemsGesture\n  private buildSnapInfo() {\n    const selectedLayerIds = this.ps.getSelectedLayerIds();\n    if (!selectedLayerIds.size) {\n      return undefined;\n    }\n    const draggedItems = Array.from(selectedLayerIds).map(id => this.pl.findItemByLayerId(id));\n    const { parent } = draggedItems[0];\n    if (!draggedItems.every(item => item.parent === parent)) {\n      // TODO: copy the behavior used in Sketch\n      console.warn('All snapped items must share the same parent item.');\n      return undefined;\n    }\n    const siblingItems = parent.children.filter(i => !draggedItems.includes(i));\n    const isParentVectorLayer = parent.data.id === this.initialVectorLayer.id;\n    if (!siblingItems.length && !isParentVectorLayer) {\n      return undefined;\n    }\n\n    // Perform the snap test.\n    const siblingSnapPointsTable = siblingItems.map(item => toSnapPoints([item]));\n    if (isParentVectorLayer) {\n      const { width, height } = this.initialVectorLayer;\n      const topLeft = new paper.Point(0, 0);\n      const bottomRight = parent.localToGlobal(new paper.Point(width, height));\n      const center = bottomRight.divide(2);\n      siblingSnapPointsTable.push([topLeft, center, bottomRight]);\n    }\n    return SnapUtil.computeSnapInfo(toSnapPoints(draggedItems), siblingSnapPointsTable);\n  }\n\n  // @Override\n  onMouseUp(event: paper.ToolEvent) {\n    this.ps.setSnapGuideInfo(undefined);\n    this.ps.setCursorType(CursorType.Default);\n  }\n\n  private projToVpLine({ from, to }: Line): Line {\n    return {\n      from: this.pl.globalToLocal(new paper.Point(from)),\n      to: this.pl.globalToLocal(new paper.Point(to)),\n    };\n  }\n}\n\n// TODO: should we bake transforms into children (to be consistent with scale items gesture?)\nfunction dragItem(newVl: VectorLayer, layerId: string, localDelta: paper.Point) {\n  const initialLayer = newVl.findLayerById(layerId);\n  const { x, y } = localDelta;\n  if (initialLayer instanceof PathLayer || initialLayer instanceof ClipPathLayer) {\n    const replacementLayer = initialLayer.clone();\n    replacementLayer.pathData = initialLayer.pathData.transform(Matrix.translation(x, y));\n    newVl = LayerUtil.replaceLayer(newVl, layerId, replacementLayer);\n  } else if (initialLayer instanceof GroupLayer) {\n    const replacementLayer = initialLayer.clone();\n    replacementLayer.translateX += x;\n    replacementLayer.translateY += y;\n    newVl = LayerUtil.replaceLayer(newVl, layerId, replacementLayer);\n  }\n  return newVl;\n}\n\nfunction toSnapPoints(items: ReadonlyArray<paper.Item>) {\n  const { topLeft, center, bottomRight } = PaperUtil.computeBounds(items);\n  return [topLeft, center, bottomRight];\n}\n","export { BatchSelectItemsGesture } from './BatchSelectItemsGesture';\nexport { DeselectItemGesture } from './DeselectItemGesture';\nexport { EditPathGesture } from './EditPathGesture';\nexport { SelectDragCloneItemsGesture } from './SelectDragCloneItemsGesture';\n","import { LayerUtil, PathLayer, VectorLayer } from 'app/modules/editor/model/layers';\nimport { Path } from 'app/modules/editor/model/paths';\nimport { TransformUtil } from 'app/modules/editor/scripts/common';\nimport { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport { PaperLayer, SelectionBoundsRaster } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\n/**\n * A gesture that performs transform operations.\n *\n * Preconditions:\n * - The user is in default mode.\n * - One or more paths are selected.\n * - A mouse down event occurred on a selection bounds handle.\n *\n * TODO: finish this\n * TODO: fix crash that can occur when 3+ points are on same axis\n * TODO: could this work with generic items (not just paths)?\n * TODO: we need to also filter out non-empty groups (see PaperLayer.ts)\n */\nexport class TransformPathsGesture extends Gesture {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n  private selectedItems: ReadonlyArray<paper.Path>;\n  private localToVpItemMatrices: ReadonlyArray<paper.Matrix>;\n  private initialVectorLayer: VectorLayer;\n  private vpDownPoint: paper.Point;\n  private vpPoint: paper.Point;\n  private vpBounds: paper.Rectangle;\n\n  constructor(\n    private readonly ps: PaperService,\n    private readonly selectionBoundsRaster: SelectionBoundsRaster,\n  ) {\n    super();\n  }\n\n  // @Override\n  onMouseDown(event: paper.ToolEvent) {\n    this.ps.setHoveredLayerId(undefined);\n    this.selectedItems = Array.from(this.ps.getSelectedLayerIds()).map(\n      id => this.pl.findItemByLayerId(id) as paper.Path,\n    );\n    const invertedPaperLayerMatrix = this.pl.matrix.inverted();\n    this.localToVpItemMatrices = this.selectedItems.map(item => {\n      // Compute the matrices to directly transform during drag events.\n      return item.globalMatrix.prepended(invertedPaperLayerMatrix).inverted();\n    });\n    this.vpBounds = PaperUtil.transformRectangle(\n      PaperUtil.computeBounds(this.selectedItems),\n      this.pl.matrix.inverted(),\n    );\n    this.vpDownPoint = this.vpBounds[this.selectionBoundsRaster.pivotType];\n    this.vpPoint = this.vpDownPoint;\n    this.initialVectorLayer = this.ps.getVectorLayer();\n  }\n\n  // @Override\n  onMouseDrag(event: paper.ToolEvent) {\n    this.vpPoint = this.pl.globalToLocal(event.point);\n    this.processEvent(event);\n  }\n\n  // @Override\n  onKeyDown(event: paper.KeyEvent) {\n    this.processKeyEvent(event);\n  }\n\n  // @Override\n  onKeyUp(event: paper.KeyEvent) {\n    this.processKeyEvent(event);\n  }\n\n  private processKeyEvent(event: paper.KeyEvent) {\n    if (event.key === 'command') {\n      this.processEvent(event);\n    }\n  }\n\n  private processEvent(event: paper.Event) {\n    if (!this.vpPoint) {\n      return;\n    }\n    const sourcePoints = [\n      this.vpBounds.topLeft,\n      this.vpBounds.topRight,\n      this.vpBounds.bottomRight,\n      this.vpBounds.bottomLeft,\n    ].map(({ x, y }) => [x, y] as [number, number]);\n    const targetPoints = [...sourcePoints];\n    const vpPoint = [this.vpPoint.x, this.vpPoint.y] as [number, number];\n    switch (this.selectionBoundsRaster.pivotType) {\n      case 'topLeft':\n        targetPoints[0] = vpPoint;\n        break;\n      case 'topRight':\n        targetPoints[1] = vpPoint;\n        break;\n      case 'bottomRight':\n        targetPoints[2] = vpPoint;\n        break;\n      case 'bottomLeft':\n        targetPoints[3] = vpPoint;\n        break;\n    }\n\n    const distortFn = TransformUtil.distort(sourcePoints, targetPoints);\n\n    let newVl = this.initialVectorLayer.clone();\n    this.selectedItems.forEach((item, index) => {\n      // TODO: make this stuff works for groups as well\n      const path = item.clone() as paper.Path;\n      const localToViewportMatrix = this.localToVpItemMatrices[index];\n      const pathDistortFn = (point: paper.Point) => {\n        point = localToViewportMatrix.transform(point);\n        const intermediatePoint = distortFn([point.x, point.y]);\n        point = new paper.Point(intermediatePoint[0], intermediatePoint[1]);\n        point = localToViewportMatrix.inverted().transform(point);\n        return point;\n      };\n      path.segments.forEach(segment => {\n        if (segment.handleIn) {\n          segment.handleIn = pathDistortFn(segment.point.add(segment.handleIn)).subtract(\n            segment.point,\n          );\n        }\n        if (segment.handleOut) {\n          segment.handleOut = pathDistortFn(segment.point.add(segment.handleOut)).subtract(\n            segment.point,\n          );\n        }\n        segment.point = pathDistortFn(segment.point);\n      });\n      const newPl = newVl.findLayerById(item.data.id).clone() as PathLayer;\n      newPl.pathData = new Path(path.pathData);\n      newVl = LayerUtil.replaceLayer(newVl, item.data.id, newPl);\n    });\n    this.ps.setVectorLayer(newVl);\n  }\n}\n","export { TransformPathsGesture } from './TransformPathsGesture';\n","import * as paper from 'paper';\n\n// By default paper.js bakes matrix transformations directly into its children.\n// This is usually not the behavior we want (especially for groups).\npaper.settings.applyMatrix = false;\n\n// By default paper.js automatically inserts newly created items into the active layer.\n// This behavior makes it harder to explicitly position things in the item hierarchy.\npaper.settings.insertItems = false;\n\nexport { PaperProject } from './PaperProject';\n","import * as paper from 'paper';\n\nexport class EditPathRaster extends paper.Raster {\n  constructor(\n    readonly type: 'segment' | 'handle-in' | 'handle-out',\n    readonly segmentIndex: number,\n    readonly isSelected: boolean,\n    center: paper.Point,\n  ) {\n    super(\n      type === 'segment'\n        ? `/assets/paper/${isSelected ? 'vector-segment-selected' : 'vector-segment'}.png`\n        : `/assets/paper/${isSelected ? 'vector-handle-selected' : 'vector-handle'}.png`,\n      center,\n    );\n  }\n}\n","import { Layer } from 'app/modules/editor/model/layers';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as _ from 'lodash';\nimport * as paper from 'paper';\n\nimport { EditPathRaster } from './EditPathRaster';\nimport { HitResult, PaperLayer } from './PaperLayer';\nimport { RotateItemsPivotRaster } from './RotateItemsPivotRaster';\nimport { SelectionBoundsRaster } from './SelectionBoundsRaster';\n\n/** Performs the default default mode hit test. */\nexport function selectionMode(projPoint: paper.Point, ps: PaperService) {\n  const pl = paper.project.activeLayer as PaperLayer;\n  const { children } = pl.hitTestVectorLayer(projPoint);\n  const selectionMap = getSelectedLayerMap(ps);\n  return findFirstHitResult(children, selectionMap);\n}\n\n/**\n * Returns a map of layerIds to booleans. Each key-value pair indicates whether\n * the subtree rooted at layerId contains a selected layer.\n */\nexport function getSelectedLayerMap(ps: PaperService) {\n  const map = new Map<string, boolean>();\n  const selectedLayers = ps.getSelectedLayerIds();\n  (function containsSelectedLayerFn(layer: Layer) {\n    let result = selectedLayers.has(layer.id);\n    layer.children.forEach(c => (result = containsSelectedLayerFn(c) || result));\n    map.set(layer.id, result);\n    return result;\n  })(ps.getVectorLayer());\n  return map;\n}\n\nexport function findFirstHitResult(\n  hitResults: ReadonlyArray<HitResult>,\n  selectionMap: Map<string, boolean>,\n  ignoredLayerIds = new Set<string>(),\n) {\n  let firstHitResult: HitResult;\n  _.forEach(hitResults, function recurseFn(hitResult: HitResult) {\n    if (firstHitResult) {\n      return false;\n    }\n    const hasSelectedChildLayer = (hitResult.hitItem.children || []).some(c =>\n      selectionMap.get(c.data.id),\n    );\n    if (!hasSelectedChildLayer && !ignoredLayerIds.has(hitResult.hitItem.data.id)) {\n      firstHitResult = hitResult;\n      return false;\n    }\n    _.forEach(hitResult.children, recurseFn);\n    return true;\n  });\n  return firstHitResult;\n}\n\n/** Performs a hit test on the currently selected selection bound handles. */\nexport function selectionModeSegments(projPoint: paper.Point) {\n  const pl = paper.project.activeLayer as PaperLayer;\n  return pl.hitTest(projPoint, { class: SelectionBoundsRaster });\n}\n\n/** Performs a hit test on the rotate items pivot. */\nexport function rotateItemsPivot(projPoint: paper.Point) {\n  const pl = paper.project.activeLayer as PaperLayer;\n  return pl.hitTest(projPoint, { class: RotateItemsPivotRaster });\n}\n\n/** Performs a hit test on the current edit path. */\nexport function editPathMode(\n  projPoint: paper.Point,\n  editPath: paper.Path,\n  hitOptions: { fill?: boolean; stroke?: boolean; curves?: boolean },\n) {\n  const { x: sx, y: sy } = editPath.globalMatrix.scaling;\n  const result = editPath.hitTest(editPath.globalToLocal(projPoint), {\n    ...(hitOptions as paper.HitOptions),\n    // TODO: properly calculate scale using similar method as in Matrix.ts\n    // TODO: also test that this works when zoomed in/out?\n    // TODO: are we correctly handling negative scales?\n    tolerance: 8 / Math.max(Math.abs(sx), Math.abs(sy)),\n    class: paper.Path,\n  });\n  return result;\n}\n\n/** Performs a hit test on the current edit path's segments and handles. */\nexport function editPathModeSegmentsAndHandles(projPoint: paper.Point) {\n  const pl = paper.project.activeLayer as PaperLayer;\n  return pl.hitTest(projPoint, { class: EditPathRaster });\n}\n","import {\n  ClipPathLayer,\n  GroupLayer,\n  Layer,\n  LayerUtil,\n  PathLayer,\n  VectorLayer,\n} from 'app/modules/editor/model/layers';\nimport { ColorUtil } from 'app/modules/editor/scripts/common';\nimport { PaperUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport {\n  CreatePathInfo,\n  EditPathInfo,\n  SnapGuideInfo,\n  SplitCurveInfo,\n  TooltipInfo,\n} from 'app/modules/editor/store/paper/actions';\nimport * as _ from 'lodash';\nimport * as paper from 'paper';\n\nimport { EditPathRaster } from './EditPathRaster';\nimport { RotateItemsPivotRaster } from './RotateItemsPivotRaster';\nimport { SelectionBoundsRaster } from './SelectionBoundsRaster';\n\n/**\n * The root layer used of our paper.js project. Note that this layer is\n * assigned a scale matrix that converts global project coordinates to\n * viewport coordinates.\n *\n * TODO: scaling rasters down causes their hit tolerances remain the same\n * TODO: when multiple items selected, show lightly outlined bounds for individual items?\n * TODO: explicitly set paths with no Z to closed? (i.e. M 1 1 h 6 v 6 h -6 v -6)\n * TODO: figure out if we can reduce stable bundle sizes (tree shake paper.js?)\n */\nexport class PaperLayer extends paper.Layer {\n  private canvasColorRect: paper.Path.Rectangle;\n  private vectorLayerItem: paper.Item;\n  private selectionBoundsItem: paper.Item;\n  private rotateItemsPivotItem: paper.Item;\n  private hoverPathItem: paper.Path;\n  private selectionBoxItem: paper.Path;\n  private createPathItem: paper.Path;\n  private splitCurveItem: paper.Item;\n  private editPathItem: paper.Item;\n  private snapGuideItem: paper.Item;\n  private pixelGridItem: paper.Item;\n  private tooltipItem: paper.Item;\n\n  private cssScaling = 1;\n\n  constructor(private readonly ps: PaperService) {\n    super();\n    this.canvasColorRect = new paper.Path.Rectangle(new paper.Point(0, 0), new paper.Size(0, 0));\n    this.canvasColorRect.guide = true;\n    this.updateChildren();\n  }\n\n  private get vectorLayer() {\n    return this.ps.getVectorLayer();\n  }\n\n  private get selectedLayerIds() {\n    return this.ps.getSelectedLayerIds();\n  }\n\n  private get hoveredLayerId() {\n    return this.ps.getHoveredLayerId();\n  }\n\n  private get hiddenLayerIds() {\n    return this.ps.getHiddenLayerIds();\n  }\n\n  private get editPathInfo() {\n    return this.ps.getEditPathInfo();\n  }\n\n  private get rotateItemsInfo() {\n    return this.ps.getRotateItemsInfo();\n  }\n\n  hitTestVectorLayer(projPoint: paper.Point) {\n    const { width: vpWidth, height: vpHeight } = this.vectorLayer;\n    const vpBounds = new paper.Rectangle(0, 0, vpWidth, vpHeight);\n    const vpPoint = this.vectorLayerItem.globalToLocal(projPoint);\n    if (!vpBounds.contains(vpPoint)) {\n      return { hitItem: undefined, children: [] };\n    }\n    const hitResult = (function recurseFn(item: paper.Item): HitResult {\n      const localPoint = item.globalToLocal(projPoint).transform(item.matrix);\n      let hitItem: paper.Item;\n      let children: HitResult[] = [];\n      if (item instanceof paper.Path) {\n        // TODO: figure out what to do with compound paths?\n        const res = item.hitTest(localPoint, { fill: true, stroke: true });\n        if (res) {\n          hitItem = res.item;\n        }\n      } else if (item instanceof paper.Group) {\n        const { strokeBounds } = item;\n        if (strokeBounds.contains(localPoint)) {\n          hitItem = item;\n          children = item.children.map(recurseFn).filter(r => !!r.hitItem);\n        }\n      }\n      return { hitItem, children };\n    })(this.vectorLayerItem);\n    return {\n      hitItem: this.vectorLayerItem,\n      children: hitResult.children,\n    };\n  }\n\n  setDimensions(\n    viewportWidth: number,\n    viewportHeight: number,\n    viewWidth: number,\n    viewHeight: number,\n  ) {\n    // Note that viewWidth / viewportWidth === viewHeight / viewportHeight.\n    this.cssScaling = viewWidth / viewportWidth;\n    this.matrix = new paper.Matrix().scale(this.cssScaling);\n    this.updatePixelGridItem(viewportWidth, viewportHeight);\n  }\n\n  onVectorLayerChanged() {\n    this.updateCanvasColorShape();\n    this.updateVectorLayerItem();\n    this.updateEditPathItem();\n    this.updateSelectionBoundsItem();\n    this.updateRotateItemsPivotItem();\n    this.updateHoverPathItem();\n  }\n\n  onSelectedLayerIdsChanged() {\n    this.updateSelectionBoundsItem();\n    this.updateRotateItemsPivotItem();\n  }\n\n  onHiddenLayerIdsChanged() {\n    this.updateHiddenLayers();\n    // TODO: should we hide selection bounds, overlays, etc. for invisible layers?\n  }\n\n  onHoveredLayerIdChanged() {\n    this.updateHoverPathItem();\n  }\n\n  onEditPathInfoChanged() {\n    this.updateEditPathItem();\n    this.updateSelectionBoundsItem();\n    this.updateRotateItemsPivotItem();\n  }\n\n  onRotateItemsInfoChanged() {\n    this.updateRotateItemsPivotItem();\n  }\n\n  setCreatePathInfo(info: CreatePathInfo) {\n    if (this.createPathItem) {\n      this.createPathItem.remove();\n      this.createPathItem = undefined;\n    }\n    if (info) {\n      this.createPathItem = newCreatePathItem(info);\n      this.updateChildren();\n    }\n  }\n\n  setSplitCurveInfo(info: SplitCurveInfo) {\n    if (this.splitCurveItem) {\n      this.splitCurveItem.remove();\n      this.splitCurveItem = undefined;\n    }\n    if (info) {\n      this.splitCurveItem = newSplitCurveItem(info, this.cssScaling);\n      this.updateChildren();\n    }\n  }\n\n  setTooltipInfo(info: TooltipInfo) {\n    if (this.tooltipItem) {\n      this.tooltipItem.remove();\n      this.tooltipItem = undefined;\n    }\n    if (info) {\n      // TODO: re-enable tooltip when ready\n      // this.tooltipItem = newTooltipItem(info, this.cssScaling);\n      this.updateChildren();\n    }\n  }\n\n  setSnapGuideInfo(info: SnapGuideInfo) {\n    if (this.snapGuideItem) {\n      this.snapGuideItem.remove();\n      this.snapGuideItem = undefined;\n    }\n    if (info) {\n      this.snapGuideItem = newSnapGuideItem(info, this.cssScaling);\n      this.updateChildren();\n    }\n  }\n\n  setSelectionBox(box: { from: paper.Point; to: paper.Point }) {\n    if (this.selectionBoxItem) {\n      this.selectionBoxItem.remove();\n      this.selectionBoxItem = undefined;\n    }\n    if (box) {\n      this.selectionBoxItem = newSelectionBoxItem(box.from, box.to);\n      this.updateChildren();\n    }\n  }\n\n  private updateCanvasColorShape() {\n    this.canvasColorRect = new paper.Path.Rectangle(\n      new paper.Point(0, 0),\n      new paper.Size(this.vectorLayer.width, this.vectorLayer.height),\n    );\n    this.canvasColorRect.guide = true;\n    this.canvasColorRect.fillColor = parseAndroidColor(this.vectorLayer.canvasColor) || 'white';\n    this.updateChildren();\n  }\n\n  private updateVectorLayerItem() {\n    if (this.vectorLayerItem) {\n      this.vectorLayerItem.remove();\n    }\n    this.vectorLayerItem = newVectorLayerItem(this.vectorLayer);\n    this.updateHiddenLayers();\n    this.updateChildren();\n  }\n\n  private updateSelectionBoundsItem() {\n    if (this.selectionBoundsItem) {\n      this.selectionBoundsItem.remove();\n      this.selectionBoundsItem = undefined;\n    }\n    if (!this.editPathInfo) {\n      const selectedItemBounds = this.getSelectedItemBounds();\n      if (selectedItemBounds) {\n        this.selectionBoundsItem = newSelectionBoundsItem(selectedItemBounds, this.cssScaling);\n      }\n    }\n    this.updateChildren();\n  }\n\n  private updateRotateItemsPivotItem() {\n    if (this.rotateItemsPivotItem) {\n      this.rotateItemsPivotItem.remove();\n      this.rotateItemsPivotItem = undefined;\n    }\n    const rii = this.rotateItemsInfo;\n    if (rii) {\n      const selectedItemBounds = this.getSelectedItemBounds();\n      if (selectedItemBounds) {\n        const vpPivot = rii.pivot ? new paper.Point(rii.pivot) : selectedItemBounds.center;\n        this.rotateItemsPivotItem = newRotationPivotItem(vpPivot, this.cssScaling);\n      }\n    }\n    this.updateChildren();\n  }\n\n  /**\n   * Returns the bounds of the currently selected items in project coordinates.\n   * Empty groups will be filtered out. Returns undefined if there are no selected\n   * items left to compute.\n   */\n  private getSelectedItemBounds() {\n    const selectedItems = Array.from(this.selectedLayerIds)\n      .map(id => this.findItemByLayerId(id))\n      // Filter out any selected empty groups.\n      .filter(i => !(i instanceof paper.Group) || i.children.length);\n    if (selectedItems.length === 0) {\n      return undefined;\n    }\n    return PaperUtil.transformRectangle(\n      PaperUtil.computeBounds(selectedItems),\n      this.matrix.inverted(),\n    );\n  }\n\n  private updateHiddenLayers() {\n    const hiddenLayerIds = this.hiddenLayerIds;\n    (function recurseFn(item: paper.Item) {\n      item.visible = !hiddenLayerIds.has(item.data.id);\n      if (item.hasChildren()) {\n        item.children.forEach(recurseFn);\n      }\n    })(this.vectorLayerItem);\n  }\n\n  private updateHoverPathItem() {\n    if (this.hoverPathItem) {\n      this.hoverPathItem.remove();\n      this.hoverPathItem = undefined;\n    }\n    if (this.hoveredLayerId) {\n      const item = this.findItemByLayerId(this.hoveredLayerId);\n      this.hoverPathItem = newHoverPathItem(item);\n    }\n    this.updateChildren();\n  }\n\n  private updateEditPathItem() {\n    if (this.editPathItem) {\n      this.editPathItem.remove();\n      this.editPathItem = undefined;\n    }\n    const epi = this.editPathInfo;\n    const selectedLayerIds = this.selectedLayerIds;\n    if (epi && selectedLayerIds.size) {\n      // TODO: is it possible for pathData to be undefined?\n      const path = this.findItemByLayerId(selectedLayerIds.values().next().value) as paper.Path;\n      this.editPathItem = newEditPathItem(path, epi, this.cssScaling);\n      this.updateChildren();\n    }\n  }\n\n  private updatePixelGridItem(viewportWidth: number, viewportHeight: number) {\n    if (this.pixelGridItem) {\n      this.pixelGridItem.remove();\n      this.pixelGridItem = undefined;\n    }\n    if (this.cssScaling > 4) {\n      this.pixelGridItem = newPixelGridItem(viewportWidth, viewportHeight);\n      this.updateChildren();\n    }\n  }\n\n  private updateChildren() {\n    this.children = _.compact([\n      this.canvasColorRect,\n      this.vectorLayerItem,\n      this.selectionBoundsItem,\n      this.rotateItemsPivotItem,\n      this.hoverPathItem,\n      this.createPathItem,\n      this.splitCurveItem,\n      this.editPathItem,\n      this.snapGuideItem,\n      this.selectionBoxItem,\n      this.pixelGridItem,\n      this.tooltipItem,\n    ]);\n  }\n\n  /** Finds the vector layer item with the given layer ID. */\n  findItemByLayerId(layerId: string) {\n    if (!layerId) {\n      return undefined;\n    }\n    if (this.vectorLayerItem.data.id === layerId) {\n      return this.vectorLayerItem;\n    }\n    return _.first(\n      this.vectorLayerItem.getItems({\n        match: ({ data: { id } }) => layerId === id,\n      }),\n    );\n  }\n\n  /**\n   * Finds all vector layer items that overlap with the specified bounds.\n   * Note that the bounds must be in viewport coordinates.\n   * @param includePartialOverlaps iff true, include items that partially overlap the bounds\n   */\n  findItemsInBounds(vpBounds: paper.Rectangle, includePartialOverlaps: boolean) {\n    return this.vectorLayerItem.getItems({\n      // TODO: figure out how to deal with groups and compound paths\n      class: paper.Path,\n      overlapping: includePartialOverlaps ? vpBounds : undefined,\n      inside: includePartialOverlaps ? undefined : vpBounds,\n    });\n  }\n}\n\nfunction parseAndroidColor(androidColor: string, alpha = 1) {\n  const color = ColorUtil.parseAndroidColor(androidColor);\n  return color\n    ? new paper.Color(color.r / 255, color.g / 255, color.b / 255, (color.a / 255) * alpha)\n    : undefined;\n}\n\nfunction newVectorLayerItem(vl: VectorLayer): paper.Item {\n  const item = new paper.Group();\n  if (!vl) {\n    return item;\n  }\n\n  const fromPathLayerFn = (layer: PathLayer) => {\n    const { fillColor, fillAlpha, strokeColor, strokeAlpha } = layer;\n    const { trimPathStart, trimPathEnd, trimPathOffset } = layer;\n    // TODO: make sure this works with compound paths as well (Android behavior is different)\n    const pathLength = layer.pathData ? layer.pathData.getPathLength() : 0;\n    const dashArray = pathLength\n      ? LayerUtil.toStrokeDashArray(trimPathStart, trimPathEnd, trimPathOffset, pathLength)\n      : undefined;\n    const dashOffset = pathLength\n      ? LayerUtil.toStrokeDashOffset(trimPathStart, trimPathEnd, trimPathOffset, pathLength)\n      : undefined;\n    // TODO: import a compound path instead\n    // Only paths with more than one command can be closed.\n    const closed =\n      layer.pathData && layer.pathData.isClosed() && layer.pathData.getCommands().length > 1;\n    return new paper.Path({\n      data: { id: layer.id },\n      pathData: layer.pathData ? layer.pathData.getPathString() : '',\n      fillColor: parseAndroidColor(fillColor, fillAlpha),\n      strokeColor: parseAndroidColor(strokeColor, strokeAlpha),\n      strokeWidth: layer.strokeWidth,\n      miterLimit: layer.strokeMiterLimit,\n      strokeJoin: layer.strokeLinejoin,\n      strokeCap: layer.strokeLinecap,\n      fillRule: layer.fillType === 'evenOdd' ? 'evenodd' : 'nonzero',\n      dashArray,\n      dashOffset,\n      closed,\n    });\n  };\n\n  const fromClipPathLayerFn = (layer: ClipPathLayer) => {\n    const pathData = layer.pathData ? layer.pathData.getPathString() : '';\n    // Only paths with more than one command can be closed.\n    const closed =\n      layer.pathData && layer.pathData.isClosed() && layer.pathData.getCommands().length > 1;\n    return new paper.Path({\n      data: { id: layer.id },\n      pathData,\n      clipMask: true,\n      closed,\n    });\n  };\n\n  const fromGroupLayerFn = (layer: GroupLayer) => {\n    const { pivotX, pivotY, scaleX, scaleY, rotation, translateX, translateY } = layer;\n    const pivot = new paper.Matrix(1, 0, 0, 1, pivotX, pivotY);\n    const scale = new paper.Matrix(scaleX, 0, 0, scaleY, 0, 0);\n    const cosr = Math.cos((rotation * Math.PI) / 180);\n    const sinr = Math.sin((rotation * Math.PI) / 180);\n    const rotate = new paper.Matrix(cosr, sinr, -sinr, cosr, 0, 0);\n    const translate = new paper.Matrix(1, 0, 0, 1, translateX, translateY);\n    const matrix = new paper.Matrix()\n      .prepend(pivot.inverted())\n      .prepend(scale)\n      .prepend(rotate)\n      .prepend(translate)\n      .prepend(pivot);\n    return new paper.Group({ data: { id: layer.id }, matrix });\n  };\n\n  item.data.id = vl.id;\n  item.opacity = vl.alpha;\n  item.addChildren(\n    vl.children.map(function recurseFn(layer: Layer) {\n      if (layer instanceof PathLayer) {\n        // TODO: return a compound path instead\n        return fromPathLayerFn(layer);\n      }\n      if (layer instanceof ClipPathLayer) {\n        // TODO: return a compound path instead\n        return fromClipPathLayerFn(layer);\n      }\n      if (layer instanceof GroupLayer) {\n        const groupItem = fromGroupLayerFn(layer);\n        groupItem.addChildren(layer.children.map(l => recurseFn(l)));\n        return groupItem;\n      }\n      throw new TypeError('Unknown layer type: ' + layer);\n    }),\n  );\n  return item;\n}\n\n/** Creates a new hover path for the specified item. */\nfunction newHoverPathItem(item: paper.Item) {\n  let hoverPath: paper.Path;\n  if (item instanceof paper.Group) {\n    hoverPath = new paper.Path.Rectangle(item.bounds);\n  } else if (item instanceof paper.Path) {\n    hoverPath = new paper.Path(item.segments);\n    hoverPath.closed = item.closed;\n  }\n  if (hoverPath) {\n    hoverPath.strokeColor = '#009dec';\n    hoverPath.guide = true;\n    hoverPath.strokeScaling = false;\n    hoverPath.strokeWidth = 2 / paper.view.zoom;\n    // Transform the hover path from local coordinates to viewport coordinates.\n    hoverPath.matrix = item.globalMatrix\n      .prepended(paper.project.activeLayer.matrix.inverted())\n      .prepend(item.matrix.inverted());\n  }\n  return hoverPath;\n}\n\n// TODO: reuse this code with SelectionBoundsRaster, etc.\nconst PIVOT_TYPES: Readonly<\n  [\n    'topLeft',\n    'topCenter',\n    'topRight',\n    'rightCenter',\n    'bottomRight',\n    'bottomCenter',\n    'bottomLeft',\n    'leftCenter'\n  ]\n> = [\n  'topLeft',\n  'topCenter',\n  'topRight',\n  'rightCenter',\n  'bottomRight',\n  'bottomCenter',\n  'bottomLeft',\n  'leftCenter',\n];\n\n/**\n * Creates a new selection bounds item for the specified selected items.\n */\nfunction newSelectionBoundsItem(bounds: paper.Rectangle, cssScaling: number) {\n  const group = new paper.Group();\n\n  // Draw an outline for the bounded box.\n  const outlinePath = new paper.Path.Rectangle(bounds);\n  outlinePath.strokeScaling = false;\n  outlinePath.strokeWidth = 2 / paper.view.zoom;\n  outlinePath.strokeColor = '#e8e8e8';\n  outlinePath.guide = true;\n  group.addChild(outlinePath);\n\n  // Create segments for the bounded box.\n  PIVOT_TYPES.forEach(pivotType => {\n    // TODO: avoid creating rasters in a loop like this\n    const center = bounds[pivotType];\n    const handle = SelectionBoundsRaster.of(pivotType, center);\n    const scaleFactor = getRasterScaleFactor(cssScaling);\n    handle.scale(scaleFactor, scaleFactor);\n    group.addChild(handle);\n  });\n\n  return group;\n}\n\n/**\n * Creates a rotation pivot point at the specified position.\n */\nfunction newRotationPivotItem(position: paper.Point, cssScaling: number) {\n  const pivot = RotateItemsPivotRaster.of(position);\n  const scaleFactor = getRasterScaleFactor(cssScaling);\n  pivot.scale(scaleFactor, scaleFactor);\n  return pivot;\n}\n\n/**\n * Creates the overlay decorations for the given edit path.\n */\nfunction newEditPathItem(path: paper.Path, info: EditPathInfo, cssScaling: number) {\n  const group = new paper.Group();\n  const scaleFactor = getRasterScaleFactor(cssScaling);\n\n  const matrix = path.globalMatrix.prepended(\n    new paper.Matrix(1 / cssScaling, 0, 0, 1 / cssScaling, 0, 0),\n  );\n  const addRasterFn = (raster: paper.Raster) => {\n    raster.scale(scaleFactor, scaleFactor);\n    group.addChild(raster);\n    return raster;\n  };\n  const addLineFn = (from: paper.Point, to: paper.Point) => {\n    const line = new paper.Path.Line(from, to);\n    line.guide = true;\n    line.strokeColor = '#aaaaaa';\n    line.strokeWidth = 1 / paper.view.zoom;\n    line.strokeScaling = false;\n    // line.transform(matrix);\n    group.addChild(line);\n  };\n  const {\n    selectedSegments,\n    visibleHandleIns,\n    selectedHandleIn,\n    visibleHandleOuts,\n    selectedHandleOut,\n  } = info;\n  // TODO: avoid creating rasters in a loop like this\n  path.segments.forEach(({ point, handleIn, handleOut }, segmentIndex) => {\n    const center = point.transform(matrix);\n    if (handleIn && visibleHandleIns.has(segmentIndex)) {\n      handleIn = point.add(handleIn).transform(matrix);\n      addLineFn(center, handleIn);\n      addRasterFn(\n        new EditPathRaster('handle-in', segmentIndex, selectedHandleIn === segmentIndex, handleIn),\n      );\n    }\n    if (handleOut && visibleHandleOuts.has(segmentIndex)) {\n      handleOut = point.add(handleOut).transform(matrix);\n      addLineFn(center, handleOut);\n      addRasterFn(\n        new EditPathRaster(\n          'handle-out',\n          segmentIndex,\n          selectedHandleOut === segmentIndex,\n          handleOut,\n        ),\n      );\n    }\n    addRasterFn(\n      new EditPathRaster('segment', segmentIndex, selectedSegments.has(segmentIndex), center),\n    );\n  });\n  return group;\n}\n\nfunction getRasterScaleFactor(cssScaling: number) {\n  return 1 / (1.8 * cssScaling * paper.view.zoom);\n}\n\nfunction newCreatePathItem(info: CreatePathInfo) {\n  const path = new paper.Path(info.pathData);\n  path.guide = true;\n  path.strokeScaling = false;\n  path.strokeWidth = 1 / paper.view.zoom;\n  path.strokeColor = info.strokeColor;\n  return path;\n}\n\nfunction newSplitCurveItem(info: SplitCurveInfo, cssScaling: number) {\n  const group = new paper.Group();\n  group.guide = true;\n\n  const { splitPoint, segment1, segment2 } = info;\n  const point1 = new paper.Point(segment1.point);\n  const handleIn1 = new paper.Point(segment1.handleIn);\n  const handleOut1 = new paper.Point(segment1.handleOut);\n  const point2 = new paper.Point(segment2.point);\n  const handleIn2 = new paper.Point(segment2.handleIn);\n  const handleOut2 = new paper.Point(segment2.handleOut);\n  const highlightedCurve = new paper.Path([\n    new paper.Segment(point1, handleIn1, handleOut1),\n    new paper.Segment(point2, handleIn2, handleOut2),\n  ]);\n  highlightedCurve.guide = true;\n  highlightedCurve.strokeColor = '#3466A9';\n  highlightedCurve.strokeScaling = false;\n  highlightedCurve.strokeWidth = 2 / paper.view.zoom;\n  group.addChild(highlightedCurve);\n\n  const highlightedPoint = new paper.Path.Circle(\n    new paper.Point(splitPoint),\n    4 / paper.view.zoom / cssScaling,\n  );\n  highlightedPoint.guide = true;\n  highlightedPoint.fillColor = '#3466A9';\n  group.addChild(highlightedPoint);\n\n  return group;\n}\n\n// TODO: add rounded rect background for tooltip\n// TODO: ensure tooltip is justified correctly w/ respect to the active item\n// function newTooltipItem(info: TooltipInfo, cssScaling: number) {\n//   return new paper.PointText({\n//     point: info.point,\n//     content: info.label,\n//     fillColor: 'red',\n//     justification: 'left',\n//     // TODO: text doesn't display when using font size of only 12?\n//     fontSize: 14 / paper.view.zoom / cssScaling,\n//     fontFamily: 'Roboto, Helvetica Neue, sans-serif',\n//     guide: true,\n//   });\n// }\n\nfunction newSnapGuideItem(info: SnapGuideInfo, cssScaling: number) {\n  const group = new paper.Group({ guide: true });\n\n  const newLineFn = (from: paper.Point, to: paper.Point) => {\n    const line = new paper.Path.Line(from, to);\n    line.guide = true;\n    line.strokeScaling = false;\n    line.strokeWidth = 1 / paper.view.zoom;\n    line.strokeColor = 'red';\n    return line;\n  };\n\n  info.guides.forEach(({ from, to }) => {\n    group.addChild(newLineFn(new paper.Point(from), new paper.Point(to)));\n  });\n\n  const addToAngleFn = (point: paper.Point, angle: number) => {\n    point = point.clone();\n    point.angle += angle;\n    return point;\n  };\n\n  const newHandleLineFn = (endPoint: paper.Point, handle: paper.Point) => {\n    const from = endPoint.add(addToAngleFn(handle, 90));\n    const to = endPoint.add(addToAngleFn(handle, -90));\n    return newLineFn(from, to);\n  };\n\n  const newRulerLabelFn = (point: paper.Point, content: string) => {\n    // TODO: use a better font (roboto?)\n    // TODO: add padding above/to the side of the label\n    return new paper.PointText({\n      point,\n      content,\n      fillColor: 'red',\n      // TODO: add justification so it displays to the bottom-left of the current point\n      fontSize: 12 / paper.view.zoom / cssScaling,\n      guide: true,\n    });\n  };\n\n  const handleLengthPixels = 4;\n  const matrix = new paper.Matrix(cssScaling, 0, 0, cssScaling, 0, 0);\n  info.rulers.forEach(line => {\n    const from = new paper.Point(line.from);\n    const to = new paper.Point(line.to);\n    const mid = from.add(to.subtract(from).multiply(0.5));\n    const globalFrom = from.transform(matrix);\n    const globalTo = to.transform(matrix);\n    const rulerHandle = globalTo\n      .subtract(globalFrom)\n      .normalize()\n      .multiply(handleLengthPixels)\n      .transform(matrix.inverted());\n    // TODO: make sure the rounded vs. actual values are equal!\n    // TODO: only display decimals for small viewports\n    const pointTextLabel = _.round(from.getDistance(to), 1).toString();\n    group.addChildren([\n      newLineFn(from, to),\n      newHandleLineFn(from, rulerHandle),\n      newHandleLineFn(to, rulerHandle),\n      newRulerLabelFn(mid, pointTextLabel),\n    ]);\n  });\n\n  return group;\n}\n\nfunction newSelectionBoxItem(from: paper.Point, to: paper.Point) {\n  const path = new paper.Path.Rectangle(new paper.Rectangle(from, to));\n  path.guide = true;\n  path.strokeScaling = false;\n  path.strokeWidth = 1 / paper.view.zoom;\n  path.strokeColor = '#aaaaaa';\n  path.dashArray = [3 / paper.view.zoom];\n  return path;\n}\n\nfunction newPixelGridItem(viewportWidth: number, viewportHeight: number) {\n  const group = new paper.Group({ guide: true });\n  const newLineFn = (from: paper.Point, to: paper.Point) => {\n    const line = new paper.Path.Rectangle(from, to);\n    line.strokeColor = '#808080';\n    line.opacity = 0.25;\n    line.strokeScaling = false;\n    line.strokeWidth = 1;\n    line.guide = true;\n    return line;\n  };\n  for (let x = 1; x < viewportWidth; x++) {\n    group.addChild(newLineFn(new paper.Point(x, 0), new paper.Point(x, viewportHeight)));\n  }\n  for (let y = 1; y < viewportHeight; y++) {\n    group.addChild(newLineFn(new paper.Point(0, y), new paper.Point(viewportWidth, y)));\n  }\n  return group;\n}\n\nexport interface HitResult {\n  hitItem: paper.Item | undefined;\n  children: ReadonlyArray<HitResult>;\n}\n","import * as paper from 'paper';\n\nexport class RotateItemsPivotRaster extends paper.Raster {\n  private static instance: RotateItemsPivotRaster;\n\n  static of(position: paper.Point) {\n    if (!RotateItemsPivotRaster.instance) {\n      RotateItemsPivotRaster.instance = new RotateItemsPivotRaster();\n    }\n    const raster = RotateItemsPivotRaster.instance.clone(false) as RotateItemsPivotRaster;\n    raster.position = position;\n    return raster;\n  }\n\n  constructor() {\n    super('/assets/paper/rotate-items-pivot.png');\n  }\n}\n","import { PivotType } from 'app/modules/editor/scripts/paper/util';\nimport * as paper from 'paper';\n\nconst PIVOT_TYPES: ReadonlyArray<PivotType> = [\n  'bottomLeft',\n  'leftCenter',\n  'topLeft',\n  'topCenter',\n  'topRight',\n  'rightCenter',\n  'bottomRight',\n  'bottomCenter',\n];\n\nexport class SelectionBoundsRaster extends paper.Raster {\n  private static instance: SelectionBoundsRaster;\n  private pivotType_: PivotType;\n  private oppositePivotType_: PivotType;\n\n  static of(pivotType: PivotType, center: paper.Point) {\n    if (!SelectionBoundsRaster.instance) {\n      SelectionBoundsRaster.instance = new SelectionBoundsRaster();\n    }\n    const raster = SelectionBoundsRaster.instance.clone(false) as SelectionBoundsRaster;\n    raster.position = center;\n    raster.pivotType_ = pivotType;\n    raster.oppositePivotType_ = getOppositePivotType(pivotType);\n    return raster;\n  }\n\n  constructor() {\n    super(`/assets/paper/selection-bounds-segment.png`);\n  }\n\n  get pivotType() {\n    return this.pivotType_;\n  }\n\n  get oppositePivotType() {\n    return this.oppositePivotType_;\n  }\n}\n\nconst OPPOSITE_PIVOT_TYPES: ReadonlyArray<PivotType> = ((arr: ReadonlyArray<PivotType>) =>\n  arr.map((_, i) => arr[(i + arr.length / 2) % arr.length]))(PIVOT_TYPES);\n\nfunction getOppositePivotType(pivotType: PivotType) {\n  return OPPOSITE_PIVOT_TYPES[PIVOT_TYPES.indexOf(pivotType)];\n}\n","import * as HitTests from './HitTests';\nexport { HitTests };\n\nexport { PaperLayer, HitResult } from './PaperLayer';\nexport { SelectionBoundsRaster } from './SelectionBoundsRaster';\n","import { ToolMode } from 'app/modules/editor/model/paper';\nimport { ClickDetector } from 'app/modules/editor/scripts/paper/detector';\nimport { Gesture } from 'app/modules/editor/scripts/paper/gesture';\nimport {\n  EllipseGesture,\n  PencilGesture,\n  RectangleGesture,\n} from 'app/modules/editor/scripts/paper/gesture/create';\nimport {\n  BatchSelectSegmentsGesture,\n  MouldCurveGesture,\n  SelectDragDrawSegmentsGesture,\n  SelectDragHandleGesture,\n  ToggleSegmentHandlesGesture,\n} from 'app/modules/editor/scripts/paper/gesture/edit';\nimport { HoverGesture } from 'app/modules/editor/scripts/paper/gesture/hover';\nimport {\n  RotateItemsDragPivotGesture,\n  RotateItemsGesture,\n} from 'app/modules/editor/scripts/paper/gesture/rotate';\nimport { ScaleItemsGesture } from 'app/modules/editor/scripts/paper/gesture/scale';\nimport {\n  BatchSelectItemsGesture,\n  DeselectItemGesture,\n  EditPathGesture,\n  SelectDragCloneItemsGesture,\n} from 'app/modules/editor/scripts/paper/gesture/select';\nimport { TransformPathsGesture } from 'app/modules/editor/scripts/paper/gesture/transform';\nimport { HitTests, PaperLayer } from 'app/modules/editor/scripts/paper/item';\nimport { PaperUtil } from 'app/modules/editor/scripts/paper/util';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\nimport { Tool } from './Tool';\n\n/**\n * A tool that delegates responsibilities to different gestures given the\n * state of the current tool mode and key/mouse events.\n */\nexport class GestureTool extends Tool {\n  private readonly pl = paper.project.activeLayer as PaperLayer;\n  private readonly clickDetector = new ClickDetector();\n  private currentGesture: Gesture = new HoverGesture(this.ps);\n\n  constructor(private readonly ps: PaperService) {\n    super();\n  }\n\n  // @Override\n  onToolEvent(event: paper.ToolEvent) {\n    this.clickDetector.onToolEvent(event);\n    if (event.type === 'mousedown') {\n      this.onMouseDown(event);\n    } else if (event.type === 'mousedrag') {\n      this.currentGesture.onMouseDrag(event);\n    } else if (event.type === 'mousemove') {\n      this.currentGesture.onMouseMove(event);\n    } else if (event.type === 'mouseup') {\n      this.onMouseUp(event);\n    }\n  }\n\n  private onMouseDown(event: paper.ToolEvent) {\n    const toolMode = this.ps.getToolMode();\n    if (toolMode === ToolMode.Ellipse) {\n      this.currentGesture = new EllipseGesture(this.ps);\n    } else if (toolMode === ToolMode.Rectangle) {\n      this.currentGesture = new RectangleGesture(this.ps);\n    } else if (toolMode === ToolMode.Pencil) {\n      this.currentGesture = new PencilGesture(this.ps);\n    } else {\n      this.currentGesture = this.createSelectionModeGesture(event);\n    }\n    this.currentGesture.onMouseDown(event);\n  }\n\n  private onMouseUp(event: paper.ToolEvent) {\n    this.currentGesture.onMouseUp(event);\n    this.currentGesture = new HoverGesture(this.ps);\n  }\n\n  private createSelectionModeGesture(event: paper.ToolEvent) {\n    if (this.ps.getEditPathInfo()) {\n      return this.createEditPathModeGesture(event);\n    }\n    const selectedLayerIds = this.ps.getSelectedLayerIds();\n    if (selectedLayerIds.size) {\n      // First perform a hit test on the selection bound's segments.\n      const selectionBoundSegmentsHitResult = HitTests.selectionModeSegments(event.point);\n      const rii = this.ps.getRotateItemsInfo();\n      if (selectionBoundSegmentsHitResult) {\n        // If the hit item is a selection bound segment, then perform\n        // a scale/rotate/transform gesture.\n        if (rii) {\n          return new RotateItemsGesture(this.ps);\n        }\n        if (this.ps.getTransformPathsInfo()) {\n          return new TransformPathsGesture(this.ps, selectionBoundSegmentsHitResult.item);\n        }\n        return new ScaleItemsGesture(this.ps, selectionBoundSegmentsHitResult.item);\n      }\n      if (rii) {\n        // Perform a hit test on the rotate items pivot.\n        const rotateItemsHitResult = HitTests.rotateItemsPivot(event.point);\n        if (rotateItemsHitResult) {\n          return new RotateItemsDragPivotGesture(this.ps);\n        }\n      }\n    }\n\n    const hitResults = this.pl.hitTestVectorLayer(event.point);\n    const selectionMap = HitTests.getSelectedLayerMap(this.ps);\n    const hitResult = HitTests.findFirstHitResult(hitResults.children, selectionMap);\n    if (!hitResult) {\n      // If there is no hit item, then batch select items using a selection box.\n      return new BatchSelectItemsGesture(this.ps);\n    }\n\n    const hitItemId = hitResult.hitItem.data.id;\n    if (this.clickDetector.isDoubleClick()) {\n      const hitLayer = this.ps.getVectorLayer().findLayerById(hitItemId);\n      if (hitLayer.children.length) {\n        const newHitResult = HitTests.findFirstHitResult(\n          hitResults.children,\n          selectionMap,\n          new Set([hitLayer.id]),\n        );\n        if (newHitResult) {\n          return new SelectDragCloneItemsGesture(this.ps, newHitResult.hitItem.data.id);\n        } else {\n          return new BatchSelectItemsGesture(this.ps);\n        }\n      } else {\n        // If a double click event occurs on top of a hit item w/ no children,\n        // then enter edit path mode.\n        return new EditPathGesture(this.ps, hitItemId);\n      }\n    }\n\n    if (selectedLayerIds.has(hitItemId) && event.modifiers.shift && selectedLayerIds.size > 1) {\n      // If the hit item is selected, shift is pressed, and there is at least\n      // one other selected item, then deselect the hit item.\n\n      // TODO: After the item is deselected, it should still be possible\n      // to drag/clone any other selected items in subsequent mouse events\n      return new DeselectItemGesture(this.ps, hitItemId);\n    }\n\n    // TODO: The actual behavior in Sketch is a bit more complicated.\n    // For example, (1) a cloned item will not be generated until the next\n    // onMouseDrag event, (2) on the next onMouseDrag event, the\n    // cloned item should be selected and the currently selected item should\n    // be deselected, (3) the user can cancel a clone operation mid-drag by\n    // pressing/unpressing alt (even if alt wasn't initially pressed in\n    // onMouseDown).\n\n    // At this point we know that either (1) the hit item is not selected\n    // or (2) the hit item is selected, shift is not being pressed, and\n    // there is only one selected item. In both cases the hit item should\n    // end up being selected. If alt is being pressed, then we should\n    // clone the item as well.\n    return new SelectDragCloneItemsGesture(this.ps, hitItemId);\n  }\n\n  private createEditPathModeGesture(event: paper.ToolEvent) {\n    const selectedLayerIds = this.ps.getSelectedLayerIds();\n    let layerId = selectedLayerIds.size ? selectedLayerIds.values().next().value : '';\n    let epi = this.ps.getEditPathInfo();\n    if (!layerId) {\n      // Then the user has created the first segment of a new path, in which\n      // case we must create a new dummy path and bring it into focus.\n      const newPathLayer = PaperUtil.addPathToStore(this.ps, '');\n      layerId = newPathLayer.id;\n      epi = {\n        selectedSegments: new Set<number>(),\n        visibleHandleIns: new Set<number>(),\n        visibleHandleOuts: new Set<number>(),\n        selectedHandleIn: undefined,\n        selectedHandleOut: undefined,\n      };\n      this.ps.setSelectedLayerIds(new Set([layerId]));\n      this.ps.setEditPathInfo(epi);\n    }\n\n    const editPathId = layerId;\n    const editPath = this.pl.findItemByLayerId(editPathId) as paper.Path;\n\n    // First, do a hit test on the edit path's segments and handles.\n    const segmentsAndHandlesHitResult = HitTests.editPathModeSegmentsAndHandles(event.point);\n    if (segmentsAndHandlesHitResult) {\n      const { segmentIndex, type } = segmentsAndHandlesHitResult.item;\n      if (type === 'handle-in' || type === 'handle-out') {\n        // If a mouse down event occurred on top of a handle,\n        // then select/drag the handle.\n        return new SelectDragHandleGesture(this.ps, editPathId, segmentIndex, type);\n      }\n      if (this.clickDetector.isDoubleClick()) {\n        // If a double click occurred on top of a segment, then toggle the segment's handles.\n        return new ToggleSegmentHandlesGesture(this.ps, editPathId, segmentIndex);\n      }\n      // If a mouse down event occurred on top of a segment,\n      // then select/drag the segment.\n      return SelectDragDrawSegmentsGesture.hitSegment(this.ps, editPathId, segmentIndex);\n    }\n\n    // Second, do a hit test on the edit path itself.\n    let hitResult = HitTests.editPathMode(event.point, editPath, {\n      fill: true,\n      stroke: true,\n      curves: true,\n    });\n    if (hitResult) {\n      if (hitResult.type !== 'curve') {\n        // TODO: is there a way to avoid a second hit test like this?\n        hitResult = HitTests.editPathMode(event.point, editPath, {\n          curves: true,\n        });\n      }\n      if (hitResult && hitResult.type === 'curve') {\n        if (event.modifiers.command) {\n          // If the user is holding down command, then modify the curve\n          // by dragging it.\n          return new MouldCurveGesture(this.ps, editPathId, {\n            curveIndex: hitResult.location.index,\n            time: hitResult.location.time,\n          });\n        }\n        // Add a segment to the curve.\n        return SelectDragDrawSegmentsGesture.hitCurve(\n          this.ps,\n          editPathId,\n          hitResult.location.index,\n          hitResult.location.time,\n        );\n      }\n      // Note that we won't exit edit path mode on the next mouse up event\n      // (since the gesture began with a successful hit test).\n      return new BatchSelectSegmentsGesture(\n        this.ps,\n        editPathId,\n        false /* clearEditPathOnDraglessClick */,\n      );\n    }\n\n    if (!editPath.segments.length) {\n      // Then we are beginning to build a new path from scratch.\n      return SelectDragDrawSegmentsGesture.miss(this.ps, editPathId);\n    }\n\n    if (!editPath.closed && epi.selectedSegments.size === 1) {\n      const selectedSegmentIndex = epi.selectedSegments.values().next().value;\n      if (selectedSegmentIndex === 0 || selectedSegmentIndex === editPath.segments.length - 1) {\n        // Then we are extending an existing open path with a single selected end point segment.\n        return SelectDragDrawSegmentsGesture.miss(this.ps, editPathId);\n      }\n    }\n\n    // If there is no hit item and we are in edit path mode, then\n    // enter selection box mode for the edit path so we can\n    // batch select its segments. If no drag occurs, the gesture will\n    // exit edit path mode on the next mouse up event.\n    return new BatchSelectSegmentsGesture(\n      this.ps,\n      editPathId,\n      true /* clearEditPathOnDraglessClick */,\n    );\n  }\n\n  // @Override\n  onKeyEvent(event: paper.KeyEvent) {\n    if (event.type === 'keydown') {\n      this.currentGesture.onKeyDown(event);\n    } else if (event.type === 'keyup') {\n      this.currentGesture.onKeyUp(event);\n    }\n  }\n}\n","import { ToolMode } from 'app/modules/editor/model/paper';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\nimport { GestureTool } from './GestureTool';\nimport { Tool } from './Tool';\nimport { ZoomPanTool } from './ZoomPanTool';\n\n/**\n * The master tool that is in charge of dispatching mouse, key,\n * and tool mode change events.\n */\nexport class MasterToolPicker {\n  private readonly paperTool = new paper.Tool();\n\n  constructor(private readonly ps: PaperService) {\n    const gestureTool = new GestureTool(ps);\n    const zoomPanTool = new ZoomPanTool(ps);\n    let currentTool: Tool;\n\n    const onEventFn = (event: paper.ToolEvent | paper.KeyEvent) => {\n      const prevTool = currentTool;\n      currentTool =\n        this.ps.getToolMode() === ToolMode.ZoomPan || (event && event.modifiers.space)\n          ? zoomPanTool\n          : gestureTool;\n      if (prevTool !== currentTool) {\n        if (prevTool) {\n          prevTool.onDeactivate();\n        }\n        currentTool.onActivate();\n      }\n      if (event instanceof paper.ToolEvent) {\n        currentTool.onToolEvent(event);\n      } else {\n        // TODO: do a better job at clearing focus in the property input component\n        // (i.e. clear focus when the user selects something in the canvas or timeline).\n        if (document.activeElement.matches('input')) {\n          // Ignore key events when an input element has focus.\n          return;\n        }\n        if (event.key === 'backspace' || event.key === 'delete') {\n          // In case there's a JS error, never navigate away.\n          event.preventDefault();\n        }\n        currentTool.onKeyEvent(event);\n      }\n    };\n\n    this.paperTool.on({\n      mousedown: onEventFn,\n      mousedrag: onEventFn,\n      mousemove: onEventFn,\n      mouseup: onEventFn,\n      keydown: onEventFn,\n      keyup: onEventFn,\n    });\n  }\n\n  onToolModeChanged() {\n    // TODO: better way to set this?\n    this.paperTool.fixedDistance = this.ps.getToolMode() === ToolMode.Pencil ? 4 : undefined;\n  }\n}\n","import * as paper from 'paper';\n\n/** Represents the base class for all tool types. */\nexport abstract class Tool {\n  /** Called immediately after this tool has been activated. */\n  onActivate() {}\n\n  /**\n   * Called when this tool has received a tool event (i.e. mouse down,\n   * mouse drag, mouse move, mouse up).\n   */\n  onToolEvent(event: paper.ToolEvent) {}\n\n  /** Called when this tool has received a key event (i.e. key down, key up). */\n  onKeyEvent(event: paper.KeyEvent) {}\n\n  /** Called immediately after this tool has been deactivated. */\n  onDeactivate() {}\n}\n","import { CursorType } from 'app/modules/editor/model/paper';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as _ from 'lodash';\nimport * as paper from 'paper';\n\nimport { Tool } from './Tool';\n\n/** A tool that enables zooming and panning in the canvas. */\nexport class ZoomPanTool extends Tool {\n  // Keep track of the last known mouse point in view space coordinates.\n  private viewLastPoint: paper.Point;\n  private isDragging: boolean;\n\n  constructor(private readonly ps: PaperService) {\n    super();\n  }\n\n  // @Override\n  onActivate() {\n    this.viewLastPoint = new paper.Point(0, 0);\n    this.isDragging = false;\n    this.ps.setCursorType(CursorType.ZoomIn);\n  }\n\n  // @Override\n  onDeactivate() {\n    // TODO: set the cursor type to whatever it was before onActivate()?\n    this.ps.setCursorType(CursorType.Default);\n  }\n\n  // @Override\n  onToolEvent(event: paper.ToolEvent) {\n    if (event.type === 'mousedown') {\n      this.onMouseDown(event);\n    } else if (event.type === 'mousedrag') {\n      this.onMouseDrag(event);\n    } else if (event.type === 'mouseup') {\n      this.onMouseUp(event);\n    }\n  }\n\n  private onMouseDown(event: paper.ToolEvent) {\n    this.isDragging = false;\n    this.updateCursorType(event);\n\n    if (event.modifiers.space) {\n      // If space is pressed, then grab/pan the canvas. We store the last known\n      // mouse point in view space coordinates (which means the top left corner\n      // of the canvas will always be (0, 0), no matter how much we've panned/zoomed\n      // so far).\n      this.viewLastPoint = paper.view.projectToView(event.point);\n      return;\n    }\n\n    // Zoom out if alt is pressed, and zoom in otherwise.\n    const zoom = paper.view.zoom * (event.modifiers.alt ? 1 / 2 : 2);\n    const { x, y } = paper.view.projectToView(event.point).subtract(event.point.multiply(zoom));\n    this.setZoomPanInfo(zoom, x, y);\n  }\n\n  private onMouseDrag(event: paper.ToolEvent) {\n    this.isDragging = false;\n    this.updateCursorType(event);\n\n    if (!event.modifiers.space) {\n      return;\n    }\n\n    // In order to have coordinate changes not mess up the dragging, we need to\n    // convert coordinates to view space, and then back to project space after\n    // the view has been scrolled.\n    const projPoint = event.point;\n    const viewPoint = paper.view.projectToView(projPoint);\n    const { tx, ty } = paper.view.matrix\n      .clone()\n      .translate(projPoint.subtract(paper.view.viewToProject(this.viewLastPoint)));\n    this.setZoomPanInfo(paper.view.zoom, tx, ty);\n    this.viewLastPoint = viewPoint;\n  }\n\n  private onMouseUp(event: paper.ToolEvent) {\n    this.isDragging = false;\n    this.updateCursorType(event);\n  }\n\n  private setZoomPanInfo(zoom: number, tx: number, ty: number) {\n    const { width, height } = paper.view.viewSize;\n    zoom = _.clamp(zoom, 1, 256);\n    tx = _.clamp(tx, -width * (zoom - 1), 0);\n    ty = _.clamp(ty, -height * (zoom - 1), 0);\n    this.ps.setZoomPanInfo({ zoom, translation: { tx, ty } });\n  }\n\n  // @Override\n  onKeyEvent(event: paper.KeyEvent) {\n    if (event.key === 'space' || event.key === 'alt') {\n      this.updateCursorType(event);\n    }\n  }\n\n  private updateCursorType(event: paper.Event) {\n    if (event.modifiers.space) {\n      this.ps.setCursorType(this.isDragging ? CursorType.Grabbing : CursorType.Grab);\n    } else {\n      this.ps.setCursorType(event.modifiers.alt ? CursorType.ZoomOut : CursorType.ZoomIn);\n    }\n  }\n}\n","export { MasterToolPicker } from './MasterToolPicker';\n","import { Layer, LayerUtil, PathLayer } from 'app/modules/editor/model/layers';\nimport { Path } from 'app/modules/editor/model/paths';\nimport { PaperService } from 'app/modules/editor/services';\nimport * as paper from 'paper';\n\n/** Adds a new path to the first level of the vector layer tree. */\nexport function addPathToStore(ps: PaperService, pathData: string) {\n  const vl = ps.getVectorLayer().clone();\n  const pl = new PathLayer({\n    name: LayerUtil.getUniqueLayerName([vl], 'path'),\n    children: [] as Layer[],\n    pathData: new Path(pathData),\n    // TODO: make this customizable\n    fillColor: '#D8D8D8',\n    strokeColor: '#979797',\n    strokeWidth: 0.1,\n  });\n  vl.children = [...vl.children, pl];\n  ps.setVectorLayer(vl);\n  return pl;\n}\n\n/** Returns the path data string for the specified path layer ID. */\nexport function getPathFromStore(ps: PaperService, layerId: string) {\n  const vl = ps.getVectorLayer();\n  const pl = vl.findLayerById(layerId).clone() as PathLayer;\n  return pl.pathData.getPathString();\n}\n\n/** Replaces an existing path in the vector layer tree. */\nexport function replacePathInStore(ps: PaperService, layerId: string, pathData: string) {\n  ps.setVectorLayer(getReplacePathInStoreVectorLayer(ps, layerId, pathData));\n}\n\nexport function getReplacePathInStoreVectorLayer(\n  ps: PaperService,\n  layerId: string,\n  pathData: string,\n) {\n  const vl = ps.getVectorLayer();\n  const pl = vl.findLayerById(layerId).clone() as PathLayer;\n  pl.pathData = new Path(pathData);\n  return LayerUtil.replaceLayer(vl, layerId, pl);\n}\n\n/** Computes the selected curves associated with the given selected segment indices. */\nexport function selectCurves(path: paper.Path, selectedSegments: ReadonlySet<number>) {\n  const visibleHandleIns = new Set(selectedSegments);\n  const visibleHandleOuts = new Set(selectedSegments);\n  selectedSegments.forEach(segmentIndex => {\n    // Also display the out-handle for the previous segment\n    // and the in-handle for the next segment.\n    const { previous, next } = path.segments[segmentIndex];\n    if (previous) {\n      visibleHandleOuts.add(previous.index);\n    }\n    if (next) {\n      visibleHandleIns.add(next.index);\n    }\n  });\n  return {\n    selectedSegments,\n    visibleHandleIns,\n    visibleHandleOuts,\n    selectedHandleIn: undefined as number,\n    selectedHandleOut: undefined as number,\n  };\n}\n\n/** Returns a new matrix that has been transformed by the specified matrix m. */\nexport function transformRectangle(rect: paper.Rectangle, m: paper.Matrix) {\n  return new paper.Rectangle(rect.topLeft.transform(m), rect.bottomRight.transform(m));\n}\n\n/** Computes the bounds for the specified items in global project coordinates. */\nexport function computeBounds(arg: paper.Item | ReadonlyArray<paper.Item>) {\n  const flattenedItems: paper.Item[] = [];\n  (Array.isArray(arg) ? arg : [arg]).forEach(function recurseFn(i: paper.Item) {\n    if (i.hasChildren()) {\n      i.children.forEach(c => recurseFn(c));\n    } else {\n      flattenedItems.push(i);\n    }\n  });\n  return flattenedItems\n    .map(item => transformRectangle(item.bounds, item.globalMatrix))\n    .reduce((p, c) => p.unite(c));\n}\n","import * as PaperUtil from './PaperUtil';\nexport { PaperUtil };\nexport { PivotType } from './PivotType';\nexport { SnapUtil } from './snap';\n","type H = Readonly<{ dir: 'horizontal'; start: 'left'; end: 'right'; size: 'width'; coord: 'x' }>;\ntype V = Readonly<{ dir: 'vertical'; start: 'top'; end: 'bottom'; size: 'height'; coord: 'y' }>;\n\nexport type Horiz = H & Record<'opp', V>;\nexport type Vert = V & Record<'opp', H>;\n\nconst horiz: H = { dir: 'horizontal', start: 'left', end: 'right', size: 'width', coord: 'x' };\nconst vert: V = { dir: 'vertical', start: 'top', end: 'bottom', size: 'height', coord: 'y' };\n\nexport type Direction = 'horizontal' | 'vertical';\nexport const DIRECTIONS: ['horizontal', 'vertical'] = ['horizontal', 'vertical'];\nexport const CONSTANTS: Readonly<{ horizontal: Horiz; vertical: Vert }> = {\n  horizontal: { ...horiz, opp: vert },\n  vertical: { ...vert, opp: horiz },\n};\n","import { MathUtil, Point } from 'app/modules/editor/scripts/common';\nimport { Line } from 'app/modules/editor/store/paper/actions';\nimport * as _ from 'lodash';\n\nexport class SnapBounds {\n  readonly snapPoints: ReadonlyArray<Point>;\n  readonly left: number;\n  readonly top: number;\n  readonly right: number;\n  readonly bottom: number;\n  readonly width: number;\n  readonly height: number;\n\n  constructor(...snapPoints: Point[]) {\n    this.snapPoints = snapPoints;\n    this.left = _.minBy(snapPoints, p => p.x).x;\n    this.top = _.minBy(snapPoints, p => p.y).y;\n    this.right = _.maxBy(snapPoints, p => p.x).x;\n    this.bottom = _.maxBy(snapPoints, p => p.y).y;\n    this.width = this.right - this.left;\n    this.height = this.bottom - this.top;\n  }\n\n  /** Computes the minimum distance between two snap bounds. */\n  distance(sb: SnapBounds): Readonly<{ line: Line; dist: number }> {\n    const { left: l1, top: t1, right: r1, bottom: b1 } = this;\n    const { left: l2, top: t2, right: r2, bottom: b2 } = sb;\n    const left = r2 < l1;\n    const top = b1 < t2;\n    const right = r1 < l2;\n    const bottom = b2 < t1;\n    let line: Line;\n    if (top && left) {\n      line = { from: { x: l1, y: b1 }, to: { x: r2, y: t2 } };\n    } else if (left && bottom) {\n      line = { from: { x: l1, y: t1 }, to: { x: r2, y: b2 } };\n    } else if (bottom && right) {\n      line = { from: { x: r1, y: t1 }, to: { x: l2, y: b2 } };\n    } else if (right && top) {\n      line = { from: { x: r1, y: b1 }, to: { x: l2, y: t2 } };\n    } else if (left) {\n      line = { from: { x: r2, y: t1 }, to: { x: l1, y: t1 } };\n    } else if (right) {\n      line = { from: { x: r1, y: t1 }, to: { x: l2, y: t1 } };\n    } else if (bottom) {\n      line = { from: { x: l1, y: b2 }, to: { x: l1, y: t1 } };\n    } else if (top) {\n      line = { from: { x: l1, y: b1 }, to: { x: l1, y: t2 } };\n    } else {\n      // TODO: handle this case better? (it implies the bounds intersect)\n      line = { from: { x: l1, y: t1 }, to: { x: l1, y: t1 } };\n    }\n    return { line, dist: MathUtil.distance(line.from, line.to) };\n  }\n}\n","import { MathUtil, Point } from 'app/modules/editor/scripts/common';\nimport { Line } from 'app/modules/editor/store/paper/actions';\nimport * as _ from 'lodash';\n\nimport { CONSTANTS, DIRECTIONS, Direction } from './Constants';\nimport { SnapBounds } from './SnapBounds';\n\n// TODO: make sure to test things with different stroke width values!\nconst SNAP_TOLERANCE_PIXELS = 10;\n\n/**\n * A helper function that snaps the given dragged snap points to each of its siblings.\n *\n * TODO: make it possible to create rulers optionally only if a flag is passed\n */\nexport function computeSnapInfo(\n  dragSnapPoints: ReadonlyArray<Point>,\n  siblingSnapPointsTable: ReadonlyTable<Point>,\n  snapToDimensions = false,\n): SnapInfo {\n  const dsb = new SnapBounds(...dragSnapPoints);\n  const ssbs = siblingSnapPointsTable.map(pts => new SnapBounds(...pts));\n  const { horizontal, vertical } = snapToSiblings(dsb, ssbs, snapToDimensions);\n  const isHorizontalHit = Math.abs(horizontal.delta) <= SNAP_TOLERANCE_PIXELS;\n  const horizontalDelta = isHorizontalHit ? horizontal.delta : Infinity;\n  const horizontalValues = isHorizontalHit ? horizontal.values : [];\n  const isVerticalHit = Math.abs(vertical.delta) <= SNAP_TOLERANCE_PIXELS;\n  const verticalDelta = isVerticalHit ? vertical.delta : Infinity;\n  const verticalValues = isVerticalHit ? vertical.values : [];\n  const snapInfo: SnapInfoInternal = {\n    horizontal: { delta: horizontalDelta, values: horizontalValues },\n    vertical: { delta: verticalDelta, values: verticalValues },\n  };\n  const projSnapDelta = {\n    x: isFinite(horizontalDelta) ? -horizontalDelta : 0,\n    y: isFinite(verticalDelta) ? -verticalDelta : 0,\n  };\n  return {\n    projSnapDelta,\n    guides: buildGuides(snapInfo),\n    rulers: buildRulers(snapInfo),\n  };\n}\n\n/** Snaps the dragged item to each of its sibling snap items. */\nfunction snapToSiblings(\n  dsb: SnapBounds,\n  ssbs: ReadonlyArray<SnapBounds>,\n  snapToDimensions: boolean,\n) {\n  // Compute a list of sibling snap results, where each entry represents a snapping\n  // between two snap bounds in both directions.\n  const ssrs = ssbs.map(ssb => {\n    // For each direction, return an entry consisting of:\n    // - dsb: the drag snap bounds\n    // - ssb: the sibling snap bounds\n    // - delta: the minimum delta value that would snap the two bounds\n    // - values: a list of snap pairs that computed the above delta value\n    return {\n      horizontal: { dsb, ssb, ...runSnapTest(dsb, ssb, snapToDimensions, 'horizontal') },\n      vertical: { dsb, ssb, ...runSnapTest(dsb, ssb, snapToDimensions, 'vertical') },\n    };\n  });\n  interface SnapResultInDirection {\n    readonly dsb: SnapBounds;\n    readonly ssb: SnapBounds;\n    readonly values: ReadonlyArray<SnapPair>;\n  }\n  return {\n    horizontal: filterByMinDelta<SnapResultInDirection>(ssrs.map(r => r.horizontal)),\n    vertical: filterByMinDelta<SnapResultInDirection>(ssrs.map(r => r.vertical)),\n  };\n}\n\n/**\n * Represents a valid snapping of two SnapBounds objects.\n * The properties are indices into the SnapBounds' list of snap points.\n */\ninterface SnapPair {\n  readonly dragIndex?: number;\n  readonly siblingIndex?: number;\n  readonly isDimensionSnap?: boolean;\n}\n\ninterface SnapInfoInDirectionInternal {\n  // The minimum delta value found.\n  readonly delta: number;\n  // The list of snaps with the above delta value.\n  readonly values: ReadonlyArray<{\n    // The currently dragged item.\n    readonly dsb: SnapBounds;\n    // The sibling item to snap to.\n    readonly ssb: SnapBounds;\n    // The list of snap pairs with the above delta value.\n    readonly values: ReadonlyArray<SnapPair>;\n  }>;\n}\n\n// Note that 'horizontal' snaps calculate vertical guides and 'vertical'\n// snaps calculate horizontal guides.. This is because 'horizontal'\n// snaps depend on differences in horizontal 'x' values (and vice-versa).\ninterface SnapInfoInternal {\n  readonly horizontal: SnapInfoInDirectionInternal;\n  readonly vertical: SnapInfoInDirectionInternal;\n}\n\nexport interface SnapInfo {\n  readonly projSnapDelta: Point;\n  readonly guides: ReadonlyArray<Line>;\n  readonly rulers: ReadonlyArray<Line>;\n}\n\ninterface Delta {\n  readonly delta: number;\n}\n\ninterface Values<T> {\n  readonly values: ReadonlyArray<T>;\n}\n\n/**\n * Runs a snap test for two snap bounds. The return result consists of (1) the\n * minimum delta value found, and (2) a list of the values that had the specified\n * delta value.\n */\nfunction runSnapTest<T extends Direction>(\n  dsb: SnapBounds,\n  ssb: SnapBounds,\n  snapToDimensions: boolean,\n  dir: T,\n): Values<SnapPair> & Delta {\n  const { coord } = CONSTANTS[dir];\n  const snapPairResults: (SnapPair & Delta)[] = [];\n  if (snapToDimensions) {\n    const getSnapBoundsSize = (sb: SnapBounds) => {\n      const min = _.minBy(sb.snapPoints, p => p[coord])[coord];\n      const max = _.maxBy(sb.snapPoints, p => p[coord])[coord];\n      return max - min;\n    };\n    const dsbSize = getSnapBoundsSize(dsb);\n    const ssbSize = getSnapBoundsSize(ssb);\n    // TODO: improve this snap pair API stuff?\n    snapPairResults.push({\n      isDimensionSnap: true,\n      delta: MathUtil.round(dsbSize - ssbSize),\n    });\n  } else {\n    dsb.snapPoints.forEach((dragPoint, dragIndex) => {\n      ssb.snapPoints.forEach((siblingPoint, siblingIndex) => {\n        const delta = MathUtil.round(dragPoint[coord] - siblingPoint[coord]);\n        snapPairResults.push({ dragIndex, siblingIndex, delta });\n      });\n    });\n  }\n\n  return filterByMinDelta(snapPairResults);\n}\n\n/**\n * Filters the array of items, keeping the smallest delta values and\n * discarding the rest.\n */\nfunction filterByMinDelta<T>(list: (T & Delta)[]): Values<T> & Delta {\n  if (!list.length) {\n    return undefined;\n  }\n  const { min, pos, neg } = list.reduce(\n    (prev, curr) => {\n      const info = {\n        min: Math.abs(curr.delta),\n        pos: curr.delta >= 0 ? [curr] : ([] as (T & Delta)[]),\n        neg: curr.delta >= 0 ? [] : ([curr] as (T & Delta)[]),\n      };\n      if (prev.min === info.min) {\n        return {\n          min: prev.min,\n          pos: [...prev.pos, ...info.pos],\n          neg: [...prev.neg, ...info.neg],\n        };\n      }\n      return prev.min < info.min ? prev : info;\n    },\n    { min: Infinity, pos: [] as (T & Delta)[], neg: [] as (T & Delta)[] },\n  );\n  const isDeltaPositive = pos.length >= neg.length;\n  return {\n    delta: min * (isDeltaPositive ? 1 : -1),\n    values: isDeltaPositive ? pos : neg,\n  };\n}\n\n/**\n * Builds the snap guides to draw given a snap info object.\n * This function assumes the global project coordinate space.\n */\nfunction buildGuides(snapInfo: SnapInfoInternal): ReadonlyArray<Line> {\n  const guides: Line[] = [];\n  DIRECTIONS.forEach(d => guides.push(...buildGuidesInDirection(snapInfo, d)));\n  return guides;\n}\n\nfunction buildGuidesInDirection<T extends Direction>(\n  snapInfo: SnapInfoInternal,\n  dir: T,\n): ReadonlyArray<Line> {\n  const guides: Line[] = [];\n  const { coord, opp } = CONSTANTS[dir];\n  snapInfo[dir].values.forEach(({ dsb, ssb, values }) => {\n    const firstGuideSnap = _.find(values, ({ dragIndex, siblingIndex }) => {\n      return dragIndex >= 0 && siblingIndex >= 0;\n    });\n    if (firstGuideSnap) {\n      const startMostBounds = dsb[opp.start] < ssb[opp.start] ? dsb : ssb;\n      const endMostBounds = dsb[opp.end] < ssb[opp.end] ? ssb : dsb;\n      const startGuide = startMostBounds[opp.start];\n      const endGuide = endMostBounds[opp.end];\n      const coordGuide = ssb.snapPoints[firstGuideSnap.siblingIndex][coord];\n      if (dir === 'horizontal') {\n        const from = { x: coordGuide, y: startGuide };\n        const to = { x: coordGuide, y: endGuide };\n        guides.push({ from, to });\n      } else {\n        const from = { x: startGuide, y: coordGuide };\n        const to = { x: endGuide, y: coordGuide };\n        guides.push({ from, to });\n      }\n    }\n  });\n  return guides;\n}\n\n/**\n * Builds the snap rulers to draw given a snap info object.\n * This function assumes the global project coordinate space.\n */\nfunction buildRulers(snapInfo: SnapInfoInternal, snapToDimensions = false): ReadonlyArray<Line> {\n  const rulers: Line[] = [];\n  DIRECTIONS.forEach(d => rulers.push(...buildRulersInDirection(snapInfo, snapToDimensions, d)));\n  return rulers;\n}\n\n// TODO: make sure that only one ruler total is made for the drag bounds!\n// TODO: make sure that only one ruler total is made for the drag bounds!\n// TODO: make sure that only one ruler total is made for the drag bounds!\n// TODO: make sure that only one ruler total is made for the drag bounds!\n// TODO: make sure that only one ruler total is made for the drag bounds!\nfunction buildRulersInDirection<T extends Direction>(\n  snapInfo: SnapInfoInternal,\n  snapToDimensions = false,\n  dir: T,\n): ReadonlyArray<Line> {\n  const rulers: Line[] = [];\n  snapInfo[dir].values.forEach(({ dsb, ssb, values }) => {\n    const dimensionSnaps = values.filter(({ isDimensionSnap }) => isDimensionSnap);\n    if (dimensionSnaps.length) {\n      const createRulerFn = (sb: SnapBounds) => {\n        const from = { x: sb.left, y: sb.top };\n        const to = {\n          x: dir === 'horizontal' ? sb.right : sb.left,\n          y: dir === 'horizontal' ? sb.top : sb.bottom,\n        };\n        return { from, to };\n      };\n      rulers.push(createRulerFn(dsb));\n      rulers.push(createRulerFn(ssb));\n    }\n  });\n  for (const { dsb, ssb, values } of snapInfo[dir].values) {\n    const { start, end, opp } = CONSTANTS[dir];\n    const oppStartMostBounds = dsb[opp.start] < ssb[opp.start] ? dsb : ssb;\n    const oppEndMostBounds = dsb[opp.end] < ssb[opp.end] ? ssb : dsb;\n    const nonStartMostBounds = dsb[start] < ssb[start] ? ssb : dsb;\n    const nonEndMostBounds = dsb[end] < ssb[end] ? dsb : ssb;\n    const guideSnaps = values.filter(({ isDimensionSnap }) => !isDimensionSnap);\n    if (guideSnaps.length) {\n      const oppStartRuler = oppStartMostBounds[opp.end];\n      const oppEndRuler = oppEndMostBounds[opp.start];\n      const startRuler = nonStartMostBounds[start];\n      const endRuler = nonEndMostBounds[end];\n      // TODO: handle the horizontal 'rulerLeft === rulerRight' case like sketch does\n      // TODO: handle the vertical 'rulerTop === rulerBottom' case like sketch does\n      const coordRuler = startRuler + (endRuler - startRuler) * 0.5;\n      const from = {\n        x: dir === 'horizontal' ? coordRuler : oppStartRuler,\n        y: dir === 'horizontal' ? oppStartRuler : coordRuler,\n      };\n      const to = {\n        x: dir === 'horizontal' ? coordRuler : oppEndRuler,\n        y: dir === 'horizontal' ? oppEndRuler : coordRuler,\n      };\n      const guideDelta = to[opp.coord] - from[opp.coord];\n      if (guideDelta > SNAP_TOLERANCE_PIXELS) {\n        // Don't show a ruler if the items have been snapped (we assume that if\n        // the delta values is less than the snap tolerance, then it would have\n        // previously been snapped in the canvas such that the delta is now 0).\n        rulers.push({ from, to });\n      }\n      break;\n    }\n  }\n  type Distance = Readonly<{ sb1: SnapBounds; sb2: SnapBounds; line: Line; dist: number }>;\n  const minDistsDragToSibling: Distance[] = [];\n  const minDistsSiblingToSibling: Distance[] = [];\n  // TODO: make it clear that there should only be one dsb in the snap info object?\n  const dsbs = snapInfo[dir].values.map(({ dsb }) => dsb);\n  const ssbs = snapInfo[dir].values.map(({ ssb }) => ssb);\n  const numValues = snapInfo[dir].values.length;\n  for (let i = 0; i < numValues; i++) {\n    minDistsDragToSibling.push({ sb1: dsbs[i], sb2: ssbs[i], ...dsbs[i].distance(ssbs[i]) });\n  }\n  for (let i = 0; i < numValues - 1; i++) {\n    let minSsb: SnapBounds;\n    let minLine: Line;\n    let minDist = Infinity;\n    for (let j = i + 1; j < numValues; j++) {\n      const { line, dist } = ssbs[i].distance(ssbs[j]);\n      const absDist = Math.abs(dist);\n      if (absDist < minDist) {\n        minSsb = ssbs[j];\n        minLine = line;\n        minDist = absDist;\n      }\n    }\n    minDistsSiblingToSibling.push({ sb1: ssbs[i], sb2: minSsb, line: minLine, dist: minDist });\n  }\n  const minDistDragToSibling = _.minBy(minDistsDragToSibling, d => d.dist);\n  const matchingMinDistsSiblingToSibling = minDistsSiblingToSibling.filter(d => {\n    return Math.abs(minDistDragToSibling.dist - d.dist) <= SNAP_TOLERANCE_PIXELS;\n  });\n  if (matchingMinDistsSiblingToSibling.length) {\n    rulers.push(minDistDragToSibling.line);\n    rulers.push(...matchingMinDistsSiblingToSibling.map(d => d.line));\n  }\n  return rulers;\n}\n","import * as SnapUtil from './SnapUtil';\nexport { SnapUtil };\n","// TODO: find all differences between the svgo fork and svgo master (and create custom plugins for them?)\n// TODO: test indirectly by testing the creation of the vector layer\n// TODO: use promises as well for vector layer conversion\n// TODO: make sure error handling works properly w/ the new promise architecture\n// TODO: re-enable no implicit any and/or no implicit nulls?\n\nimport * as js2svg from 'svgo/lib/svgo/js2svg';\nimport * as executePlugins from 'svgo/lib/svgo/plugins';\nimport * as svg2js from 'svgo/lib/svgo/svg2js';\nimport * as cleanupAttrs from 'svgo/plugins/cleanupAttrs';\nimport * as cleanupIDs from 'svgo/plugins/cleanupIDs';\nimport * as cleanupNumericValues from 'svgo/plugins/cleanupNumericValues';\nimport * as collapseGroups from 'svgo/plugins/collapseGroups';\nimport * as convertPathData from 'svgo/plugins/convertPathData';\nimport * as convertShapeToPath from 'svgo/plugins/convertShapeToPath';\nimport * as convertStyleToAttrs from 'svgo/plugins/convertStyleToAttrs';\nimport * as convertTransform from 'svgo/plugins/convertTransform';\nimport * as inlineStyles from 'svgo/plugins/inlineStyles';\nimport * as mergePaths from 'svgo/plugins/mergePaths';\nimport * as minifyStyles from 'svgo/plugins/minifyStyles';\nimport * as moveElemsAttrsToGroup from 'svgo/plugins/moveElemsAttrsToGroup';\nimport * as moveGroupAttrsToElems from 'svgo/plugins/moveGroupAttrsToElems';\nimport * as removeComments from 'svgo/plugins/removeComments';\nimport * as removeDesc from 'svgo/plugins/removeDesc';\nimport * as removeDoctype from 'svgo/plugins/removeDoctype';\nimport * as removeEditorsNSData from 'svgo/plugins/removeEditorsNSData';\nimport * as removeEmptyAttrs from 'svgo/plugins/removeEmptyAttrs';\nimport * as removeEmptyContainers from 'svgo/plugins/removeEmptyContainers';\nimport * as removeEmptyText from 'svgo/plugins/removeEmptyText';\nimport * as removeHiddenElems from 'svgo/plugins/removeHiddenElems';\nimport * as removeMetadata from 'svgo/plugins/removeMetadata';\nimport * as removeNonInheritableGroupAttrs from 'svgo/plugins/removeNonInheritableGroupAttrs';\nimport * as removeRasterImages from 'svgo/plugins/removeRasterImages';\nimport * as removeScriptElement from 'svgo/plugins/removeScriptElement';\nimport * as removeStyleElement from 'svgo/plugins/removeStyleElement';\nimport * as removeTitle from 'svgo/plugins/removeTitle';\nimport * as removeUnknownsAndDefaults from 'svgo/plugins/removeUnknownsAndDefaults';\nimport * as removeUselessDefs from 'svgo/plugins/removeUselessDefs';\nimport * as removeUselessStrokeAndFill from 'svgo/plugins/removeUselessStrokeAndFill';\nimport * as removeXMLProcInst from 'svgo/plugins/removeXMLProcInst';\n\n// Custom plugins.\nimport { convertRoundedRectToPath } from './plugins/convertRoundedRectToPath';\nimport { replaceUseElems } from './plugins/replaceUseElems';\n\n// The complete list is available here: https://github.com/svg/svgo/blob/master/.svgo.yml\nconst pluginsData = {\n  removeDoctype,\n  removeXMLProcInst,\n  removeComments,\n  removeMetadata,\n  // removeXMLNS,\n  removeEditorsNSData,\n  cleanupAttrs,\n  inlineStyles,\n  minifyStyles,\n  convertStyleToAttrs,\n  cleanupIDs,\n  // prefixIds,\n  removeRasterImages,\n  removeUselessDefs,\n  replaceUseElems,\n  cleanupNumericValues,\n  // cleanupListOfValues,\n  // convertColors,\n  removeUnknownsAndDefaults,\n  removeNonInheritableGroupAttrs,\n  removeUselessStrokeAndFill,\n  // removeViewBox,\n  // cleanupEnableBackground,\n  removeHiddenElems,\n  removeEmptyText,\n  convertShapeToPath,\n  convertRoundedRectToPath,\n  moveElemsAttrsToGroup,\n  moveGroupAttrsToElems,\n  collapseGroups,\n  convertPathData,\n  convertTransform,\n  removeEmptyAttrs,\n  removeEmptyContainers,\n  mergePaths,\n  // removeUnusedNS,\n  // sortAttrs,\n  removeTitle,\n  removeDesc,\n  // removeDimensions\n  // removeAttrs,\n  // removeElementsByAttr,\n  // addClassesToSVGElement,\n  removeStyleElement,\n  removeScriptElement,\n  // addAttributesToSVGElement,\n};\n\n// Set a global floatPrecision across all the plugins.\nconst floatPrecision = 6;\nfor (const plugin of Object.values(pluginsData)) {\n  if (plugin.params && 'floatPrecision' in plugin.params) {\n    plugin.params.floatPrecision = floatPrecision;\n  }\n}\n\n// Tweak plugin params.\ncleanupIDs.params.minify = false;\nconvertPathData.params.makeArcs = undefined;\nconvertPathData.params.transformPrecision = floatPrecision;\nconvertShapeToPath.params.convertArcs = true;\nconvertTransform.params.transformPrecision = floatPrecision;\ninlineStyles.params.onlyMatchedOnce = false;\nremoveUselessStrokeAndFill.params.removeNone = true;\n\nconst optimizedPluginsData = (function () {\n  return Object.values(pluginsData)\n    .map(item => [item])\n    .reduce((arr, item) => {\n      const last = arr[arr.length - 1];\n      if (last && item[0].type === last[0].type) {\n        last.push(item[0]);\n      } else {\n        arr.push(item);\n      }\n      return arr;\n    }, []);\n})();\n\nexport function optimizeSvg(svgText: string, pretty = true): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const callbackFn = (svgjs: any) => {\n      if (svgjs.error) {\n        reject(svgjs.error);\n        return;\n      }\n      resolve(svgjs.data);\n    };\n    svg2js(svgText, (svgjs: any) => {\n      if (svgjs.error) {\n        callbackFn(svgjs);\n        return;\n      }\n      svgjs = executePlugins(svgjs, { input: 'string' }, optimizedPluginsData);\n      callbackFn(\n        js2svg(svgjs, {\n          indent: '  ',\n          pretty,\n        }),\n      );\n    });\n  });\n}\n","export const convertRoundedRectToPath = {\n  active: true,\n  type: 'perItem',\n  fn: convertRoundedRectToPathFn,\n  params: undefined as any,\n};\n\nconst none = { value: 0 };\n\n/**\n * Converts a rounded rect to a more compact path.\n * It also allows further optimizations like\n * combining paths with similar attributes.\n *\n * @see http://www.w3.org/TR/SVG/shapes.html\n *\n * @param {Object} item current iteration item\n * @param {Object} params plugin params\n * @return {Boolean} if false, item will be filtered out\n */\nfunction convertRoundedRectToPathFn(item: any, params: any): any {\n  if (\n    !item.isElem('rect') ||\n    !item.hasAttr('width') ||\n    !item.hasAttr('height') ||\n    !(item.hasAttr('rx') || item.hasAttr('ry'))\n  ) {\n    return undefined;\n  }\n\n  const x = +(item.attr('x') || none).value;\n  const y = +(item.attr('y') || none).value;\n  const width = +item.attr('width').value;\n  const height = +item.attr('height').value;\n  const hasRx = item.hasAttr('rx') && isValidCornerRadius(+item.attr('rx').value);\n  const hasRy = item.hasAttr('ry') && isValidCornerRadius(+item.attr('ry').value);\n  let rx = +(item.attr('rx') || none).value;\n  let ry = +(item.attr('ry') || none).value;\n\n  if (!hasRx && !hasRy) {\n    // If neither 'rx' nor 'ry' are properly specified, then set both rx and ry to 0.\n    rx = ry = 0;\n  } else if (hasRx && !hasRy) {\n    // Otherwise, if a properly specified value is provided for 'rx', but not for 'ry',\n    // then set both rx and ry to the value of 'rx'.\n    ry = rx;\n  } else if (!hasRx && hasRy) {\n    // Otherwise, if a properly specified value is provided for 'ry', but not for 'rx',\n    // then set both rx and ry to the value of 'ry'.\n    rx = ry;\n  } else {\n    // If rx is greater than half of 'width', then set rx to half of 'width'.\n    if (rx > width / 2) {\n      rx = width / 2;\n    }\n    // If ry is greater than half of 'height', then set ry to half of 'height'.\n    if (ry > height / 2) {\n      ry = height / 2;\n    }\n  }\n\n  // Values like '100%' compute to NaN, thus running after\n  // cleanupNumericValues when 'px' units has already been removed.\n  // TODO: Calculate sizes from % and non-px units if possible.\n  if (isNaN(x - y + width - height + rx - ry)) {\n    return undefined;\n  }\n\n  let pathData;\n  if (!rx && !ry) {\n    pathData = `M ${x} ${y} H ${x + width} V ${y + height} H ${x} Z`;\n  } else {\n    pathData =\n      `M ${x + rx} ${y} ` +\n      `H ${x + width - rx} ` +\n      `A ${rx} ${ry} 0 0 1 ${x + width} ${y + ry} ` +\n      `V ${y + height - ry} ` +\n      `A ${rx} ${ry} 0 0 1 ${x + width - rx} ${y + height} ` +\n      `H ${x + rx} ` +\n      `A ${rx} ${ry} 0 0 1 ${x} ${y + height - ry} ` +\n      `V ${y + ry} ` +\n      `A ${rx} ${ry} 0 0 1 ${x + rx} ${y}`;\n  }\n\n  item.addAttr({ name: 'd', value: pathData, prefix: '', local: 'd' });\n  item.renameElem('path').removeAttr(['x', 'y', 'width', 'height', 'rx', 'ry']);\n}\n\nfunction isValidCornerRadius(val: any) {\n  return !(typeof val !== 'number' || val === Infinity || val < 0);\n}\n","import * as CSSClassList from 'svgo/lib/svgo/css-class-list';\nimport * as CSSStyleDeclaration from 'svgo/lib/svgo/css-style-declaration';\nimport * as JSAPI from 'svgo/lib/svgo/jsAPI';\n\nexport const replaceUseElems = {\n  active: true,\n  type: 'full',\n  fn: replaceUseElemsFn,\n  params: undefined as any,\n};\n\n/**\n * Replace <use> elems with their referenced content.\n *\n * @param {Object} document the root document\n * @param {Object} params plugin params\n */\nfunction replaceUseElemsFn(document: any, params: any): any {\n  const defsElems = document.querySelectorAll('defs') || [];\n\n  const queryReferencedElementFn = (selector: string) => {\n    for (const defs of defsElems) {\n      const referencedElem = defs.querySelector(selector);\n      if (referencedElem) {\n        return cloneParsedSvg(referencedElem);\n      }\n    }\n    return undefined;\n  };\n\n  // TODO: handle the case where a 'use' element references another 'use'\n  // TODO: handle the circular dependency that could potentially result as well\n  const useElems = document.querySelectorAll('use') || [];\n  for (const use of useElems) {\n    if (!use.hasAttr('xlink:href')) {\n      continue;\n    }\n    const refElem = queryReferencedElementFn(use.attr('xlink:href').value);\n    if (!refElem) {\n      continue;\n    }\n    use.removeAttr('xlink:href');\n\n    if (refElem.isElem('symbol')) {\n      // TODO: determine whether we should support 'symbol' elements as well\n      continue;\n    }\n\n    const addAttrFn = function(elem: any, attrName: string, attrValue: string) {\n      elem.addAttr({\n        name: attrName,\n        value: attrValue,\n        prefix: '',\n        local: attrName,\n      });\n    };\n\n    if (refElem.isElem('svg')) {\n      // TODO: test this\n      const svg = refElem;\n      if (use.hasAttr('width')) {\n        addAttrFn(svg, 'width', use.attr('width').value);\n        use.removeAttr('width');\n      }\n      if (use.hasAttr('height')) {\n        addAttrFn(svg, 'height', use.attr('height').value);\n        use.removeAttr('height');\n      }\n    }\n\n    // TODO: handle the NAN cases?\n    let x = 0;\n    let y = 0;\n    if (use.hasAttr('x')) {\n      x = +use.attr('x').value;\n      use.removeAttr('x');\n    }\n    if (use.hasAttr('y')) {\n      y = +use.attr('y').value;\n      use.removeAttr('y');\n    }\n    if (x || y) {\n      let transform = `translate(${x} ${y})`;\n      if (use.hasAttr('transform')) {\n        transform = use.attr('transform').value + ' ' + transform;\n      }\n      addAttrFn(use, 'transform', transform);\n    }\n    use.content = [refElem];\n    refElem.parentNode = use;\n    use.renameElem('g');\n  }\n\n  return document;\n}\n\n// Clone is currently broken. Hack it:\nfunction cloneParsedSvg(svg: any): any {\n  const clones = new Map();\n\n  function cloneKeys(target: any, obj: any) {\n    for (const key of Object.keys(obj)) {\n      target[key] = clone(obj[key]);\n    }\n    return target;\n  }\n\n  function clone(obj: any) {\n    if (typeof obj !== 'object' || obj === null) {\n      return obj;\n    }\n\n    if (clones.has(obj)) {\n      return clones.get(obj);\n    }\n\n    let objClone;\n\n    if (obj.constructor === JSAPI) {\n      objClone = new JSAPI({}, obj.parentNode);\n      clones.set(obj, objClone);\n\n      if (obj.parentNode) {\n        objClone.parentNode = clone(obj.parentNode);\n      }\n      cloneKeys(objClone, obj);\n    } else if (\n      obj.constructor === CSSClassList ||\n      obj.constructor === CSSStyleDeclaration ||\n      obj.constructor === Object ||\n      obj.constructor === Array\n    ) {\n      objClone = new obj.constructor();\n      clones.set(obj, objClone);\n      cloneKeys(objClone, obj);\n    } else if (obj.constructor === Map) {\n      objClone = new Map();\n      clones.set(obj, objClone);\n\n      for (const [key, val] of obj) {\n        objClone.set(clone(key), clone(val));\n      }\n    } else if (obj.constructor === Set) {\n      objClone = new Set();\n      clones.set(obj, objClone);\n\n      for (const val of obj) {\n        objClone.add(clone(val));\n      }\n    } else {\n      throw Error('unexpected type');\n    }\n\n    return objClone;\n  }\n\n  return clone(svg);\n}\n","import { ToolMode } from 'app/modules/editor/model/paper';\nimport {\n  SetEditPathInfo,\n  SetRotateItemsInfo,\n  SetToolMode,\n  SetTransformPathsInfo,\n} from 'app/modules/editor/store/paper/actions';\n\n// TODO: expand on this class... possibly a better redesigned version?\n\nexport function getEnterDefaultModeActions() {\n  return [\n    new SetToolMode(ToolMode.Default),\n    new SetEditPathInfo(undefined),\n    new SetRotateItemsInfo(undefined),\n    new SetTransformPathsInfo(undefined),\n  ];\n}\n","import { Injectable } from '@angular/core';\nimport {\n  ActionMode,\n  ActionSource,\n  Hover,\n  HoverType,\n  Selection,\n  SelectionType,\n} from 'app/modules/editor/model/actionmode';\nimport { MorphableLayer } from 'app/modules/editor/model/layers';\nimport { Path, PathMutator, PathUtil } from 'app/modules/editor/model/paths';\nimport { PathAnimationBlock } from 'app/modules/editor/model/timeline';\nimport { AutoAwesome } from 'app/modules/editor/scripts/algorithms';\nimport { Action, State, Store } from 'app/modules/editor/store';\nimport {\n  SetActionMode,\n  SetActionModeHover,\n  SetActionModeSelections,\n  SetPairedSubPaths,\n  SetUnpairedSubPath,\n} from 'app/modules/editor/store/actionmode/actions';\nimport {\n  getActionMode,\n  getActionModeHover,\n  getActionModeSelections,\n  getPairedSubPaths,\n  getUnpairedSubPath,\n} from 'app/modules/editor/store/actionmode/selectors';\nimport { BatchAction } from 'app/modules/editor/store/batch/actions';\nimport { SetAnimation } from 'app/modules/editor/store/timeline/actions';\nimport * as _ from 'lodash';\nimport { OutputSelector } from 'reselect';\nimport { first } from 'rxjs/operators';\n\nimport { LayerTimelineService } from './layertimeline.service';\n\n/**\n * A simple service that provides an interface for making action mode changes.\n */\n@Injectable({ providedIn: 'root' })\nexport class ActionModeService {\n  constructor(\n    private readonly store: Store<State>,\n    private readonly layerTimelineService: LayerTimelineService,\n  ) {}\n\n  // Action mode.\n\n  isActionMode() {\n    return this.getActionMode() !== ActionMode.None;\n  }\n\n  getActionMode() {\n    return this.queryStore(getActionMode);\n  }\n\n  setActionMode(mode: ActionMode) {\n    this.store.dispatch(new SetActionMode(mode));\n  }\n\n  toggleSplitCommandsMode() {\n    this.toggleActionMode(ActionMode.SplitCommands);\n  }\n\n  toggleSplitSubPathsMode() {\n    this.toggleActionMode(ActionMode.SplitSubPaths);\n  }\n\n  togglePairSubPathsMode() {\n    this.toggleActionMode(ActionMode.PairSubPaths);\n  }\n\n  private toggleActionMode(modeToToggle: ActionMode) {\n    const currentMode = this.getActionMode();\n    if (currentMode === ActionMode.None) {\n      return;\n    }\n    this.setActionMode(currentMode === modeToToggle ? ActionMode.Selection : modeToToggle);\n  }\n\n  isShowingSubPathActionMode() {\n    return this.isShowingActionModeType(SelectionType.SubPath);\n  }\n\n  isShowingSegmentActionMode() {\n    return this.isShowingActionModeType(SelectionType.Segment);\n  }\n\n  isShowingPointActionMode() {\n    return this.isShowingActionModeType(SelectionType.Point);\n  }\n\n  private isShowingActionModeType(type: SelectionType) {\n    const mode = this.getActionMode();\n    return (\n      mode !== ActionMode.None &&\n      (mode !== ActionMode.Selection || this.getSelections().filter(s => s.type === type).length)\n    );\n  }\n\n  closeActionMode() {\n    const mode = this.getActionMode();\n    if (mode === ActionMode.None) {\n      return;\n    }\n    if (mode === ActionMode.Selection) {\n      if (this.queryStore(getActionModeSelections).length) {\n        // TODO: move this logic out into a component (it's confusing)\n        this.store.dispatch(new SetActionModeSelections([]));\n      } else {\n        this.store.dispatch(new SetActionMode(ActionMode.None));\n      }\n    } else {\n      this.store.dispatch(new SetActionMode(ActionMode.Selection));\n    }\n  }\n\n  // Selections.\n\n  setSelections(selections: ReadonlyArray<Selection>) {\n    this.store.dispatch(new SetActionModeSelections(selections));\n  }\n\n  getSelections() {\n    return this.queryStore(getActionModeSelections);\n  }\n\n  toggleSubPathSelection(source: ActionSource, subIdx: number) {\n    const selections = [...this.getSelections()];\n    _.remove(selections, s => s.type !== SelectionType.SubPath || s.source !== source);\n    const type = SelectionType.SubPath;\n    const toggledSelections = this.toggleSelections(selections, [{ type, source, subIdx }]);\n    this.store.dispatch(new SetActionModeSelections(toggledSelections));\n  }\n\n  toggleSegmentSelections(\n    source: ActionSource,\n    segments: ReadonlyArray<{ subIdx: number; cmdIdx: number }>,\n  ) {\n    const selections = [...this.getSelections()];\n    _.remove(selections, s => s.type !== SelectionType.Segment || s.source !== source);\n    const type = SelectionType.Segment;\n    const toggledSelections = this.toggleSelections(\n      selections,\n      segments.map(({ subIdx, cmdIdx }) => ({ type, source, subIdx, cmdIdx })),\n    );\n    this.store.dispatch(new SetActionModeSelections(toggledSelections));\n  }\n\n  togglePointSelection(\n    source: ActionSource,\n    subIdx: number,\n    cmdIdx: number,\n    isShiftOrMetaPressed: boolean,\n  ) {\n    const selections = [...this.getSelections()];\n    _.remove(selections, s => s.type !== SelectionType.Point || s.source !== source);\n    const type = SelectionType.Point;\n    const toggledSelections = this.toggleSelections(\n      selections,\n      [{ type, source, subIdx, cmdIdx }],\n      isShiftOrMetaPressed,\n    );\n    this.store.dispatch(new SetActionModeSelections(toggledSelections));\n  }\n\n  /**\n   * Toggles the specified shape shifter selections. If a selection exists, all selections\n   * will be removed from the list. Otherwise, they will be added to the list of selections.\n   * By default, all other selections from the list will be cleared.\n   */\n  private toggleSelections(\n    currentSelections: Selection[],\n    newSelections: Selection[],\n    appendToList = false,\n  ) {\n    const matchingSelections = _.remove(currentSelections, currSel => {\n      // Remove any selections that are equal to a new selection.\n      return newSelections.some(s => _.isEqual(s, currSel));\n    });\n    if (!matchingSelections.length) {\n      // If no selections were removed, then add all of the selections to the list.\n      currentSelections.push(...newSelections);\n    }\n    if (!appendToList) {\n      // If we aren't appending multiple selections at a time, then clear\n      // any previous selections from the list.\n      _.remove(currentSelections, currSel => {\n        return newSelections.every(newSel => !_.isEqual(currSel, newSel));\n      });\n    }\n    return currentSelections;\n  }\n\n  // Hovers.\n\n  setHover(newHover: Hover) {\n    const currHover = this.queryStore(getActionModeHover);\n    if (!_.isEqual(newHover, currHover)) {\n      this.store.dispatch(new SetActionModeHover(newHover));\n    }\n  }\n\n  splitInHalfHover() {\n    const pointSelections = this.getSelections().filter(s => s.type === SelectionType.Point);\n    if (pointSelections.length) {\n      const { source, subIdx, cmdIdx } = pointSelections[0];\n      this.setHover({ type: HoverType.Split, source, subIdx, cmdIdx });\n    }\n  }\n\n  clearHover() {\n    this.setHover(undefined);\n  }\n\n  // Mutate subpaths.\n\n  reverseSelectedSubPaths() {\n    this.mutateSelectedSubPaths((pm, subIdx) => pm.reverseSubPath(subIdx));\n  }\n\n  shiftBackSelectedSubPaths() {\n    this.mutateSelectedSubPaths((pm, subIdx) => pm.shiftSubPathBack(subIdx));\n  }\n\n  shiftForwardSelectedSubPaths() {\n    this.mutateSelectedSubPaths((pm, subIdx) => pm.shiftSubPathForward(subIdx));\n  }\n\n  private mutateSelectedSubPaths(mutatorFn: (pm: PathMutator, subIdx: number) => void) {\n    const selections = this.getSelections().filter(s => s.type === SelectionType.SubPath);\n    const { source } = selections[0];\n    const pm = this.getActivePathBlockValue(source).mutate();\n    for (const { subIdx } of selections) {\n      mutatorFn(pm, subIdx);\n    }\n    this.store.dispatch(\n      new BatchAction(\n        this.buildUpdatedActivePathBlockAnimationAction(source, pm.build()),\n        new SetActionModeHover(undefined),\n      ),\n    );\n  }\n\n  // Mutate points.\n\n  shiftPointToFront() {\n    const selections = this.getSelections().filter(s => s.type === SelectionType.Point);\n    const { source, subIdx, cmdIdx } = selections[0];\n    const activePath = this.getActivePathBlockValue(source);\n    const pm = activePath.mutate();\n    pm.shiftSubPathForward(subIdx, cmdIdx);\n    this.store.dispatch(this.buildUpdatedActivePathBlockAnimationAction(source, pm.build()));\n  }\n\n  splitSelectedPointInHalf() {\n    const selections = this.getSelections().filter(s => s.type === SelectionType.Point);\n    const { source, subIdx, cmdIdx } = selections[0];\n    const activePath = this.getActivePathBlockValue(source);\n    const pm = activePath.mutate();\n    pm.splitCommandInHalf(subIdx, cmdIdx);\n    this.store.dispatch(\n      new BatchAction(\n        this.buildUpdatedActivePathBlockAnimationAction(source, pm.build()),\n        new SetActionModeSelections([]),\n        new SetActionModeHover(undefined),\n      ),\n    );\n  }\n\n  // Pair/unpair subpaths.\n\n  pairSubPath(subIdx: number, actionSource: ActionSource) {\n    const currUnpair = this.getUnpairedSubPath();\n    const actions: Action[] = [];\n    if (currUnpair && actionSource !== currUnpair.source) {\n      const { source: fromSource, subIdx: fromSubIdx } = currUnpair;\n      const toSource = actionSource;\n      const toSubIdx = subIdx;\n      actions.push(new SetUnpairedSubPath(undefined));\n      const fromSelections = this.getSelections().filter(s => s.source === fromSource);\n      const toSelections = this.getSelections().filter(s => s.source === toSource);\n      if (fromSelections.length) {\n        actions.push(\n          new SetActionModeSelections(\n            fromSelections.map(s => {\n              const { subIdx: sIdx, cmdIdx, source, type } = s;\n              return {\n                subIdx: sIdx === fromSubIdx ? 0 : sIdx,\n                cmdIdx,\n                source,\n                type,\n              };\n            }),\n          ),\n        );\n      } else if (toSelections.length) {\n        actions.push(\n          new SetActionModeSelections(\n            toSelections.map(s => {\n              const { subIdx: sIdx, cmdIdx, source, type } = s;\n              return {\n                subIdx: sIdx === toSubIdx ? 0 : sIdx,\n                cmdIdx,\n                source,\n                type,\n              };\n            }),\n          ),\n        );\n      }\n      const pairedSubPaths = new Set<number>();\n      this.getPairedSubPaths().forEach(p => pairedSubPaths.add(p));\n      if (pairedSubPaths.has(fromSubIdx)) {\n        pairedSubPaths.delete(fromSubIdx);\n      }\n      if (pairedSubPaths.has(toSubIdx)) {\n        pairedSubPaths.delete(toSubIdx);\n      }\n      pairedSubPaths.add(pairedSubPaths.size);\n      actions.push(new SetPairedSubPaths(pairedSubPaths));\n      actions.push(new SetActionModeHover(undefined));\n      let updatedAnimation = this.buildUpdatedActivePathBlockAnimation(\n        fromSource,\n        this.getActivePathBlockValue(fromSource)\n          .mutate()\n          .moveSubPath(fromSubIdx, 0)\n          .build(),\n      );\n      updatedAnimation = this.buildUpdatedActivePathBlockAnimation(\n        toSource,\n        this.getActivePathBlockValue(toSource)\n          .mutate()\n          .moveSubPath(toSubIdx, 0)\n          .build(),\n        updatedAnimation,\n      );\n      actions.push(new SetAnimation(updatedAnimation));\n    } else {\n      actions.push(new SetUnpairedSubPath({ source: actionSource, subIdx }));\n    }\n    this.store.dispatch(new BatchAction(...actions));\n  }\n\n  private getPairedSubPaths() {\n    return this.queryStore(getPairedSubPaths);\n  }\n\n  setUnpairedSubPath(unpair: { subIdx: number; source: ActionSource }) {\n    if (!_.isEqual(this.getUnpairedSubPath(), unpair)) {\n      this.store.dispatch(new SetUnpairedSubPath(unpair));\n    }\n  }\n\n  private getUnpairedSubPath() {\n    return this.queryStore(getUnpairedSubPath);\n  }\n\n  // Autofix.\n\n  autoFix() {\n    const [from, to] = AutoAwesome.autoFix(\n      this.getActivePathBlockValue(ActionSource.From),\n      this.getActivePathBlockValue(ActionSource.To),\n    );\n    let animation = this.buildUpdatedActivePathBlockAnimation(ActionSource.From, from);\n    animation = this.buildUpdatedActivePathBlockAnimation(ActionSource.To, to, animation);\n    this.store.dispatch(new SetAnimation(animation));\n  }\n\n  // Delete selected action mode models.\n\n  deleteSelectedActionModeModels() {\n    if (this.getActionMode() !== ActionMode.Selection) {\n      return;\n    }\n    const selections = this.getSelections();\n    if (!selections.length) {\n      return;\n    }\n    const subPathSelections = selections.filter(s => s.type === SelectionType.SubPath);\n    const segmentSelections = selections.filter(s => s.type === SelectionType.Segment);\n    const pointSelections = selections.filter(s => s.type === SelectionType.Point);\n    let updatePathAction: SetAnimation;\n    if (subPathSelections.length) {\n      const { source, subIdx } = subPathSelections[0];\n      const path = this.getActivePathBlockValue(source);\n      if (path.getSubPath(subIdx).isSplit()) {\n        const pm = path.mutate();\n        const layer = this.getActivePathBlockLayer();\n        if (layer.isFilled()) {\n          pm.deleteFilledSubPath(subIdx);\n        } else if (layer.isStroked()) {\n          pm.deleteStrokedSubPath(subIdx);\n        }\n        updatePathAction = this.buildUpdatedActivePathBlockAnimationAction(source, pm.build());\n      }\n    } else if (segmentSelections.length) {\n      const { source, subIdx, cmdIdx } = segmentSelections[0];\n      const path = this.getActivePathBlockValue(source);\n      if (path.getCommand(subIdx, cmdIdx).isSplitSegment()) {\n        updatePathAction = this.buildUpdatedActivePathBlockAnimationAction(\n          source,\n          path\n            .mutate()\n            .deleteFilledSubPathSegment(subIdx, cmdIdx)\n            .build(),\n        );\n      }\n    } else if (pointSelections.length) {\n      const source = pointSelections[0].source;\n      const path = this.getActivePathBlockValue(source);\n      const unsplitOpsMap = new Map<number, Array<{ subIdx: number; cmdIdx: number }>>();\n      for (const { subIdx, cmdIdx } of pointSelections) {\n        if (!path.getCommand(subIdx, cmdIdx).isSplitPoint()) {\n          continue;\n        }\n        let subIdxOps = unsplitOpsMap.get(subIdx);\n        if (!subIdxOps) {\n          subIdxOps = [];\n        }\n        subIdxOps.push({ subIdx, cmdIdx });\n        unsplitOpsMap.set(subIdx, subIdxOps);\n      }\n      if (unsplitOpsMap.size) {\n        const pm = path.mutate();\n        unsplitOpsMap.forEach((ops, idx) => {\n          PathUtil.sortPathOps(ops);\n          ops.forEach(op => pm.unsplitCommand(op.subIdx, op.cmdIdx));\n        });\n        updatePathAction = this.buildUpdatedActivePathBlockAnimationAction(source, pm.build());\n      }\n    }\n    if (updatePathAction) {\n      this.store.dispatch(\n        new BatchAction(\n          updatePathAction,\n          new SetActionModeSelections([]),\n          new SetActionModeHover(undefined),\n        ),\n      );\n    }\n  }\n\n  // Update active path block.\n\n  updateActivePathBlock(source: ActionSource, path: Path) {\n    this.store.dispatch(this.buildUpdatedActivePathBlockAnimationAction(source, path));\n  }\n\n  private buildUpdatedActivePathBlockAnimationAction(\n    source: ActionSource,\n    path: Path,\n    animation = this.layerTimelineService.getAnimation(),\n  ) {\n    return new SetAnimation(this.buildUpdatedActivePathBlockAnimation(source, path, animation));\n  }\n\n  private buildUpdatedActivePathBlockAnimation(\n    source: ActionSource,\n    path: Path,\n    animation = this.layerTimelineService.getAnimation(),\n  ) {\n    const blockId = this.getActivePathBlock().id;\n    const blockIndex = _.findIndex(animation.blocks, b => b.id === blockId);\n    const block = animation.blocks[blockIndex] as PathAnimationBlock;\n\n    // Remove any existing conversions and collapsing sub paths from the path.\n    const oppSource = source === ActionSource.From ? ActionSource.To : ActionSource.From;\n    let oppPath = oppSource === ActionSource.From ? block.fromValue : block.toValue;\n    [path, oppPath] = AutoAwesome.autoAddCollapsingSubPaths(path, oppPath);\n    [path, oppPath] = AutoAwesome.autoConvert(path, oppPath);\n\n    const setBlockValueFn = (b: PathAnimationBlock, t: ActionSource, p: Path) => {\n      if (t === ActionSource.From) {\n        b.fromValue = p;\n      } else {\n        b.toValue = p;\n      }\n    };\n\n    const newBlock = block.clone();\n    setBlockValueFn(newBlock, source, path);\n    setBlockValueFn(newBlock, oppSource, oppPath);\n\n    const newBlocks = animation.blocks.map((b, i) => (i === blockIndex ? newBlock : b));\n    animation = animation.clone();\n    animation.blocks = newBlocks;\n    return animation;\n  }\n\n  private getActivePathBlock() {\n    return this.layerTimelineService.getSelectedBlocks()[0] as PathAnimationBlock;\n  }\n\n  private getActivePathBlockValue(source: ActionSource) {\n    const activeBlock = this.getActivePathBlock();\n    return source === ActionSource.From ? activeBlock.fromValue : activeBlock.toValue;\n  }\n\n  private getActivePathBlockLayer() {\n    const vl = this.layerTimelineService.getVectorLayer();\n    return vl.findLayerById(this.getActivePathBlock().layerId) as MorphableLayer;\n  }\n\n  private queryStore<T>(selector: OutputSelector<Object, T, (res: Object) => T>) {\n    let obj: T;\n    this.store\n      .select(selector)\n      .pipe(first())\n      .subscribe(o => (obj = o));\n    return obj;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AnimationBlock } from 'app/modules/editor/model/timeline';\nimport { bugsnagClient } from 'app/modules/editor/scripts/bugsnag';\nimport { SvgLoader, VectorDrawableLoader } from 'app/modules/editor/scripts/import';\nimport * as $ from 'jquery';\n\nimport { ActionModeService } from './actionmode.service';\nimport { LayerTimelineService } from './layertimeline.service';\nimport { PlaybackService } from './playback.service';\n\ndeclare const ga: Function;\n\n//BHAARATA: my code\ninterface JqEvent extends JQuery.Event\n{\n\toriginalEvent?: ClipboardEvent;\n}\n//BHAARATA: end of my code\n\n@Injectable({ providedIn: 'root' })\nexport class ClipboardService {\n  constructor(\n    private readonly layerTimelineService: LayerTimelineService,\n    private readonly playbackService: PlaybackService,\n    private readonly actionModeService: ActionModeService,\n  ) {}\n\n  init() {\n    const cutCopyHandlerFn = (event: JQuery.Event, shouldCut: boolean) => {\n      if (document.activeElement.matches('input')) {\n        return true;\n      }\n\n      const blocks = this.layerTimelineService.getSelectedBlocks().map(b => b.toJSON());\n      if (!blocks.length) {\n        return false;\n      }\n      //const clipboardData = (event.originalEvent as ClipboardEvent).clipboardData;\n      const clipboardData = (<JqEvent>event).originalEvent.clipboardData; //BHAARATA: my code\n      clipboardData.setData('text/plain', JSON.stringify({ blocks }, undefined, 2));\n\n      if (shouldCut) {\n        this.layerTimelineService.deleteSelectedModels();\n      }\n\n      return false;\n    };\n\n    const pasteHandlerFn = (event: JQuery.Event) => {\n      if (this.actionModeService.isActionMode()) {\n        // TODO: make action mode automatically exit when layers/blocks are added in other parts of the app\n        bugsnagClient.notify('Attempt to import files while in action mode', {\n          severity: 'warning',\n        });\n        return false;\n      }\n      if (document.activeElement.matches('input')) {\n        return true;\n      }\n\n      //const clipboardData = (event.originalEvent as ClipboardEvent).clipboardData;\n      const clipboardData = (<JqEvent>event).originalEvent.clipboardData; //BHAARATA: my code\n      const str = clipboardData.getData('text');\n      const existingVl = this.layerTimelineService.getVectorLayer();\n\n      if (str.match(/<\\/svg>\\s*$/)) {\n        // Paste SVG.\n        ga('send', 'event', 'paste', 'svg');\n        SvgLoader.loadVectorLayerFromSvgString(str, name => !!existingVl.findLayerByName(name))\n          .then(vl => this.layerTimelineService.importLayers([vl]))\n          .catch(() => console.warn('failed to import SVG'));\n      } else if (str.match(/<\\/vector>\\s*$/)) {\n        // Paste VD.\n        ga('send', 'event', 'paste', 'vd');\n        const importedVl = VectorDrawableLoader.loadVectorLayerFromXmlString(\n          str,\n          name => !!existingVl.findLayerByName(name),\n        );\n        if (importedVl) {\n          this.layerTimelineService.importLayers([importedVl]);\n        }\n      } else if (str.match(/\\}\\s*$/)) {\n        let parsed;\n        try {\n          parsed = JSON.parse(str);\n        } catch (e) {\n          console.error(`Couldn't parse JSON: ${str}`);\n          return false;\n        }\n        if (parsed.blocks) {\n          ga('send', 'event', 'paste', 'json.blocks');\n          this.layerTimelineService.addBlocks(\n            parsed.blocks.map((b: any) => {\n              const block = AnimationBlock.from(b);\n              const {\n                layerId,\n                propertyName,\n                fromValue,\n                toValue,\n                interpolator,\n                startTime,\n                endTime,\n              } = block;\n              const duration = endTime - startTime;\n              return {\n                layerId,\n                propertyName,\n                fromValue,\n                toValue,\n                currentTime: this.playbackService.getCurrentTime(),\n                duration,\n                interpolator,\n              };\n            }),\n            false,\n          );\n        } else {\n          ga('send', 'event', 'paste', 'json.unknown');\n        }\n        return false;\n      }\n\n      return false;\n    };\n\n    const cutHandler = (event: JQuery.Event) => cutCopyHandlerFn(event, true);\n    const copyHandler = (event: JQuery.Event) => cutCopyHandlerFn(event, false);\n    const pasteHandler = pasteHandlerFn;\n\n    $(window)\n      .on('cut', cutHandler)\n      .on('copy', copyHandler)\n      .on('paste', pasteHandler);\n  }\n\n  destroy() {\n    $(window)\n      .unbind('cut')\n      .unbind('copy')\n      .unbind('paste');\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { LayerUtil, VectorLayer } from 'app/modules/editor/model/layers';\nimport { Animation } from 'app/modules/editor/model/timeline';\nimport { AvdSerializer, SpriteSerializer, SvgSerializer } from 'app/modules/editor/scripts/export';\nimport { State, Store } from 'app/modules/editor/store';\nimport { getHiddenLayerIds, getVectorLayer } from 'app/modules/editor/store/layers/selectors';\nimport { getAnimation } from 'app/modules/editor/store/timeline/selectors';\nimport * as $ from 'jquery';\nimport * as JSZip from 'jszip';\nimport * as _ from 'lodash';\nimport { first } from 'rxjs/operators';\n\n// Store a version number just in case we ever change the export format...\nconst IMPORT_EXPORT_VERSION = 1;\n\nconst EXPORTED_FPS = [30, 60];\n\n/**\n * A simple service that exports vectors and animations.\n */\n@Injectable({ providedIn: 'root' })\nexport class FileExportService {\n  static fromJSON(jsonObj: any) {\n    const { layers, timeline } = jsonObj;\n    const vectorLayer = new VectorLayer(layers.vectorLayer);\n    const hiddenLayerIds = new Set<string>(layers.hiddenLayerIds);\n    const animation = new Animation(timeline.animation);\n    return { vectorLayer, hiddenLayerIds, animation };\n  }\n\n  constructor(private readonly store: Store<State>) {}\n\n  exportJSON() {\n    const vl = this.getVectorLayer();\n    const anim = this.getAnimation();\n    const jsonStr = JSON.stringify(\n      {\n        version: IMPORT_EXPORT_VERSION,\n        layers: {\n          vectorLayer: vl.toJSON(),\n          hiddenLayerIds: Array.from(this.getHiddenLayerIds()),\n        },\n        timeline: {\n          animation: anim.toJSON(),\n        },\n      },\n      undefined,\n      2,\n    );\n    downloadFile(jsonStr, `${vl.name}.shapeshifter`);\n  }\n\n  exportSvg() {\n    // Export standalone SVG frames.\n    const vl = this.getVectorLayerWithoutHiddenLayers();\n    const anim = this.getAnimationWithoutHiddenBlocks();\n    if (!anim.blocks.length) {\n      // Just export an SVG if there are no animation blocks defined.\n      const svg = SvgSerializer.toSvgString(vl);\n      downloadFile(svg, `${vl.name}.svg`);\n      return;\n    }\n    // TODO: figure out how to add better jszip typings\n    const zip = new JSZip();\n    EXPORTED_FPS.forEach(fps => {\n      const numSteps = Math.ceil((anim.duration / 1000) * fps);\n      const svgs = SpriteSerializer.createSvgFrames(vl, anim, numSteps);\n      const length = (numSteps - 1).toString().length;\n      const fpsFolder = zip.folder(`${fps}fps`);\n      svgs.forEach((s, i) => {\n        fpsFolder.file(`frame${_.padStart(i.toString(), length, '0')}.svg`, s);\n      });\n    });\n    zip.generateAsync({ type: 'blob' }).then((content: Blob) => {\n      downloadFile(content, `frames_${vl.name}.zip`);\n    });\n  }\n\n  // TODO: should we or should we not export hidden layers?\n  exportVectorDrawable() {\n    const vl = this.getVectorLayerWithoutHiddenLayers();\n    const vd = AvdSerializer.toVectorDrawableXmlString(vl);\n    const fileName = `vd_${vl.name}.xml`;\n    downloadFile(vd, fileName);\n  }\n\n  exportAnimatedVectorDrawable() {\n    const vl = this.getVectorLayerWithoutHiddenLayers();\n    const anim = this.getAnimationWithoutHiddenBlocks();\n    const avd = AvdSerializer.toAnimatedVectorDrawableXmlString(vl, anim);\n    const fileName = `avd_${anim.name}.xml`;\n    downloadFile(avd, fileName);\n  }\n\n  exportSvgSpritesheet() {\n    // Create an svg sprite animation.\n    const vl = this.getVectorLayerWithoutHiddenLayers();\n    const anim = this.getAnimationWithoutHiddenBlocks();\n    // TODO: figure out how to add better jszip typings\n    const zip = new JSZip();\n    (async () => {\n      await asyncForEach(EXPORTED_FPS, async fps => {\n        const numSteps = Math.ceil((anim.duration / 1000) * fps);\n        const svgSprite = await SpriteSerializer.createSvgSprite(vl, anim, numSteps);\n        const cssSprite = SpriteSerializer.createCss(vl.width, vl.height, anim.duration, numSteps);\n        const fileName = `sprite_${fps}fps`;\n        const htmlSprite = SpriteSerializer.createHtml(`${fileName}.svg`, `${fileName}.css`);\n        const spriteFolder = zip.folder(`${fps}fps`);\n        spriteFolder.file(`${fileName}.html`, htmlSprite);\n        spriteFolder.file(`${fileName}.css`, cssSprite);\n        spriteFolder.file(`${fileName}.svg`, svgSprite);\n      });\n      zip.generateAsync({ type: 'blob' }).then((content: Blob) => {\n        downloadFile(content, `spritesheet_${vl.name}.zip`);\n      });\n    })();\n  }\n\n  exportCssKeyframes() {\n    // TODO: implement this\n  }\n\n  private getVectorLayer() {\n    let vectorLayer: VectorLayer;\n    this.store\n      .select(getVectorLayer)\n      .pipe(first())\n      .subscribe(vl => (vectorLayer = vl));\n    return vectorLayer;\n  }\n\n  private getAnimation() {\n    let animation: Animation;\n    this.store\n      .select(getAnimation)\n      .pipe(first())\n      .subscribe(anim => (animation = anim));\n    return animation;\n  }\n\n  private getHiddenLayerIds() {\n    let hiddenLayerIds: ReadonlySet<string>;\n    this.store\n      .select(getHiddenLayerIds)\n      .pipe(first())\n      .subscribe(ids => (hiddenLayerIds = ids));\n    return hiddenLayerIds;\n  }\n\n  private getVectorLayerWithoutHiddenLayers() {\n    return LayerUtil.removeLayers(this.getVectorLayer(), ...Array.from(this.getHiddenLayerIds()));\n  }\n\n  private getAnimationWithoutHiddenBlocks() {\n    const anim = this.getAnimation().clone();\n    const hiddenLayerIds = this.getHiddenLayerIds();\n    anim.blocks = anim.blocks.filter(b => !hiddenLayerIds.has(b.layerId));\n    return anim;\n  }\n}\n\nfunction downloadFile(content: string | Blob, fileName: string) {\n  const anchor = $('<a>')\n    .hide()\n    .appendTo(document.body);\n  const blob = content instanceof Blob ? content : new Blob([content], { type: 'octet/stream' });\n  const url = window.URL.createObjectURL(blob);\n  anchor.attr({ href: url, download: fileName });\n  anchor.get(0).click();\n  window.URL.revokeObjectURL(url);\n}\n\nasync function asyncForEach(\n  array: number[],\n  callback: (value: number, index: number, array: number[]) => void,\n) {\n  for (let index = 0; index < array.length; index++) {\n    await callback(array[index], index, array);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { LayerUtil, VectorLayer } from 'app/modules/editor/model/layers';\nimport { Animation } from 'app/modules/editor/model/timeline';\nimport { ModelUtil } from 'app/modules/editor/scripts/common';\nimport { SvgLoader, VectorDrawableLoader } from 'app/modules/editor/scripts/import';\nimport { State, Store } from 'app/modules/editor/store';\nimport { getVectorLayer } from 'app/modules/editor/store/layers/selectors';\nimport { ResetWorkspace } from 'app/modules/editor/store/reset/actions';\nimport { first } from 'rxjs/operators';\n\nimport { FileExportService } from './fileexport.service';\nimport { LayerTimelineService } from './layertimeline.service';\nimport { Duration, SnackBarService } from './snackbar.service';\n\ndeclare const ga: Function;\n\nenum ImportType {\n  Svg = 1,\n  VectorDrawable,\n  Json,\n}\n\n/**\n * A simple service that imports vector layers from files.\n */\n@Injectable({ providedIn: 'root' })\nexport class FileImportService {\n  constructor(\n    private readonly store: Store<State>,\n    private readonly snackBarService: SnackBarService,\n    private readonly layerTimelineService: LayerTimelineService,\n  ) {}\n\n  private get vectorLayer() {\n    let vectorLayer: VectorLayer;\n    this.store\n      .select(getVectorLayer)\n      .pipe(first())\n      .subscribe(vl => (vectorLayer = vl));\n    return vectorLayer;\n  }\n\n  import(fileList: FileList, resetWorkspace = false) {\n    if (!fileList || !fileList.length) {\n      return;\n    }\n\n    const files: File[] = [];\n    // tslint:disable-next-line: prefer-for-of\n    for (let i = 0; i < fileList.length; i++) {\n      files.push(fileList[i]);\n    }\n\n    let numCallbacks = 0;\n    let numErrors = 0;\n    const addedVls: VectorLayer[] = [];\n\n    let importType: ImportType;\n    const maybeAddVectorLayersFn = () => {\n      numCallbacks++;\n      if (numErrors === files.length) {\n        this.onFailure();\n      } else if (numCallbacks === files.length) {\n        this.onSuccess(importType, resetWorkspace, addedVls);\n      }\n    };\n\n    const existingVl = this.vectorLayer;\n    for (const file of files) {\n      const fileReader = new FileReader();\n\n      fileReader.onload = event => {\n        const text = (event.target as any).result;\n        const callbackFn = (vectorLayer: VectorLayer) => {\n          if (!vectorLayer) {\n            numErrors++;\n            maybeAddVectorLayersFn();\n            return;\n          }\n          addedVls.push(vectorLayer);\n          maybeAddVectorLayersFn();\n        };\n        const doesNameExistFn = (name: string) => {\n          return !!LayerUtil.findLayerByName([existingVl, ...addedVls], name);\n        };\n        if (file.type.includes('svg')) {\n          importType = ImportType.Svg;\n          SvgLoader.loadVectorLayerFromSvgString(text, doesNameExistFn)\n            .then(vl => callbackFn(vl))\n            .catch(() => {\n              console.warn('failed to import SVG');\n              callbackFn(undefined);\n            });\n        } else if (file.type.includes('xml')) {\n          importType = ImportType.VectorDrawable;\n          let vl: VectorLayer;\n          try {\n            vl = VectorDrawableLoader.loadVectorLayerFromXmlString(text, doesNameExistFn);\n            callbackFn(vl);\n          } catch (e) {\n            console.warn('Failed to parse the file', e);\n            callbackFn(undefined);\n          }\n        } else if (file.type === 'application/json' || file.name.match(/\\.shapeshifter$/)) {\n          importType = ImportType.Json;\n          let vl: VectorLayer;\n          let animation: Animation;\n          let hiddenLayerIds: ReadonlySet<string>;\n          try {\n            const jsonObj = JSON.parse(text);\n            const parsedObj = FileExportService.fromJSON(jsonObj);\n            vl = parsedObj.vectorLayer;\n            animation = parsedObj.animation;\n            hiddenLayerIds = parsedObj.hiddenLayerIds;\n            const regeneratedModels = ModelUtil.regenerateModelIds(vl, animation, hiddenLayerIds);\n            vl = regeneratedModels.vectorLayer;\n            animation = regeneratedModels.animation;\n            hiddenLayerIds = regeneratedModels.hiddenLayerIds;\n          } catch (e) {\n            console.warn('Failed to parse the file', e);\n            this.onFailure();\n          }\n          this.onSuccess(importType, resetWorkspace, [vl], animation, hiddenLayerIds);\n        }\n      };\n\n      fileReader.onerror = event => {\n        const target = event.target as any;\n        switch (target.error.code) {\n          case target.error.NOT_FOUND_ERR:\n            alert('File not found');\n            break;\n          case target.error.NOT_READABLE_ERR:\n            alert('File is not readable');\n            break;\n          case target.error.ABORT_ERR:\n            break;\n          default:\n            alert('An error occurred reading this file');\n            break;\n        }\n        numErrors++;\n        maybeAddVectorLayersFn();\n      };\n\n      fileReader.onabort = event => {\n        alert('File read cancelled');\n      };\n\n      fileReader.readAsText(file);\n    }\n  }\n\n  private onSuccess(\n    importType: ImportType,\n    resetWorkspace: boolean,\n    vls: ReadonlyArray<VectorLayer>,\n    animation?: Animation,\n    hiddenLayerIds?: ReadonlySet<string>,\n  ) {\n    if (importType === ImportType.Json) {\n      ga('send', 'event', 'Import', 'JSON');\n      this.store.dispatch(new ResetWorkspace(vls[0], animation, hiddenLayerIds));\n    } else {\n      if (importType === ImportType.Svg) {\n        ga('send', 'event', 'Import', 'SVG');\n      } else if (importType === ImportType.VectorDrawable) {\n        ga('send', 'event', 'Import', 'Vector Drawable');\n      }\n      if (resetWorkspace) {\n        this.store.dispatch(new ResetWorkspace());\n      }\n      this.layerTimelineService.importLayers(vls);\n      // TODO: count number of individual layers?\n      this.snackBarService.show(\n        `Imported ${vls.length} layer${vls.length === 1 ? '' : 's'}`,\n        'Dismiss',\n        Duration.Short,\n      );\n    }\n  }\n\n  private onFailure() {\n    this.snackBarService.show(`Couldn't import layers from file`, 'Dismiss', Duration.Long);\n  }\n}\n","export { ActionModeService } from './actionmode.service';\nexport { ClipboardService } from './clipboard.service';\nexport { FileExportService } from './fileexport.service';\nexport { FileImportService } from './fileimport.service';\nexport { LayerTimelineService } from './layertimeline.service';\nexport { PlaybackService } from './playback.service';\nexport { SnackBarService } from './snackbar.service';\nexport { ShortcutService } from './shortcut.service';\nexport { ThemeService } from './theme.service';\nexport { PaperService } from './paper.service';\n","import { Injectable } from '@angular/core';\nimport { INTERPOLATORS } from 'app/modules/editor/model/interpolators';\nimport {\n  ClipPathLayer,\n  GroupLayer,\n  Layer,\n  LayerUtil,\n  PathLayer,\n  VectorLayer,\n} from 'app/modules/editor/model/layers';\nimport { Animation, AnimationBlock, PathAnimationBlock } from 'app/modules/editor/model/timeline';\nimport { MathUtil, Matrix, ModelUtil } from 'app/modules/editor/scripts/common';\nimport { Action, State, Store } from 'app/modules/editor/store';\nimport { BatchAction } from 'app/modules/editor/store/batch/actions';\nimport {\n  SetCollapsedLayers,\n  SetHiddenLayers,\n  SetSelectedLayers,\n  SetVectorLayer,\n} from 'app/modules/editor/store/layers/actions';\nimport {\n  getCollapsedLayerIds,\n  getHiddenLayerIds,\n  getSelectedLayerIds,\n  getVectorLayer,\n} from 'app/modules/editor/store/layers/selectors';\nimport {\n  SelectAnimation,\n  SetAnimation,\n  SetSelectedBlocks,\n} from 'app/modules/editor/store/timeline/actions';\nimport {\n  getAnimation,\n  getSelectedBlockIds,\n  isAnimationSelected,\n} from 'app/modules/editor/store/timeline/selectors';\nimport { environment } from 'environments/environment';\nimport * as _ from 'lodash';\nimport { OutputSelector } from 'reselect';\nimport { first } from 'rxjs/operators';\n\nimport * as StoreUtil from './StoreUtil';\n\n/**\n * A simple service that provides an interface for making layer/timeline changes.\n */\n@Injectable({ providedIn: 'root' })\nexport class LayerTimelineService {\n  constructor(private readonly store: Store<State>) {}\n\n  /**\n   * Selects or deselects the animation.\n   */\n  selectAnimation(isSelected: boolean) {\n    this.updateSelections(isSelected, new Set(), new Set());\n  }\n\n  /**\n   * Selects or deselects the specified block ID.\n   */\n  selectBlock(blockId: string, clearExisting: boolean) {\n    const selectedBlockIds = this.getSelectedBlockIds();\n    if (clearExisting) {\n      selectedBlockIds.forEach(id => {\n        if (id !== blockId) {\n          selectedBlockIds.delete(id);\n        }\n      });\n    }\n    if (!clearExisting && selectedBlockIds.has(blockId)) {\n      selectedBlockIds.delete(blockId);\n    } else {\n      selectedBlockIds.add(blockId);\n    }\n    this.updateSelections(false, selectedBlockIds, new Set());\n  }\n\n  /**\n   * Selects or deselects the specified layer ID.\n   */\n  selectLayer(layerId: string, clearExisting: boolean) {\n    const selectedLayerIds = this.getSelectedLayerIds();\n    if (clearExisting) {\n      selectedLayerIds.forEach(id => {\n        if (id !== layerId) {\n          selectedLayerIds.delete(id);\n        }\n      });\n    }\n    if (!clearExisting && selectedLayerIds.has(layerId)) {\n      selectedLayerIds.delete(layerId);\n    } else {\n      selectedLayerIds.add(layerId);\n    }\n    this.updateSelections(false, new Set(), selectedLayerIds);\n  }\n\n  setSelectedLayers(layerIds: Set<string>) {\n    this.updateSelections(false, new Set(), new Set(layerIds));\n  }\n\n  /**\n   * Clears all animation/block/layer selections.\n   */\n  clearSelections() {\n    const actions = this.getClearSelectionsActions();\n    if (actions.length) {\n      this.store.dispatch(new BatchAction(...actions));\n    }\n  }\n\n  private getClearSelectionsActions() {\n    return this.getUpdateSelectionsActions(false, new Set(), new Set());\n  }\n\n  private updateSelections(\n    isAnimSelected: boolean,\n    selectedBlockIds: ReadonlySet<string>,\n    selectedLayerIds: ReadonlySet<string>,\n  ) {\n    const actions = this.getUpdateSelectionsActions(\n      isAnimSelected,\n      selectedBlockIds,\n      selectedLayerIds,\n    );\n    if (actions.length) {\n      this.store.dispatch(new BatchAction(...actions));\n    }\n  }\n\n  private getUpdateSelectionsActions(\n    isAnimSelected: boolean,\n    selectedBlockIds: ReadonlySet<string>,\n    selectedLayerIds: ReadonlySet<string>,\n  ) {\n    const actions: Action[] = [];\n    if (this.isAnimationSelected() !== isAnimSelected) {\n      actions.push(new SelectAnimation(isAnimSelected));\n    }\n    if (!_.isEqual(this.getSelectedBlockIds(), selectedBlockIds)) {\n      actions.push(new SetSelectedBlocks(selectedBlockIds));\n    }\n    if (!_.isEqual(this.getSelectedLayerIds(), selectedLayerIds)) {\n      actions.push(new SetSelectedLayers(selectedLayerIds));\n      // TODO: improve this design somehow (probably best not to have this service depend on paper ops?)\n      // TODO: figure out which selection-changed cases should force you into default mode\n      // TODO: i.e. should selecting a new layer in edit path mode trigger edit path mode for the new layer?\n      if (environment.beta) {\n        actions.push(...StoreUtil.getEnterDefaultModeActions());\n      }\n    }\n    return actions;\n  }\n\n  /**\n   * Toggles the specified layer's expanded state.\n   */\n  toggleExpandedLayer(layerId: string, recursive: boolean) {\n    const layerIds = new Set([layerId]);\n    if (recursive) {\n      const layer = this.getVectorLayer().findLayerById(layerId);\n      if (layer) {\n        layer.walk(l => layerIds.add(l.id));\n      }\n    }\n    const collapsedLayerIds = this.getCollapsedLayerIds();\n    if (collapsedLayerIds.has(layerId)) {\n      layerIds.forEach(id => collapsedLayerIds.delete(id));\n    } else {\n      layerIds.forEach(id => collapsedLayerIds.add(id));\n    }\n    this.store.dispatch(new SetCollapsedLayers(collapsedLayerIds));\n  }\n\n  /**\n   * Toggles the specified layer's visibility.\n   */\n  toggleVisibleLayer(layerId: string) {\n    const layerIds = this.getHiddenLayerIds();\n    if (layerIds.has(layerId)) {\n      layerIds.delete(layerId);\n    } else {\n      layerIds.add(layerId);\n    }\n    this.store.dispatch(new SetHiddenLayers(layerIds));\n  }\n\n  /**\n   * Imports a list of vector layers into the workspace.\n   */\n  importLayers(vls: ReadonlyArray<VectorLayer>) {\n    if (!vls.length) {\n      return;\n    }\n    const importedVls = [...vls];\n    const vectorLayer = this.getVectorLayer();\n    let vectorLayers = [vectorLayer];\n    if (!vectorLayer.children.length) {\n      // Simply replace the empty vector layer rather than merging with it.\n      const vl = importedVls[0].clone();\n      vl.name = vectorLayer.name;\n      importedVls[0] = vl;\n      vectorLayers = [];\n    }\n    const newVectorLayers = [...vectorLayers, ...importedVls];\n    const newVl =\n      newVectorLayers.length === 1\n        ? newVectorLayers[0]\n        : newVectorLayers.reduce(LayerUtil.mergeVectorLayers);\n    this.store.dispatch(\n      new BatchAction(...this.getClearSelectionsActions(), new SetVectorLayer(newVl)),\n    );\n  }\n\n  /**\n   * Adds a layer to the vector tree.\n   */\n  addLayer(layer: Layer) {\n    const vl = this.getVectorLayer();\n    const selectedLayers = this.getSelectedLayers();\n    if (selectedLayers.length === 1) {\n      const selectedLayer = selectedLayers[0];\n      if (!(selectedLayer instanceof VectorLayer)) {\n        // Add the new layer as a sibling to the currently selected layer.\n        const parent = LayerUtil.findParent(vl, selectedLayer.id).clone();\n        parent.children = [...parent.children, layer];\n        this.updateLayer(parent);\n        return;\n      }\n    }\n    const vectorLayer = vl.clone();\n    vectorLayer.children = [...vectorLayer.children, layer];\n    this.updateLayer(vectorLayer);\n  }\n\n  /**\n   * Sets the current vector layer.\n   */\n  setVectorLayer(vl: VectorLayer) {\n    this.store.dispatch(new SetVectorLayer(vl));\n  }\n\n  /**\n   * Updates an existing layer in the tree.\n   */\n  updateLayer(layer: Layer) {\n    this.store.dispatch(new SetVectorLayer(LayerUtil.updateLayer(this.getVectorLayer(), layer)));\n  }\n\n  /**\n   * Replaces an existing layer in the tree with a new layer. Note that\n   * this method assumes that both layers still have the same children layers.\n   */\n  swapLayers(layerId: string, newLayer: Layer) {\n    if (layerId === newLayer.id) {\n      this.updateLayer(newLayer);\n      return;\n    }\n    const vl = this.getVectorLayer();\n    const parent = LayerUtil.findParent(vl, layerId).clone();\n    const layerIndex = _.findIndex(parent.children, l => l.id === layerId);\n    const children = [...parent.children];\n    children.splice(layerIndex, 1, newLayer);\n    parent.children = children;\n    const actions: Action[] = [\n      new SetVectorLayer(LayerUtil.updateLayer(vl, parent)),\n      ...this.buildCleanupLayerIdActions(layerId),\n    ];\n    const animation = this.getAnimation();\n    const oldLayerBlocks = animation.blocks.filter(b => b.layerId === layerId);\n    const newAnimatableProperties = new Set(newLayer.animatableProperties.keys());\n    // Preserve any blocks that are still animatable with the new layer.\n    const newLayerBlocks = oldLayerBlocks\n      .filter(b => newAnimatableProperties.has(b.propertyName))\n      .map(b => {\n        b = b.clone();\n        b.layerId = newLayer.id;\n        return b;\n      });\n    const newAnimation = animation.clone();\n    newAnimation.blocks = [\n      ...animation.blocks.filter(b => b.layerId !== layerId),\n      ...newLayerBlocks,\n    ];\n    actions.push(new SetAnimation(newAnimation));\n    this.store.dispatch(new BatchAction(...actions));\n  }\n\n  /**\n   * Merges the specified group layer into its children layers.\n   * TODO: make it possible to merge groups that contain animation blocks?\n   */\n  flattenGroupLayer(layerId: string) {\n    const vl = this.getVectorLayer();\n    const layer = vl.findLayerById(layerId) as GroupLayer;\n    if (!layer.children.length) {\n      return;\n    }\n    const layerTransform = Matrix.flatten(LayerUtil.getCanvasTransformsForGroupLayer(layer));\n    const layerChildren = layer.children.map(\n      (l: GroupLayer | PathLayer | ClipPathLayer): Layer => {\n        if (l instanceof GroupLayer) {\n          const flattenedTransform = Matrix.flatten([\n            layerTransform,\n            ...LayerUtil.getCanvasTransformsForGroupLayer(l),\n          ]);\n          const { sx, sy } = flattenedTransform.getScaling();\n          const degrees = flattenedTransform.getRotation();\n          const { tx, ty } = flattenedTransform.getTranslation();\n          l = l.clone();\n          l.pivotX = 0;\n          l.pivotY = 0;\n          l.translateX = tx;\n          l.translateY = ty;\n          l.rotation = degrees;\n          l.scaleX = sx;\n          l.scaleY = sy;\n          return l;\n        }\n        l = l.clone();\n        if (l instanceof PathLayer && l.strokeWidth) {\n          const scaleFactor = layerTransform.getScaleFactor();\n          const newStrokeWidth = l.strokeWidth * scaleFactor ? 1 / scaleFactor : 0;\n          l.strokeWidth = MathUtil.round(newStrokeWidth);\n        }\n        const path = l.pathData;\n        if (!path || !l.pathData.getPathString()) {\n          return l;\n        }\n        l.pathData = path\n          .mutate()\n          .transform(layerTransform)\n          .build();\n        return l;\n      },\n    );\n    const layerChildrenIds = new Set(layerChildren.map(l => l.id));\n    const parent = LayerUtil.findParent(vl, layerId).clone();\n    const children = [...parent.children];\n    children.splice(_.findIndex(parent.children, l => l.id === layerId), 1, ...layerChildren);\n    parent.children = children;\n    const actions: Action[] = [\n      new SetVectorLayer(LayerUtil.updateLayer(vl, parent)),\n      ...this.buildCleanupLayerIdActions(layerId),\n    ];\n    const newAnimation = this.getAnimation().clone();\n    // TODO: show a dialog if the user is about to unknowingly delete any blocks?\n    newAnimation.blocks = newAnimation.blocks.filter(b => b.layerId !== layerId);\n    // TODO: also attempt to merge children group animation blocks?\n    newAnimation.blocks = newAnimation.blocks.map(b => {\n      if (!(b instanceof PathAnimationBlock) || !layerChildrenIds.has(b.layerId)) {\n        return b;\n      }\n      const block = b.clone();\n      if (block.fromValue) {\n        block.fromValue = block.fromValue\n          .mutate()\n          .transform(layerTransform)\n          .build();\n      }\n      if (block.toValue) {\n        block.toValue = block.toValue\n          .mutate()\n          .transform(layerTransform)\n          .build();\n      }\n      return block;\n    });\n    actions.push(new SetAnimation(newAnimation));\n    this.store.dispatch(new BatchAction(...actions));\n  }\n\n  private buildCleanupLayerIdActions(...deletedLayerIds: string[]) {\n    const collapsedLayerIds = this.getCollapsedLayerIds();\n    const hiddenLayerIds = this.getHiddenLayerIds();\n    const selectedLayerIds = this.getSelectedLayerIds();\n    const differenceFn = (s: ReadonlySet<string>, a: string[]) =>\n      new Set(_.difference(Array.from(s), a));\n    const actions: Action[] = [];\n    if (deletedLayerIds.some(id => collapsedLayerIds.has(id))) {\n      actions.push(new SetCollapsedLayers(differenceFn(collapsedLayerIds, deletedLayerIds)));\n    }\n    if (deletedLayerIds.some(id => hiddenLayerIds.has(id))) {\n      actions.push(new SetHiddenLayers(differenceFn(hiddenLayerIds, deletedLayerIds)));\n    }\n    if (deletedLayerIds.some(id => selectedLayerIds.has(id))) {\n      actions.push(new SetSelectedLayers(differenceFn(selectedLayerIds, deletedLayerIds)));\n    }\n    return actions;\n  }\n\n  /**\n   * Groups or ungroups the selected layers.\n   */\n  groupOrUngroupSelectedLayers(shouldGroup: boolean) {\n    let selectedLayerIds = this.getSelectedLayerIds();\n    if (!selectedLayerIds.size) {\n      return;\n    }\n    let vl = this.getVectorLayer();\n\n    // Sort selected layers by order they appear in tree.\n    let tempSelLayers = Array.from(selectedLayerIds).map(id => vl.findLayerById(id));\n    const selLayerOrdersMap: Dictionary<number> = {};\n    let n = 0;\n    vl.walk(layer => {\n      if (_.find(tempSelLayers, l => l.id === layer.id)) {\n        selLayerOrdersMap[layer.id] = n;\n        n++;\n      }\n    });\n    tempSelLayers.sort((a, b) => selLayerOrdersMap[a.id] - selLayerOrdersMap[b.id]);\n\n    if (shouldGroup) {\n      // Remove any layers that are descendants of other selected layers,\n      // and remove the vectorLayer itself if selected.\n      tempSelLayers = tempSelLayers.filter(layer => {\n        if (layer instanceof VectorLayer) {\n          return false;\n        }\n        let p = LayerUtil.findParent(vl, layer.id);\n        while (p) {\n          if (_.find(tempSelLayers, l => l.id === p.id)) {\n            return false;\n          }\n          p = LayerUtil.findParent(vl, p.id);\n        }\n        return true;\n      });\n\n      if (!tempSelLayers.length) {\n        return;\n      }\n\n      // Find destination parent and insertion point.\n      const firstSelectedLayerParent = LayerUtil.findParent(vl, tempSelLayers[0].id).clone();\n      const firstSelectedLayerIndexInParent = _.findIndex(\n        firstSelectedLayerParent.children,\n        l => l.id === tempSelLayers[0].id,\n      );\n\n      // Remove all selected items from their parents and move them into a new parent.\n      const newGroup = new GroupLayer({\n        name: LayerUtil.getUniqueLayerName([vl], 'group'),\n        children: tempSelLayers,\n      });\n      const parentChildren = [...firstSelectedLayerParent.children];\n      parentChildren.splice(firstSelectedLayerIndexInParent, 0, newGroup);\n      _.remove(parentChildren, child =>\n        _.find(tempSelLayers, selectedLayer => selectedLayer.id === child.id),\n      );\n      firstSelectedLayerParent.children = parentChildren;\n      vl = LayerUtil.updateLayer(vl, firstSelectedLayerParent);\n      selectedLayerIds = new Set([newGroup.id]);\n    } else {\n      // Ungroup selected groups layers.\n      const newSelectedLayers: Layer[] = [];\n      tempSelLayers.filter(layer => layer instanceof GroupLayer).forEach(groupLayer => {\n        // Move children into parent.\n        const parent = LayerUtil.findParent(vl, groupLayer.id).clone();\n        const indexInParent = Math.max(\n          0,\n          _.findIndex(parent.children, l => l.id === groupLayer.id),\n        );\n        const newChildren = [...parent.children];\n        newChildren.splice(indexInParent, 0, ...groupLayer.children);\n        parent.children = newChildren;\n        vl = LayerUtil.updateLayer(vl, parent);\n        newSelectedLayers.splice(0, 0, ...groupLayer.children);\n        // Delete the parent.\n        vl = LayerUtil.removeLayers(vl, groupLayer.id);\n      });\n      selectedLayerIds = new Set(newSelectedLayers.map(l => l.id));\n    }\n    this.store.dispatch(\n      new BatchAction(new SetVectorLayer(vl), new SetSelectedLayers(selectedLayerIds)),\n    );\n  }\n\n  deleteSelectedModels() {\n    return this.store.dispatch(new BatchAction(...this.getDeleteSelectedModelsActions()));\n  }\n\n  getDeleteSelectedModelsActions(): ReadonlyArray<Action> {\n    const collapsedLayerIds = this.getCollapsedLayerIds();\n    const hiddenLayerIds = this.getHiddenLayerIds();\n    const selectedLayerIds = this.getSelectedLayerIds();\n\n    let vl = this.getVectorLayer();\n    if (selectedLayerIds.has(vl.id)) {\n      vl = new VectorLayer();\n      collapsedLayerIds.clear();\n      hiddenLayerIds.clear();\n    } else {\n      selectedLayerIds.forEach(layerId => {\n        vl = LayerUtil.removeLayers(vl, layerId);\n        collapsedLayerIds.delete(layerId);\n        hiddenLayerIds.delete(layerId);\n      });\n    }\n\n    let animation = this.getAnimation();\n    if (this.isAnimationSelected()) {\n      animation = new Animation();\n    }\n\n    const selectedBlockIds = this.getSelectedBlockIds();\n    if (selectedBlockIds.size) {\n      animation = animation.clone();\n      animation.blocks = animation.blocks.filter(b => !selectedBlockIds.has(b.id));\n    }\n\n    // Remove any blocks corresponding to deleted layers.\n    const filteredBlocks = animation.blocks.filter(b => !!vl.findLayerById(b.layerId));\n    if (filteredBlocks.length !== animation.blocks.length) {\n      animation = animation.clone();\n      animation.blocks = filteredBlocks;\n    }\n\n    return [\n      new SetVectorLayer(vl),\n      new SetCollapsedLayers(collapsedLayerIds),\n      new SetHiddenLayers(hiddenLayerIds),\n      new SetSelectedLayers(new Set()),\n      new SelectAnimation(false),\n      new SetAnimation(animation),\n      new SetSelectedBlocks(new Set()),\n    ];\n  }\n\n  updateBlocks(blocks: ReadonlyArray<AnimationBlock>) {\n    if (!blocks.length) {\n      return;\n    }\n    const animation = this.getAnimation().clone();\n    animation.blocks = animation.blocks.map(block => {\n      const newBlock = _.find(blocks, b => block.id === b.id);\n      return newBlock ? newBlock : block;\n    });\n    this.store.dispatch(new SetAnimation(animation));\n  }\n\n  addBlocks(\n    blocks: Array<{\n      id?: string;\n      layerId: string;\n      propertyName: string;\n      fromValue: any;\n      toValue: any;\n      currentTime: number;\n      duration?: number;\n      interpolator?: string;\n    }>,\n    autoSelectBlocks = true,\n  ) {\n    blocks.forEach(b => {\n      if (!b.id) {\n        b.id = _.uniqueId();\n      }\n    });\n    let animation = this.getAnimation();\n    const addedBlocks: { id?: string }[] = [];\n    for (const block of blocks) {\n      const anim = this.addBlockToAnimation(animation, block);\n      if (animation !== anim) {\n        animation = anim;\n        addedBlocks.push(block);\n      }\n    }\n    this.store.dispatch(\n      new BatchAction(\n        new SetAnimation(animation),\n        new SelectAnimation(false),\n        new SetSelectedBlocks(new Set(addedBlocks.map(b => b.id))),\n        new SetSelectedLayers(new Set()),\n      ),\n    );\n  }\n\n  private addBlockToAnimation(\n    animation: Animation,\n    block: {\n      id?: string;\n      layerId: string;\n      propertyName: string;\n      fromValue: any;\n      toValue: any;\n      currentTime: number;\n      duration?: number;\n      interpolator?: string;\n    },\n  ) {\n    const layer = this.getVectorLayer().findLayerById(block.layerId);\n    if (!layer) {\n      return animation;\n    }\n    const newBlockDuration = block.duration || 100;\n    const interpolator = block.interpolator || INTERPOLATORS[0].value;\n    const propertyName = block.propertyName;\n    const currentTime = block.currentTime;\n\n    // Find the right start time for the block, which should be a gap between\n    // neighboring blocks closest to the active time cursor, of a minimum size.\n    const blocksByLayerId = ModelUtil.getOrderedBlocksByPropertyByLayer(animation);\n    const blockNeighbors = (blocksByLayerId[layer.id] || {})[propertyName] || [];\n    let gaps: Array<{ start: number; end: number }> = [];\n    for (let i = 0; i < blockNeighbors.length; i++) {\n      gaps.push({\n        start: i === 0 ? 0 : blockNeighbors[i - 1].endTime,\n        end: blockNeighbors[i].startTime,\n      });\n    }\n    gaps.push({\n      start: blockNeighbors.length ? blockNeighbors[blockNeighbors.length - 1].endTime : 0,\n      end: animation.duration,\n    });\n    gaps = gaps\n      .filter(gap => gap.end - gap.start >= newBlockDuration)\n      .map(gap => {\n        const dist = Math.min(Math.abs(gap.end - currentTime), Math.abs(gap.start - currentTime));\n        return { ...gap, dist };\n      })\n      .sort((a, b) => a.dist - b.dist);\n\n    if (!gaps.length) {\n      // No available gaps, cancel.\n      // TODO: show a disabled button to prevent this case?\n      console.warn('Ignoring failed attempt to add animation block');\n      return animation;\n    }\n\n    let startTime = Math.max(currentTime, gaps[0].start);\n    const endTime = Math.min(startTime + newBlockDuration, gaps[0].end);\n    if (endTime - startTime < newBlockDuration) {\n      startTime = endTime - newBlockDuration;\n    }\n\n    // Generate the new block.\n    const property = layer.animatableProperties.get(propertyName);\n    let type: 'path' | 'color' | 'number';\n    if (property.getTypeName() === 'PathProperty') {\n      type = 'path';\n    } else if (property.getTypeName() === 'ColorProperty') {\n      type = 'color';\n    } else {\n      type = 'number';\n    }\n\n    // TODO: clone the current rendered property value and set the from/to values appropriately\n    // const valueAtCurrentTime =\n    //   this.studioState_.animationRenderer\n    //     .getLayerPropertyValue(layer.id, propertyName);\n\n    const newBlock = AnimationBlock.from({\n      id: block.id ? block.id : undefined,\n      layerId: layer.id,\n      propertyName,\n      startTime,\n      endTime,\n      fromValue: block.fromValue,\n      toValue: block.toValue,\n      interpolator,\n      type,\n    });\n    animation = animation.clone();\n    animation.blocks = [...animation.blocks, newBlock];\n    return animation;\n  }\n\n  getVectorLayer() {\n    return this.queryStore(getVectorLayer);\n  }\n\n  getSelectedLayerIds() {\n    return new Set(this.queryStore(getSelectedLayerIds));\n  }\n\n  getSelectedLayers() {\n    const vl = this.getVectorLayer();\n    return Array.from(this.getSelectedLayerIds()).map(id => vl.findLayerById(id));\n  }\n\n  private getHiddenLayerIds() {\n    return new Set(this.queryStore(getHiddenLayerIds));\n  }\n\n  private getCollapsedLayerIds() {\n    return new Set(this.queryStore(getCollapsedLayerIds));\n  }\n\n  private getSelectedBlockIds() {\n    return new Set(this.queryStore(getSelectedBlockIds));\n  }\n\n  getSelectedBlocks() {\n    const anim = this.getAnimation();\n    const blockIds = this.getSelectedBlockIds();\n    return Array.from(blockIds).map(id => _.find(anim.blocks, b => b.id === id));\n  }\n\n  getAnimation() {\n    return this.queryStore(getAnimation);\n  }\n\n  isAnimationSelected() {\n    return this.queryStore(isAnimationSelected);\n  }\n\n  private queryStore<T>(selector: OutputSelector<Object, T, (res: Object) => T>) {\n    let obj: T;\n    this.store\n      .select(selector)\n      .pipe(first())\n      .subscribe(o => (obj = o));\n    return obj;\n  }\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport { VectorLayer } from 'app/modules/editor/model/layers';\nimport { CursorType, ToolMode } from 'app/modules/editor/model/paper';\nimport { Point } from 'app/modules/editor/scripts/common';\nimport { Action, State, Store } from 'app/modules/editor/store';\nimport { BatchAction } from 'app/modules/editor/store/batch/actions';\nimport { getHiddenLayerIds, getSelectedLayerIds } from 'app/modules/editor/store/layers/selectors';\nimport {\n  CreatePathInfo,\n  EditPathInfo,\n  RotateItemsInfo,\n  SetCreatePathInfo,\n  SetCursorType,\n  SetEditPathInfo,\n  SetHoveredLayerId,\n  SetRotateItemsInfo,\n  SetSelectionBox,\n  SetSnapGuideInfo,\n  SetSplitCurveInfo,\n  SetToolMode,\n  SetTooltipInfo,\n  SetTransformPathsInfo,\n  SetZoomPanInfo,\n  SnapGuideInfo,\n  SplitCurveInfo,\n  TooltipInfo,\n  TransformPathsInfo,\n  ZoomPanInfo,\n} from 'app/modules/editor/store/paper/actions';\nimport {\n  getCreatePathInfo,\n  getCursorType,\n  getEditPathInfo,\n  getHoveredLayerId,\n  getRotateItemsInfo,\n  getSelectionBox,\n  getSnapGuideInfo,\n  getSplitCurveInfo,\n  getToolMode,\n  getToolPanelState,\n  getTooltipInfo,\n  getTransformPathsInfo,\n  getZoomPanInfo,\n} from 'app/modules/editor/store/paper/selectors';\nimport { getAnimatedVectorLayer } from 'app/modules/editor/store/playback/selectors';\nimport * as _ from 'lodash';\nimport { OutputSelector } from 'reselect';\nimport { first } from 'rxjs/operators';\n\nimport { LayerTimelineService } from './layertimeline.service';\n\n/** A simple service that provides an interface for making paper.js changes to the store. */\n@Injectable({ providedIn: 'root' })\nexport class PaperService {\n  constructor(\n    private readonly layerTimelineService: LayerTimelineService,\n    private readonly store: Store<State>,\n    // TODO: figure out if this is the most efficient use of NgZone...\n    // TODO: can we get away with only executing in NgZone for certain dispatch store ops?\n    private readonly ngZone: NgZone,\n  ) {}\n\n  observeToolPanelState() {\n    return this.store.select(getToolPanelState);\n  }\n\n  enterDefaultMode() {\n    this.setToolMode(ToolMode.Default);\n    this.setEditPathInfo(undefined);\n    this.setRotateItemsInfo(undefined);\n    this.setTransformPathsInfo(undefined);\n  }\n\n  enterEditPathMode() {\n    this.setToolMode(ToolMode.Default);\n    this.setEditPathInfo({\n      selectedSegments: new Set<number>(),\n      visibleHandleIns: new Set<number>(),\n      visibleHandleOuts: new Set<number>(),\n      selectedHandleIn: undefined,\n      selectedHandleOut: undefined,\n    });\n    this.setRotateItemsInfo(undefined);\n    this.setTransformPathsInfo(undefined);\n    this.setCursorType(CursorType.PenAdd);\n  }\n\n  /** Exits edit path mode. */\n  exitEditPathMode() {\n    this.dispatchStore(new BatchAction(...this.getExitEditPathModeActions()));\n  }\n\n  /** Returns a list of actions that will exit edit path mode. */\n  getExitEditPathModeActions(): ReadonlyArray<Action> {\n    return [new SetEditPathInfo(undefined), ...this.getClearEditPathModeStateActions()];\n  }\n\n  /** Returns a list of actions that will clear any state associated with edit path mode. */\n  getClearEditPathModeStateActions(): ReadonlyArray<Action> {\n    return [\n      new SetCreatePathInfo(undefined),\n      new SetSplitCurveInfo(undefined),\n      new SetSnapGuideInfo(undefined),\n      new SetCursorType(CursorType.Default),\n    ];\n  }\n\n  enterRotateItemsMode() {\n    this.setToolMode(ToolMode.Default);\n    this.setEditPathInfo(undefined);\n    this.setRotateItemsInfo({});\n    this.setTransformPathsInfo(undefined);\n  }\n\n  enterTransformPathsMode() {\n    this.setToolMode(ToolMode.Default);\n    this.setEditPathInfo(undefined);\n    this.setRotateItemsInfo(undefined);\n    this.setTransformPathsInfo({});\n  }\n\n  enterPencilMode() {\n    this.setToolMode(ToolMode.Pencil);\n    this.setCursorType(CursorType.Pencil);\n  }\n\n  enterCreateRectangleMode() {\n    this.setToolMode(ToolMode.Rectangle);\n    this.setCursorType(CursorType.Crosshair);\n  }\n\n  enterCreateEllipseMode() {\n    this.setToolMode(ToolMode.Ellipse);\n    this.setCursorType(CursorType.Crosshair);\n  }\n\n  setVectorLayer(vl: VectorLayer) {\n    // TODO: avoid running in angular zone whenever possible?\n    this.ngZone.run(() => this.layerTimelineService.setVectorLayer(vl));\n  }\n\n  getVectorLayer() {\n    // TODO: return the non-animated vector layer here (using layer timeline service) instead?\n    return this.queryStore(getAnimatedVectorLayer).vl;\n  }\n\n  setSelectedLayerIds(layerIds: Set<string>) {\n    if (!_.isEqual(this.queryStore(getSelectedLayerIds), layerIds)) {\n      this.ngZone.run(() => this.layerTimelineService.setSelectedLayers(layerIds));\n    }\n  }\n\n  getSelectedLayerIds() {\n    return this.queryStore(getSelectedLayerIds);\n  }\n\n  setHoveredLayerId(layerId: string | undefined) {\n    if (this.queryStore(getHoveredLayerId) !== layerId) {\n      this.ngZone.run(() => this.store.dispatch(new SetHoveredLayerId(layerId)));\n    }\n  }\n\n  getHoveredLayerId() {\n    return this.queryStore(getHoveredLayerId);\n  }\n\n  getHiddenLayerIds() {\n    return this.queryStore(getHiddenLayerIds);\n  }\n\n  setSelectionBox(box: { from: Point; to: Point } | undefined) {\n    if (!_.isEqual(this.queryStore(getSelectionBox), box)) {\n      // TODO: run this outside angular zone instead?\n      this.dispatchStore(new SetSelectionBox(box));\n    }\n  }\n\n  getSelectionBox() {\n    return this.queryStore(getSelectionBox);\n  }\n\n  setCreatePathInfo(info: CreatePathInfo | undefined) {\n    if (!_.isEqual(this.queryStore(getCreatePathInfo), info)) {\n      this.dispatchStore(new SetCreatePathInfo(info));\n    }\n  }\n\n  getCreatePathInfo() {\n    return this.queryStore(getCreatePathInfo);\n  }\n\n  setSplitCurveInfo(info: SplitCurveInfo | undefined) {\n    if (!_.isEqual(this.queryStore(getSplitCurveInfo), info)) {\n      this.dispatchStore(new SetSplitCurveInfo(info));\n    }\n  }\n\n  setToolMode(toolMode: ToolMode) {\n    if (!_.isEqual(this.queryStore(getToolMode), toolMode)) {\n      this.dispatchStore(new SetToolMode(toolMode));\n    }\n  }\n\n  getToolMode() {\n    return this.queryStore(getToolMode);\n  }\n\n  setEditPathInfo(info: EditPathInfo | undefined) {\n    if (!_.isEqual(this.queryStore(getEditPathInfo), info)) {\n      this.dispatchStore(new SetEditPathInfo(info));\n    }\n  }\n\n  getEditPathInfo() {\n    return this.queryStore(getEditPathInfo);\n  }\n\n  setRotateItemsInfo(info: RotateItemsInfo | undefined) {\n    if (!_.isEqual(this.queryStore(getRotateItemsInfo), info)) {\n      this.dispatchStore(new SetRotateItemsInfo(info));\n    }\n  }\n\n  getRotateItemsInfo() {\n    return this.queryStore(getRotateItemsInfo);\n  }\n\n  setTransformPathsInfo(info: TransformPathsInfo | undefined) {\n    if (!_.isEqual(this.queryStore(getTransformPathsInfo), info)) {\n      this.dispatchStore(new SetTransformPathsInfo(info));\n    }\n  }\n\n  getTransformPathsInfo() {\n    return this.queryStore(getTransformPathsInfo);\n  }\n\n  setCursorType(cursorType: CursorType) {\n    if (!_.isEqual(this.queryStore(getCursorType), cursorType)) {\n      this.dispatchStore(new SetCursorType(cursorType));\n    }\n  }\n\n  setSnapGuideInfo(info: SnapGuideInfo | undefined) {\n    if (!_.isEqual(this.queryStore(getSnapGuideInfo), info)) {\n      this.dispatchStore(new SetSnapGuideInfo(info));\n    }\n  }\n\n  setZoomPanInfo(info: ZoomPanInfo) {\n    if (!_.isEqual(this.queryStore(getZoomPanInfo), info)) {\n      this.dispatchStore(new SetZoomPanInfo(info));\n    }\n  }\n\n  setTooltipInfo(info: TooltipInfo | undefined) {\n    if (!_.isEqual(this.queryStore(getTooltipInfo), info)) {\n      this.dispatchStore(new SetTooltipInfo(info));\n    }\n  }\n\n  deleteSelectedModels() {\n    if (this.getRotateItemsInfo() || this.getTransformPathsInfo()) {\n      // Do not delete layers when in rotate items or transform paths mode.\n      return;\n    }\n    this.layerTimelineService.deleteSelectedModels();\n  }\n\n  getDeleteSelectedModelsActions() {\n    return this.layerTimelineService.getDeleteSelectedModelsActions();\n  }\n\n  dispatchStore(action: Action) {\n    if (NgZone.isInAngularZone()) {\n      this.store.dispatch(action);\n    } else {\n      // PaperService methods are usually executed outside of the Angular zone\n      // (since they originate from event handlers registered by paper.js). In\n      // order to ensure change detection works properly, we need to force\n      // state changes to be executed inside the Angular zone.\n      this.ngZone.run(() => this.store.dispatch(action));\n    }\n  }\n\n  private queryStore<T>(selector: OutputSelector<Object, T, (...res: Object[]) => T>) {\n    let obj: T;\n    this.store\n      .select(selector)\n      .pipe(first())\n      .subscribe(o => (obj = o));\n    return obj;\n  }\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport { Action, State, Store } from 'app/modules/editor/store';\nimport { BatchAction } from 'app/modules/editor/store/batch/actions';\nimport {\n  SetCurrentTime,\n  SetIsPlaying,\n  SetIsRepeating,\n  SetIsSlowMotion,\n} from 'app/modules/editor/store/playback/actions';\nimport {\n  getAnimatedVectorLayer,\n  getCurrentTime,\n  getIsPlaying,\n  getIsRepeating,\n  getIsSlowMotion,\n} from 'app/modules/editor/store/playback/selectors';\nimport { getAnimation } from 'app/modules/editor/store/timeline/selectors';\nimport * as _ from 'lodash';\nimport { OutputSelector } from 'reselect';\nimport { first } from 'rxjs/operators';\n\n/** A simple service that provides an interface for making playback changes. */\n@Injectable({ providedIn: 'root' })\nexport class PlaybackService {\n  private readonly animator: Animator;\n\n  // TODO: set current time to 0 when animation/vector layer changes (like before)?\n  // TODO: reset time (or any other special handling) during workspace resets?\n  constructor(private readonly store: Store<State>, ngZone: NgZone) {\n    this.animator = new Animator(ngZone, {\n      onAnimationStart: () => {\n        this.setIsPlaying(true);\n      },\n      onAnimationUpdate: (currentTime: number) => {\n        currentTime = Math.round(currentTime);\n        this.store.dispatch(new SetCurrentTime(currentTime));\n      },\n      onAnimationEnd: () => {\n        this.setIsPlaying(false);\n      },\n    });\n    this.store.select(getIsPlaying).subscribe(isPlaying => {\n      if (isPlaying) {\n        const { duration } = this.queryStore(getAnimation);\n        const currentTime = this.getCurrentTime();\n        const startTime = duration === this.getCurrentTime() ? 0 : currentTime;\n        this.animator.play(duration, startTime);\n      } else {\n        this.animator.pause();\n      }\n    });\n    this.store.select(getIsSlowMotion).subscribe(isSlowMotion => {\n      this.animator.setIsSlowMotion(isSlowMotion);\n    });\n    this.store.select(getIsRepeating).subscribe(isRepeating => {\n      this.animator.setIsRepeating(isRepeating);\n    });\n  }\n\n  asObservable() {\n    return this.store.select(getAnimatedVectorLayer);\n  }\n\n  getCurrentTime() {\n    return this.queryStore(getCurrentTime);\n  }\n\n  setCurrentTime(currentTime: number) {\n    currentTime = Math.round(currentTime);\n    if (this.queryStore(getCurrentTime) !== currentTime) {\n      this.store.dispatch(new SetCurrentTime(currentTime));\n    }\n  }\n\n  // TODO: make it so rewind navigates to the start of the currently active block?\n  rewind() {\n    const actions: Action[] = [];\n    if (this.getCurrentTime() !== 0) {\n      actions.push(new SetCurrentTime(0));\n    }\n    if (this.queryStore(getIsPlaying)) {\n      actions.push(new SetIsPlaying(false));\n    }\n    if (actions.length) {\n      this.store.dispatch(new BatchAction(...actions));\n    }\n  }\n\n  // TODO: make it so fast forward navigates to the end of the currently active block?\n  fastForward() {\n    const actions: Action[] = [];\n    const { duration } = this.queryStore(getAnimation);\n    if (this.getCurrentTime() !== duration) {\n      actions.push(new SetCurrentTime(duration));\n    }\n    if (this.queryStore(getIsPlaying)) {\n      actions.push(new SetIsPlaying(false));\n    }\n    if (actions.length) {\n      this.store.dispatch(new BatchAction(...actions));\n    }\n  }\n\n  toggleIsSlowMotion() {\n    this.store.dispatch(new SetIsSlowMotion(!this.queryStore(getIsSlowMotion)));\n  }\n\n  toggleIsRepeating() {\n    this.store.dispatch(new SetIsRepeating(!this.queryStore(getIsRepeating)));\n  }\n\n  toggleIsPlaying() {\n    this.setIsPlaying(!this.queryStore(getIsPlaying));\n  }\n\n  private setIsPlaying(isPlaying: boolean) {\n    if (isPlaying !== this.queryStore(getIsPlaying)) {\n      this.store.dispatch(new SetIsPlaying(isPlaying));\n    }\n  }\n\n  private queryStore<T>(selector: OutputSelector<Object, T, (res: Object) => T>) {\n    let obj: T;\n    this.store\n      .select(selector)\n      .pipe(first())\n      .subscribe(o => (obj = o));\n    return obj;\n  }\n}\n\nconst REPEAT_DELAY = 750;\nconst DEFAULT_PLAYBACK_SPEED = 1;\nconst SLOW_MOTION_PLAYBACK_SPEED = 5;\n\n/** A simple class that simulates an animation loop. */\nclass Animator {\n  private timeoutId: number;\n  private animationFrameId: number;\n  private playbackSpeed = DEFAULT_PLAYBACK_SPEED;\n  private isRepeating = false;\n\n  constructor(private readonly ngZone: NgZone, private readonly callback: Callback) {}\n\n  setIsRepeating(isRepeating: boolean) {\n    this.isRepeating = isRepeating;\n  }\n\n  setIsSlowMotion(isSlowMotion: boolean) {\n    // TODO: make it possible to change this mid-animation?\n    this.playbackSpeed = isSlowMotion ? SLOW_MOTION_PLAYBACK_SPEED : DEFAULT_PLAYBACK_SPEED;\n  }\n\n  play(duration: number, startTime: number) {\n    this.runOutsideAngular(() => this.startAnimation(duration, startTime));\n    this.runInsideAngular(() => this.callback.onAnimationStart());\n  }\n\n  private startAnimation(duration: number, startTime: number) {\n    let startTimestamp: number;\n    const playbackSpeed = this.playbackSpeed;\n    const onAnimationFrameFn = (timestamp: number) => {\n      if (!startTimestamp) {\n        startTimestamp = timestamp;\n      }\n      const progress = timestamp - startTimestamp + startTime;\n      if (progress < duration * playbackSpeed) {\n        this.animationFrameId = window.requestAnimationFrame(onAnimationFrameFn);\n      } else if (this.isRepeating) {\n        this.timeoutId = window.setTimeout(\n          () => this.startAnimation(duration, startTime),\n          REPEAT_DELAY,\n        );\n      } else {\n        this.pause(true);\n      }\n      const fraction = _.clamp(progress / (duration * playbackSpeed), 0, 1);\n      const executeFn = () => this.callback.onAnimationUpdate(fraction * duration);\n      if (fraction === 0 || fraction === 1) {\n        this.runInsideAngular(executeFn);\n      } else {\n        executeFn();\n      }\n    };\n    this.animationFrameId = window.requestAnimationFrame(onAnimationFrameFn);\n  }\n\n  pause(shouldNotify = false) {\n    if (this.timeoutId) {\n      window.clearTimeout(this.timeoutId);\n      this.timeoutId = undefined;\n    }\n    if (this.animationFrameId) {\n      window.cancelAnimationFrame(this.animationFrameId);\n      this.animationFrameId = undefined;\n    }\n    if (shouldNotify) {\n      this.runInsideAngular(() => this.callback.onAnimationEnd());\n    }\n  }\n\n  rewind() {\n    this.pause();\n  }\n\n  fastForward() {\n    this.pause();\n  }\n\n  private runInsideAngular(fn: () => void) {\n    if (NgZone.isInAngularZone()) {\n      fn();\n    } else {\n      this.ngZone.run(fn);\n    }\n  }\n\n  private runOutsideAngular(fn: () => void) {\n    if (NgZone.isInAngularZone()) {\n      this.ngZone.runOutsideAngular(fn);\n    } else {\n      fn();\n    }\n  }\n}\n\ninterface Callback {\n  onAnimationStart(): void;\n  onAnimationUpdate(currentTime: number): void;\n  onAnimationEnd(): void;\n}\n","import { Injectable } from '@angular/core';\nimport { State, Store } from 'app/modules/editor/store';\nimport { environment } from 'environments/environment';\nimport * as $ from 'jquery';\nimport { ActionCreators } from 'redux-undo';\nimport { Subject } from 'rxjs';\n\nimport { ActionModeService } from './actionmode.service';\nimport { LayerTimelineService } from './layertimeline.service';\nimport { PlaybackService } from './playback.service';\n\nexport enum Shortcut {\n  ZoomToFit = 1,\n}\n\ninterface ModifierKeyEvent {\n  readonly metaKey: boolean;\n  readonly ctrlKey?: boolean;\n}\n\n@Injectable({ providedIn: 'root' })\nexport class ShortcutService {\n  private isInit = false;\n  private readonly shortcutSubject = new Subject<Shortcut>();\n\n  /** Returns true if the event is a modifier key (meta for Macs, ctrl for others). */\n  static isOsDependentModifierKey(event: ModifierKeyEvent) {\n    return !!(ShortcutService.isMac() ? !!event.metaKey : !!event.ctrlKey);\n  }\n\n  static isMac() {\n    return navigator.appVersion.includes('Mac');\n  }\n\n  constructor(\n    private readonly store: Store<State>,\n    private readonly actionModeService: ActionModeService,\n    private readonly playbackService: PlaybackService,\n    private readonly layerTimelineService: LayerTimelineService,\n  ) {}\n\n  asObservable() {\n    return this.shortcutSubject.asObservable();\n  }\n\n  init() {\n    if (this.isInit) {\n      return;\n    }\n    this.isInit = true;\n\n    $(window).on('keydown', event => {\n      if (ShortcutService.isOsDependentModifierKey(event)) {\n        if (event.keyCode === 'Z'.charCodeAt(0)) {\n          this.store.dispatch(event.shiftKey ? ActionCreators.redo() : ActionCreators.undo());\n          return false;\n        }\n        if (event.keyCode === 'G'.charCodeAt(0)) {\n          this.layerTimelineService.groupOrUngroupSelectedLayers(!event.shiftKey);\n          return false;\n        }\n        if (event.keyCode === 'O'.charCodeAt(0)) {\n          this.shortcutSubject.next(Shortcut.ZoomToFit);\n          return false;\n        }\n      }\n      if (event.ctrlKey || event.metaKey) {\n        // Do nothing if the ctrl or meta keys are pressed.\n        return undefined;\n      }\n      if (document.activeElement.matches('input')) {\n        // Ignore shortcuts when an input element has focus.\n        return true;\n      }\n      if (event.keyCode === 8 || event.keyCode === 46) {\n        // Backspace or delete.\n        const isActionMode = this.actionModeService.isActionMode();\n        // If we aren't in beta or it is action mode, handle the backspace/delete\n        // event here. Otherwise we will handle it in the gesture tool (which is\n        // where we will likely want to move all of the shortcut logic in the future).\n        if (!environment.beta || isActionMode) {\n          // In case there's a JS error, never navigate away.\n          event.preventDefault();\n          if (isActionMode) {\n            this.actionModeService.deleteSelectedActionModeModels();\n          } else {\n            this.layerTimelineService.deleteSelectedModels();\n          }\n          return false;\n        }\n      }\n      if (event.keyCode === 27) {\n        // Escape.\n        this.actionModeService.closeActionMode();\n        return false;\n      }\n      // TODO: figure out how to re-enable this keyboard shortcut in beta\n      if (!environment.beta && event.keyCode === 32) {\n        // Spacebar.\n        this.playbackService.toggleIsPlaying();\n        return false;\n      }\n      if (event.keyCode === 37) {\n        // Left arrow.\n        this.playbackService.rewind();\n        return false;\n      }\n      if (event.keyCode === 39) {\n        // Right arrow.\n        this.playbackService.fastForward();\n        return false;\n      }\n      if (event.keyCode === 'R'.charCodeAt(0)) {\n        if (this.actionModeService.isShowingSubPathActionMode()) {\n          this.actionModeService.reverseSelectedSubPaths();\n        } else {\n          this.playbackService.toggleIsRepeating();\n        }\n        return false;\n      }\n      if (event.keyCode === 'S'.charCodeAt(0)) {\n        if (\n          this.actionModeService.isShowingSubPathActionMode() ||\n          this.actionModeService.isShowingSegmentActionMode()\n        ) {\n          this.actionModeService.toggleSplitSubPathsMode();\n        } else {\n          this.playbackService.toggleIsSlowMotion();\n        }\n        return false;\n      }\n      if (event.keyCode === 'A'.charCodeAt(0)) {\n        if (\n          this.actionModeService.isShowingSubPathActionMode() ||\n          this.actionModeService.isShowingSegmentActionMode()\n        ) {\n          this.actionModeService.toggleSplitCommandsMode();\n        } else if (this.actionModeService.isShowingPointActionMode()) {\n          this.actionModeService.splitSelectedPointInHalf();\n        }\n        return false;\n      }\n      if (event.keyCode === 'D'.charCodeAt(0)) {\n        if (\n          this.actionModeService.isShowingSubPathActionMode() ||\n          this.actionModeService.isShowingSegmentActionMode()\n        ) {\n          this.actionModeService.togglePairSubPathsMode();\n        }\n        return false;\n      }\n      if (event.keyCode === 'B'.charCodeAt(0)) {\n        if (this.actionModeService.isShowingSubPathActionMode()) {\n          this.actionModeService.shiftBackSelectedSubPaths();\n        }\n        return false;\n      }\n      if (event.keyCode === 'F'.charCodeAt(0)) {\n        if (this.actionModeService.isShowingSubPathActionMode()) {\n          this.actionModeService.shiftForwardSelectedSubPaths();\n        } else if (this.actionModeService.isShowingPointActionMode()) {\n          this.actionModeService.shiftPointToFront();\n        }\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  destroy() {\n    if (!this.isInit) {\n      return;\n    }\n    this.isInit = false;\n    $(window).unbind('keydown');\n  }\n\n  getZoomToFitText() {\n    return `${this.getCmdOrCtrlText()} + O`;\n  }\n\n  private getCmdOrCtrlText() {\n    return ShortcutService.isMac() ? 'Cmd' : 'Ctrl';\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MatSnackBar } from '@angular/material';\n\nexport enum Duration {\n  Short = 2750,\n  Long = 5000,\n}\n\n@Injectable({ providedIn: 'root' })\nexport class SnackBarService {\n  constructor(private readonly snackBar: MatSnackBar) {}\n\n  show(message: string, action = '', duration = Duration.Short) {\n    this.snackBar.open(message, action.toUpperCase(), { duration });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { State, Store } from 'app/modules/editor/store';\nimport { SetTheme } from 'app/modules/editor/store/theme/actions';\nimport { ThemeType } from 'app/modules/editor/store/theme/reducer';\nimport { getThemeType } from 'app/modules/editor/store/theme/selectors';\nimport { first } from 'rxjs/operators';\n\n// TODO: change the animation block green color\n\nconst LIGHT_PRIMARY_TEXT = 'rgba(0, 0, 0, 0.87)';\nconst DARK_PRIMARY_TEXT = 'rgba(255, 255, 255, 1)';\nconst LIGHT_SECONDARY_TEXT = 'rgba(0, 0, 0, 0.54)';\nconst DARK_SECONDARY_TEXT = 'rgba(255, 255, 255, 0.7)';\nconst LIGHT_DISABLED_TEXT = 'rgba(0, 0, 0, 0.26)';\nconst DARK_DISABLED_TEXT = 'rgba(255, 255, 255, 0.3)';\nconst LIGHT_DIVIDER_TEXT = 'rgba(0, 0, 0, 0.12)';\nconst DARK_DIVIDER_TEXT = 'rgba(255, 255, 255, 0.12)';\n\n/**\n * A simple service that provides an interface for making theme changes.\n */\n@Injectable({ providedIn: 'root' })\nexport class ThemeService {\n  constructor(private readonly store: Store<State>) {}\n\n  setTheme(themeType: ThemeType) {\n    this.store.dispatch(new SetTheme(themeType));\n  }\n\n  toggleTheme() {\n    this.setTheme(this.getThemeType().themeType === 'dark' ? 'light' : 'dark');\n  }\n\n  getThemeType() {\n    let result: { themeType: ThemeType; isInitialPageLoad: boolean };\n    this.asObservable()\n      .pipe(first())\n      .subscribe(res => (result = res));\n    return result;\n  }\n\n  asObservable() {\n    return this.store.select(getThemeType);\n  }\n\n  getPrimaryTextColor() {\n    return this.getThemeType().themeType === 'dark' ? DARK_PRIMARY_TEXT : LIGHT_PRIMARY_TEXT;\n  }\n\n  getSecondaryTextColor() {\n    return this.getThemeType().themeType === 'dark' ? DARK_SECONDARY_TEXT : LIGHT_SECONDARY_TEXT;\n  }\n\n  getDisabledTextColor() {\n    return this.getThemeType().themeType === 'dark' ? DARK_DISABLED_TEXT : LIGHT_DISABLED_TEXT;\n  }\n\n  getDividerTextColor() {\n    return this.getThemeType().themeType === 'dark' ? DARK_DIVIDER_TEXT : LIGHT_DIVIDER_TEXT;\n  }\n}\n","import { ActionMode, ActionSource, Hover, Selection } from 'app/modules/editor/model/actionmode';\nimport { Action } from 'app/modules/editor/store';\n\nexport enum ActionModeActionTypes {\n  SetActionMode = '__actionmode__SET_ACTION_MODE',\n  SetActionModeHover = '__actionmode__SET_ACTION_MODE_HOVER',\n  SetActionModeSelections = '__actionmode__SET_ACTION_MODE_SELECTIONS',\n  SetPairedSubPaths = '__actionmode__SET_PAIRED_SUBPATHS',\n  SetUnpairedSubPath = '__actionmode__SET_UNPAIRED_SUBPATH',\n}\n\nexport class SetActionMode implements Action {\n  readonly type = ActionModeActionTypes.SetActionMode;\n  readonly payload: { mode: ActionMode };\n  constructor(mode: ActionMode) {\n    this.payload = { mode };\n  }\n}\n\nexport class SetActionModeHover implements Action {\n  readonly type = ActionModeActionTypes.SetActionModeHover;\n  readonly payload: { hover: Hover };\n  constructor(hover: Hover) {\n    this.payload = { hover };\n  }\n}\n\nexport class SetActionModeSelections implements Action {\n  readonly type = ActionModeActionTypes.SetActionModeSelections;\n  readonly payload: { selections: ReadonlyArray<Selection> };\n  constructor(selections: ReadonlyArray<Selection>) {\n    this.payload = { selections };\n  }\n}\n\nexport class SetPairedSubPaths implements Action {\n  readonly type = ActionModeActionTypes.SetPairedSubPaths;\n  readonly payload: { pairedSubPaths: ReadonlySet<number> };\n  constructor(pairedSubPaths: ReadonlySet<number>) {\n    this.payload = { pairedSubPaths };\n  }\n}\n\nexport class SetUnpairedSubPath implements Action {\n  readonly type = ActionModeActionTypes.SetUnpairedSubPath;\n  readonly payload: { unpairedSubPath: { source: ActionSource; subIdx: number } };\n  constructor(unpairedSubPath: { source: ActionSource; subIdx: number }) {\n    this.payload = { unpairedSubPath };\n  }\n}\n\nexport type ActionModeActions =\n  | SetActionMode\n  | SetActionModeHover\n  | SetActionModeSelections\n  | SetPairedSubPaths\n  | SetUnpairedSubPath;\n","import { ActionMode, ActionSource, Hover, Selection } from 'app/modules/editor/model/actionmode';\n\nimport { ActionModeActionTypes, ActionModeActions } from './actions';\n\nexport interface State {\n  readonly mode: ActionMode;\n  readonly hover: Hover;\n  readonly selections: ReadonlyArray<Selection>;\n  readonly pairedSubPaths: ReadonlySet<number>;\n  readonly unpairedSubPath: { readonly source: ActionSource; readonly subIdx: number };\n}\n\nexport function buildInitialState() {\n  return {\n    mode: ActionMode.None,\n    hover: undefined,\n    selections: [],\n    pairedSubPaths: new Set<number>(),\n    unpairedSubPath: undefined,\n  } as State;\n}\n\n// TODO: move as much logic as possible from here into action mode service\nexport function reducer(state = buildInitialState(), action: ActionModeActions) {\n  switch (action.type) {\n    // Set the app mode during action mode.\n    case ActionModeActionTypes.SetActionMode: {\n      const { mode } = action.payload;\n      if (mode === ActionMode.None) {\n        return buildInitialState();\n      }\n      let { selections, pairedSubPaths, unpairedSubPath } = state;\n      if (state.mode === ActionMode.PairSubPaths && mode !== state.mode) {\n        // Reset the paired subpath state when leaving pair subpath mode.\n        pairedSubPaths = new Set();\n        unpairedSubPath = undefined;\n      }\n      if (mode === ActionMode.Selection && mode !== state.mode) {\n        // Clear selections when switching back to selection mode.\n        selections = [];\n      }\n      return { ...state, mode, selections, pairedSubPaths, unpairedSubPath };\n    }\n\n    // Set the hover mode during action mode.\n    case ActionModeActionTypes.SetActionModeHover: {\n      const { hover } = action.payload;\n      return { ...state, hover };\n    }\n\n    // Set the path selections during action mode.\n    case ActionModeActionTypes.SetActionModeSelections: {\n      const { selections } = action.payload;\n      return { ...state, selections };\n    }\n\n    // Set the currently paired subpaths.\n    case ActionModeActionTypes.SetPairedSubPaths: {\n      const pairedSubPaths = new Set(action.payload.pairedSubPaths);\n      return { ...state, pairedSubPaths };\n    }\n\n    // Set the currently unpaired subpath in pair subpaths mode.\n    case ActionModeActionTypes.SetUnpairedSubPath: {\n      const { unpairedSubPath } = action.payload;\n      return { ...state, unpairedSubPath };\n    }\n  }\n  return state;\n}\n","import { ActionMode, ActionSource, SelectionType } from 'app/modules/editor/model/actionmode';\nimport { LayerUtil, MorphableLayer, VectorLayer } from 'app/modules/editor/model/layers';\nimport { Animation, PathAnimationBlock } from 'app/modules/editor/model/timeline';\nimport { ActionModeUtil } from 'app/modules/editor/scripts/actionmode';\nimport { AnimationRenderer } from 'app/modules/editor/scripts/animator';\nimport {\n  getHiddenLayerIds,\n  getSelectedLayerIds,\n  getVectorLayer,\n} from 'app/modules/editor/store/layers/selectors';\nimport { State } from 'app/modules/editor/store/reducer';\nimport { createDeepEqualSelector, getEditorState } from 'app/modules/editor/store/selectors';\nimport {\n  getAnimation,\n  getSingleSelectedBlockLayerId,\n  getSingleSelectedPathBlock,\n} from 'app/modules/editor/store/timeline/selectors';\nimport { createSelector, createStructuredSelector } from 'reselect';\n\nconst getActionModeState = createSelector(getEditorState, s => s.actionmode);\nexport const getActionMode = createSelector(getActionModeState, s => s.mode);\nexport const isActionMode = createSelector(getActionMode, mode => mode !== ActionMode.None);\nexport const getActionModeHover = createDeepEqualSelector(getActionModeState, s => s.hover);\n\nexport const getActionModeSelections = createDeepEqualSelector(\n  getActionModeState,\n  s => s.selections,\n);\n\nexport const getActionModeSubPathSelections = createDeepEqualSelector(\n  getActionModeSelections,\n  selections => selections.filter(s => s.type === SelectionType.SubPath),\n);\nexport const getActionModeSegmentSelections = createDeepEqualSelector(\n  getActionModeSelections,\n  selections => selections.filter(s => s.type === SelectionType.Segment),\n);\nexport const getActionModePointSelections = createDeepEqualSelector(\n  getActionModeSelections,\n  selections => selections.filter(s => s.type === SelectionType.Point),\n);\n\nexport const getPairedSubPaths = createDeepEqualSelector(\n  getActionModeState,\n  state => state.pairedSubPaths,\n);\nexport const getUnpairedSubPath = createDeepEqualSelector(\n  getActionModeState,\n  state => state.unpairedSubPath,\n);\n\nfunction getVectorLayerValue(getTimeFn: (block: PathAnimationBlock) => number) {\n  return createSelector(\n    [getVectorLayer, getAnimation, getSingleSelectedPathBlock],\n    (vl, anim, block) => {\n      if (!block) {\n        return undefined;\n      }\n      // Note this is a bit dangerous because the renderer interpolates paths\n      // and that causes all mutated path state to be lost if we aren't careful.\n      // There are currently checks in PathProperty.ts to avoid this by returning\n      // the start and end path when the interpolated fraction is 0 and 1 respectively.\n      const renderer = new AnimationRenderer(vl, anim);\n      const timeMillis = getTimeFn(block);\n      // First interpolate the entire vector layer.\n      const renderedVl = renderer.setCurrentTime(timeMillis);\n      // TODO: this is hacky! the real solution is to not clear path state after interpolations\n      // Replace the interpolated value with the block's to/from value.\n      const layer = vl.findLayerById(block.layerId).clone() as MorphableLayer;\n      layer.pathData = timeMillis === block.startTime ? block.fromValue : block.toValue;\n      return LayerUtil.updateLayer(renderedVl, layer);\n    },\n  );\n}\n\nconst getVectorLayerFromValue = getVectorLayerValue(block => block.startTime);\nconst getVectorLayerToValue = getVectorLayerValue(block => block.endTime);\n\ntype CombinerFunc = (vl: VectorLayer, anim: Animation, block: PathAnimationBlock) => VectorLayer;\n\nfunction getMorphableLayerValue(\n  selector: Reselect.OutputSelector<State, VectorLayer, CombinerFunc>,\n) {\n  return createSelector([selector, getSingleSelectedBlockLayerId], (vl, blockLayerId) => {\n    if (!vl || !blockLayerId) {\n      return undefined;\n    }\n    return vl.findLayerById(blockLayerId) as MorphableLayer;\n  });\n}\n\nconst getMorphableLayerFromValue = getMorphableLayerValue(getVectorLayerFromValue);\nconst getMorphableLayerToValue = getMorphableLayerValue(getVectorLayerToValue);\n\nconst getPathsCompatibleResult = createSelector(\n  getSingleSelectedPathBlock,\n  block => (block ? ActionModeUtil.checkPathsCompatible(block) : undefined),\n);\n\nfunction getHighlightedSubIdxWithError(actionSource: ActionSource) {\n  return createSelector(\n    [getActionMode, getActionModeSelections, getPathsCompatibleResult],\n    (mode, selections, result) => {\n      if (!result) {\n        // Then there is no path animation block currently selected.\n        return undefined;\n      }\n      const { areCompatible, errorPath, errorSubIdx } = result;\n      if (mode !== ActionMode.Selection || selections.length) {\n        // Don't show any highlights if we're not in selection mode, or\n        // if there are any existing selections.\n        return undefined;\n      }\n      if (areCompatible || errorPath !== actionSource || errorSubIdx === undefined) {\n        return undefined;\n      }\n      return errorSubIdx;\n    },\n  );\n}\n\nconst actionModeBaseSelectors = {\n  blockLayerId: getSingleSelectedBlockLayerId,\n  isActionMode,\n  hover: getActionModeHover,\n  selections: getActionModeSelections,\n  pairedSubPaths: getPairedSubPaths,\n  unpairedSubPath: getUnpairedSubPath,\n  hiddenLayerIds: getHiddenLayerIds,\n  selectedLayerIds: getSelectedLayerIds,\n};\n\nexport const getActionModeStartState = createStructuredSelector({\n  ...actionModeBaseSelectors,\n  vectorLayer: getVectorLayerFromValue,\n  subIdxWithError: getHighlightedSubIdxWithError(ActionSource.From),\n});\n\nexport const getActionModeEndState = createStructuredSelector({\n  ...actionModeBaseSelectors,\n  vectorLayer: getVectorLayerToValue,\n  subIdxWithError: getHighlightedSubIdxWithError(ActionSource.To),\n});\n\nexport const getToolbarState = createStructuredSelector({\n  mode: getActionMode,\n  fromMl: getMorphableLayerFromValue,\n  toMl: getMorphableLayerToValue,\n  selections: getActionModeSelections,\n  unpairedSubPath: getUnpairedSubPath,\n  block: getSingleSelectedPathBlock,\n});\n","import { Action } from 'app/modules/editor/store';\n\nexport enum BatchActionTypes {\n  BatchAction = '__batch__BATCH',\n}\n\nexport class BatchAction implements Action {\n  readonly type = BatchActionTypes.BatchAction;\n  readonly payload: ReadonlyArray<Action>;\n  constructor(...actions: Action[]) {\n    this.payload = actions;\n  }\n}\n\nexport type BatchActions = BatchAction;\n","import { ActionReducer } from 'app/modules/editor/store';\nimport { EditorState } from 'app/modules/editor/store/reducer';\n\nimport { BatchActionTypes, BatchActions } from './actions';\n\nexport function metaReducer(reducer: ActionReducer<EditorState>): ActionReducer<EditorState> {\n  return (state: EditorState, action: BatchActions) => {\n    const isBatchAction = action.type === BatchActionTypes.BatchAction;\n    return (isBatchAction ? action.payload : [action]).reduce(reducer, state);\n  };\n}\n","import { getActionMode, isActionMode } from 'app/modules/editor/store/actionmode/selectors';\nimport {\n  getCollapsedLayerIds,\n  getHiddenLayerIds,\n  getSelectedLayerIds,\n  getVectorLayer,\n} from 'app/modules/editor/store/layers/selectors';\nimport { getHoveredLayerId } from 'app/modules/editor/store/paper/selectors';\nimport { isBeingReset } from 'app/modules/editor/store/reset/selectors';\nimport {\n  getAnimation,\n  getSelectedBlockIds,\n  getSelectedBlockLayerIds,\n  getSingleSelectedPathBlock,\n  isAnimationSelected,\n} from 'app/modules/editor/store/timeline/selectors';\nimport { createSelector, createStructuredSelector } from 'reselect';\n\nexport const getCanvasOverlayState = createStructuredSelector({\n  hiddenLayerIds: getHiddenLayerIds,\n  selectedLayerIds: getSelectedLayerIds,\n  selectedBlockLayerIds: getSelectedBlockLayerIds,\n  isActionMode,\n});\n\nexport const getPropertyInputState = createStructuredSelector({\n  animation: getAnimation,\n  isAnimationSelected,\n  selectedBlockIds: getSelectedBlockIds,\n  vectorLayer: getVectorLayer,\n  selectedLayerIds: getSelectedLayerIds,\n});\n\nexport const getLayerListTreeState = createStructuredSelector({\n  animation: getAnimation,\n  selectedLayerIds: getSelectedLayerIds,\n  collapsedLayerIds: getCollapsedLayerIds,\n  hiddenLayerIds: getHiddenLayerIds,\n  hoveredLayerId: getHoveredLayerId,\n  isActionMode,\n});\n\nexport const getTimelineAnimationRowState = createStructuredSelector({\n  animation: getAnimation,\n  collapsedLayerIds: getCollapsedLayerIds,\n  selectedBlockIds: getSelectedBlockIds,\n  isActionMode,\n});\n\nexport const getLayerTimelineState = createStructuredSelector({\n  animation: getAnimation,\n  vectorLayer: getVectorLayer,\n  isAnimationSelected,\n  selectedBlockIds: getSelectedBlockIds,\n  isBeingReset,\n  isActionMode,\n  actionMode: getActionMode,\n  singleSelectedPathBlock: getSingleSelectedPathBlock,\n});\n\nexport const isWorkspaceDirty = createSelector(\n  [getVectorLayer, getAnimation],\n  (vl, anim) => vl.children.length > 0 || anim.blocks.length > 0,\n);\n","export { StoreModule, Store, Action, ActionReducer } from '@ngrx/store';\nexport { State, reducers, metaReducers } from './reducer';\n","import { VectorLayer } from 'app/modules/editor/model/layers';\nimport { Action } from 'app/modules/editor/store';\n\nexport enum LayerActionTypes {\n  SetVectorLayer = '__layers__SET_VECTOR_LAYER',\n  SetSelectedLayers = '__layers__SET_SELECTED_LAYERS',\n  SetHiddenLayers = '__layers__SET_HIDDEN_LAYERS',\n  SetCollapsedLayers = '__layers__SET_COLLAPSED_LAYERS',\n}\n\nexport class SetVectorLayer implements Action {\n  readonly type = LayerActionTypes.SetVectorLayer;\n  readonly payload: { vectorLayer: VectorLayer };\n  constructor(vectorLayer: VectorLayer) {\n    this.payload = { vectorLayer };\n  }\n}\n\nexport class SetSelectedLayers implements Action {\n  readonly type = LayerActionTypes.SetSelectedLayers;\n  readonly payload: { layerIds: ReadonlySet<string> };\n  constructor(layerIds: ReadonlySet<string>) {\n    this.payload = { layerIds };\n  }\n}\n\nexport class SetHiddenLayers implements Action {\n  readonly type = LayerActionTypes.SetHiddenLayers;\n  readonly payload: { layerIds: ReadonlySet<string> };\n  constructor(layerIds: ReadonlySet<string>) {\n    this.payload = { layerIds };\n  }\n}\n\nexport class SetCollapsedLayers implements Action {\n  readonly type = LayerActionTypes.SetCollapsedLayers;\n  readonly payload: { layerIds: ReadonlySet<string> };\n  constructor(layerIds: ReadonlySet<string>) {\n    this.payload = { layerIds };\n  }\n}\n\nexport type LayerActions =\n  | SetVectorLayer\n  | SetSelectedLayers\n  | SetHiddenLayers\n  | SetCollapsedLayers;\n","import { VectorLayer } from 'app/modules/editor/model/layers';\n\nimport { LayerActionTypes, LayerActions } from './actions';\n\nexport interface State {\n  readonly vectorLayer: VectorLayer;\n  readonly selectedLayerIds: ReadonlySet<string>;\n  readonly collapsedLayerIds: ReadonlySet<string>;\n  readonly hiddenLayerIds: ReadonlySet<string>;\n}\n\nexport function buildInitialState() {\n  return {\n    vectorLayer: new VectorLayer(),\n    selectedLayerIds: new Set<string>(),\n    collapsedLayerIds: new Set<string>(),\n    hiddenLayerIds: new Set<string>(),\n  } as State;\n}\n\nexport function reducer(state = buildInitialState(), action: LayerActions) {\n  switch (action.type) {\n    case LayerActionTypes.SetVectorLayer:\n      return { ...state, vectorLayer: action.payload.vectorLayer };\n    case LayerActionTypes.SetSelectedLayers:\n      return { ...state, selectedLayerIds: new Set<string>(action.payload.layerIds) };\n    case LayerActionTypes.SetHiddenLayers:\n      return { ...state, hiddenLayerIds: new Set<string>(action.payload.layerIds) };\n    case LayerActionTypes.SetCollapsedLayers:\n      return { ...state, collapsedLayerIds: new Set<string>(action.payload.layerIds) };\n  }\n  return state;\n}\n","import { createDeepEqualSelector, getEditorState } from 'app/modules/editor/store/selectors';\nimport { createSelector } from 'reselect';\n\nconst getLayerState = createSelector(getEditorState, s => s.layers);\nexport const getVectorLayer = createSelector(getLayerState, l => l.vectorLayer);\nexport const getSelectedLayerIds = createDeepEqualSelector(getLayerState, l => l.selectedLayerIds);\nexport const getCollapsedLayerIds = createDeepEqualSelector(\n  getLayerState,\n  l => l.collapsedLayerIds,\n);\nexport const getHiddenLayerIds = createDeepEqualSelector(getLayerState, l => l.hiddenLayerIds);\n","import { CursorType, ToolMode } from 'app/modules/editor/model/paper';\nimport { Point } from 'app/modules/editor/scripts/common';\nimport { Action } from 'app/modules/editor/store';\n\nexport enum PaperActionTypes {\n  SetToolMode = '__paper__SET_TOOL_MODE',\n  SetSelectionBox = '__paper__SET_SELECTION_BOX',\n  SetCreatePathInfo = '__paper__SET_CREATE_PATH_INFO',\n  SetSplitCurveInfo = '__paper__SET_SPLIT_CURVE_INFO',\n  SetEditPathInfo = '__paper__SET_EDIT_PATH_INFO',\n  SetRotateItemsInfo = '__paper__SET_ROTATE_ITEMS_INFO',\n  SetTransformPathInfo = '__paper__SET_TRANSFORM_PATHS_INFO',\n  SetCursorType = '__paper__SET_CANVAS_CURSOR',\n  SetSnapGuideInfo = '__paper__SET_SNAP_GUIDE_INFO',\n  SetZoomPanInfo = '__paper__SET_ZOOM_PAN_INFO',\n  SetTooltipInfo = '__paper__SET_TOOLTIP_INFO',\n  SetHoveredLayerId = '__paper__SET_HOVERED_LAYER_ID',\n}\n\nexport class SetToolMode implements Action {\n  readonly type = PaperActionTypes.SetToolMode;\n  constructor(readonly toolMode: ToolMode) {}\n}\n\nexport class SetSelectionBox implements Action {\n  readonly type = PaperActionTypes.SetSelectionBox;\n  constructor(readonly selectionBox: SelectionBox | undefined) {}\n}\n\nexport class SetCreatePathInfo implements Action {\n  readonly type = PaperActionTypes.SetCreatePathInfo;\n  constructor(readonly createPathInfo: CreatePathInfo | undefined) {}\n}\n\nexport class SetSplitCurveInfo implements Action {\n  readonly type = PaperActionTypes.SetSplitCurveInfo;\n  constructor(readonly splitCurveInfo: SplitCurveInfo | undefined) {}\n}\n\nexport class SetEditPathInfo implements Action {\n  readonly type = PaperActionTypes.SetEditPathInfo;\n  constructor(readonly editPathInfo: EditPathInfo | undefined) {}\n}\n\nexport class SetRotateItemsInfo implements Action {\n  readonly type = PaperActionTypes.SetRotateItemsInfo;\n  constructor(readonly rotateItemsInfo: RotateItemsInfo | undefined) {}\n}\n\nexport class SetTransformPathsInfo implements Action {\n  readonly type = PaperActionTypes.SetTransformPathInfo;\n  constructor(readonly transformPathsInfo: TransformPathsInfo | undefined) {}\n}\n\nexport class SetCursorType implements Action {\n  readonly type = PaperActionTypes.SetCursorType;\n  constructor(readonly cursorType: CursorType) {}\n}\n\nexport class SetSnapGuideInfo implements Action {\n  readonly type = PaperActionTypes.SetSnapGuideInfo;\n  constructor(readonly snapGuideInfo: SnapGuideInfo | undefined) {}\n}\n\nexport class SetZoomPanInfo implements Action {\n  readonly type = PaperActionTypes.SetZoomPanInfo;\n  constructor(readonly zoomPanInfo: ZoomPanInfo) {}\n}\n\nexport class SetTooltipInfo implements Action {\n  readonly type = PaperActionTypes.SetTooltipInfo;\n  constructor(readonly tooltipInfo: TooltipInfo | undefined) {}\n}\n\nexport class SetHoveredLayerId implements Action {\n  readonly type = PaperActionTypes.SetHoveredLayerId;\n  constructor(readonly hoveredLayerId: string | undefined) {}\n}\n\nexport type PaperActions =\n  | SetToolMode\n  | SetSelectionBox\n  | SetCreatePathInfo\n  | SetSplitCurveInfo\n  | SetEditPathInfo\n  | SetRotateItemsInfo\n  | SetTransformPathsInfo\n  | SetCursorType\n  | SetSnapGuideInfo\n  | SetZoomPanInfo\n  | SetTooltipInfo\n  | SetHoveredLayerId;\n\nexport interface SelectionBox {\n  readonly from: Point;\n  readonly to: Point;\n}\n\nexport interface CreatePathInfo {\n  readonly pathData: string;\n  readonly strokeColor: string;\n}\n\nexport type Segment = Readonly<{ point: Point; handleIn: Point; handleOut: Point }>;\n\nexport interface SplitCurveInfo {\n  readonly splitPoint: Point;\n  readonly segment1: Segment;\n  readonly segment2: Segment;\n}\n\nexport interface EditPathInfo {\n  // TODO: suffix these variables with 'index'\n  readonly selectedSegments: ReadonlySet<number>;\n  readonly visibleHandleIns: ReadonlySet<number>;\n  readonly visibleHandleOuts: ReadonlySet<number>;\n  readonly selectedHandleIn: number | undefined;\n  readonly selectedHandleOut: number | undefined;\n}\n\nexport interface RotateItemsInfo {\n  // If a pivot isn't provided, then the center of the selected items' bounding\n  // box will be used instead.\n  readonly pivot?: Point | undefined;\n}\n\nexport interface TransformPathsInfo {\n  // TODO: add selected segment info? (similar to sketch)\n}\n\nexport type Line = Readonly<{ from: Point; to: Point }>;\n\nexport interface SnapGuideInfo {\n  readonly guides: ReadonlyArray<Line>;\n  readonly rulers: ReadonlyArray<Line>;\n}\n\nexport interface ZoomPanInfo {\n  readonly zoom: number;\n  readonly translation: Readonly<{ tx: number; ty: number }>;\n}\n\nexport interface TooltipInfo {\n  readonly point: Point;\n  readonly label: string;\n}\n","import { CursorType, ToolMode } from 'app/modules/editor/model/paper';\n\nimport {\n  CreatePathInfo,\n  EditPathInfo,\n  PaperActionTypes,\n  PaperActions,\n  RotateItemsInfo,\n  SelectionBox,\n  SnapGuideInfo,\n  SplitCurveInfo,\n  TooltipInfo,\n  TransformPathsInfo,\n  ZoomPanInfo,\n} from './actions';\n\n// Note that we should only ever store points in their viewport/local coordinates.\n// We should never store points in coordinates that are dependent on the view.\n\nexport interface State {\n  readonly zoomPanInfo: ZoomPanInfo;\n  readonly toolModeInfo: ToolModeInfo;\n  readonly cursorType: CursorType;\n}\n\ninterface ToolModeInfo {\n  readonly toolMode: ToolMode;\n  readonly selectionBox?: SelectionBox;\n  readonly createPathInfo?: CreatePathInfo;\n  readonly splitCurveInfo?: SplitCurveInfo;\n  readonly editPathInfo?: EditPathInfo;\n  readonly rotateItemsInfo?: RotateItemsInfo;\n  readonly transformPathsInfo?: TransformPathsInfo;\n  readonly snapGuideInfo?: SnapGuideInfo;\n  readonly tooltipInfo?: TooltipInfo;\n  readonly hoveredLayerId?: string;\n}\n\nexport function buildInitialState(): State {\n  return {\n    zoomPanInfo: { zoom: 1, translation: { tx: 0, ty: 0 } },\n    toolModeInfo: { toolMode: ToolMode.Default },\n    cursorType: CursorType.Default,\n  };\n}\n\nexport function reducer(state = buildInitialState(), action: PaperActions): State {\n  const { toolModeInfo } = state;\n  switch (action.type) {\n    case PaperActionTypes.SetZoomPanInfo:\n      return { ...state, zoomPanInfo: action.zoomPanInfo };\n    case PaperActionTypes.SetToolMode:\n      // TODO: don't wipe out all of the other tool mode info here...\n      return { ...state, toolModeInfo: { toolMode: action.toolMode } };\n    case PaperActionTypes.SetSelectionBox:\n      return { ...state, toolModeInfo: { ...toolModeInfo, selectionBox: action.selectionBox } };\n    case PaperActionTypes.SetCreatePathInfo:\n      return { ...state, toolModeInfo: { ...toolModeInfo, createPathInfo: action.createPathInfo } };\n    case PaperActionTypes.SetSplitCurveInfo:\n      return { ...state, toolModeInfo: { ...toolModeInfo, splitCurveInfo: action.splitCurveInfo } };\n    case PaperActionTypes.SetEditPathInfo:\n      const { editPathInfo } = action;\n      return { ...state, toolModeInfo: { ...toolModeInfo, editPathInfo } };\n    case PaperActionTypes.SetRotateItemsInfo:\n      const { rotateItemsInfo } = action;\n      return { ...state, toolModeInfo: { ...toolModeInfo, rotateItemsInfo } };\n    case PaperActionTypes.SetTransformPathInfo:\n      const { transformPathsInfo } = action;\n      return { ...state, toolModeInfo: { ...toolModeInfo, transformPathsInfo } };\n    case PaperActionTypes.SetSnapGuideInfo:\n      return { ...state, toolModeInfo: { ...toolModeInfo, snapGuideInfo: action.snapGuideInfo } };\n    case PaperActionTypes.SetTooltipInfo:\n      return { ...state, toolModeInfo: { ...toolModeInfo, tooltipInfo: action.tooltipInfo } };\n    case PaperActionTypes.SetCursorType:\n      return { ...state, cursorType: action.cursorType };\n    case PaperActionTypes.SetHoveredLayerId:\n      const { hoveredLayerId } = action;\n      return { ...state, toolModeInfo: { ...toolModeInfo, hoveredLayerId } };\n  }\n  return state;\n}\n","import { ToolMode } from 'app/modules/editor/model/paper';\nimport { getSelectedLayerIds, getVectorLayer } from 'app/modules/editor/store/layers/selectors';\nimport { createDeepEqualSelector, getEditorState } from 'app/modules/editor/store/selectors';\nimport { createSelector, createStructuredSelector } from 'reselect';\n\nconst getPaperState = createSelector(getEditorState, s => s.paper);\nexport const getZoomPanInfo = createDeepEqualSelector(getPaperState, p => p.zoomPanInfo);\nconst getToolModeInfo = createSelector(getPaperState, p => p.toolModeInfo);\nexport const getToolMode = createDeepEqualSelector(getToolModeInfo, p => p.toolMode);\nexport const getSelectionBox = createDeepEqualSelector(getToolModeInfo, p => p.selectionBox);\nexport const getCreatePathInfo = createDeepEqualSelector(getToolModeInfo, p => p.createPathInfo);\nexport const getSplitCurveInfo = createDeepEqualSelector(getToolModeInfo, p => p.splitCurveInfo);\nexport const getEditPathInfo = createDeepEqualSelector(getToolModeInfo, p => p.editPathInfo);\nexport const getRotateItemsInfo = createDeepEqualSelector(getToolModeInfo, p => p.rotateItemsInfo);\nexport const getTransformPathsInfo = createDeepEqualSelector(\n  getToolModeInfo,\n  p => p.transformPathsInfo,\n);\nexport const getSnapGuideInfo = createDeepEqualSelector(getToolModeInfo, p => p.snapGuideInfo);\nexport const getTooltipInfo = createDeepEqualSelector(getToolModeInfo, p => p.tooltipInfo);\nexport const getCursorType = createDeepEqualSelector(getPaperState, p => p.cursorType);\nexport const getHoveredLayerId = createDeepEqualSelector(getToolModeInfo, p => p.hoveredLayerId);\n\nconst getSingleSelectedChildlessLayer = createSelector(\n  [getVectorLayer, getSelectedLayerIds],\n  (vl, layerIds) => {\n    if (layerIds.size !== 1) {\n      return undefined;\n    }\n    const layerId = layerIds.values().next().value;\n    const layer = vl.findLayerById(layerId);\n    // TODO: consolidate this logic in a single place (the layer.children.length check is used in gestures too)\n    return layer.children.length ? undefined : layer;\n  },\n);\n\nconst isEditPathChecked = createSelector(getEditPathInfo, epi => !!epi);\n// TODO: exclude empty groups for rotate items?\nconst isRotateItemsEnabled = createSelector(getSelectedLayerIds, layerIds => layerIds.size > 0);\nconst isRotateItemsChecked = createSelector(getRotateItemsInfo, rii => !!rii);\nconst isTransformPathsEnabled = createSelector(getSingleSelectedChildlessLayer, layer => !!layer);\nconst isTransformPathsChecked = createSelector(getTransformPathsInfo, tpi => !!tpi);\nconst isDefaultChecked = createSelector(\n  [getToolMode, isEditPathChecked, isRotateItemsChecked, isTransformPathsChecked],\n  (\n    toolMode: ToolMode,\n    editPathChecked: boolean,\n    rotateItemsChecked: boolean,\n    transformPathChecked: boolean,\n  ) => {\n    return (\n      toolMode === ToolMode.Default &&\n      !editPathChecked &&\n      !rotateItemsChecked &&\n      !transformPathChecked\n    );\n  },\n);\n\nexport const getToolPanelState = createStructuredSelector({\n  toolMode: getToolMode,\n  isDefaultChecked,\n  isEditPathChecked,\n  isRotateItemsEnabled,\n  isRotateItemsChecked,\n  isTransformPathsEnabled,\n  isTransformPathsChecked,\n});\n","import { Action } from 'app/modules/editor/store';\n\nexport enum PlaybackActionTypes {\n  SetIsSlowMotion = '__playback__SET_IS_SLOW_MOTION',\n  SetIsPlaying = '__playback__SET_IS_PLAYING',\n  SetIsRepeating = '__playback__SET_IS_REPEATING',\n  SetCurrentTime = '__playback__SET_CURRENT_TIME',\n}\n\nexport class SetIsSlowMotion implements Action {\n  readonly type = PlaybackActionTypes.SetIsSlowMotion;\n  readonly payload: { isSlowMotion: boolean };\n  constructor(isSlowMotion: boolean) {\n    this.payload = { isSlowMotion };\n  }\n}\n\nexport class SetIsPlaying implements Action {\n  readonly type = PlaybackActionTypes.SetIsPlaying;\n  readonly payload: { isPlaying: boolean };\n  constructor(isPlaying: boolean) {\n    this.payload = { isPlaying };\n  }\n}\n\nexport class SetIsRepeating implements Action {\n  readonly type = PlaybackActionTypes.SetIsRepeating;\n  readonly payload: { isRepeating: boolean };\n  constructor(isRepeating: boolean) {\n    this.payload = { isRepeating };\n  }\n}\n\nexport class SetCurrentTime implements Action {\n  readonly type = PlaybackActionTypes.SetCurrentTime;\n  readonly payload: { currentTime: number };\n  constructor(currentTime: number) {\n    this.payload = { currentTime };\n  }\n}\n\nexport type PlaybackActions = SetIsSlowMotion | SetIsPlaying | SetIsRepeating | SetCurrentTime;\n","import { PlaybackActionTypes, PlaybackActions } from './actions';\n\nexport interface State {\n  readonly isSlowMotion: boolean;\n  readonly isPlaying: boolean;\n  readonly isRepeating: boolean;\n  readonly currentTime: number;\n}\n\nexport function buildInitialState() {\n  return {\n    isSlowMotion: false,\n    isPlaying: false,\n    isRepeating: false,\n    currentTime: 0,\n  } as State;\n}\n\nexport function reducer(state = buildInitialState(), action: PlaybackActions) {\n  switch (action.type) {\n    case PlaybackActionTypes.SetIsSlowMotion:\n      return { ...state, isSlowMotion: action.payload.isSlowMotion };\n    case PlaybackActionTypes.SetIsPlaying:\n      return { ...state, isPlaying: action.payload.isPlaying };\n    case PlaybackActionTypes.SetIsRepeating:\n      return { ...state, isRepeating: action.payload.isRepeating };\n    case PlaybackActionTypes.SetCurrentTime:\n      return { ...state, currentTime: action.payload.currentTime };\n  }\n  return state;\n}\n","import { AnimationRenderer } from 'app/modules/editor/scripts/animator';\nimport { getVectorLayer } from 'app/modules/editor/store/layers/selectors';\nimport { getEditorState } from 'app/modules/editor/store/selectors';\nimport { getAnimation } from 'app/modules/editor/store/timeline/selectors';\nimport { createSelector } from 'reselect';\n\nexport const getPlaybackState = createSelector(getEditorState, s => s.playback);\nexport const getIsSlowMotion = createSelector(getPlaybackState, p => p.isSlowMotion);\nexport const getIsPlaying = createSelector(getPlaybackState, p => p.isPlaying);\nexport const getIsRepeating = createSelector(getPlaybackState, p => p.isRepeating);\nexport const getCurrentTime = createSelector(getPlaybackState, p => p.currentTime);\n\nconst getAnimationRenderer = createSelector(\n  [getVectorLayer, getAnimation],\n  (vl, anim) => new AnimationRenderer(vl, anim),\n);\n\nexport const getAnimatedVectorLayer = createSelector(\n  [getAnimationRenderer, getCurrentTime],\n  (animationRenderer, currentTime) => {\n    const vl = animationRenderer.setCurrentTime(currentTime);\n    return { vl, currentTime };\n  },\n);\n","import { environment } from 'environments/environment';\nimport { storeLogger } from 'ngrx-store-logger';\n\nimport * as fromActionMode from './actionmode/reducer';\nimport * as metaBatchAction from './batch/metareducer';\nimport * as fromLayers from './layers/reducer';\nimport * as fromPaper from './paper/reducer';\nimport * as fromPlayback from './playback/reducer';\nimport * as metaReset from './reset/metareducer';\nimport * as fromReset from './reset/reducer';\nimport * as metaStoreFreeze from './storefreeze/metareducer';\nimport * as fromTheme from './theme/reducer';\nimport * as fromTimeline from './timeline/reducer';\nimport * as metaUndoRedo from './undoredo/metareducer';\n\nexport type State = metaUndoRedo.StateWithHistoryAndTimestamp;\n\nexport interface EditorState {\n  readonly layers: fromLayers.State;\n  readonly timeline: fromTimeline.State;\n  readonly playback: fromPlayback.State;\n  readonly actionmode: fromActionMode.State;\n  readonly reset: fromReset.State;\n  readonly theme: fromTheme.State;\n  readonly paper: fromPaper.State;\n}\n\nexport const reducers = {\n  layers: fromLayers.reducer,\n  timeline: fromTimeline.reducer,\n  playback: fromPlayback.reducer,\n  actionmode: fromActionMode.reducer,\n  reset: fromReset.reducer,\n  theme: fromTheme.reducer,\n  paper: fromPaper.reducer,\n};\n\nconst prodMetaReducers = [\n  // Meta-reducer that records past/present/future state.\n  metaUndoRedo.metaReducer,\n  // Meta-reducer that adds the ability to dispatch multiple actions at a time.\n  metaBatchAction.metaReducer,\n  // Meta-reducer that adds the ability to reset the entire state tree.\n  metaReset.metaReducer,\n];\n\nconst devMetaReducers = [\n  // Meta reducer that logs the before/after state of the store\n  // as actions are performed in dev builds.\n  storeLogger({ collapsed: true }),\n  // Meta reducer that freezes the state tree to ensure that\n  // accidental mutations fail fast in dev builds.\n  metaStoreFreeze.metaReducer,\n];\n\nexport const metaReducers = environment.production\n  ? prodMetaReducers\n  : [...devMetaReducers, ...prodMetaReducers];\n","import { VectorLayer } from 'app/modules/editor/model/layers';\nimport { Animation } from 'app/modules/editor/model/timeline';\nimport { Action } from 'app/modules/editor/store';\n\nexport enum ResetActionTypes {\n  ResetWorkspace = '__reset__RESET_WORKSPACE',\n}\n\nexport class ResetWorkspace implements Action {\n  readonly type = ResetActionTypes.ResetWorkspace;\n  readonly payload: {\n    vectorLayer?: VectorLayer;\n    animation?: Animation;\n    hiddenLayerIds?: ReadonlySet<string>;\n  };\n  constructor(\n    vectorLayer?: VectorLayer,\n    animation?: Animation,\n    hiddenLayerIds?: ReadonlySet<string>,\n  ) {\n    this.payload = { vectorLayer, animation, hiddenLayerIds };\n  }\n}\n\nexport type ResetActions = ResetWorkspace;\n","import { ActionReducer } from 'app/modules/editor/store';\nimport { EditorState } from 'app/modules/editor/store/reducer';\n\nimport { ResetActionTypes, ResetActions } from './actions';\n\nexport function metaReducer(reducer: ActionReducer<EditorState>): ActionReducer<EditorState> {\n  return (state: EditorState, action: ResetActions) => {\n    if (action.type === ResetActionTypes.ResetWorkspace) {\n      state = undefined;\n    }\n    state = reducer(state, action);\n    if (action.type === ResetActionTypes.ResetWorkspace) {\n      const { vectorLayer, animation, hiddenLayerIds } = action.payload;\n      if (vectorLayer) {\n        const { layers } = state;\n        state = {\n          ...state,\n          layers: {\n            ...layers,\n            vectorLayer,\n            hiddenLayerIds,\n          },\n        };\n      }\n      if (animation) {\n        const { timeline } = state;\n        state = {\n          ...state,\n          timeline: {\n            ...timeline,\n            animation,\n          },\n        };\n      }\n    }\n    return state;\n  };\n}\n","import { ResetActionTypes, ResetActions } from './actions';\n\n// TODO: remove this 'isBeingReset' flag... see TODO in layer timeline component\nexport interface State {\n  readonly isBeingReset: boolean;\n}\n\nexport function buildInitialState() {\n  return {\n    isBeingReset: false,\n  } as State;\n}\n\nexport function reducer(state = buildInitialState(), action: ResetActions) {\n  if (action.type === ResetActionTypes.ResetWorkspace) {\n    return { ...state, isBeingReset: true };\n  }\n  const { isBeingReset } = state;\n  if (isBeingReset) {\n    return { ...state, isBeingReset: false };\n  }\n  return state;\n}\n","import { getEditorState } from 'app/modules/editor/store/selectors';\nimport { createSelector } from 'reselect';\n\nconst getResetState = createSelector(getEditorState, s => s.reset);\nexport const isBeingReset = createSelector(getResetState, r => r.isBeingReset);\n","import * as _ from 'lodash';\nimport { createSelector, createSelectorCreator, defaultMemoize } from 'reselect';\n\nimport { State } from './reducer';\n\nconst getState = (state: State) => state;\nexport const getEditorState = createSelector(getState, s => s.present);\nexport const createDeepEqualSelector = createSelectorCreator(defaultMemoize, _.isEqual);\n","import { Action, ActionReducer } from 'app/modules/editor/store';\nimport * as deepFreeze from 'deep-freeze-strict';\n\n/**\n * Meta reducer that prevents state from being mutated anywhere in the app.\n */\nexport function metaReducer<T>(reducer: ActionReducer<T>): ActionReducer<T> {\n  return (state: T, action: Action) => {\n    if (state) {\n      deepFreeze(state);\n    }\n    const nextState = reducer(state, action);\n    if (nextState) {\n      deepFreeze(nextState);\n    }\n    return nextState;\n  };\n}\n","import { Action } from 'app/modules/editor/store';\n\nimport { ThemeType } from './reducer';\n\nexport enum ThemeActionTypes {\n  SetTheme = '__theme__SET_THEME',\n}\n\nexport class SetTheme implements Action {\n  readonly type = ThemeActionTypes.SetTheme;\n  readonly payload: { themeType: ThemeType };\n  constructor(themeType: ThemeType) {\n    this.payload = { themeType };\n  }\n}\n\nexport type ThemeActions = SetTheme;\n","import { ThemeActionTypes, ThemeActions } from './actions';\n\nconst STORAGE_KEY_THEME_TYPE = 'storage_key_theme_type';\nexport type ThemeType = 'light' | 'dark';\n\nexport interface State {\n  readonly themeType: ThemeType;\n  readonly isInitialPageLoad: boolean;\n}\n\nexport function buildInitialState() {\n  return {\n    themeType: window.localStorage.getItem(STORAGE_KEY_THEME_TYPE) || 'light',\n    isInitialPageLoad: true,\n  } as State;\n}\n\nexport function reducer(state = buildInitialState(), action: ThemeActions) {\n  if (action.type === ThemeActionTypes.SetTheme) {\n    const { themeType } = action.payload;\n    window.localStorage.setItem(STORAGE_KEY_THEME_TYPE, themeType);\n    if (themeType === state.themeType) {\n      return state;\n    }\n    return { ...state, themeType, isInitialPageLoad: false };\n  }\n  return state;\n}\n","import { getEditorState } from 'app/modules/editor/store/selectors';\nimport { createSelector, createStructuredSelector } from 'reselect';\n\nconst getThemeState = createSelector(getEditorState, s => s.theme);\nexport const getThemeType = createStructuredSelector({\n  themeType: createSelector(getThemeState, t => t.themeType),\n  isInitialPageLoad: createSelector(getThemeState, t => t.isInitialPageLoad),\n});\n","import { Animation } from 'app/modules/editor/model/timeline';\nimport { Action } from 'app/modules/editor/store';\n\nexport enum TimelineActionTypes {\n  SetAnimation = '__timeline__SET_ANIMATION',\n  SelectAnimation = '__timeline__SELECT_ANIMATION',\n  SetSelectedBlocks = '__timeline__SET_SELECTED_BLOCKS',\n}\n\nexport class SetAnimation implements Action {\n  readonly type = TimelineActionTypes.SetAnimation;\n  readonly payload: { animation: Animation };\n  constructor(animation: Animation) {\n    this.payload = { animation };\n  }\n}\n\nexport class SelectAnimation implements Action {\n  readonly type = TimelineActionTypes.SelectAnimation;\n  readonly payload: { isAnimationSelected: boolean };\n  constructor(isAnimationSelected: boolean) {\n    this.payload = { isAnimationSelected };\n  }\n}\n\nexport class SetSelectedBlocks implements Action {\n  readonly type = TimelineActionTypes.SetSelectedBlocks;\n  readonly payload: { blockIds: ReadonlySet<string> };\n  constructor(blockIds: ReadonlySet<string>) {\n    this.payload = { blockIds };\n  }\n}\n\nexport type TimelineActions = SetAnimation | SelectAnimation | SetSelectedBlocks;\n","import { Animation } from 'app/modules/editor/model/timeline';\n\nimport { TimelineActionTypes, TimelineActions } from './actions';\n\nexport interface State {\n  readonly animation: Animation;\n  readonly isAnimationSelected: boolean;\n  readonly selectedBlockIds: ReadonlySet<string>;\n}\n\nexport function buildInitialState() {\n  return {\n    animation: new Animation(),\n    isAnimationSelected: false,\n    selectedBlockIds: new Set<string>(),\n  } as State;\n}\n\nexport function reducer(state = buildInitialState(), action: TimelineActions) {\n  switch (action.type) {\n    case TimelineActionTypes.SetAnimation:\n      return { ...state, animation: action.payload.animation };\n    case TimelineActionTypes.SelectAnimation:\n      return { ...state, isAnimationSelected: action.payload.isAnimationSelected };\n    case TimelineActionTypes.SetSelectedBlocks:\n      return { ...state, selectedBlockIds: new Set<string>(action.payload.blockIds) };\n  }\n  return state;\n}\n","import { PathAnimationBlock } from 'app/modules/editor/model/timeline';\nimport { createDeepEqualSelector, getEditorState } from 'app/modules/editor/store/selectors';\nimport * as _ from 'lodash';\nimport { createSelector } from 'reselect';\n\nconst getTimelineState = createSelector(getEditorState, s => s.timeline);\nexport const getAnimation = createSelector(getTimelineState, t => t.animation);\nexport const isAnimationSelected = createSelector(getTimelineState, t => t.isAnimationSelected);\nexport const getSelectedBlockIds = createDeepEqualSelector(\n  getTimelineState,\n  t => t.selectedBlockIds,\n);\nexport const getSingleSelectedBlockId = createSelector(\n  getSelectedBlockIds,\n  blockIds => (blockIds.size === 1 ? blockIds.values().next().value : undefined),\n);\nexport const getSingleSelectedPathBlock = createSelector(\n  [getAnimation, getSingleSelectedBlockId],\n  (anim, blockId) => {\n    if (!blockId) {\n      return undefined;\n    }\n    return _.find(\n      anim.blocks,\n      b => b.id === blockId && b instanceof PathAnimationBlock,\n    ) as PathAnimationBlock;\n  },\n);\nexport const getSelectedBlockLayerIds = createDeepEqualSelector(\n  [getAnimation, getSelectedBlockIds],\n  (anim, blockIds) => {\n    return new Set(Array.from(blockIds).map(id => _.find(anim.blocks, b => b.id === id).layerId));\n  },\n);\nexport const getSingleSelectedBlockLayerId = createSelector(\n  getSelectedBlockLayerIds,\n  blockLayerIds => (blockLayerIds.size === 1 ? blockLayerIds.values().next().value : undefined),\n);\n","import { Action, ActionReducer } from 'app/modules/editor/store';\nimport { ActionModeActionTypes } from 'app/modules/editor/store/actionmode/actions';\nimport { PlaybackActionTypes } from 'app/modules/editor/store/playback/actions';\nimport { EditorState } from 'app/modules/editor/store/reducer';\nimport undoable, { StateWithHistory, UndoableOptions, excludeAction } from 'redux-undo';\n\nconst UNDO_HISTORY_SIZE = 30;\nconst UNDO_DEBOUNCE_MILLIS = 1000;\nconst UNDO_EXCLUDED_ACTIONS = [\n  PlaybackActionTypes.SetIsSlowMotion,\n  PlaybackActionTypes.SetIsPlaying,\n  PlaybackActionTypes.SetIsRepeating,\n  PlaybackActionTypes.SetCurrentTime,\n  ActionModeActionTypes.SetActionMode,\n  ActionModeActionTypes.SetActionModeHover,\n];\n\nlet groupCounter = 1;\n\nexport interface StateWithHistoryAndTimestamp extends StateWithHistory<EditorState> {\n  timestamp: number;\n}\n\ntype StateReducer = ActionReducer<StateWithHistoryAndTimestamp>;\ntype EditorStateReducer = ActionReducer<EditorState>;\n\nexport function metaReducer(reducer: EditorStateReducer): StateReducer {\n  const undoableReducer = undoable(reducer, {\n    limit: UNDO_HISTORY_SIZE,\n    filter: excludeAction(UNDO_EXCLUDED_ACTIONS),\n    groupBy: (action: Action, currState: EditorState, prevState: StateWithHistoryAndTimestamp) => {\n      if (Date.now() - prevState.timestamp < UNDO_DEBOUNCE_MILLIS) {\n        return groupCounter;\n      }\n      groupCounter++;\n      return undefined;\n    },\n  } as UndoableOptions);\n  return (state: StateWithHistoryAndTimestamp, action: Action) => {\n    return { ...undoableReducer(state, action), timestamp: Date.now() };\n  };\n}\n","export const environment = {\n  production: false,\n  beta: true,\n  analyticsTrackingId: 'UA-92075411-2',\n};\n","import { environment } from './environment';\n\nexport const version = `${require('../../package.json').version}-${\n  environment.beta ? 'beta' : 'stable'\n}`;\n","import 'hammerjs';\n\nimport { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { EditorModule } from 'app/modules/editor/editor.module';\nimport { environment } from 'environments/environment';\n\nconst script = document.createElement('script');\nscript.innerHTML = `\n(function (i, s, o, g, r, a, m) {\n  i['GoogleAnalyticsObject'] = r;\n  i[r] = i[r] || function () { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 * new Date();\n  a = s.createElement(o), m = s.getElementsByTagName(o)[0];\n  a.async = 1;\n  a.src = g;\n  m.parentNode.insertBefore(a, m)\n})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');\nga('create', '${environment.analyticsTrackingId}', 'auto');\nga('send', 'pageview');\n`;\ndocument.head.appendChild(script);\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(EditorModule);\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"sourceRoot":""}